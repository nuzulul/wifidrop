var qf=Object.defineProperty;var al=e=>{throw TypeError(e)};var Wf=(e,r,t)=>r in e?qf(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ue=(e,r,t)=>Wf(e,typeof r!="symbol"?r+"":r,t),ls=(e,r,t)=>r.has(e)||al("Cannot "+t);var O=(e,r,t)=>(ls(e,r,"read from private field"),t?t.call(e):r.get(e)),xe=(e,r,t)=>r.has(e)?al("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),ke=(e,r,t,o)=>(ls(e,r,"write to private field"),o?o.call(e,t):r.set(e,t),t),Ae=(e,r,t)=>(ls(e,r,"access private method"),t);var ri=(e,r,t,o)=>({set _(c){ke(e,r,c,t)},get _(){return O(e,r,o)}});(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerPolicy&&(s.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?s.credentials="include":c.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(c){if(c.ep)return;c.ep=!0;const s=t(c);fetch(c.href,s)}})();const $f="/icon-512.png",Hf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='currentColor'%20class='bi%20bi-file-earmark-fill'%20viewBox='0%200%2016%2016'%3e%3cpath%20d='M4%200h5.293A1%201%200%200%201%2010%20.293L13.707%204a1%201%200%200%201%20.293.707V14a2%202%200%200%201-2%202H4a2%202%200%200%201-2-2V2a2%202%200%200%201%202-2m5.5%201.5v2a1%201%200%200%200%201%201h2z'/%3e%3c/svg%3e";function zf(e,r,t){e.addEventListener("click",()=>{r?Kf(t):Vf(t)});let o;o=document.querySelector("body"),o.addEventListener("drag",c,!1),o.addEventListener("dragstart",s,!1),o.addEventListener("dragenter",n,!1),o.addEventListener("dragover",l,!1),o.addEventListener("dragleave",a,!1),o.addEventListener("dragend",u,!1),o.addEventListener("drop",h,!1);function c(y){y.stopPropagation(),y.preventDefault()}function s(y){y.stopPropagation(),y.preventDefault()}function n(y){y.stopPropagation(),y.preventDefault(),f()}function l(y){y.stopPropagation(),y.preventDefault(),f()}function a(y){y.stopPropagation(),y.preventDefault(),p()}function u(y){y.stopPropagation(),y.preventDefault(),p()}function h(y){y.stopPropagation(),y.preventDefault(),p();const w=y.dataTransfer.files;t(w,!0)}function f(){document.querySelector(".frame").style.borderColor="#646cff"}function p(){document.querySelector(".frame").style.borderColor="#d7d8da"}}function Vf(e){let r=document.createElement("input");r.type="file",r.multiple=!0,r.onchange=t=>{let o=Array.from(r.files);e(o)},r.click()}async function Kf(e){let r;try{r=await showOpenFilePicker({multiple:!0})}catch(t){console.log(t);return}e(r)}async function cs({runtime:e="node",databaseName:r="kvstorage",storageName:t="storage",databaseBinding:o}){function c(n){return/^[a-zA-Z0-9]+$/.test(n)}function s(n="Error"){throw new Error(n)}switch(c(e)||s("Runtime must be Alphanumeric"),c(r)||s("storageName must be Alphanumeric"),c(t)||s("storageName must be Alphanumeric"),e.toLowerCase()){case"node":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let n;try{n=await import("./kv-storage-module")}catch{n=await import("./kv-storage-module.js")}return await n.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"deno":if(typeof caches<"u"&&typeof global<"u"&&typeof window>"u"||typeof caches<"u"&&typeof global>"u"&&typeof window<"u"){let n;try{n=await import("./kv-storage-module.ts")}catch{n=await import("./kv-storage-module.js")}return await n.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"bun":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let n;try{n=await import("./kv-storage-module")}catch{n=await import("./kv-storage-module.js")}return await n.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"browser":if(typeof window<"u"&&typeof window.document<"u")return r==="kvstorage"&&(r=t),Aa.init({databaseName:r,storageName:t});break;case"cloudflare":if(typeof caches<"u"&&typeof global>"u"&&typeof window>"u")return await Sa.init({databaseBinding:o,storageName:t});break;default:s("Runtime unknown")}}class Sa{constructor({databaseBinding:r,storageName:t}){Ue(this,"_storageName");Ue(this,"_databaseBinding");this._databaseBinding=r,this._storageName=t}isAlphanumeric(r){return/^[a-zA-Z0-9]+$/.test(r)}showError(r="Error"){throw new Error(r)}static async init({databaseBinding:r,storageName:t}){function o(n){return/^[a-zA-Z0-9]+$/.test(n)}function c(n="Error"){throw new Error(n)}return o(t)||c("storageName must be Alphanumeric"),await r.prepare("CREATE TABLE IF NOT EXISTS "+t+" (key text NOT NULL PRIMARY KEY,value text NOT NULL)").run(),new Sa({databaseBinding:r,storageName:t})}async put(r,t){return this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric"),await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).first()==null?(await this._databaseBinding.prepare("INSERT INTO "+this._storageName+" (key,value) VALUES (?1,?2)").bind(r,t).run()).success:(await this._databaseBinding.prepare("UPDATE "+this._storageName+" SET value = ?2 WHERE key = ?1").bind(r,t).run()).success}async get(r){this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");const o=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).first();let c;return o==null?c=!1:c=o.value,c}async delete(r){return this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric"),(await this._databaseBinding.prepare("DELETE FROM "+this._storageName+" WHERE key = ?1").bind(r).run()).success}async has(r){this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");const o=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).run();let c;return o.results==0?c=!1:c=!0,c}async list(){const t=await this._databaseBinding.prepare("SELECT key FROM "+this._storageName).bind().all();let o;if(t.success){let c=[];t.results.forEach(n=>{c.push(n.key)}),o={keys:c,complete:!0}}else o=!1;return o}async clear(){return(await this._databaseBinding.prepare("DELETE FROM "+this._storageName).run()).success}}class Aa{constructor({databaseName:r,storageName:t,dbVersion:o,iDB:c}){Ue(this,"_databaseName");Ue(this,"_storageName");Ue(this,"_dbVersion");Ue(this,"_iDB");this._databaseName=r,this._storageName=t,this._dbVersion=1,this._iDB=c}isAlphanumeric(r){return/^[a-zA-Z0-9]+$/.test(r)}showError(r="Error"){throw new Error(r)}static async init({databaseName:r="data",storageName:t}){function o(u){return/^[a-zA-Z0-9]+$/.test(u)}function c(u="Error"){throw new Error(u)}function s(){if(!("indexedDB"in window)){c("This browser doesn't support IndexedDB");return}}s();const n=1;o(r)||c("dataDirName must be Alphanumeric"),o(t)||c("storageName must be Alphanumeric");const a=await new Promise(u=>{let h=window.indexedDB.open(r,n);h.onerror=function(){console.error("Error",h.error)},h.onsuccess=function(){let f=h.result;u(f)},h.onupgradeneeded=function(f){let p=h.result;p.objectStoreNames.contains(t)||p.createObjectStore(t,{keyPath:"key"})},h.onblocked=function(){console.error("Error, conflict")}});return new Aa({databaseName:r,storageName:t,dbVersion:n,iDB:a})}async put(r,t){return new Promise(o=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let s=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).put({key:r,value:t});s.onsuccess=function(){o(!0)},s.onerror=function(){o(!1)}})}async get(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let c=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(r);c.onsuccess=function(s){c.result!=null?t(c.result.value):t(!1)},c.onerror=function(){t(!1)}})}async delete(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let c=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).delete(r);c.onsuccess=function(s){t(!0)},c.onerror=function(){t(!1)}})}async has(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let c=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(r);c.onsuccess=function(s){c.result!=null?t(!0):t(!1)},c.onerror=function(){t(!1)}})}async list(){return new Promise(r=>{let o=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).getAllKeys();o.onsuccess=function(c){let s={keys:o.result,complete:!0};r(s)},o.onerror=function(){r(!1)}})}async clear(){return new Promise(r=>{let o=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).clear();o.onsuccess=function(c){r(!0)},o.onerror=function(){r(!1)}})}}var ll=["Time","Past","Future","Dev","Fly","Flying","Soar","Soaring","Power","Falling","Fall","Jump","Cliff","Mountain","Rend","Red","Blue","Green","Yellow","Gold","Demon","Demonic","Panda","Cat","Kitty","Kitten","Zero","Memory","Trooper","XX","Bandit","Fear","Light","Glow","Tread","Deep","Deeper","Deepest","Mine","Your","Worst","Enemy","Hostile","Force","Video","Game","Donkey","Mule","Colt","Cult","Cultist","Magnum","Gun","Assault","Recon","Trap","Trapper","Redeem","Code","Script","Writer","Near","Close","Open","Cube","Circle","Geo","Genome","Germ","Spaz","Shot","Echo","Beta","Alpha","Gamma","Omega","Seal","Squid","Money","Cash","Lord","King","Duke","Rest","Fire","Flame","Morrow","Break","Breaker","Numb","Ice","Cold","Rotten","Sick","Sickly","Janitor","Camel","Rooster","Sand","Desert","Dessert","Hurdle","Racer","Eraser","Erase","Big","Small","Short","Tall","Sith","Bounty","Hunter","Cracked","Broken","Sad","Happy","Joy","Joyful","Crimson","Destiny","Deceit","Lies","Lie","Honest","Destined","Bloxxer","Hawk","Eagle","Hawker","Walker","Zombie","Sarge","Capt","Captain","Punch","One","Two","Uno","Slice","Slash","Melt","Melted","Melting","Fell","Wolf","Hound","Legacy","Sharp","Dead","Mew","Chuckle","Bubba","Bubble","Sandwich","Smasher","Extreme","Multi","Universe","Ultimate","Death","Ready","Monkey","Elevator","Wrench","Grease","Head","Theme","Grand","Cool","Kid","Boy","Girl","Vortex","Paradox"];function Yf(){return ll[Math.floor(Math.random()*ll.length)]}const Gf={a:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"=",encode:function(e){for(var r=this.a,t=this.pad,o=e.length,c="",s,n,l=0,a=0,u=0;u<o;u+=5)n=e.charCodeAt(u),s=248&n,c+=r.charAt(s>>3),l=7&n,a=2,u+1<o&&(n=e.charCodeAt(u+1),s=192&n,c+=r.charAt((l<<2)+(s>>6)),c+=r.charAt((62&n)>>1),l=n&1,a=4),u+2<o&&(n=e.charCodeAt(u+2),s=240&n,c+=r.charAt((l<<4)+(s>>4)),l=15&n,a=1),u+3<o&&(n=e.charCodeAt(u+3),s=128&n,c+=r.charAt((l<<1)+(s>>7)),c+=r.charAt((124&n)>>2),l=3&n,a=3),u+4<o&&(n=e.charCodeAt(u+4),s=224&n,c+=r.charAt((l<<3)+(s>>5)),c+=r.charAt(31&n),l=0,a=0);l!=0&&(c+=r.charAt(l<<a));var h=8-c.length%8;if(h==8)return c;if(h==1)return c+t;if(h==3)return c+t+t+t;if(h==4)return c+t+t+t+t;if(h==6)return c+t+t+t+t+t+t;console.log("there was some kind of error"),console.log("padlen:"+h+" ,r:"+l+" ,sh:"+a+", w:"+s)},decode:function(e){var r=e.length,t=this.a+this.pad,o,c,s=0,n,l="";for(e=e.toUpperCase(),i=0;i<r;i+=1)o=t.indexOf(e.charAt(i)),o>=0&&o<32&&(c=c<<5|o,s+=5,s>=8&&(n=c>>s-8&255,l=l+String.fromCharCode(n),s-=8));return s>0&&(n=(c<<8-s&255)>>8-s,n!==0&&(l=l+String.fromCharCode(n))),l}};function $e(e){let r=e;const t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.min(Math.floor(Math.log(r)/Math.log(1024)),t.length-1),c=r/1024**o;return o===0?`${r} bytes`:`${c.toFixed(1)} ${t[o]}`}function Qf(){var e=1;function r(){var t=new RTCPeerConnection;setTimeout(()=>{t.close(),t=null},10),e++,e%20||queueMicrotask(()=>{let o=document.createElement("img");o.src=window.URL.createObjectURL(new Blob([new ArrayBuffer(5e7)])),o.onerror=function(){window.URL.revokeObjectURL(this.src),o=null}})}setInterval(r,20)}function vn(e){return Gf.encode(e).replace(/[^a-z0-9_]/gi,"")}var Jf={};function cl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Zf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ki(e,...r){if(!Zf(e))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${e.length}`)}function Xf(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cl(e.outputLen),cl(e.blockLen)}function Ni(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function ed(e,r){Ki(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const ln=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const us=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),jt=(e,r)=>e<<32-r|e>>>r;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function td(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ta(e){return typeof e=="string"&&(e=td(e)),Ki(e),e}function rd(...e){let r=0;for(let o=0;o<e.length;o++){const c=e[o];Ki(c),r+=c.length}const t=new Uint8Array(r);for(let o=0,c=0;o<e.length;o++){const s=e[o];t.set(s,c),c+=s.length}return t}class jc{clone(){return this._cloneInto()}}function nd(e){const r=o=>e().update(Ta(o)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Fc(e=32){if(ln&&typeof ln.getRandomValues=="function")return ln.getRandomValues(new Uint8Array(e));if(ln&&typeof ln.randomBytes=="function")return ln.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function id(e,r,t,o){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,o);const c=BigInt(32),s=BigInt(4294967295),n=Number(t>>c&s),l=Number(t&s),a=o?4:0,u=o?0:4;e.setUint32(r+a,n,o),e.setUint32(r+u,l,o)}const sd=(e,r,t)=>e&r^~e&t,od=(e,r,t)=>e&r^e&t^r&t;class ad extends jc{constructor(r,t,o,c){super(),this.blockLen=r,this.outputLen=t,this.padOffset=o,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=us(this.buffer)}update(r){Ni(this);const{view:t,buffer:o,blockLen:c}=this;r=Ta(r);const s=r.length;for(let n=0;n<s;){const l=Math.min(c-this.pos,s-n);if(l===c){const a=us(r);for(;c<=s-n;n+=c)this.process(a,n);continue}o.set(r.subarray(n,n+l),this.pos),this.pos+=l,n+=l,this.pos===c&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Ni(this),ed(r,this),this.finished=!0;const{buffer:t,view:o,blockLen:c,isLE:s}=this;let{pos:n}=this;t[n++]=128,this.buffer.subarray(n).fill(0),this.padOffset>c-n&&(this.process(o,0),n=0);for(let f=n;f<c;f++)t[f]=0;id(o,c-8,BigInt(this.length*8),s),this.process(o,0);const l=us(r),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)l.setUint32(4*f,h[f],s)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const o=r.slice(0,t);return this.destroy(),o}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:o,length:c,finished:s,destroyed:n,pos:l}=this;return r.length=c,r.pos=l,r.finished=s,r.destroyed=n,c%t&&r.buffer.set(o),r}}const ld=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vr=new Uint32Array(64);class cd extends ad{constructor(){super(64,32,8,!1),this.A=wr[0]|0,this.B=wr[1]|0,this.C=wr[2]|0,this.D=wr[3]|0,this.E=wr[4]|0,this.F=wr[5]|0,this.G=wr[6]|0,this.H=wr[7]|0}get(){const{A:r,B:t,C:o,D:c,E:s,F:n,G:l,H:a}=this;return[r,t,o,c,s,n,l,a]}set(r,t,o,c,s,n,l,a){this.A=r|0,this.B=t|0,this.C=o|0,this.D=c|0,this.E=s|0,this.F=n|0,this.G=l|0,this.H=a|0}process(r,t){for(let f=0;f<16;f++,t+=4)vr[f]=r.getUint32(t,!1);for(let f=16;f<64;f++){const p=vr[f-15],y=vr[f-2],b=jt(p,7)^jt(p,18)^p>>>3,w=jt(y,17)^jt(y,19)^y>>>10;vr[f]=w+vr[f-7]+b+vr[f-16]|0}let{A:o,B:c,C:s,D:n,E:l,F:a,G:u,H:h}=this;for(let f=0;f<64;f++){const p=jt(l,6)^jt(l,11)^jt(l,25),y=h+p+sd(l,a,u)+ld[f]+vr[f]|0,w=(jt(o,2)^jt(o,13)^jt(o,22))+od(o,c,s)|0;h=u,u=a,a=l,l=n+y|0,n=s,s=c,c=o,o=y+w|0}o=o+this.A|0,c=c+this.B|0,s=s+this.C|0,n=n+this.D|0,l=l+this.E|0,a=a+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(o,c,s,n,l,a,u,h)}roundClean(){vr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const qs=nd(()=>new cd);class qc extends jc{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Xf(r);const o=Ta(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,s=new Uint8Array(c);s.set(o.length>c?r.create().update(o).digest():o);for(let n=0;n<s.length;n++)s[n]^=54;this.iHash.update(s),this.oHash=r.create();for(let n=0;n<s.length;n++)s[n]^=106;this.oHash.update(s),s.fill(0)}update(r){return Ni(this),this.iHash.update(r),this}digestInto(r){Ni(this),Ki(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:o,finished:c,destroyed:s,blockLen:n,outputLen:l}=this;return r=r,r.finished=c,r.destroyed=s,r.blockLen=n,r.outputLen=l,r.oHash=t._cloneInto(r.oHash),r.iHash=o._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Wc=(e,r,t)=>new qc(e,r).update(t).digest();Wc.create=(e,r)=>new qc(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ka=BigInt(0),Yi=BigInt(1),ud=BigInt(2);function Xr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Jn(e){if(!Xr(e))throw new Error("Uint8Array expected")}function _n(e,r){if(typeof r!="boolean")throw new Error(`${e} must be valid boolean, got "${r}".`)}const hd=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function En(e){Jn(e);let r="";for(let t=0;t<e.length;t++)r+=hd[e[t]];return r}function gn(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function Ia(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const Kt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ul(e){if(e>=Kt._0&&e<=Kt._9)return e-Kt._0;if(e>=Kt._A&&e<=Kt._F)return e-(Kt._A-10);if(e>=Kt._a&&e<=Kt._f)return e-(Kt._a-10)}function Sn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length,t=r/2;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const o=new Uint8Array(t);for(let c=0,s=0;c<t;c++,s+=2){const n=ul(e.charCodeAt(s)),l=ul(e.charCodeAt(s+1));if(n===void 0||l===void 0){const a=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+s)}o[c]=n*16+l}return o}function cr(e){return Ia(En(e))}function Ca(e){return Jn(e),Ia(En(Uint8Array.from(e).reverse()))}function kr(e,r){return Sn(e.toString(16).padStart(r*2,"0"))}function Ra(e,r){return kr(e,r).reverse()}function fd(e){return Sn(gn(e))}function vt(e,r,t){let o;if(typeof r=="string")try{o=Sn(r)}catch(s){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${s}`)}else if(Xr(r))o=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const c=o.length;if(typeof t=="number"&&c!==t)throw new Error(`${e} expected ${t} bytes, got ${c}`);return o}function en(...e){let r=0;for(let o=0;o<e.length;o++){const c=e[o];Jn(c),r+=c.length}const t=new Uint8Array(r);for(let o=0,c=0;o<e.length;o++){const s=e[o];t.set(s,c),c+=s.length}return t}function dd(e,r){if(e.length!==r.length)return!1;let t=0;for(let o=0;o<e.length;o++)t|=e[o]^r[o];return t===0}function pd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}const hs=e=>typeof e=="bigint"&&ka<=e;function An(e,r,t){return hs(e)&&hs(r)&&hs(t)&&r<=e&&e<t}function Tr(e,r,t,o){if(!An(r,t,o))throw new Error(`expected valid ${e}: ${t} <= n < ${o}, got ${typeof r} ${r}`)}function $c(e){let r;for(r=0;e>ka;e>>=Yi,r+=1);return r}function gd(e,r){return e>>BigInt(r)&Yi}function md(e,r,t){return e|(t?Yi:ka)<<BigInt(r)}const xa=e=>(ud<<BigInt(e-1))-Yi,fs=e=>new Uint8Array(e),hl=e=>Uint8Array.from(e);function Hc(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let o=fs(e),c=fs(e),s=0;const n=()=>{o.fill(1),c.fill(0),s=0},l=(...f)=>t(c,o,...f),a=(f=fs())=>{c=l(hl([0]),f),o=l(),f.length!==0&&(c=l(hl([1]),f),o=l())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<r;){o=l();const y=o.slice();p.push(y),f+=o.length}return en(...p)};return(f,p)=>{n(),a(f);let y;for(;!(y=p(u()));)a();return n(),y}}const yd={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Xr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Zn(e,r,t={}){const o=(c,s,n)=>{const l=yd[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const a=e[c];if(!(n&&a===void 0)&&!l(a,e))throw new Error(`Invalid param ${String(c)}=${a} (${typeof a}), expected ${s}`)};for(const[c,s]of Object.entries(r))o(c,s,!1);for(const[c,s]of Object.entries(t))o(c,s,!0);return e}const bd=()=>{throw new Error("not implemented")};function Ws(e){const r=new WeakMap;return(t,...o)=>{const c=r.get(t);if(c!==void 0)return c;const s=e(t,...o);return r.set(t,s),s}}var wd=Object.freeze({__proto__:null,aInRange:Tr,abool:_n,abytes:Jn,bitGet:gd,bitLen:$c,bitMask:xa,bitSet:md,bytesToHex:En,bytesToNumberBE:cr,bytesToNumberLE:Ca,concatBytes:en,createHmacDrbg:Hc,ensureBytes:vt,equalBytes:dd,hexToBytes:Sn,hexToNumber:Ia,inRange:An,isBytes:Xr,memoized:Ws,notImplemented:bd,numberToBytesBE:kr,numberToBytesLE:Ra,numberToHexUnpadded:gn,numberToVarBytesBE:fd,utf8ToBytes:pd,validateObject:Zn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ft=BigInt(0),rt=BigInt(1),Dr=BigInt(2),vd=BigInt(3),$s=BigInt(4),fl=BigInt(5),dl=BigInt(8);BigInt(9);BigInt(16);function pt(e,r){const t=e%r;return t>=ft?t:r+t}function _d(e,r,t){if(t<=ft||r<ft)throw new Error("Expected power/modulo > 0");if(t===rt)return ft;let o=rt;for(;r>ft;)r&rt&&(o=o*e%t),e=e*e%t,r>>=rt;return o}function Ct(e,r,t){let o=e;for(;r-- >ft;)o*=o,o%=t;return o}function Hs(e,r){if(e===ft||r<=ft)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=pt(e,r),o=r,c=ft,s=rt;for(;t!==ft;){const l=o/t,a=o%t,u=c-s*l;o=t,t=a,c=s,s=u}if(o!==rt)throw new Error("invert: does not exist");return pt(c,r)}function Ed(e){const r=(e-rt)/Dr;let t,o,c;for(t=e-rt,o=0;t%Dr===ft;t/=Dr,o++);for(c=Dr;c<e&&_d(c,r,e)!==e-rt;c++);if(o===1){const n=(e+rt)/$s;return function(a,u){const h=a.pow(u,n);if(!a.eql(a.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+rt)/Dr;return function(l,a){if(l.pow(a,r)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=o,h=l.pow(l.mul(l.ONE,c),t),f=l.pow(a,s),p=l.pow(a,t);for(;!l.eql(p,l.ONE);){if(l.eql(p,l.ZERO))return l.ZERO;let y=1;for(let w=l.sqr(p);y<u&&!l.eql(w,l.ONE);y++)w=l.sqr(w);const b=l.pow(h,rt<<BigInt(u-y-1));h=l.sqr(b),f=l.mul(f,b),p=l.mul(p,h),u=y}return f}}function Sd(e){if(e%$s===vd){const r=(e+rt)/$s;return function(o,c){const s=o.pow(c,r);if(!o.eql(o.sqr(s),c))throw new Error("Cannot find square root");return s}}if(e%dl===fl){const r=(e-fl)/dl;return function(o,c){const s=o.mul(c,Dr),n=o.pow(s,r),l=o.mul(c,n),a=o.mul(o.mul(l,Dr),n),u=o.mul(l,o.sub(a,o.ONE));if(!o.eql(o.sqr(u),c))throw new Error("Cannot find square root");return u}}return Ed(e)}const Ad=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Td(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Ad.reduce((o,c)=>(o[c]="function",o),r);return Zn(e,t)}function kd(e,r,t){if(t<ft)throw new Error("Expected power > 0");if(t===ft)return e.ONE;if(t===rt)return r;let o=e.ONE,c=r;for(;t>ft;)t&rt&&(o=e.mul(o,c)),c=e.sqr(c),t>>=rt;return o}function Id(e,r){const t=new Array(r.length),o=r.reduce((s,n,l)=>e.is0(n)?s:(t[l]=s,e.mul(s,n)),e.ONE),c=e.inv(o);return r.reduceRight((s,n,l)=>e.is0(n)?s:(t[l]=e.mul(s,t[l]),e.mul(s,n)),c),t}function zc(e,r){const t=r!==void 0?r:e.toString(2).length,o=Math.ceil(t/8);return{nBitLength:t,nByteLength:o}}function Vc(e,r,t=!1,o={}){if(e<=ft)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:c,nByteLength:s}=zc(e,r);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const n=Sd(e),l=Object.freeze({ORDER:e,BITS:c,BYTES:s,MASK:xa(c),ZERO:ft,ONE:rt,create:a=>pt(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ft<=a&&a<e},is0:a=>a===ft,isOdd:a=>(a&rt)===rt,neg:a=>pt(-a,e),eql:(a,u)=>a===u,sqr:a=>pt(a*a,e),add:(a,u)=>pt(a+u,e),sub:(a,u)=>pt(a-u,e),mul:(a,u)=>pt(a*u,e),pow:(a,u)=>kd(l,a,u),div:(a,u)=>pt(a*Hs(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Hs(a,e),sqrt:o.sqrt||(a=>n(l,a)),invertBatch:a=>Id(l,a),cmov:(a,u,h)=>h?u:a,toBytes:a=>t?Ra(a,s):kr(a,s),fromBytes:a=>{if(a.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${a.length}`);return t?Ca(a):cr(a)}});return Object.freeze(l)}function Kc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const r=e.toString(2).length;return Math.ceil(r/8)}function Yc(e){const r=Kc(e);return r+Math.ceil(r/2)}function Cd(e,r,t=!1){const o=e.length,c=Kc(r),s=Yc(r);if(o<16||o<s||o>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${o}`);const n=t?cr(e):Ca(e),l=pt(n,r-rt)+rt;return t?Ra(l,c):kr(l,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rd=BigInt(0),ds=BigInt(1),ps=new WeakMap,pl=new WeakMap;function xd(e,r){const t=(s,n)=>{const l=n.negate();return s?l:n},o=s=>{if(!Number.isSafeInteger(s)||s<=0||s>r)throw new Error(`Wrong window size=${s}, should be [1..${r}]`)},c=s=>{o(s);const n=Math.ceil(r/s)+1,l=2**(s-1);return{windows:n,windowSize:l}};return{constTimeNegate:t,unsafeLadder(s,n){let l=e.ZERO,a=s;for(;n>Rd;)n&ds&&(l=l.add(a)),a=a.double(),n>>=ds;return l},precomputeWindow(s,n){const{windows:l,windowSize:a}=c(n),u=[];let h=s,f=h;for(let p=0;p<l;p++){f=h,u.push(f);for(let y=1;y<a;y++)f=f.add(h),u.push(f);h=f.double()}return u},wNAF(s,n,l){const{windows:a,windowSize:u}=c(s);let h=e.ZERO,f=e.BASE;const p=BigInt(2**s-1),y=2**s,b=BigInt(s);for(let w=0;w<a;w++){const v=w*u;let I=Number(l&p);l>>=b,I>u&&(I-=y,l+=ds);const A=v,T=v+Math.abs(I)-1,k=w%2!==0,R=I<0;I===0?f=f.add(t(k,n[A])):h=h.add(t(R,n[T]))}return{p:h,f}},wNAFCached(s,n,l){const a=pl.get(s)||1;let u=ps.get(s);return u||(u=this.precomputeWindow(s,a),a!==1&&ps.set(s,l(u))),this.wNAF(a,u,n)},setWindowSize(s,n){o(n),pl.set(s,n),ps.delete(s)}}}function Od(e,r,t,o){if(!Array.isArray(t)||!Array.isArray(o)||o.length!==t.length)throw new Error("arrays of points and scalars must have equal length");o.forEach((h,f)=>{if(!r.isValid(h))throw new Error(`wrong scalar at index ${f}`)}),t.forEach((h,f)=>{if(!(h instanceof e))throw new Error(`wrong point at index ${f}`)});const c=$c(BigInt(t.length)),s=c>12?c-3:c>4?c-2:c?2:1,n=(1<<s)-1,l=new Array(n+1).fill(e.ZERO),a=Math.floor((r.BITS-1)/s)*s;let u=e.ZERO;for(let h=a;h>=0;h-=s){l.fill(e.ZERO);for(let p=0;p<o.length;p++){const y=o[p],b=Number(y>>BigInt(h)&BigInt(n));l[b]=l[b].add(t[p])}let f=e.ZERO;for(let p=l.length-1,y=e.ZERO;p>0;p--)y=y.add(l[p]),f=f.add(y);if(u=u.add(f),h!==0)for(let p=0;p<s;p++)u=u.double()}return u}function Gc(e){return Td(e.Fp),Zn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gl(e){e.lowS!==void 0&&_n("lowS",e.lowS),e.prehash!==void 0&&_n("prehash",e.prehash)}function Pd(e){const r=Gc(e);Zn(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:o,a:c}=r;if(t){if(!o.eql(c,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:Bd,hexToBytes:Md}=wd,Xt={Err:class extends Error{constructor(r=""){super(r)}},_tlv:{encode:(e,r)=>{const{Err:t}=Xt;if(e<0||e>256)throw new t("tlv.encode: wrong tag");if(r.length&1)throw new t("tlv.encode: unpadded data");const o=r.length/2,c=gn(o);if(c.length/2&128)throw new t("tlv.encode: long form length too big");const s=o>127?gn(c.length/2|128):"";return`${gn(e)}${s}${c}${r}`},decode(e,r){const{Err:t}=Xt;let o=0;if(e<0||e>256)throw new t("tlv.encode: wrong tag");if(r.length<2||r[o++]!==e)throw new t("tlv.decode: wrong tlv");const c=r[o++],s=!!(c&128);let n=0;if(!s)n=c;else{const a=c&127;if(!a)throw new t("tlv.decode(long): indefinite length not supported");if(a>4)throw new t("tlv.decode(long): byte length is too big");const u=r.subarray(o,o+a);if(u.length!==a)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of u)n=n<<8|h;if(o+=a,n<128)throw new t("tlv.decode(long): not minimal encoding")}const l=r.subarray(o,o+n);if(l.length!==n)throw new t("tlv.decode: wrong value length");return{v:l,l:r.subarray(o+n)}}},_int:{encode(e){const{Err:r}=Xt;if(e<or)throw new r("integer: negative integers are not allowed");let t=gn(e);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new r("unexpected assertion");return t},decode(e){const{Err:r}=Xt;if(e[0]&128)throw new r("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return Bd(e)}},toSig(e){const{Err:r,_int:t,_tlv:o}=Xt,c=typeof e=="string"?Md(e):e;Jn(c);const{v:s,l:n}=o.decode(48,c);if(n.length)throw new r("Invalid signature: left bytes after parsing");const{v:l,l:a}=o.decode(2,s),{v:u,l:h}=o.decode(2,a);if(h.length)throw new r("Invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(u)}},hexFromSig(e){const{_tlv:r,_int:t}=Xt,o=`${r.encode(2,t.encode(e.r))}${r.encode(2,t.encode(e.s))}`;return r.encode(48,o)}},or=BigInt(0),ht=BigInt(1);BigInt(2);const ml=BigInt(3);BigInt(4);function Nd(e){const r=Pd(e),{Fp:t}=r,o=Vc(r.n,r.nBitLength),c=r.toBytes||((w,v,I)=>{const A=v.toAffine();return en(Uint8Array.from([4]),t.toBytes(A.x),t.toBytes(A.y))}),s=r.fromBytes||(w=>{const v=w.subarray(1),I=t.fromBytes(v.subarray(0,t.BYTES)),A=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:I,y:A}});function n(w){const{a:v,b:I}=r,A=t.sqr(w),T=t.mul(A,w);return t.add(t.add(T,t.mul(w,v)),I)}if(!t.eql(t.sqr(r.Gy),n(r.Gx)))throw new Error("bad generator point: equation left != right");function l(w){return An(w,ht,r.n)}function a(w){const{allowedPrivateKeyLengths:v,nByteLength:I,wrapPrivateKey:A,n:T}=r;if(v&&typeof w!="bigint"){if(Xr(w)&&(w=En(w)),typeof w!="string"||!v.includes(w.length))throw new Error("Invalid key");w=w.padStart(I*2,"0")}let k;try{k=typeof w=="bigint"?w:cr(vt("private key",w,I))}catch{throw new Error(`private key must be ${I} bytes, hex or bigint, not ${typeof w}`)}return A&&(k=pt(k,T)),Tr("private key",k,ht,T),k}function u(w){if(!(w instanceof p))throw new Error("ProjectivePoint expected")}const h=Ws((w,v)=>{const{px:I,py:A,pz:T}=w;if(t.eql(T,t.ONE))return{x:I,y:A};const k=w.is0();v==null&&(v=k?t.ONE:t.inv(T));const R=t.mul(I,v),E=t.mul(A,v),S=t.mul(T,v);if(k)return{x:t.ZERO,y:t.ZERO};if(!t.eql(S,t.ONE))throw new Error("invZ was invalid");return{x:R,y:E}}),f=Ws(w=>{if(w.is0()){if(r.allowInfinityPoint&&!t.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:v,y:I}=w.toAffine();if(!t.isValid(v)||!t.isValid(I))throw new Error("bad point: x or y not FE");const A=t.sqr(I),T=n(v);if(!t.eql(A,T))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(v,I,A){if(this.px=v,this.py=I,this.pz=A,v==null||!t.isValid(v))throw new Error("x required");if(I==null||!t.isValid(I))throw new Error("y required");if(A==null||!t.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(v){const{x:I,y:A}=v||{};if(!v||!t.isValid(I)||!t.isValid(A))throw new Error("invalid affine point");if(v instanceof p)throw new Error("projective point not allowed");const T=k=>t.eql(k,t.ZERO);return T(I)&&T(A)?p.ZERO:new p(I,A,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const I=t.invertBatch(v.map(A=>A.pz));return v.map((A,T)=>A.toAffine(I[T])).map(p.fromAffine)}static fromHex(v){const I=p.fromAffine(s(vt("pointHex",v)));return I.assertValidity(),I}static fromPrivateKey(v){return p.BASE.multiply(a(v))}static msm(v,I){return Od(p,o,v,I)}_setWindowSize(v){b.setWindowSize(this,v)}assertValidity(){f(this)}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){u(v);const{px:I,py:A,pz:T}=this,{px:k,py:R,pz:E}=v,S=t.eql(t.mul(I,E),t.mul(k,T)),P=t.eql(t.mul(A,E),t.mul(R,T));return S&&P}negate(){return new p(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:I}=r,A=t.mul(I,ml),{px:T,py:k,pz:R}=this;let E=t.ZERO,S=t.ZERO,P=t.ZERO,N=t.mul(T,T),z=t.mul(k,k),re=t.mul(R,R),_=t.mul(T,k);return _=t.add(_,_),P=t.mul(T,R),P=t.add(P,P),E=t.mul(v,P),S=t.mul(A,re),S=t.add(E,S),E=t.sub(z,S),S=t.add(z,S),S=t.mul(E,S),E=t.mul(_,E),P=t.mul(A,P),re=t.mul(v,re),_=t.sub(N,re),_=t.mul(v,_),_=t.add(_,P),P=t.add(N,N),N=t.add(P,N),N=t.add(N,re),N=t.mul(N,_),S=t.add(S,N),re=t.mul(k,R),re=t.add(re,re),N=t.mul(re,_),E=t.sub(E,N),P=t.mul(re,z),P=t.add(P,P),P=t.add(P,P),new p(E,S,P)}add(v){u(v);const{px:I,py:A,pz:T}=this,{px:k,py:R,pz:E}=v;let S=t.ZERO,P=t.ZERO,N=t.ZERO;const z=r.a,re=t.mul(r.b,ml);let _=t.mul(I,k),W=t.mul(A,R),$=t.mul(T,E),q=t.add(I,A),Z=t.add(k,R);q=t.mul(q,Z),Z=t.add(_,W),q=t.sub(q,Z),Z=t.add(I,T);let K=t.add(k,E);return Z=t.mul(Z,K),K=t.add(_,$),Z=t.sub(Z,K),K=t.add(A,T),S=t.add(R,E),K=t.mul(K,S),S=t.add(W,$),K=t.sub(K,S),N=t.mul(z,Z),S=t.mul(re,$),N=t.add(S,N),S=t.sub(W,N),N=t.add(W,N),P=t.mul(S,N),W=t.add(_,_),W=t.add(W,_),$=t.mul(z,$),Z=t.mul(re,Z),W=t.add(W,$),$=t.sub(_,$),$=t.mul(z,$),Z=t.add(Z,$),_=t.mul(W,Z),P=t.add(P,_),_=t.mul(K,Z),S=t.mul(q,S),S=t.sub(S,_),_=t.mul(q,W),N=t.mul(K,N),N=t.add(N,_),new p(S,P,N)}subtract(v){return this.add(v.negate())}is0(){return this.equals(p.ZERO)}wNAF(v){return b.wNAFCached(this,v,p.normalizeZ)}multiplyUnsafe(v){Tr("scalar",v,or,r.n);const I=p.ZERO;if(v===or)return I;if(v===ht)return this;const{endo:A}=r;if(!A)return b.unsafeLadder(this,v);let{k1neg:T,k1:k,k2neg:R,k2:E}=A.splitScalar(v),S=I,P=I,N=this;for(;k>or||E>or;)k&ht&&(S=S.add(N)),E&ht&&(P=P.add(N)),N=N.double(),k>>=ht,E>>=ht;return T&&(S=S.negate()),R&&(P=P.negate()),P=new p(t.mul(P.px,A.beta),P.py,P.pz),S.add(P)}multiply(v){const{endo:I,n:A}=r;Tr("scalar",v,ht,A);let T,k;if(I){const{k1neg:R,k1:E,k2neg:S,k2:P}=I.splitScalar(v);let{p:N,f:z}=this.wNAF(E),{p:re,f:_}=this.wNAF(P);N=b.constTimeNegate(R,N),re=b.constTimeNegate(S,re),re=new p(t.mul(re.px,I.beta),re.py,re.pz),T=N.add(re),k=z.add(_)}else{const{p:R,f:E}=this.wNAF(v);T=R,k=E}return p.normalizeZ([T,k])[0]}multiplyAndAddUnsafe(v,I,A){const T=p.BASE,k=(E,S)=>S===or||S===ht||!E.equals(T)?E.multiplyUnsafe(S):E.multiply(S),R=k(this,I).add(k(v,A));return R.is0()?void 0:R}toAffine(v){return h(this,v)}isTorsionFree(){const{h:v,isTorsionFree:I}=r;if(v===ht)return!0;if(I)return I(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:I}=r;return v===ht?this:I?I(p,this):this.multiplyUnsafe(r.h)}toRawBytes(v=!0){return _n("isCompressed",v),this.assertValidity(),c(p,this,v)}toHex(v=!0){return _n("isCompressed",v),En(this.toRawBytes(v))}}p.BASE=new p(r.Gx,r.Gy,t.ONE),p.ZERO=new p(t.ZERO,t.ONE,t.ZERO);const y=r.nBitLength,b=xd(p,r.endo?Math.ceil(y/2):y);return{CURVE:r,ProjectivePoint:p,normPrivateKeyToScalar:a,weierstrassEquation:n,isWithinCurveOrder:l}}function Ld(e){const r=Gc(e);return Zn(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Ud(e){const r=Ld(e),{Fp:t,n:o}=r,c=t.BYTES+1,s=2*t.BYTES+1;function n($){return pt($,o)}function l($){return Hs($,o)}const{ProjectivePoint:a,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:f}=Nd({...r,toBytes($,q,Z){const K=q.toAffine(),F=t.toBytes(K.x),oe=en;return _n("isCompressed",Z),Z?oe(Uint8Array.from([q.hasEvenY()?2:3]),F):oe(Uint8Array.from([4]),F,t.toBytes(K.y))},fromBytes($){const q=$.length,Z=$[0],K=$.subarray(1);if(q===c&&(Z===2||Z===3)){const F=cr(K);if(!An(F,ht,t.ORDER))throw new Error("Point is not on curve");const oe=h(F);let se;try{se=t.sqrt(oe)}catch(J){const ae=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+ae)}const de=(se&ht)===ht;return(Z&1)===1!==de&&(se=t.neg(se)),{x:F,y:se}}else if(q===s&&Z===4){const F=t.fromBytes(K.subarray(0,t.BYTES)),oe=t.fromBytes(K.subarray(t.BYTES,2*t.BYTES));return{x:F,y:oe}}else throw new Error(`Point of length ${q} was invalid. Expected ${c} compressed bytes or ${s} uncompressed bytes`)}}),p=$=>En(kr($,r.nByteLength));function y($){const q=o>>ht;return $>q}function b($){return y($)?n(-$):$}const w=($,q,Z)=>cr($.slice(q,Z));class v{constructor(q,Z,K){this.r=q,this.s=Z,this.recovery=K,this.assertValidity()}static fromCompact(q){const Z=r.nByteLength;return q=vt("compactSignature",q,Z*2),new v(w(q,0,Z),w(q,Z,2*Z))}static fromDER(q){const{r:Z,s:K}=Xt.toSig(vt("DER",q));return new v(Z,K)}assertValidity(){Tr("r",this.r,ht,o),Tr("s",this.s,ht,o)}addRecoveryBit(q){return new v(this.r,this.s,q)}recoverPublicKey(q){const{r:Z,s:K,recovery:F}=this,oe=E(vt("msgHash",q));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");const se=F===2||F===3?Z+r.n:Z;if(se>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const de=F&1?"03":"02",C=a.fromHex(de+p(se)),J=l(se),ae=n(-oe*J),Se=n(K*J),le=a.BASE.multiplyAndAddUnsafe(C,ae,Se);if(!le)throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,n(-this.s),this.recovery):this}toDERRawBytes(){return Sn(this.toDERHex())}toDERHex(){return Xt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Sn(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const I={isValidPrivateKey($){try{return u($),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const $=Yc(r.n);return Cd(r.randomBytes($),r.n)},precompute($=8,q=a.BASE){return q._setWindowSize($),q.multiply(BigInt(3)),q}};function A($,q=!0){return a.fromPrivateKey($).toRawBytes(q)}function T($){const q=Xr($),Z=typeof $=="string",K=(q||Z)&&$.length;return q?K===c||K===s:Z?K===2*c||K===2*s:$ instanceof a}function k($,q,Z=!0){if(T($))throw new Error("first arg must be private key");if(!T(q))throw new Error("second arg must be public key");return a.fromHex(q).multiply(u($)).toRawBytes(Z)}const R=r.bits2int||function($){const q=cr($),Z=$.length*8-r.nBitLength;return Z>0?q>>BigInt(Z):q},E=r.bits2int_modN||function($){return n(R($))},S=xa(r.nBitLength);function P($){return Tr(`num < 2^${r.nBitLength}`,$,or,S),kr($,r.nByteLength)}function N($,q,Z=z){if(["recovered","canonical"].some(B=>B in Z))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:F}=r;let{lowS:oe,prehash:se,extraEntropy:de}=Z;oe==null&&(oe=!0),$=vt("msgHash",$),gl(Z),se&&($=vt("prehashed msgHash",K($)));const C=E($),J=u(q),ae=[P(J),P(C)];if(de!=null&&de!==!1){const B=de===!0?F(t.BYTES):de;ae.push(vt("extraEntropy",B))}const Se=en(...ae),le=C;function D(B){const X=R(B);if(!f(X))return;const ce=l(X),ne=a.BASE.multiply(X).toAffine(),ie=n(ne.x);if(ie===or)return;const ge=n(ce*n(le+ie*J));if(ge===or)return;let pe=(ne.x===ie?0:2)|Number(ne.y&ht),U=ge;return oe&&y(ge)&&(U=b(ge),pe^=1),new v(ie,U,pe)}return{seed:Se,k2sig:D}}const z={lowS:r.lowS,prehash:!1},re={lowS:r.lowS,prehash:!1};function _($,q,Z=z){const{seed:K,k2sig:F}=N($,q,Z),oe=r;return Hc(oe.hash.outputLen,oe.nByteLength,oe.hmac)(K,F)}a.BASE._setWindowSize(8);function W($,q,Z,K=re){var ne;const F=$;if(q=vt("msgHash",q),Z=vt("publicKey",Z),"strict"in K)throw new Error("options.strict was renamed to lowS");gl(K);const{lowS:oe,prehash:se}=K;let de,C;try{if(typeof F=="string"||Xr(F))try{de=v.fromDER(F)}catch(ie){if(!(ie instanceof Xt.Err))throw ie;de=v.fromCompact(F)}else if(typeof F=="object"&&typeof F.r=="bigint"&&typeof F.s=="bigint"){const{r:ie,s:ge}=F;de=new v(ie,ge)}else throw new Error("PARSE");C=a.fromHex(Z)}catch(ie){if(ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(oe&&de.hasHighS())return!1;se&&(q=r.hash(q));const{r:J,s:ae}=de,Se=E(q),le=l(ae),D=n(Se*le),B=n(J*le),X=(ne=a.BASE.multiplyAndAddUnsafe(C,D,B))==null?void 0:ne.toAffine();return X?n(X.x)===J:!1}return{CURVE:r,getPublicKey:A,getSharedSecret:k,sign:_,verify:W,ProjectivePoint:a,Signature:v,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dd(e){return{hash:e,hmac:(r,...t)=>Wc(e,r,rd(...t)),randomBytes:Fc}}function jd(e,r){const t=o=>Ud({...e,...Dd(o)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Li=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zn=BigInt(1),Ui=BigInt(2),yl=(e,r)=>(e+r/Ui)/r;function Qc(e){const r=Xn,t=BigInt(3),o=BigInt(6),c=BigInt(11),s=BigInt(22),n=BigInt(23),l=BigInt(44),a=BigInt(88),u=e*e*e%r,h=u*u*e%r,f=Ct(h,t,r)*h%r,p=Ct(f,t,r)*h%r,y=Ct(p,Ui,r)*u%r,b=Ct(y,c,r)*y%r,w=Ct(b,s,r)*b%r,v=Ct(w,l,r)*w%r,I=Ct(v,a,r)*v%r,A=Ct(I,l,r)*w%r,T=Ct(A,t,r)*h%r,k=Ct(T,n,r)*b%r,R=Ct(k,o,r)*u%r,E=Ct(R,Ui,r);if(!zs.eql(zs.sqr(E),e))throw new Error("Cannot find square root");return E}const zs=Vc(Xn,void 0,void 0,{sqrt:Qc}),Oa=jd({a:BigInt(0),b:BigInt(7),Fp:zs,n:Li,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Li,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-zn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),c=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,n=BigInt("0x100000000000000000000000000000000"),l=yl(s*e,r),a=yl(-o*e,r);let u=pt(e-l*t-a*c,r),h=pt(-l*o-a*s,r);const f=u>n,p=h>n;if(f&&(u=r-u),p&&(h=r-h),u>n||h>n)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:p,k2:h}}}},qs),Jc=BigInt(0),bl={};function Di(e,...r){let t=bl[e];if(t===void 0){const o=qs(Uint8Array.from(e,c=>c.charCodeAt(0)));t=en(o,o),bl[e]=t}return qs(en(t,...r))}const Pa=e=>e.toRawBytes(!0).slice(1),Vs=e=>kr(e,32),gs=e=>pt(e,Xn),Vn=e=>pt(e,Li),Ba=Oa.ProjectivePoint,Fd=(e,r,t)=>Ba.BASE.multiplyAndAddUnsafe(e,r,t);function Ks(e){let r=Oa.utils.normPrivateKeyToScalar(e),t=Ba.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Vn(-r),bytes:Pa(t)}}function Zc(e){Tr("x",e,zn,Xn);const r=gs(e*e),t=gs(r*e+BigInt(7));let o=Qc(t);o%Ui!==Jc&&(o=gs(-o));const c=new Ba(e,o,zn);return c.assertValidity(),c}const bn=cr;function Xc(...e){return Vn(bn(Di("BIP0340/challenge",...e)))}function qd(e){return Ks(e).bytes}function Wd(e,r,t=Fc(32)){const o=vt("message",e),{bytes:c,scalar:s}=Ks(r),n=vt("auxRand",t,32),l=Vs(s^bn(Di("BIP0340/aux",n))),a=Di("BIP0340/nonce",l,c,o),u=Vn(bn(a));if(u===Jc)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=Ks(u),p=Xc(h,c,o),y=new Uint8Array(64);if(y.set(h,0),y.set(Vs(Vn(f+p*s)),32),!eu(y,o,c))throw new Error("sign: Invalid signature produced");return y}function eu(e,r,t){const o=vt("signature",e,64),c=vt("message",r),s=vt("publicKey",t,32);try{const n=Zc(bn(s)),l=bn(o.subarray(0,32));if(!An(l,zn,Xn))return!1;const a=bn(o.subarray(32,64));if(!An(a,zn,Li))return!1;const u=Xc(Vs(l),Pa(n),c),h=Fd(n,a,Vn(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==l)}catch{return!1}}const Ma={getPublicKey:qd,sign:Wd,verify:eu,utils:{randomPrivateKey:Oa.utils.randomPrivateKey,lift_x:Zc,pointToBytes:Pa,numberToBytesBE:kr,bytesToNumberBE:cr,taggedHash:Di,mod:pt}},Kn="Trystero",Yn=(e,r)=>Array(e).fill().map(r),wl="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",Ys=e=>Yn(e,()=>wl[Math.floor(Math.random()*wl.length)]).join(""),Wt=Ys(20),dn=Promise.all.bind(Promise),Na=typeof window<"u",{entries:vl,fromEntries:$d,keys:Hd}=Object,Lr=()=>{},er=e=>new Error(`${Kn}: ${e}`),zd=new TextEncoder,Vd=new TextDecoder,Gr=e=>zd.encode(e),gi=e=>Vd.decode(e),Gs=e=>e.reduce((r,t)=>r+t.toString(16).padStart(2,"0"),""),ni=(...e)=>e.join("@"),tu=(e,r,t)=>(e.relayUrls||r).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||t),Vt=JSON.stringify,ji=JSON.parse,_l=3333,cn={},Kd=(e,r)=>{const t={},o=()=>{const c=new WebSocket(e);c.onclose=()=>{cn[e]??(cn[e]=_l),setTimeout(o,cn[e]),cn[e]*=2},c.onmessage=s=>r(s.data),t.socket=c,t.url=c.url,t.ready=new Promise(s=>c.onopen=()=>{s(t),cn[e]=_l}),t.send=s=>{c.readyState===1&&c.send(s)}};return o(),t},La="AES-GCM",ms={},Yd=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))),Gd=e=>{const r=atob(e);return new Uint8Array(r.length).map((t,o)=>r.charCodeAt(o)).buffer},ii=async e=>{if(ms[e])return ms[e];const r=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",Gr(e)))).map(t=>t.toString(36)).join("");return ms[e]=r,r},Qd=async(e,r,t)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},Gr(`${e}:${r}:${t}`)),{name:La},!1,["encrypt","decrypt"]),ru="$",nu=",",Jd=async(e,r)=>{const t=crypto.getRandomValues(new Uint8Array(16));return t.join(nu)+ru+Yd(await crypto.subtle.encrypt({name:La,iv:t},await e,Gr(r)))},Zd=async(e,r)=>{const[t,o]=r.split(ru);return gi(await crypto.subtle.decrypt({name:La,iv:new Uint8Array(t.split(nu))},await e,Gd(o)))};function iu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var si={exports:{}},ys,El;function Xd(){if(El)return ys;El=1;var e=1e3,r=e*60,t=r*60,o=t*24,c=o*7,s=o*365.25;ys=function(h,f){f=f||{};var p=typeof h;if(p==="string"&&h.length>0)return n(h);if(p==="number"&&isFinite(h))return f.long?a(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function n(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*c;case"days":case"day":case"d":return p*o;case"hours":case"hour":case"hrs":case"hr":case"h":return p*t;case"minutes":case"minute":case"mins":case"min":case"m":return p*r;case"seconds":case"second":case"secs":case"sec":case"s":return p*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function l(h){var f=Math.abs(h);return f>=o?Math.round(h/o)+"d":f>=t?Math.round(h/t)+"h":f>=r?Math.round(h/r)+"m":f>=e?Math.round(h/e)+"s":h+"ms"}function a(h){var f=Math.abs(h);return f>=o?u(h,f,o,"day"):f>=t?u(h,f,t,"hour"):f>=r?u(h,f,r,"minute"):f>=e?u(h,f,e,"second"):h+" ms"}function u(h,f,p,y){var b=f>=p*1.5;return Math.round(h/p)+" "+y+(b?"s":"")}return ys}var bs,Sl;function ep(){if(Sl)return bs;Sl=1;function e(r){o.debug=o,o.default=o,o.coerce=u,o.disable=n,o.enable=s,o.enabled=l,o.humanize=Xd(),o.destroy=h,Object.keys(r).forEach(f=>{o[f]=r[f]}),o.names=[],o.skips=[],o.formatters={};function t(f){let p=0;for(let y=0;y<f.length;y++)p=(p<<5)-p+f.charCodeAt(y),p|=0;return o.colors[Math.abs(p)%o.colors.length]}o.selectColor=t;function o(f){let p,y=null,b,w;function v(...I){if(!v.enabled)return;const A=v,T=Number(new Date),k=T-(p||T);A.diff=k,A.prev=p,A.curr=T,p=T,I[0]=o.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let R=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(S,P)=>{if(S==="%%")return"%";R++;const N=o.formatters[P];if(typeof N=="function"){const z=I[R];S=N.call(A,z),I.splice(R,1),R--}return S}),o.formatArgs.call(A,I),(A.log||o.log).apply(A,I)}return v.namespace=f,v.useColors=o.useColors(),v.color=o.selectColor(f),v.extend=c,v.destroy=o.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(b!==o.namespaces&&(b=o.namespaces,w=o.enabled(f)),w),set:I=>{y=I}}),typeof o.init=="function"&&o.init(v),v}function c(f,p){const y=o(this.namespace+(typeof p>"u"?":":p)+f);return y.log=this.log,y}function s(f){o.save(f),o.namespaces=f,o.names=[],o.skips=[];let p;const y=(typeof f=="string"?f:"").split(/[\s,]+/),b=y.length;for(p=0;p<b;p++)y[p]&&(f=y[p].replace(/\*/g,".*?"),f[0]==="-"?o.skips.push(new RegExp("^"+f.slice(1)+"$")):o.names.push(new RegExp("^"+f+"$")))}function n(){const f=[...o.names.map(a),...o.skips.map(a).map(p=>"-"+p)].join(",");return o.enable(""),f}function l(f){if(f[f.length-1]==="*")return!0;let p,y;for(p=0,y=o.skips.length;p<y;p++)if(o.skips[p].test(f))return!1;for(p=0,y=o.names.length;p<y;p++)if(o.names[p].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return bs=e,bs}var Al;function tp(){return Al||(Al=1,function(e,r){r.formatArgs=o,r.save=c,r.load=s,r.useColors=t,r.storage=n(),r.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;a.splice(1,0,u,"color: inherit");let h=0,f=0;a[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(f=h))}),a.splice(f,0,u)}r.log=console.debug||console.log||(()=>{});function c(a){try{a?r.storage.setItem("debug",a):r.storage.removeItem("debug")}catch{}}function s(){let a;try{a=r.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=Jf.DEBUG),a}function n(){try{return localStorage}catch{}}e.exports=ep()(r);const{formatters:l}=e.exports;l.j=function(a){try{return JSON.stringify(a)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(si,si.exports)),si.exports}var rp=tp(),np=iu(rp);const ur=typeof window<"u"?window:self,Qs=ur.RTCPeerConnection||ur.mozRTCPeerConnection||ur.webkitRTCPeerConnection,ip=ur.RTCSessionDescription||ur.mozRTCSessionDescription||ur.webkitRTCSessionDescription,sp=ur.RTCIceCandidate||ur.mozRTCIceCandidate||ur.webkitRTCIceCandidate;var oi={exports:{}},Tl;function op(){if(Tl)return oi.exports;Tl=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(R,E,S){return Function.prototype.apply.call(R,E,S)},t;e&&typeof e.ownKeys=="function"?t=e.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function o(k){console&&console.warn&&console.warn(k)}var c=Number.isNaN||function(R){return R!==R};function s(){s.init.call(this)}oi.exports=s,oi.exports.once=I,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var n=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(k){if(typeof k!="number"||k<0||c(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");n=k}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||c(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function a(k){return k._maxListeners===void 0?s.defaultMaxListeners:k._maxListeners}s.prototype.getMaxListeners=function(){return a(this)},s.prototype.emit=function(R){for(var E=[],S=1;S<arguments.length;S++)E.push(arguments[S]);var P=R==="error",N=this._events;if(N!==void 0)P=P&&N.error===void 0;else if(!P)return!1;if(P){var z;if(E.length>0&&(z=E[0]),z instanceof Error)throw z;var re=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw re.context=z,re}var _=N[R];if(_===void 0)return!1;if(typeof _=="function")r(_,this,E);else for(var W=_.length,$=b(_,W),S=0;S<W;++S)r($[S],this,E);return!0};function u(k,R,E,S){var P,N,z;if(l(E),N=k._events,N===void 0?(N=k._events=Object.create(null),k._eventsCount=0):(N.newListener!==void 0&&(k.emit("newListener",R,E.listener?E.listener:E),N=k._events),z=N[R]),z===void 0)z=N[R]=E,++k._eventsCount;else if(typeof z=="function"?z=N[R]=S?[E,z]:[z,E]:S?z.unshift(E):z.push(E),P=a(k),P>0&&z.length>P&&!z.warned){z.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=k,re.type=R,re.count=z.length,o(re)}return k}s.prototype.addListener=function(R,E){return u(this,R,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(R,E){return u(this,R,E,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(k,R,E){var S={fired:!1,wrapFn:void 0,target:k,type:R,listener:E},P=h.bind(S);return P.listener=E,S.wrapFn=P,P}s.prototype.once=function(R,E){return l(E),this.on(R,f(this,R,E)),this},s.prototype.prependOnceListener=function(R,E){return l(E),this.prependListener(R,f(this,R,E)),this},s.prototype.removeListener=function(R,E){var S,P,N,z,re;if(l(E),P=this._events,P===void 0)return this;if(S=P[R],S===void 0)return this;if(S===E||S.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete P[R],P.removeListener&&this.emit("removeListener",R,S.listener||E));else if(typeof S!="function"){for(N=-1,z=S.length-1;z>=0;z--)if(S[z]===E||S[z].listener===E){re=S[z].listener,N=z;break}if(N<0)return this;N===0?S.shift():w(S,N),S.length===1&&(P[R]=S[0]),P.removeListener!==void 0&&this.emit("removeListener",R,re||E)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(R){var E,S,P;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[R]),this;if(arguments.length===0){var N=Object.keys(S),z;for(P=0;P<N.length;++P)z=N[P],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=S[R],typeof E=="function")this.removeListener(R,E);else if(E!==void 0)for(P=E.length-1;P>=0;P--)this.removeListener(R,E[P]);return this};function p(k,R,E){var S=k._events;if(S===void 0)return[];var P=S[R];return P===void 0?[]:typeof P=="function"?E?[P.listener||P]:[P]:E?v(P):b(P,P.length)}s.prototype.listeners=function(R){return p(this,R,!0)},s.prototype.rawListeners=function(R){return p(this,R,!1)},s.listenerCount=function(k,R){return typeof k.listenerCount=="function"?k.listenerCount(R):y.call(k,R)},s.prototype.listenerCount=y;function y(k){var R=this._events;if(R!==void 0){var E=R[k];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(k,R){for(var E=new Array(R),S=0;S<R;++S)E[S]=k[S];return E}function w(k,R){for(;R+1<k.length;R++)k[R]=k[R+1];k.pop()}function v(k){for(var R=new Array(k.length),E=0;E<R.length;++E)R[E]=k[E].listener||k[E];return R}function I(k,R){return new Promise(function(E,S){function P(z){k.removeListener(R,N),S(z)}function N(){typeof k.removeListener=="function"&&k.removeListener("error",P),E([].slice.call(arguments))}T(k,R,N,{once:!0}),R!=="error"&&A(k,P,{once:!0})})}function A(k,R,E){typeof k.on=="function"&&T(k,"error",R,E)}function T(k,R,E,S){if(typeof k.on=="function")S.once?k.once(R,E):k.on(R,E);else if(typeof k.addEventListener=="function")k.addEventListener(R,function P(N){S.once&&k.removeEventListener(R,P),E(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return oi.exports}var ws,kl;function ap(){return kl||(kl=1,ws=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)),ws}var vs,Il;function lp(){return Il||(Il=1,vs=class{constructor(r){if(!(r>0)||r-1&r)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){const r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}),vs}var _s,Cl;function cp(){if(Cl)return _s;Cl=1;const e=lp();return _s=class{constructor(t){this.hwm=t||16,this.head=new e(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(t){if(this.length++,!this.head.push(t)){const o=this.head;this.head=o.next=new e(2*this.head.buffer.length),this.head.push(t)}}shift(){this.length!==0&&this.length--;const t=this.tail.shift();if(t===void 0&&this.tail.next){const o=this.tail.next;return this.tail.next=null,this.tail=o,this.tail.shift()}return t}peek(){const t=this.tail.peek();return t===void 0&&this.tail.next?this.tail.next.peek():t}isEmpty(){return this.length===0}},_s}var Es,Rl;function xl(){return Rl||(Rl=1,Es=class{constructor(r){this.decoder=new TextDecoder(r==="utf16le"?"utf16-le":r)}get remaining(){return-1}decode(r){return this.decoder.decode(r,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}),Es}var Ss,Ol;function up(){if(Ol)return Ss;Ol=1;const e=xl(),r=xl();Ss=class{constructor(c="utf8"){switch(this.encoding=t(c),this.encoding){case"utf8":this.decoder=new r;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new e(this.encoding)}}get remaining(){return this.decoder.remaining}push(c){return typeof c=="string"?c:this.decoder.decode(c)}write(c){return this.push(c)}end(c){let s="";return c&&(s=this.push(c)),s+=this.decoder.flush(),s}};function t(o){switch(o=o.toLowerCase(),o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:throw new Error("Unknown encoding: "+o)}}return Ss}var As,Pl;function hp(){if(Pl)return As;Pl=1;const{EventEmitter:e}=op(),r=new Error("Stream was destroyed"),t=new Error("Premature close"),o=ap(),c=cp(),s=up(),n=(1<<29)-1,l=1,a=2,u=4,h=8,f=n^l,p=n^a,y=16,b=32,w=64,v=128,I=256,A=512,T=1024,k=2048,R=4096,E=8192,S=16384,P=32768,N=65536,z=131072,re=I|A,_=y|N,W=w|y,$=R|v,q=I|z,Z=n^y,K=n^w,F=n^(w|N),oe=n^N,se=n^I,de=n^(v|E),C=n^T,J=n^re,ae=n^P,Se=n^b,le=n^z,D=n^q,B=1<<18,X=2<<18,ce=4<<18,ne=8<<18,ie=16<<18,ge=32<<18,pe=64<<18,U=128<<18,Y=256<<18,Q=512<<18,fe=1024<<18,ue=n^(B|Y),H=n^ce,te=n^Q,j=n^ie,G=n^ne,ee=n^U,me=n^X,g=n^fe,d=y|B,m=n^d,x=S|ge,L=u|h|a,V=L|l,he=L|x,Ce=H&K,Be=U|P,Ne=Be&m,Ie=V|Ne,Me=V|T|S,Re=V|S|v,He=V|T|v,it=V|R|v|E,Xe=V|y|T|S|N|z,at=L|T|S,dt=b|V|P|w,st=V|Q|ge,ei=ne|ie,xn=ne|B,hf=ne|ie|V|B,Ja=V|B|ne|fe,ff=ce|B,df=B|Y,pf=V|Q|xn|ge,gf=ie|L|Q|ge,mf=X|V|U|ce,ti=Symbol.asyncIterator||Symbol("asyncIterator");class Za{constructor(M,{highWaterMark:Ee=16384,map:Pe=null,mapWritable:Le,byteLength:Ge,byteLengthWritable:Ye}={}){this.stream=M,this.queue=new c,this.highWaterMark=Ee,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Ye||Ge||sl,this.map=Le||Pe,this.afterWrite=Ef.bind(this),this.afterUpdateNextTick=Tf.bind(this)}get ended(){return(this.stream._duplexState&ge)!==0}push(M){return this.map!==null&&(M=this.map(M)),this.buffered+=this.byteLength(M),this.queue.push(M),this.buffered<this.highWaterMark?(this.stream._duplexState|=ne,!0):(this.stream._duplexState|=ei,!1)}shift(){const M=this.queue.shift();return this.buffered-=this.byteLength(M),this.buffered===0&&(this.stream._duplexState&=G),M}end(M){typeof M=="function"?this.stream.once("finish",M):M!=null&&this.push(M),this.stream._duplexState=(this.stream._duplexState|Q)&H}autoBatch(M,Ee){const Pe=[],Le=this.stream;for(Pe.push(M);(Le._duplexState&Ja)===xn;)Pe.push(Le._writableState.shift());if(Le._duplexState&V)return Ee(null);Le._writev(Pe,Ee)}update(){const M=this.stream;M._duplexState|=X;do{for(;(M._duplexState&Ja)===ne;){const Ee=this.shift();M._duplexState|=df,M._write(Ee,this.afterWrite)}M._duplexState&ff||this.updateNonPrimary()}while(this.continueUpdate()===!0);M._duplexState&=me}updateNonPrimary(){const M=this.stream;if((M._duplexState&pf)===Q){M._duplexState=(M._duplexState|B)&te,M._final(_f.bind(this));return}if((M._duplexState&L)===u){M._duplexState&Be||(M._duplexState|=d,M._destroy(Xa.bind(this)));return}(M._duplexState&Ie)===l&&(M._duplexState=(M._duplexState|d)&f,M._open(el.bind(this)))}continueUpdate(){return this.stream._duplexState&U?(this.stream._duplexState&=ee,!0):!1}updateCallback(){(this.stream._duplexState&mf)===ce?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&U||(this.stream._duplexState|=U,this.stream._duplexState&X||o(this.afterUpdateNextTick))}}class yf{constructor(M,{highWaterMark:Ee=16384,map:Pe=null,mapReadable:Le,byteLength:Ge,byteLengthReadable:Ye}={}){this.stream=M,this.queue=new c,this.highWaterMark=Ee===0?1:Ee,this.buffered=0,this.readAhead=Ee>0,this.error=null,this.pipeline=null,this.byteLength=Ye||Ge||sl,this.map=Le||Pe,this.pipeTo=null,this.afterRead=Sf.bind(this),this.afterUpdateNextTick=Af.bind(this)}get ended(){return(this.stream._duplexState&S)!==0}pipe(M,Ee){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof Ee!="function"&&(Ee=null),this.stream._duplexState|=A,this.pipeTo=M,this.pipeline=new wf(this.stream,M,Ee),Ee&&this.stream.on("error",ol),Pn(M))M._writableState.pipeline=this.pipeline,Ee&&M.on("error",ol),M.on("finish",this.pipeline.finished.bind(this.pipeline));else{const Pe=this.pipeline.done.bind(this.pipeline,M),Le=this.pipeline.done.bind(this.pipeline,M,null);M.on("error",Pe),M.on("close",Le),M.on("finish",this.pipeline.finished.bind(this.pipeline))}M.on("drain",vf.bind(this)),this.stream.emit("piping",M),M.emit("pipe",this.stream)}push(M){const Ee=this.stream;return M===null?(this.highWaterMark=0,Ee._duplexState=(Ee._duplexState|T)&F,!1):this.map!==null&&(M=this.map(M),M===null)?(Ee._duplexState&=oe,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(M),this.queue.push(M),Ee._duplexState=(Ee._duplexState|v)&oe,this.buffered<this.highWaterMark)}shift(){const M=this.queue.shift();return this.buffered-=this.byteLength(M),this.buffered===0&&(this.stream._duplexState&=de),M}unshift(M){const Ee=[this.map!==null?this.map(M):M];for(;this.buffered>0;)Ee.push(this.shift());for(let Pe=0;Pe<Ee.length-1;Pe++){const Le=Ee[Pe];this.buffered+=this.byteLength(Le),this.queue.push(Le)}this.push(Ee[Ee.length-1])}read(){const M=this.stream;if((M._duplexState&Re)===v){const Ee=this.shift();return this.pipeTo!==null&&this.pipeTo.write(Ee)===!1&&(M._duplexState&=J),M._duplexState&k&&M.emit("data",Ee),Ee}return this.readAhead===!1&&(M._duplexState|=z,this.updateNextTick()),null}drain(){const M=this.stream;for(;(M._duplexState&Re)===v&&M._duplexState&re;){const Ee=this.shift();this.pipeTo!==null&&this.pipeTo.write(Ee)===!1&&(M._duplexState&=J),M._duplexState&k&&M.emit("data",Ee)}}update(){const M=this.stream;M._duplexState|=b;do{for(this.drain();this.buffered<this.highWaterMark&&(M._duplexState&Xe)===z;)M._duplexState|=_,M._read(this.afterRead),this.drain();(M._duplexState&it)===$&&(M._duplexState|=E,M.emit("readable")),M._duplexState&W||this.updateNonPrimary()}while(this.continueUpdate()===!0);M._duplexState&=Se}updateNonPrimary(){const M=this.stream;if((M._duplexState&He)===T&&(M._duplexState=(M._duplexState|S)&C,M.emit("end"),(M._duplexState&he)===x&&(M._duplexState|=u),this.pipeTo!==null&&this.pipeTo.end()),(M._duplexState&L)===u){M._duplexState&Be||(M._duplexState|=d,M._destroy(Xa.bind(this)));return}(M._duplexState&Ie)===l&&(M._duplexState=(M._duplexState|d)&f,M._open(el.bind(this)))}continueUpdate(){return this.stream._duplexState&P?(this.stream._duplexState&=ae,!0):!1}updateCallback(){(this.stream._duplexState&dt)===w?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&P||(this.stream._duplexState|=P,this.stream._duplexState&b||o(this.afterUpdateNextTick))}}class bf{constructor(M){this.data=null,this.afterTransform=If.bind(M),this.afterFinal=null}}class wf{constructor(M,Ee,Pe){this.from=M,this.to=Ee,this.afterPipe=Pe,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(M,Ee){if(Ee&&(this.error=Ee),M===this.to&&(this.to=null,this.from!==null)){(!(this.from._duplexState&S)||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(M===this.from&&(this.from=null,this.to!==null)){M._duplexState&S||this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}}function vf(){this.stream._duplexState|=A,this.updateCallback()}function _f(Te){const M=this.stream;Te&&M.destroy(Te),M._duplexState&L||(M._duplexState|=ge,M.emit("finish")),(M._duplexState&he)===x&&(M._duplexState|=u),M._duplexState&=ue,M._duplexState&X?this.updateNextTick():this.update()}function Xa(Te){const M=this.stream;!Te&&this.error!==r&&(Te=this.error),Te&&M.emit("error",Te),M._duplexState|=h,M.emit("close");const Ee=M._readableState,Pe=M._writableState;if(Ee!==null&&Ee.pipeline!==null&&Ee.pipeline.done(M,Te),Pe!==null){for(;Pe.drains!==null&&Pe.drains.length>0;)Pe.drains.shift().resolve(!1);Pe.pipeline!==null&&Pe.pipeline.done(M,Te)}}function Ef(Te){const M=this.stream;Te&&M.destroy(Te),M._duplexState&=ue,this.drains!==null&&kf(this.drains),(M._duplexState&hf)===ie&&(M._duplexState&=j,(M._duplexState&pe)===pe&&M.emit("drain")),this.updateCallback()}function Sf(Te){Te&&this.stream.destroy(Te),this.stream._duplexState&=Z,this.readAhead===!1&&!(this.stream._duplexState&I)&&(this.stream._duplexState&=le),this.updateCallback()}function Af(){this.stream._duplexState&b||(this.stream._duplexState&=ae,this.update())}function Tf(){this.stream._duplexState&X||(this.stream._duplexState&=ee,this.update())}function kf(Te){for(let M=0;M<Te.length;M++)--Te[M].writes===0&&(Te.shift().resolve(!0),M--)}function el(Te){const M=this.stream;Te&&M.destroy(Te),M._duplexState&u||(M._duplexState&Me||(M._duplexState|=w),M._duplexState&st||(M._duplexState|=ce),M.emit("open")),M._duplexState&=m,M._writableState!==null&&M._writableState.updateCallback(),M._readableState!==null&&M._readableState.updateCallback()}function If(Te,M){M!=null&&this.push(M),this._writableState.afterWrite(Te)}function Cf(Te){this._readableState!==null&&(Te==="data"&&(this._duplexState|=k|q,this._readableState.updateNextTick()),Te==="readable"&&(this._duplexState|=R,this._readableState.updateNextTick())),this._writableState!==null&&Te==="drain"&&(this._duplexState|=pe,this._writableState.updateNextTick())}class ss extends e{constructor(M){super(),this._duplexState=0,this._readableState=null,this._writableState=null,M&&(M.open&&(this._open=M.open),M.destroy&&(this._destroy=M.destroy),M.predestroy&&(this._predestroy=M.predestroy),M.signal&&M.signal.addEventListener("abort",Df.bind(this))),this.on("newListener",Cf)}_open(M){M(null)}_destroy(M){M(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&h)!==0}get destroying(){return(this._duplexState&L)!==0}destroy(M){this._duplexState&L||(M||(M=r),this._duplexState=(this._duplexState|u)&Ce,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=M),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=M),this._duplexState|=a,this._predestroy(),this._duplexState&=p,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class On extends ss{constructor(M){super(M),this._duplexState|=l|ge|z,this._readableState=new yf(this,M),M&&(this._readableState.readAhead===!1&&(this._duplexState&=le),M.read&&(this._read=M.read),M.eagerOpen&&this._readableState.updateNextTick(),M.encoding&&this.setEncoding(M.encoding))}setEncoding(M){const Ee=new s(M),Pe=this._readableState.map||Pf;return this._readableState.map=Le,this;function Le(Ge){const Ye=Ee.push(Ge);return Ye===""&&(Ge.byteLength!==0||Ee.remaining>0)?null:Pe(Ye)}}_read(M){M(null)}pipe(M,Ee){return this._readableState.updateNextTick(),this._readableState.pipe(M,Ee),M}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(M){return this._readableState.updateNextTick(),this._readableState.push(M)}unshift(M){return this._readableState.updateNextTick(),this._readableState.unshift(M)}resume(){return this._duplexState|=q,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?D:se,this}static _fromAsyncIterator(M,Ee){let Pe;const Le=new On({...Ee,read(Ye){M.next().then(Ge).then(Ye.bind(null,null)).catch(Ye)},predestroy(){Pe=M.return()},destroy(Ye){if(!Pe)return Ye(null);Pe.then(Ye.bind(null,null)).catch(Ye)}});return Le;function Ge(Ye){Ye.done?Le.push(null):Le.push(Ye.value)}}static from(M,Ee){if(Lf(M))return M;if(M[ti])return this._fromAsyncIterator(M[ti](),Ee);Array.isArray(M)||(M=M===void 0?[]:[M]);let Pe=0;return new On({...Ee,read(Le){this.push(Pe===M.length?null:M[Pe++]),Le(null)}})}static isBackpressured(M){return(M._duplexState&at)!==0||M._readableState.buffered>=M._readableState.highWaterMark}static isPaused(M){return(M._duplexState&I)===0}[ti](){const M=this;let Ee=null,Pe=null,Le=null;return this.on("error",Fe=>{Ee=Fe}),this.on("readable",Ge),this.on("close",Ye),{[ti](){return this},next(){return new Promise(function(Fe,Dt){Pe=Fe,Le=Dt;const br=M.read();br!==null?an(br):M._duplexState&h&&an(null)})},return(){return Bn(null)},throw(Fe){return Bn(Fe)}};function Ge(){Pe!==null&&an(M.read())}function Ye(){Pe!==null&&an(null)}function an(Fe){Le!==null&&(Ee?Le(Ee):Fe===null&&!(M._duplexState&S)?Le(r):Pe({value:Fe,done:Fe===null}),Le=Pe=null)}function Bn(Fe){return M.destroy(Fe),new Promise((Dt,br)=>{if(M._duplexState&h)return Dt({value:void 0,done:!0});M.once("close",function(){Fe?br(Fe):Dt({value:void 0,done:!0})})})}}}class tl extends ss{constructor(M){super(M),this._duplexState|=l|S,this._writableState=new Za(this,M),M&&(M.writev&&(this._writev=M.writev),M.write&&(this._write=M.write),M.final&&(this._final=M.final),M.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=fe}uncork(){this._duplexState&=g,this._writableState.updateNextTick()}_writev(M,Ee){Ee(null)}_write(M,Ee){this._writableState.autoBatch(M,Ee)}_final(M){M(null)}static isBackpressured(M){return(M._duplexState&gf)!==0}static drained(M){if(M.destroyed)return Promise.resolve(!1);const Ee=M._writableState,Le=(jf(M)?Math.min(1,Ee.queue.length):Ee.queue.length)+(M._duplexState&Y?1:0);return Le===0?Promise.resolve(!0):(Ee.drains===null&&(Ee.drains=[]),new Promise(Ge=>{Ee.drains.push({writes:Le,resolve:Ge})}))}write(M){return this._writableState.updateNextTick(),this._writableState.push(M)}end(M){return this._writableState.updateNextTick(),this._writableState.end(M),this}}class os extends On{constructor(M){super(M),this._duplexState=l|this._duplexState&z,this._writableState=new Za(this,M),M&&(M.writev&&(this._writev=M.writev),M.write&&(this._write=M.write),M.final&&(this._final=M.final))}cork(){this._duplexState|=fe}uncork(){this._duplexState&=g,this._writableState.updateNextTick()}_writev(M,Ee){Ee(null)}_write(M,Ee){this._writableState.autoBatch(M,Ee)}_final(M){M(null)}write(M){return this._writableState.updateNextTick(),this._writableState.push(M)}end(M){return this._writableState.updateNextTick(),this._writableState.end(M),this}}class rl extends os{constructor(M){super(M),this._transformState=new bf(this),M&&(M.transform&&(this._transform=M.transform),M.flush&&(this._flush=M.flush))}_write(M,Ee){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=M:this._transform(M,this._transformState.afterTransform)}_read(M){if(this._transformState.data!==null){const Ee=this._transformState.data;this._transformState.data=null,M(null),this._transform(Ee,this._transformState.afterTransform)}else M(null)}destroy(M){super.destroy(M),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(M,Ee){Ee(null,M)}_flush(M){M(null)}_final(M){this._transformState.afterFinal=M,this._flush(xf.bind(this))}}class Rf extends rl{}function xf(Te,M){const Ee=this._transformState.afterFinal;if(Te)return Ee(Te);M!=null&&this.push(M),this.push(null),Ee(null)}function Of(...Te){return new Promise((M,Ee)=>nl(...Te,Pe=>{if(Pe)return Ee(Pe);M()}))}function nl(Te,...M){const Ee=Array.isArray(Te)?[...Te,...M]:[Te,...M],Pe=Ee.length&&typeof Ee[Ee.length-1]=="function"?Ee.pop():null;if(Ee.length<2)throw new Error("Pipeline requires at least 2 streams");let Le=Ee[0],Ge=null,Ye=null;for(let Fe=1;Fe<Ee.length;Fe++)Ge=Ee[Fe],Pn(Le)?Le.pipe(Ge,Bn):(an(Le,!0,Fe>1,Bn),Le.pipe(Ge)),Le=Ge;if(Pe){let Fe=!1;const Dt=Pn(Ge)||!!(Ge._writableState&&Ge._writableState.autoDestroy);Ge.on("error",br=>{Ye===null&&(Ye=br)}),Ge.on("finish",()=>{Fe=!0,Dt||Pe(Ye)}),Dt&&Ge.on("close",()=>Pe(Ye||(Fe?null:t)))}return Ge;function an(Fe,Dt,br,as){Fe.on("error",as),Fe.on("close",Ff);function Ff(){if(Fe._readableState&&!Fe._readableState.ended||br&&Fe._writableState&&!Fe._writableState.ended)return as(t)}}function Bn(Fe){if(!(!Fe||Ye)){Ye=Fe;for(const Dt of Ee)Dt.destroy(Fe)}}}function Pf(Te){return Te}function il(Te){return!!Te._readableState||!!Te._writableState}function Pn(Te){return typeof Te._duplexState=="number"&&il(Te)}function Bf(Te){return!!Te._readableState&&Te._readableState.ended}function Mf(Te){return!!Te._writableState&&Te._writableState.ended}function Nf(Te,M={}){const Ee=Te._readableState&&Te._readableState.error||Te._writableState&&Te._writableState.error;return!M.all&&Ee===r?null:Ee}function Lf(Te){return Pn(Te)&&Te.readable}function Uf(Te){return typeof Te=="object"&&Te!==null&&typeof Te.byteLength=="number"}function sl(Te){return Uf(Te)?Te.byteLength:1024}function ol(){}function Df(){this.destroy(new Error("Stream aborted."))}function jf(Te){return Te._writev!==tl.prototype._writev&&Te._writev!==os.prototype._writev}return As={pipeline:nl,pipelinePromise:Of,isStream:il,isStreamx:Pn,isEnded:Bf,isFinished:Mf,getStreamError:Nf,Stream:ss,Writable:tl,Readable:On,Duplex:os,Transform:rl,PassThrough:Rf},As}var fp=hp(),Ts,Bl;function dp(){if(Bl)return Ts;Bl=1;function e(t,o){for(const c in o)Object.defineProperty(t,c,{value:o[c],enumerable:!0,configurable:!0});return t}function r(t,o,c){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");c||(c={}),typeof o=="object"&&(c=o,o=""),o&&(c.code=o);try{return e(t,c)}catch{c.message=t.message,c.stack=t.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),e(new n,c)}}return Ts=r,Ts}var pp=dp(),De=iu(pp);/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const Ml="0123456789abcdef",su=[];for(let e=0;e<256;e++)su[e]=Ml[e>>4&15]+Ml[e&15];const Nl=e=>{const r=e.length;let t="",o=0;for(;o<r;)t+=su[e[o++]];return t};var Ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ai=0;ai<Ll.length;ai++)gp[Ll.charCodeAt(ai)]=ai;new TextDecoder;const mp=new TextEncoder,yp=e=>mp.encode(e),Ul=typeof window<"u"?window:self,Js=Ul.crypto||Ul.msCrypto||{};Js.subtle||Js.webkitSubtle;const Dl=e=>{const r=new Uint8Array(e);return Js.getRandomValues(r)};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const bp=np("simple-peer"),ks=64*1024,wp=5*1e3,vp=5*1e3;function jl(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function _p(e){console.warn(e)}let Gi=class Zs extends fp.Duplex{constructor(t){t=Object.assign({allowHalfOpen:!1},t);super(t);Ue(this,"_pc");if(this.__objectMode=!!t.objectMode,this._id=Nl(Dl(4)).slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||Nl(Dl(20)):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||Zs.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Zs.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(o=>o),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||wp,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!Qs)throw De(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new Qs(this.config)}catch(o){this.__destroy(De(o,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=o=>{this._onIceCandidate(o)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(o=>{this.__destroy(De(o,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=o=>{this._setupData(o)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new ip(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(o=>{this._addIceCandidate(o)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(o=>{this.__destroy(De(o,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.__destroy(De(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const o=new sp(t);this._pc.addIceCandidate(o).catch(c=>{!o.address||o.address.endsWith(".local")?_p("Ignoring unsupported ICE candidate."):this.__destroy(De(c,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}_final(t){this._readableState.ended||this.push(null),t(null)}__destroy(t){this.end(),this._destroy(()=>{},t)}_destroy(t,o){this.destroyed||this._destroying||(this._destroying=!0,this._debug("destroying (error: %s)",o&&(o.message||o)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,o&&this.emit("error",o),t()},0))}_setupData(t){if(!t.channel)return this.__destroy(De(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=ks),this.channelName=this._channel.label,this._channel.onmessage=c=>{this._onChannelMessage(c)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=c=>{const s=c.error instanceof Error?c.error:new Error(`Datachannel error: ${c.message} ${c.filename}:${c.lineno}:${c.colno}`);this.__destroy(De(s,"ERR_DATA_CHANNEL"))};let o=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(o&&this._onChannelClose(),o=!0):o=!1},vp)}_write(t,o){if(this.destroyed)return o(De(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(c){return this.__destroy(De(c,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>ks?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=o):o(null)}else this._debug("write before connect"),this._chunk=t,this._cb=o}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.__destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=jl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const o=()=>{if(this.destroyed)return;const n=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:n.type,sdp:n.sdp})},c=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},s=n=>{this.__destroy(De(n,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(c).catch(s)}).catch(t=>{this.__destroy(De(t,"ERR_CREATE_OFFER"))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=jl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const o=()=>{var l;if(this.destroyed)return;const n=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:n.type,sdp:n.sdp}),this.initiator||(l=this._requestMissingTransceivers)==null||l.call(this)},c=()=>{this.destroyed||(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},s=n=>{this.__destroy(De(n,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(c).catch(s)}).catch(t=>{this.__destroy(De(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._destroying||this._pc.connectionState==="failed"&&this.__destroy(De(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,o=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,o),this.emit("iceStateChange",t,o),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.__destroy(De(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.__destroy(De(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const o=c=>(Object.prototype.toString.call(c.values)==="[object Array]"&&c.values.forEach(s=>{Object.assign(c,s)}),c);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(c=>{const s=[];c.forEach(n=>{s.push(o(n))}),t(null,s)},c=>t(c)):this._pc.getStats.length>0?this._pc.getStats(c=>{if(this.destroyed)return;const s=[];c.result().forEach(n=>{const l={};n.names().forEach(a=>{l[a]=n.stat(a)}),l.id=n.id,l.type=n.type,l.timestamp=n.timestamp,s.push(o(l))}),t(null,s)},c=>t(c)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this._destroying||this.getStats((o,c)=>{if(this.destroyed||this._destroying)return;o&&(c=[]);const s={},n={},l={};let a=!1;c.forEach(h=>{(h.type==="remotecandidate"||h.type==="remote-candidate")&&(s[h.id]=h),(h.type==="localcandidate"||h.type==="local-candidate")&&(n[h.id]=h),(h.type==="candidatepair"||h.type==="candidate-pair")&&(l[h.id]=h)});const u=h=>{a=!0;let f=n[h.localCandidateId];f&&(f.ip||f.address)?(this.localAddress=f.ip||f.address,this.localPort=Number(f.port)):f&&f.ipAddress?(this.localAddress=f.ipAddress,this.localPort=Number(f.portNumber)):typeof h.googLocalAddress=="string"&&(f=h.googLocalAddress.split(":"),this.localAddress=f[0],this.localPort=Number(f[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let p=s[h.remoteCandidateId];p&&(p.ip||p.address)?(this.remoteAddress=p.ip||p.address,this.remotePort=Number(p.port)):p&&p.ipAddress?(this.remoteAddress=p.ipAddress,this.remotePort=Number(p.portNumber)):typeof h.googRemoteAddress=="string"&&(p=h.googRemoteAddress.split(":"),this.remoteAddress=p[0],this.remotePort=Number(p[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(c.forEach(h=>{h.type==="transport"&&h.selectedCandidatePairId&&u(l[h.selectedCandidatePairId]),(h.type==="googCandidatePair"&&h.googActiveConnection==="true"||(h.type==="candidatepair"||h.type==="candidate-pair")&&h.selected)&&u(h)}),!a&&(!Object.keys(l).length||Object.keys(n).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(f){return this.__destroy(De(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const h=this._cb;this._cb=null,h(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>ks||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let o=t.data;o instanceof ArrayBuffer?o=new Uint8Array(o):this.__objectMode===!1&&(o=yp(o)),this.push(o)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.__destroy())}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],bp.apply(null,t)}};Gi.WEBRTC_SUPPORT=!!Qs;Gi.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Gi.channelConfig={};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */class Ep extends Gi{constructor(r={}){super(r),this._pc&&(this.streams=r.streams||(r.stream?[r.stream]:[]),this._senderMap=new Map,this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)})}addTransceiver(r,t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(r,t),this._needsNegotiation()}catch(o){this.__destroy(De(o,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:r,init:t}})}}addStream(r){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),r.getTracks().forEach(t=>{this.addTrack(t,r)})}}addTrack(r,t){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const o=this._senderMap.get(r)||new Map;let c=o.get(t);if(!c)c=this._pc.addTrack(r,t),o.set(t,c),this._senderMap.set(r,o),this._needsNegotiation();else throw c.removed?De(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):De(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(r,t,o){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const c=this._senderMap.get(r),s=c?c.get(o):null;if(!s)throw De(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,c),s.replaceTrack!=null?s.replaceTrack(t):this.__destroy(De(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(r,t){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const o=this._senderMap.get(r),c=o?o.get(t):null;if(!c)throw De(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{c.removed=!0,this._pc.removeTrack(c)}catch(s){s.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(c):this.__destroy(De(s,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(r){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),r.getTracks().forEach(t=>{this.removeTrack(t,r)})}}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(r=>{!r.mid&&r.sender.track&&!r.requested&&(r.requested=!0,this.addTransceiver(r.sender.track.kind))})}_onTrack(r){this.destroyed||r.streams.forEach(t=>{this._debug("on track"),this.emit("track",r.track,t),this._remoteTracks.push({track:r.track,stream:t}),!this._remoteStreams.some(o=>o.id===t.id)&&(this._remoteStreams.push(t),queueMicrotask(()=>{this._debug("on stream"),this.emit("stream",t)}))})}}const Fl="data",ql="signal";var Wl=(e,r)=>{const t=new Ep({iceServers:[{urls:Sp}],...r,initiator:e,trickle:!1}),o=s=>c.push(s);let c=[];return t.on(Fl,o),{id:t._id,created:Date.now(),connection:t._pc,get channel(){return t._channel},get isDead(){return t.destroyed},signal:s=>new Promise(n=>{e||t.on(ql,n),t.signal(s)}),sendData:s=>t.send(s),destroy:()=>t.destroy(),setHandlers:s=>Object.entries(s).forEach(([n,l])=>t.on(n,l)),offerPromise:e?new Promise(s=>t.on(ql,s)):Promise.resolve(),addStream:s=>t.addStream(s),removeStream:s=>t.removeStream(s),addTrack:(s,n)=>t.addTrack(s,n),removeTrack:(s,n)=>t.removeTrack(s,n),replaceTrack:(s,n,l)=>t.replaceTrack(s,n,l),drainEarlyData:s=>{t.off(Fl,o),c.forEach(s),c=null}}};const Sp=[...Yn(5,(e,r)=>`stun:stun${r||""}.l.google.com:19302`),"stun:global.stun.twilio.com:3478"],Ap=Object.getPrototypeOf(Uint8Array),mi=12,ou=0,yi=ou+mi,bi=yi+1,Dn=bi+1,jn=Dn+1,Cr=16*2**10-jn,li=255,$l="bufferedamountlow",un=e=>"@_"+e;var Tp=(e,r,t)=>{const o={},c={},s={},n={},l={},a={},u={},h={onPeerJoin:Lr,onPeerLeave:Lr,onPeerStream:Lr,onPeerTrack:Lr},f=(_,W)=>(_?Array.isArray(_)?_:[_]:Hd(o)).flatMap($=>{const q=o[$];return q?W($,q):(console.warn(`${Kn}: no peer with id ${$} found`),[])}),p=_=>{o[_]&&(delete o[_],delete n[_],delete l[_],h.onPeerLeave(_),r(_))},y=_=>{if(c[_])return s[_];if(!_)throw er("action type argument is required");const W=Gr(_);if(W.byteLength>mi)throw er(`action type string "${_}" (${W.byteLength}b) exceeds byte limit (${mi}). Hint: choose a shorter name.`);const $=new Uint8Array(mi);$.set(W);let q=0;return c[_]={onComplete:Lr,onProgress:Lr,setOnComplete:Z=>c[_]={...c[_],onComplete:Z},setOnProgress:Z=>c[_]={...c[_],onProgress:Z},send:async(Z,K,F,oe)=>{if(F&&typeof F!="object")throw er("action meta argument must be an object");const se=typeof Z;if(se==="undefined")throw er("action data cannot be undefined");const de=se!=="string",C=Z instanceof Blob,J=C||Z instanceof ArrayBuffer||Z instanceof Ap;if(F&&!J)throw er("action meta argument can only be used with binary data");const ae=J?new Uint8Array(C?await Z.arrayBuffer():Z):Gr(de?Vt(Z):Z),Se=F?Gr(Vt(F)):null,le=Math.ceil(ae.byteLength/Cr)+(F?1:0)||1,D=Yn(le,(B,X)=>{const ce=X===le-1,ne=F&&X===0,ie=new Uint8Array(jn+(ne?Se.byteLength:ce?ae.byteLength-Cr*(le-(F?2:1)):Cr));return ie.set($),ie.set([q],yi),ie.set([ce|ne<<1|J<<2|de<<3],bi),ie.set([Math.round((X+1)/le*li)],Dn),ie.set(F?ne?Se:ae.subarray((X-1)*Cr,X*Cr):ae.subarray(X*Cr,(X+1)*Cr),jn),ie});return q=q+1&li,dn(f(K,async(B,X)=>{const{channel:ce}=X;let ne=0;for(;ne<le;){const ie=D[ne];if(ce.bufferedAmount>ce.bufferedAmountLowThreshold&&await new Promise(ge=>{const pe=()=>{ce.removeEventListener($l,pe),ge()};ce.addEventListener($l,pe)}),!o[B])break;X.sendData(ie),ne++,oe==null||oe(ie[Dn]/li,B,F)}}))}},s[_]||(s[_]=[c[_].send,c[_].setOnComplete,c[_].setOnProgress])},b=(_,W)=>{var le,D;const $=new Uint8Array(W),q=gi($.subarray(ou,yi)).replaceAll("\0",""),[Z]=$.subarray(yi,bi),[K]=$.subarray(bi,Dn),[F]=$.subarray(Dn,jn),oe=$.subarray(jn),se=!!(K&1),de=!!(K&2),C=!!(K&4),J=!!(K&8);if(!c[q]){console.warn(`${Kn}: received message with unregistered type (${q})`);return}n[_]||(n[_]={}),(le=n[_])[q]||(le[q]={});const ae=(D=n[_][q])[Z]||(D[Z]={chunks:[]});if(de?ae.meta=ji(gi(oe)):ae.chunks.push(oe),c[q].onProgress(F/li,_,ae.meta),!se)return;const Se=new Uint8Array(ae.chunks.reduce((B,X)=>B+X.byteLength,0));if(ae.chunks.reduce((B,X)=>(Se.set(X,B),B+X.byteLength),0),delete n[_][q][Z],C)c[q].onComplete(Se,_,ae.meta);else{const B=gi(Se);c[q].onComplete(J?ji(B):B,_)}},w=async()=>{await z(""),await new Promise(_=>setTimeout(_,99)),vl(o).forEach(([_,W])=>{W.destroy(),delete o[_]}),t()},[v,I]=y(un("ping")),[A,T]=y(un("pong")),[k,R]=y(un("signal")),[E,S]=y(un("stream")),[P,N]=y(un("track")),[z,re]=y(un("leave"));return e((_,W)=>{var $;o[W]||(o[W]=_,_.setHandlers({data:q=>b(W,q),stream:q=>{h.onPeerStream(q,W,a[W]),delete a[W]},track:(q,Z)=>{h.onPeerTrack(q,Z,W,u[W]),delete u[W]},signal:q=>k(q,W),close:()=>p(W),error:()=>p(W)}),h.onPeerJoin(W),($=_.drainEarlyData)==null||$.call(_,q=>b(W,q)))}),I((_,W)=>A("",W)),T((_,W)=>{var $;($=l[W])==null||$.call(l),delete l[W]}),R((_,W)=>{var $;return($=o[W])==null?void 0:$.signal(_)}),S((_,W)=>a[W]=_),N((_,W)=>u[W]=_),re((_,W)=>p(W)),Na&&addEventListener("beforeunload",w),{makeAction:y,leave:w,ping:async _=>{if(!_)throw er("ping() must be called with target peer ID");const W=Date.now();return v("",_),await new Promise($=>l[_]=$),Date.now()-W},getPeers:()=>$d(vl(o).map(([_,W])=>[_,W.connection])),addStream:(_,W,$)=>f(W,async(q,Z)=>{$&&await E($,q),Z.addStream(_)}),removeStream:(_,W)=>f(W,($,q)=>q.removeStream(_)),addTrack:(_,W,$,q)=>f($,async(Z,K)=>{q&&await P(q,Z),K.addTrack(_,W)}),removeTrack:(_,W,$)=>f($,(q,Z)=>Z.removeTrack(_,W)),replaceTrack:(_,W,$,q,Z)=>f(q,async(K,F)=>{Z&&await P(Z,K),F.replaceTrack(_,W,$)}),onPeerJoin:_=>h.onPeerJoin=_,onPeerLeave:_=>h.onPeerLeave=_,onPeerStream:_=>h.onPeerStream=_,onPeerTrack:_=>h.onPeerTrack=_}};const kp=20,Ip=5333,Hl=57333;var au=({init:e,subscribe:r,announce:t})=>{const o={};let c=!1,s,n,l;return(a,u,h)=>{var Z;const{appId:f}=a;if((Z=o[f])!=null&&Z[u])return o[f][u];const p={},y={},b=ni(Kn,f,u),w=ii(b),v=ii(ni(b,Wt)),I=Qd(a.password||"",f,u),A=K=>async F=>({type:F.type,sdp:await K(I,F.sdp)}),T=A(Zd),k=A(Jd),R=()=>Wl(!0,a.rtcConfig),E=(K,F,oe)=>{var se;if(y[F]){y[F]!==K&&K.destroy();return}y[F]=K,q(K,F),(se=p[F])==null||se.forEach((de,C)=>{C!==oe&&de.destroy()}),delete p[F]},S=(K,F)=>{y[F]===K&&delete y[F]},P=(K,F)=>{var se;if(y[K])return;const oe=(se=p[K])==null?void 0:se[F];oe&&(delete p[K][F],oe.destroy())},N=K=>(n.push(...Yn(K,R)),dn(n.splice(0,K).map(F=>F.offerPromise.then(k).then(oe=>({peer:F,offer:oe}))))),z=(K,F)=>h==null?void 0:h({error:`incorrect password (${a.password}) when decrypting ${F}`,appId:f,peerId:K,roomId:u}),re=K=>async(F,oe,se)=>{var D,B,X;const[de,C]=await dn([w,v]);if(F!==de&&F!==C)return;const{peerId:J,offer:ae,answer:Se,peer:le}=typeof oe=="string"?ji(oe):oe;if(!(J===Wt||y[J])){if(J&&!ae&&!Se){if((D=p[J])!=null&&D[K])return;const[[{peer:ce,offer:ne}],ie]=await dn([N(1),ii(ni(b,J))]);p[J]||(p[J]=[]),p[J][K]=ce,setTimeout(()=>P(J,K),_[K]*.9),ce.setHandlers({connect:()=>E(ce,J,K),close:()=>S(ce,J)}),se(ie,Vt({peerId:Wt,offer:ne}))}else if(ae){if(((B=p[J])==null?void 0:B[K])&&Wt>J)return;const ne=Wl(!1,a.rtcConfig);ne.setHandlers({connect:()=>E(ne,J,K),close:()=>S(ne,J)});let ie;try{ie=await T(ae)}catch{z(J,"offer");return}if(ne.isDead)return;const[ge,pe]=await dn([ii(ni(b,J)),ne.signal(ie)]);se(ge,Vt({peerId:Wt,answer:await k(pe)}))}else if(Se){let ce;try{ce=await T(Se)}catch{z(J,"answer");return}if(le)le.setHandlers({connect:()=>E(le,J,K),close:()=>S(le,J)}),le.signal(ce);else{const ne=(X=p[J])==null?void 0:X[K];ne&&!ne.isDead&&ne.signal(ce)}}}};if(!a)throw er("requires a config map as the first argument");if(!f&&!a.firebaseApp)throw er("config map is missing appId field");if(!u)throw er("roomId argument required");if(!c){const K=e(a);n=Yn(kp,R),s=Array.isArray(K)?K:[K],c=!0,l=setInterval(()=>n=n.filter(F=>{const oe=Date.now()-F.created<Hl;return oe||F.destroy(),oe}),Hl*1.03)}const _=s.map(()=>Ip),W=[],$=s.map(async(K,F)=>r(await K,await w,await v,re(F),N));dn([w,v]).then(([K,F])=>{const oe=async(se,de)=>{const C=await t(se,K,F);typeof C=="number"&&(_[de]=C),W[de]=setTimeout(()=>oe(se,de),_[de])};$.forEach(async(se,de)=>{await se,oe(await s[de],de)})});let q=Lr;return o[f]||(o[f]={}),o[f][u]=Tp(K=>q=K,K=>delete y[K],()=>{delete o[f][u],W.forEach(clearTimeout),$.forEach(async K=>(await K)()),clearInterval(l)})}};const Cp=5,lu=29333,cu="x",uu="EVENT",hu=Na&&Ma.utils.randomPrivateKey(),Rp=Na&&Gs(Ma.getPublicKey(hu)),Ua={},Rr={},fu=()=>Math.floor(Date.now()/1e3),zl=async(e,r)=>{const t={kind:lu,content:r,pubkey:Rp,created_at:fu(),tags:[[cu,e]]},o=Gs(new Uint8Array(await crypto.subtle.digest("SHA-256",Gr(Vt([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])))));return Vt([uu,{...t,id:o,sig:Gs(await Ma.sign(o,hu))}])},Vl=(e,r)=>(Ua[e]=r,Vt(["REQ",e,{kinds:[lu],since:fu(),["#"+cu]:[r]}])),Kl=e=>(delete Ua[e],Vt(["CLOSE",e])),Yl=au({init:e=>tu(e,xp,Cp).map(r=>{const t=Kd(r,o=>{var a;const[c,s,n,l]=ji(o);if(c!==uu){const u=`${Kn}: relay failure from ${t.url} - `;c==="NOTICE"?console.warn(u+s):c==="OK"&&!n&&console.warn(u+l);return}(a=Rr[s])==null||a.call(Rr,Ua[s],n.content)});return t.ready}),subscribe:(e,r,t,o)=>{const c=Ys(64),s=Ys(64);return Rr[c]=Rr[s]=(n,l)=>o(n,l,async(a,u)=>e.send(await zl(a,u))),e.send(Vl(c,r)),e.send(Vl(s,t)),()=>{e.send(Kl(c)),e.send(Kl(s)),delete Rr[c],delete Rr[s]}},announce:async(e,r)=>e.send(await zl(r,Vt({peerId:Wt})))}),xp=["relay.nostr.net","relay.snort.social","relay.piazza.today","relay.exit.pub","nostr.lu.ke","nostr.mom","relay.urbanzap.space","nostr.data.haus","nostr.sathoarder.com","relay.nostromo.social","relay.nostr.bg","nostr.stakey.net","nostr.vulpem.com","a.nos.lol","eu.purplerelay.com","nostr2.sanhauf.com","e.nos.lol"].map(e=>"wss://"+e);var Da=Object.defineProperty,Op=Object.getOwnPropertyDescriptor,Pp=Object.getOwnPropertyNames,Bp=Object.prototype.hasOwnProperty,gt=(e,r)=>()=>(e&&(r=e(e=0)),r),_e=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),rn=(e,r)=>{for(var t in r)Da(e,t,{get:r[t],enumerable:!0})},Mp=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of Pp(r))!Bp.call(e,c)&&c!==t&&Da(e,c,{get:()=>r[c],enumerable:!(o=Op(r,c))||o.enumerable});return e},Ke=e=>Mp(Da({},"__esModule",{value:!0}),e),ye=gt(()=>{}),We={};rn(We,{_debugEnd:()=>Po,_debugProcess:()=>Oo,_events:()=>Ko,_eventsCount:()=>Yo,_exiting:()=>yo,_fatalExceptions:()=>Co,_getActiveHandles:()=>wu,_getActiveRequests:()=>bu,_kill:()=>vo,_linkedBinding:()=>mu,_maxListeners:()=>Vo,_preload_modules:()=>Ho,_rawDebug:()=>po,_startProfilerIdleNotifier:()=>Bo,_stopProfilerIdleNotifier:()=>Mo,_tickCallback:()=>xo,abort:()=>Do,addListener:()=>Go,allowedNodeEnvironmentFlags:()=>ko,arch:()=>eo,argv:()=>no,argv0:()=>$o,assert:()=>vu,binding:()=>lo,chdir:()=>ho,config:()=>bo,cpuUsage:()=>Fn,cwd:()=>uo,debugPort:()=>Wo,default:()=>Fa,dlopen:()=>yu,domain:()=>mo,emit:()=>ea,emitWarning:()=>ao,env:()=>ro,execArgv:()=>io,execPath:()=>qo,exit:()=>Ao,features:()=>Io,hasUncaughtExceptionCaptureCallback:()=>_u,hrtime:()=>wi,kill:()=>So,listeners:()=>Su,memoryUsage:()=>Eo,moduleLoadList:()=>go,nextTick:()=>pu,off:()=>Jo,on:()=>Gt,once:()=>Qo,openStdin:()=>To,pid:()=>jo,platform:()=>to,ppid:()=>Fo,prependListener:()=>ta,prependOnceListener:()=>ra,reallyExit:()=>wo,release:()=>fo,removeAllListeners:()=>Xo,removeListener:()=>Zo,resourceUsage:()=>_o,setSourceMapsEnabled:()=>zo,setUncaughtExceptionCaptureCallback:()=>Ro,stderr:()=>Lo,stdin:()=>Uo,stdout:()=>No,title:()=>Xs,umask:()=>co,uptime:()=>Eu,version:()=>so,versions:()=>oo});function ja(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Np(){!Qr||!Wr||(Qr=!1,Wr.length?$t=Wr.concat($t):$n=-1,$t.length&&du())}function du(){if(!Qr){var e=setTimeout(Np,0);Qr=!0;for(var r=$t.length;r;){for(Wr=$t,$t=[];++$n<r;)Wr&&Wr[$n].run();$n=-1,r=$t.length}Wr=null,Qr=!1,clearTimeout(e)}}function pu(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];$t.push(new gu(e,r)),$t.length===1&&!Qr&&setTimeout(du,0)}function gu(e,r){this.fun=e,this.array=r}function bt(){}function mu(e){ja("_linkedBinding")}function yu(e){ja("dlopen")}function bu(){return[]}function wu(){return[]}function vu(e,r){if(!e)throw new Error(r||"assertion error")}function _u(){return!1}function Eu(){return tr.now()/1e3}function wi(e){var r=Math.floor((Date.now()-tr.now())*.001),t=tr.now()*.001,o=Math.floor(t)+r,c=Math.floor(t%1*1e9);return e&&(o=o-e[0],c=c-e[1],c<0&&(o--,c+=vi)),[o,c]}function Gt(){return Fa}function Su(e){return[]}var $t,Qr,Wr,$n,Xs,eo,to,ro,no,io,so,oo,ao,lo,co,uo,ho,fo,po,go,mo,yo,bo,wo,vo,Fn,_o,Eo,So,Ao,To,ko,Io,Co,Ro,xo,Oo,Po,Bo,Mo,No,Lo,Uo,Do,jo,Fo,qo,Wo,$o,Ho,zo,tr,Is,vi,Vo,Ko,Yo,Go,Qo,Jo,Zo,Xo,ea,ta,ra,Fa,Lp=gt(()=>{ye(),we(),be(),$t=[],Qr=!1,$n=-1,gu.prototype.run=function(){this.fun.apply(null,this.array)},Xs="browser",eo="x64",to="browser",ro={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},no=["/usr/bin/node"],io=[],so="v16.8.0",oo={},ao=function(e,r){console.warn((r?r+": ":"")+e)},lo=function(e){ja("binding")},co=function(e){return 0},uo=function(){return"/"},ho=function(e){},fo={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},po=bt,go=[],mo={},yo=!1,bo={},wo=bt,vo=bt,Fn=function(){return{}},_o=Fn,Eo=Fn,So=bt,Ao=bt,To=bt,ko={},Io={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Co=bt,Ro=bt,xo=bt,Oo=bt,Po=bt,Bo=bt,Mo=bt,No=void 0,Lo=void 0,Uo=void 0,Do=bt,jo=2,Fo=1,qo="/bin/usr/node",Wo=9229,$o="node",Ho=[],zo=bt,tr={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},tr.now===void 0&&(Is=Date.now(),tr.timing&&tr.timing.navigationStart&&(Is=tr.timing.navigationStart),tr.now=()=>Date.now()-Is),vi=1e9,wi.bigint=function(e){var r=wi(e);return typeof BigInt>"u"?r[0]*vi+r[1]:BigInt(r[0]*vi)+BigInt(r[1])},Vo=10,Ko={},Yo=0,Go=Gt,Qo=Gt,Jo=Gt,Zo=Gt,Xo=Gt,ea=bt,ta=Gt,ra=Gt,Fa={version:so,versions:oo,arch:eo,platform:to,release:fo,_rawDebug:po,moduleLoadList:go,binding:lo,_linkedBinding:mu,_events:Ko,_eventsCount:Yo,_maxListeners:Vo,on:Gt,addListener:Go,once:Qo,off:Jo,removeListener:Zo,removeAllListeners:Xo,emit:ea,prependListener:ta,prependOnceListener:ra,listeners:Su,domain:mo,_exiting:yo,config:bo,dlopen:yu,uptime:Eu,_getActiveRequests:bu,_getActiveHandles:wu,reallyExit:wo,_kill:vo,cpuUsage:Fn,resourceUsage:_o,memoryUsage:Eo,kill:So,exit:Ao,openStdin:To,allowedNodeEnvironmentFlags:ko,assert:vu,features:Io,_fatalExceptions:Co,setUncaughtExceptionCaptureCallback:Ro,hasUncaughtExceptionCaptureCallback:_u,emitWarning:ao,nextTick:pu,_tickCallback:xo,_debugProcess:Oo,_debugEnd:Po,_startProfilerIdleNotifier:Bo,_stopProfilerIdleNotifier:Mo,stdout:No,stdin:Uo,stderr:Lo,abort:Do,umask:co,chdir:ho,cwd:uo,env:ro,title:Xs,argv:no,execArgv:io,pid:jo,ppid:Fo,execPath:qo,debugPort:Wo,hrtime:wi,argv0:$o,_preload_modules:Ho,setSourceMapsEnabled:zo}}),be=gt(()=>{Lp()}),mt={};rn(mt,{Buffer:()=>Fi,INSPECT_MAX_BYTES:()=>Au,default:()=>Qt,kMaxLength:()=>Tu});function Up(){if(na)return pn;na=!0,pn.byteLength=l,pn.toByteArray=u,pn.fromByteArray=p;for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,s=o.length;c<s;++c)e[c]=o[c],r[o.charCodeAt(c)]=c;r[45]=62,r[95]=63;function n(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=y.indexOf("=");w===-1&&(w=b);var v=w===b?0:4-w%4;return[w,v]}function l(y){var b=n(y),w=b[0],v=b[1];return(w+v)*3/4-v}function a(y,b,w){return(b+w)*3/4-w}function u(y){var b,w=n(y),v=w[0],I=w[1],A=new t(a(y,v,I)),T=0,k=I>0?v-4:v,R;for(R=0;R<k;R+=4)b=r[y.charCodeAt(R)]<<18|r[y.charCodeAt(R+1)]<<12|r[y.charCodeAt(R+2)]<<6|r[y.charCodeAt(R+3)],A[T++]=b>>16&255,A[T++]=b>>8&255,A[T++]=b&255;return I===2&&(b=r[y.charCodeAt(R)]<<2|r[y.charCodeAt(R+1)]>>4,A[T++]=b&255),I===1&&(b=r[y.charCodeAt(R)]<<10|r[y.charCodeAt(R+1)]<<4|r[y.charCodeAt(R+2)]>>2,A[T++]=b>>8&255,A[T++]=b&255),A}function h(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function f(y,b,w){for(var v,I=[],A=b;A<w;A+=3)v=(y[A]<<16&16711680)+(y[A+1]<<8&65280)+(y[A+2]&255),I.push(h(v));return I.join("")}function p(y){for(var b,w=y.length,v=w%3,I=[],A=16383,T=0,k=w-v;T<k;T+=A)I.push(f(y,T,T+A>k?k:T+A));return v===1?(b=y[w-1],I.push(e[b>>2]+e[b<<4&63]+"==")):v===2&&(b=(y[w-2]<<8)+y[w-1],I.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),I.join("")}return pn}function Dp(){return ia?qn:(ia=!0,qn.read=function(e,r,t,o,c){var s,n,l=c*8-o-1,a=(1<<l)-1,u=a>>1,h=-7,f=t?c-1:0,p=t?-1:1,y=e[r+f];for(f+=p,s=y&(1<<-h)-1,y>>=-h,h+=l;h>0;s=s*256+e[r+f],f+=p,h-=8);for(n=s&(1<<-h)-1,s>>=-h,h+=o;h>0;n=n*256+e[r+f],f+=p,h-=8);if(s===0)s=1-u;else{if(s===a)return n?NaN:(y?-1:1)*(1/0);n=n+Math.pow(2,o),s=s-u}return(y?-1:1)*n*Math.pow(2,s-o)},qn.write=function(e,r,t,o,c,s){var n,l,a,u=s*8-c-1,h=(1<<u)-1,f=h>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:s-1,b=o?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,n=h):(n=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-n))<1&&(n--,a*=2),n+f>=1?r+=p/a:r+=p*Math.pow(2,1-f),r*a>=2&&(n++,a/=2),n+f>=h?(l=0,n=h):n+f>=1?(l=(r*a-1)*Math.pow(2,c),n=n+f):(l=r*Math.pow(2,f-1)*Math.pow(2,c),n=0));c>=8;e[t+y]=l&255,y+=b,l/=256,c-=8);for(n=n<<c|l,u+=c;u>0;e[t+y]=n&255,y+=b,n/=256,u-=8);e[t+y-b]|=w*128},qn)}function jp(){if(sa)return _r;sa=!0;let e=Up(),r=Dp(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_r.Buffer=n,_r.SlowBuffer=I,_r.INSPECT_MAX_BYTES=50;let o=2147483647;_r.kMaxLength=o,n.TYPED_ARRAY_SUPPORT=c(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let g=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(g,d),g.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});function s(g){if(g>o)throw new RangeError('The value "'+g+'" is invalid for option "size"');let d=new Uint8Array(g);return Object.setPrototypeOf(d,n.prototype),d}function n(g,d,m){if(typeof g=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(g)}return l(g,d,m)}n.poolSize=8192;function l(g,d,m){if(typeof g=="string")return f(g,d);if(ArrayBuffer.isView(g))return y(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(te(g,ArrayBuffer)||g&&te(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(g,SharedArrayBuffer)||g&&te(g.buffer,SharedArrayBuffer)))return b(g,d,m);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let x=g.valueOf&&g.valueOf();if(x!=null&&x!==g)return n.from(x,d,m);let L=w(g);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return n.from(g[Symbol.toPrimitive]("string"),d,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}n.from=function(g,d,m){return l(g,d,m)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function a(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function u(g,d,m){return a(g),g<=0?s(g):d!==void 0?typeof m=="string"?s(g).fill(d,m):s(g).fill(d):s(g)}n.alloc=function(g,d,m){return u(g,d,m)};function h(g){return a(g),s(g<0?0:v(g)|0)}n.allocUnsafe=function(g){return h(g)},n.allocUnsafeSlow=function(g){return h(g)};function f(g,d){if((typeof d!="string"||d==="")&&(d="utf8"),!n.isEncoding(d))throw new TypeError("Unknown encoding: "+d);let m=A(g,d)|0,x=s(m),L=x.write(g,d);return L!==m&&(x=x.slice(0,L)),x}function p(g){let d=g.length<0?0:v(g.length)|0,m=s(d);for(let x=0;x<d;x+=1)m[x]=g[x]&255;return m}function y(g){if(te(g,Uint8Array)){let d=new Uint8Array(g);return b(d.buffer,d.byteOffset,d.byteLength)}return p(g)}function b(g,d,m){if(d<0||g.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<d+(m||0))throw new RangeError('"length" is outside of buffer bounds');let x;return d===void 0&&m===void 0?x=new Uint8Array(g):m===void 0?x=new Uint8Array(g,d):x=new Uint8Array(g,d,m),Object.setPrototypeOf(x,n.prototype),x}function w(g){if(n.isBuffer(g)){let d=v(g.length)|0,m=s(d);return m.length===0||g.copy(m,0,0,d),m}if(g.length!==void 0)return typeof g.length!="number"||j(g.length)?s(0):p(g);if(g.type==="Buffer"&&Array.isArray(g.data))return p(g.data)}function v(g){if(g>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return g|0}function I(g){return+g!=g&&(g=0),n.alloc(+g)}n.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==n.prototype},n.compare=function(g,d){if(te(g,Uint8Array)&&(g=n.from(g,g.offset,g.byteLength)),te(d,Uint8Array)&&(d=n.from(d,d.offset,d.byteLength)),!n.isBuffer(g)||!n.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===d)return 0;let m=g.length,x=d.length;for(let L=0,V=Math.min(m,x);L<V;++L)if(g[L]!==d[L]){m=g[L],x=d[L];break}return m<x?-1:x<m?1:0},n.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(g,d){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return n.alloc(0);let m;if(d===void 0)for(d=0,m=0;m<g.length;++m)d+=g[m].length;let x=n.allocUnsafe(d),L=0;for(m=0;m<g.length;++m){let V=g[m];if(te(V,Uint8Array))L+V.length>x.length?(n.isBuffer(V)||(V=n.from(V)),V.copy(x,L)):Uint8Array.prototype.set.call(x,V,L);else if(n.isBuffer(V))V.copy(x,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=V.length}return x};function A(g,d){if(n.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||te(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let m=g.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&m===0)return 0;let L=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Y(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return ue(g).length;default:if(L)return x?-1:Y(g).length;d=(""+d).toLowerCase(),L=!0}}n.byteLength=A;function T(g,d,m){let x=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,d>>>=0,m<=d))return"";for(g||(g="utf8");;)switch(g){case"hex":return F(this,d,m);case"utf8":case"utf-8":return W(this,d,m);case"ascii":return Z(this,d,m);case"latin1":case"binary":return K(this,d,m);case"base64":return _(this,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,d,m);default:if(x)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),x=!0}}n.prototype._isBuffer=!0;function k(g,d,m){let x=g[d];g[d]=g[m],g[m]=x}n.prototype.swap16=function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<g;d+=2)k(this,d,d+1);return this},n.prototype.swap32=function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<g;d+=4)k(this,d,d+3),k(this,d+1,d+2);return this},n.prototype.swap64=function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<g;d+=8)k(this,d,d+7),k(this,d+1,d+6),k(this,d+2,d+5),k(this,d+3,d+4);return this},n.prototype.toString=function(){let g=this.length;return g===0?"":arguments.length===0?W(this,0,g):T.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(g){if(!n.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:n.compare(this,g)===0},n.prototype.inspect=function(){let g="",d=_r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(g+=" ... "),"<Buffer "+g+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(g,d,m,x,L){if(te(g,Uint8Array)&&(g=n.from(g,g.offset,g.byteLength)),!n.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(d===void 0&&(d=0),m===void 0&&(m=g?g.length:0),x===void 0&&(x=0),L===void 0&&(L=this.length),d<0||m>g.length||x<0||L>this.length)throw new RangeError("out of range index");if(x>=L&&d>=m)return 0;if(x>=L)return-1;if(d>=m)return 1;if(d>>>=0,m>>>=0,x>>>=0,L>>>=0,this===g)return 0;let V=L-x,he=m-d,Ce=Math.min(V,he),Be=this.slice(x,L),Ne=g.slice(d,m);for(let Ie=0;Ie<Ce;++Ie)if(Be[Ie]!==Ne[Ie]){V=Be[Ie],he=Ne[Ie];break}return V<he?-1:he<V?1:0};function R(g,d,m,x,L){if(g.length===0)return-1;if(typeof m=="string"?(x=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,j(m)&&(m=L?0:g.length-1),m<0&&(m=g.length+m),m>=g.length){if(L)return-1;m=g.length-1}else if(m<0)if(L)m=0;else return-1;if(typeof d=="string"&&(d=n.from(d,x)),n.isBuffer(d))return d.length===0?-1:E(g,d,m,x,L);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(g,d,m):Uint8Array.prototype.lastIndexOf.call(g,d,m):E(g,[d],m,x,L);throw new TypeError("val must be string, number or Buffer")}function E(g,d,m,x,L){let V=1,he=g.length,Ce=d.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(g.length<2||d.length<2)return-1;V=2,he/=2,Ce/=2,m/=2}function Be(Ie,Me){return V===1?Ie[Me]:Ie.readUInt16BE(Me*V)}let Ne;if(L){let Ie=-1;for(Ne=m;Ne<he;Ne++)if(Be(g,Ne)===Be(d,Ie===-1?0:Ne-Ie)){if(Ie===-1&&(Ie=Ne),Ne-Ie+1===Ce)return Ie*V}else Ie!==-1&&(Ne-=Ne-Ie),Ie=-1}else for(m+Ce>he&&(m=he-Ce),Ne=m;Ne>=0;Ne--){let Ie=!0;for(let Me=0;Me<Ce;Me++)if(Be(g,Ne+Me)!==Be(d,Me)){Ie=!1;break}if(Ie)return Ne}return-1}n.prototype.includes=function(g,d,m){return this.indexOf(g,d,m)!==-1},n.prototype.indexOf=function(g,d,m){return R(this,g,d,m,!0)},n.prototype.lastIndexOf=function(g,d,m){return R(this,g,d,m,!1)};function S(g,d,m,x){m=Number(m)||0;let L=g.length-m;x?(x=Number(x),x>L&&(x=L)):x=L;let V=d.length;x>V/2&&(x=V/2);let he;for(he=0;he<x;++he){let Ce=parseInt(d.substr(he*2,2),16);if(j(Ce))return he;g[m+he]=Ce}return he}function P(g,d,m,x){return H(Y(d,g.length-m),g,m,x)}function N(g,d,m,x){return H(Q(d),g,m,x)}function z(g,d,m,x){return H(ue(d),g,m,x)}function re(g,d,m,x){return H(fe(d,g.length-m),g,m,x)}n.prototype.write=function(g,d,m,x){if(d===void 0)x="utf8",m=this.length,d=0;else if(m===void 0&&typeof d=="string")x=d,m=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(m)?(m=m>>>0,x===void 0&&(x="utf8")):(x=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let L=this.length-d;if((m===void 0||m>L)&&(m=L),g.length>0&&(m<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let V=!1;for(;;)switch(x){case"hex":return S(this,g,d,m);case"utf8":case"utf-8":return P(this,g,d,m);case"ascii":case"latin1":case"binary":return N(this,g,d,m);case"base64":return z(this,g,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,g,d,m);default:if(V)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),V=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(g,d,m){return d===0&&m===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(d,m))}function W(g,d,m){m=Math.min(g.length,m);let x=[],L=d;for(;L<m;){let V=g[L],he=null,Ce=V>239?4:V>223?3:V>191?2:1;if(L+Ce<=m){let Be,Ne,Ie,Me;switch(Ce){case 1:V<128&&(he=V);break;case 2:Be=g[L+1],(Be&192)===128&&(Me=(V&31)<<6|Be&63,Me>127&&(he=Me));break;case 3:Be=g[L+1],Ne=g[L+2],(Be&192)===128&&(Ne&192)===128&&(Me=(V&15)<<12|(Be&63)<<6|Ne&63,Me>2047&&(Me<55296||Me>57343)&&(he=Me));break;case 4:Be=g[L+1],Ne=g[L+2],Ie=g[L+3],(Be&192)===128&&(Ne&192)===128&&(Ie&192)===128&&(Me=(V&15)<<18|(Be&63)<<12|(Ne&63)<<6|Ie&63,Me>65535&&Me<1114112&&(he=Me))}}he===null?(he=65533,Ce=1):he>65535&&(he-=65536,x.push(he>>>10&1023|55296),he=56320|he&1023),x.push(he),L+=Ce}return q(x)}let $=4096;function q(g){let d=g.length;if(d<=$)return String.fromCharCode.apply(String,g);let m="",x=0;for(;x<d;)m+=String.fromCharCode.apply(String,g.slice(x,x+=$));return m}function Z(g,d,m){let x="";m=Math.min(g.length,m);for(let L=d;L<m;++L)x+=String.fromCharCode(g[L]&127);return x}function K(g,d,m){let x="";m=Math.min(g.length,m);for(let L=d;L<m;++L)x+=String.fromCharCode(g[L]);return x}function F(g,d,m){let x=g.length;(!d||d<0)&&(d=0),(!m||m<0||m>x)&&(m=x);let L="";for(let V=d;V<m;++V)L+=G[g[V]];return L}function oe(g,d,m){let x=g.slice(d,m),L="";for(let V=0;V<x.length-1;V+=2)L+=String.fromCharCode(x[V]+x[V+1]*256);return L}n.prototype.slice=function(g,d){let m=this.length;g=~~g,d=d===void 0?m:~~d,g<0?(g+=m,g<0&&(g=0)):g>m&&(g=m),d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),d<g&&(d=g);let x=this.subarray(g,d);return Object.setPrototypeOf(x,n.prototype),x};function se(g,d,m){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+d>m)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(g,d,m){g=g>>>0,d=d>>>0,m||se(g,d,this.length);let x=this[g],L=1,V=0;for(;++V<d&&(L*=256);)x+=this[g+V]*L;return x},n.prototype.readUintBE=n.prototype.readUIntBE=function(g,d,m){g=g>>>0,d=d>>>0,m||se(g,d,this.length);let x=this[g+--d],L=1;for(;d>0&&(L*=256);)x+=this[g+--d]*L;return x},n.prototype.readUint8=n.prototype.readUInt8=function(g,d){return g=g>>>0,d||se(g,1,this.length),this[g]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(g,d){return g=g>>>0,d||se(g,2,this.length),this[g]|this[g+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(g,d){return g=g>>>0,d||se(g,2,this.length),this[g]<<8|this[g+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(g,d){return g=g>>>0,d||se(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(g,d){return g=g>>>0,d||se(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},n.prototype.readBigUInt64LE=ee(function(g){g=g>>>0,ie(g,"offset");let d=this[g],m=this[g+7];(d===void 0||m===void 0)&&ge(g,this.length-8);let x=d+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,L=this[++g]+this[++g]*2**8+this[++g]*2**16+m*2**24;return BigInt(x)+(BigInt(L)<<BigInt(32))}),n.prototype.readBigUInt64BE=ee(function(g){g=g>>>0,ie(g,"offset");let d=this[g],m=this[g+7];(d===void 0||m===void 0)&&ge(g,this.length-8);let x=d*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],L=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+m;return(BigInt(x)<<BigInt(32))+BigInt(L)}),n.prototype.readIntLE=function(g,d,m){g=g>>>0,d=d>>>0,m||se(g,d,this.length);let x=this[g],L=1,V=0;for(;++V<d&&(L*=256);)x+=this[g+V]*L;return L*=128,x>=L&&(x-=Math.pow(2,8*d)),x},n.prototype.readIntBE=function(g,d,m){g=g>>>0,d=d>>>0,m||se(g,d,this.length);let x=d,L=1,V=this[g+--x];for(;x>0&&(L*=256);)V+=this[g+--x]*L;return L*=128,V>=L&&(V-=Math.pow(2,8*d)),V},n.prototype.readInt8=function(g,d){return g=g>>>0,d||se(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},n.prototype.readInt16LE=function(g,d){g=g>>>0,d||se(g,2,this.length);let m=this[g]|this[g+1]<<8;return m&32768?m|4294901760:m},n.prototype.readInt16BE=function(g,d){g=g>>>0,d||se(g,2,this.length);let m=this[g+1]|this[g]<<8;return m&32768?m|4294901760:m},n.prototype.readInt32LE=function(g,d){return g=g>>>0,d||se(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},n.prototype.readInt32BE=function(g,d){return g=g>>>0,d||se(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},n.prototype.readBigInt64LE=ee(function(g){g=g>>>0,ie(g,"offset");let d=this[g],m=this[g+7];(d===void 0||m===void 0)&&ge(g,this.length-8);let x=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(m<<24);return(BigInt(x)<<BigInt(32))+BigInt(d+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),n.prototype.readBigInt64BE=ee(function(g){g=g>>>0,ie(g,"offset");let d=this[g],m=this[g+7];(d===void 0||m===void 0)&&ge(g,this.length-8);let x=(d<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(x)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+m)}),n.prototype.readFloatLE=function(g,d){return g=g>>>0,d||se(g,4,this.length),r.read(this,g,!0,23,4)},n.prototype.readFloatBE=function(g,d){return g=g>>>0,d||se(g,4,this.length),r.read(this,g,!1,23,4)},n.prototype.readDoubleLE=function(g,d){return g=g>>>0,d||se(g,8,this.length),r.read(this,g,!0,52,8)},n.prototype.readDoubleBE=function(g,d){return g=g>>>0,d||se(g,8,this.length),r.read(this,g,!1,52,8)};function de(g,d,m,x,L,V){if(!n.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>L||d<V)throw new RangeError('"value" argument is out of bounds');if(m+x>g.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(g,d,m,x){if(g=+g,d=d>>>0,m=m>>>0,!x){let he=Math.pow(2,8*m)-1;de(this,g,d,m,he,0)}let L=1,V=0;for(this[d]=g&255;++V<m&&(L*=256);)this[d+V]=g/L&255;return d+m},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(g,d,m,x){if(g=+g,d=d>>>0,m=m>>>0,!x){let he=Math.pow(2,8*m)-1;de(this,g,d,m,he,0)}let L=m-1,V=1;for(this[d+L]=g&255;--L>=0&&(V*=256);)this[d+L]=g/V&255;return d+m},n.prototype.writeUint8=n.prototype.writeUInt8=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,1,255,0),this[d]=g&255,d+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,2,65535,0),this[d]=g&255,this[d+1]=g>>>8,d+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,2,65535,0),this[d]=g>>>8,this[d+1]=g&255,d+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,4,4294967295,0),this[d+3]=g>>>24,this[d+2]=g>>>16,this[d+1]=g>>>8,this[d]=g&255,d+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,4,4294967295,0),this[d]=g>>>24,this[d+1]=g>>>16,this[d+2]=g>>>8,this[d+3]=g&255,d+4};function C(g,d,m,x,L){ne(d,x,L,g,m,7);let V=Number(d&BigInt(4294967295));g[m++]=V,V=V>>8,g[m++]=V,V=V>>8,g[m++]=V,V=V>>8,g[m++]=V;let he=Number(d>>BigInt(32)&BigInt(4294967295));return g[m++]=he,he=he>>8,g[m++]=he,he=he>>8,g[m++]=he,he=he>>8,g[m++]=he,m}function J(g,d,m,x,L){ne(d,x,L,g,m,7);let V=Number(d&BigInt(4294967295));g[m+7]=V,V=V>>8,g[m+6]=V,V=V>>8,g[m+5]=V,V=V>>8,g[m+4]=V;let he=Number(d>>BigInt(32)&BigInt(4294967295));return g[m+3]=he,he=he>>8,g[m+2]=he,he=he>>8,g[m+1]=he,he=he>>8,g[m]=he,m+8}n.prototype.writeBigUInt64LE=ee(function(g,d=0){return C(this,g,d,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=ee(function(g,d=0){return J(this,g,d,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(g,d,m,x){if(g=+g,d=d>>>0,!x){let Ce=Math.pow(2,8*m-1);de(this,g,d,m,Ce-1,-Ce)}let L=0,V=1,he=0;for(this[d]=g&255;++L<m&&(V*=256);)g<0&&he===0&&this[d+L-1]!==0&&(he=1),this[d+L]=(g/V>>0)-he&255;return d+m},n.prototype.writeIntBE=function(g,d,m,x){if(g=+g,d=d>>>0,!x){let Ce=Math.pow(2,8*m-1);de(this,g,d,m,Ce-1,-Ce)}let L=m-1,V=1,he=0;for(this[d+L]=g&255;--L>=0&&(V*=256);)g<0&&he===0&&this[d+L+1]!==0&&(he=1),this[d+L]=(g/V>>0)-he&255;return d+m},n.prototype.writeInt8=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,1,127,-128),g<0&&(g=255+g+1),this[d]=g&255,d+1},n.prototype.writeInt16LE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,2,32767,-32768),this[d]=g&255,this[d+1]=g>>>8,d+2},n.prototype.writeInt16BE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,2,32767,-32768),this[d]=g>>>8,this[d+1]=g&255,d+2},n.prototype.writeInt32LE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,4,2147483647,-2147483648),this[d]=g&255,this[d+1]=g>>>8,this[d+2]=g>>>16,this[d+3]=g>>>24,d+4},n.prototype.writeInt32BE=function(g,d,m){return g=+g,d=d>>>0,m||de(this,g,d,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[d]=g>>>24,this[d+1]=g>>>16,this[d+2]=g>>>8,this[d+3]=g&255,d+4},n.prototype.writeBigInt64LE=ee(function(g,d=0){return C(this,g,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=ee(function(g,d=0){return J(this,g,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(g,d,m,x,L,V){if(m+x>g.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Se(g,d,m,x,L){return d=+d,m=m>>>0,L||ae(g,d,m,4),r.write(g,d,m,x,23,4),m+4}n.prototype.writeFloatLE=function(g,d,m){return Se(this,g,d,!0,m)},n.prototype.writeFloatBE=function(g,d,m){return Se(this,g,d,!1,m)};function le(g,d,m,x,L){return d=+d,m=m>>>0,L||ae(g,d,m,8),r.write(g,d,m,x,52,8),m+8}n.prototype.writeDoubleLE=function(g,d,m){return le(this,g,d,!0,m)},n.prototype.writeDoubleBE=function(g,d,m){return le(this,g,d,!1,m)},n.prototype.copy=function(g,d,m,x){if(!n.isBuffer(g))throw new TypeError("argument should be a Buffer");if(m||(m=0),!x&&x!==0&&(x=this.length),d>=g.length&&(d=g.length),d||(d=0),x>0&&x<m&&(x=m),x===m||g.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),g.length-d<x-m&&(x=g.length-d+m);let L=x-m;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,m,x):Uint8Array.prototype.set.call(g,this.subarray(m,x),d),L},n.prototype.fill=function(g,d,m,x){if(typeof g=="string"){if(typeof d=="string"?(x=d,d=0,m=this.length):typeof m=="string"&&(x=m,m=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!n.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(g.length===1){let V=g.charCodeAt(0);(x==="utf8"&&V<128||x==="latin1")&&(g=V)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(d<0||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;d=d>>>0,m=m===void 0?this.length:m>>>0,g||(g=0);let L;if(typeof g=="number")for(L=d;L<m;++L)this[L]=g;else{let V=n.isBuffer(g)?g:n.from(g,x),he=V.length;if(he===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(L=0;L<m-d;++L)this[L+d]=V[L%he]}return this};let D={};function B(g,d,m){D[g]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(g,d){return`The "${g}" argument must be of type number. Received type ${typeof d}`},TypeError),B("ERR_OUT_OF_RANGE",function(g,d,m){let x=`The value of "${g}" is out of range.`,L=m;return Number.isInteger(m)&&Math.abs(m)>2**32?L=X(String(m)):typeof m=="bigint"&&(L=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(L=X(L)),L+="n"),x+=` It must be ${d}. Received ${L}`,x},RangeError);function X(g){let d="",m=g.length,x=g[0]==="-"?1:0;for(;m>=x+4;m-=3)d=`_${g.slice(m-3,m)}${d}`;return`${g.slice(0,m)}${d}`}function ce(g,d,m){ie(d,"offset"),(g[d]===void 0||g[d+m]===void 0)&&ge(d,g.length-(m+1))}function ne(g,d,m,x,L,V){if(g>m||g<d){let he=typeof d=="bigint"?"n":"",Ce;throw d===0||d===BigInt(0)?Ce=`>= 0${he} and < 2${he} ** ${(V+1)*8}${he}`:Ce=`>= -(2${he} ** ${(V+1)*8-1}${he}) and < 2 ** ${(V+1)*8-1}${he}`,new D.ERR_OUT_OF_RANGE("value",Ce,g)}ce(x,L,V)}function ie(g,d){if(typeof g!="number")throw new D.ERR_INVALID_ARG_TYPE(d,"number",g)}function ge(g,d,m){throw Math.floor(g)!==g?(ie(g,m),new D.ERR_OUT_OF_RANGE("offset","an integer",g)):d<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,g)}let pe=/[^+/0-9A-Za-z-_]/g;function U(g){if(g=g.split("=")[0],g=g.trim().replace(pe,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Y(g,d){d=d||1/0;let m,x=g.length,L=null,V=[];for(let he=0;he<x;++he){if(m=g.charCodeAt(he),m>55295&&m<57344){if(!L){if(m>56319){(d-=3)>-1&&V.push(239,191,189);continue}else if(he+1===x){(d-=3)>-1&&V.push(239,191,189);continue}L=m;continue}if(m<56320){(d-=3)>-1&&V.push(239,191,189),L=m;continue}m=(L-55296<<10|m-56320)+65536}else L&&(d-=3)>-1&&V.push(239,191,189);if(L=null,m<128){if((d-=1)<0)break;V.push(m)}else if(m<2048){if((d-=2)<0)break;V.push(m>>6|192,m&63|128)}else if(m<65536){if((d-=3)<0)break;V.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((d-=4)<0)break;V.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return V}function Q(g){let d=[];for(let m=0;m<g.length;++m)d.push(g.charCodeAt(m)&255);return d}function fe(g,d){let m,x,L,V=[];for(let he=0;he<g.length&&!((d-=2)<0);++he)m=g.charCodeAt(he),x=m>>8,L=m%256,V.push(L),V.push(x);return V}function ue(g){return e.toByteArray(U(g))}function H(g,d,m,x){let L;for(L=0;L<x&&!(L+m>=d.length||L>=g.length);++L)d[L+m]=g[L];return L}function te(g,d){return g instanceof d||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===d.name}function j(g){return g!==g}let G=function(){let g="0123456789abcdef",d=new Array(256);for(let m=0;m<16;++m){let x=m*16;for(let L=0;L<16;++L)d[x+L]=g[m]+g[L]}return d}();function ee(g){return typeof BigInt>"u"?me:g}function me(){throw new Error("BigInt not supported")}return _r}var pn,na,qn,ia,_r,sa,Qt,Fi,Au,Tu,yt=gt(()=>{ye(),we(),be(),pn={},na=!1,qn={},ia=!1,_r={},sa=!1,Qt=jp(),Qt.Buffer,Qt.SlowBuffer,Qt.INSPECT_MAX_BYTES,Qt.kMaxLength,Fi=Qt.Buffer,Au=Qt.INSPECT_MAX_BYTES,Tu=Qt.kMaxLength}),we=gt(()=>{yt()}),Fp=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,o){return o===0||o>this.max?!1:(this.aliasToTopic[o]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=r}),ct=_e((e,r)=>{ye(),we(),be(),r.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,o){return t.includes(o)},ArrayPrototypeIndexOf(t,o){return t.indexOf(o)},ArrayPrototypeJoin(t,o){return t.join(o)},ArrayPrototypeMap(t,o){return t.map(o)},ArrayPrototypePop(t,o){return t.pop(o)},ArrayPrototypePush(t,o){return t.push(o)},ArrayPrototypeSlice(t,o,c){return t.slice(o,c)},Error,FunctionPrototypeCall(t,o,...c){return t.call(o,...c)},FunctionPrototypeSymbolHasInstance(t,o){return Function.prototype[Symbol.hasInstance].call(t,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,o){return Object.defineProperties(t,o)},ObjectDefineProperty(t,o,c){return Object.defineProperty(t,o,c)},ObjectGetOwnPropertyDescriptor(t,o){return Object.getOwnPropertyDescriptor(t,o)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,o){return Object.setPrototypeOf(t,o)},Promise,PromisePrototypeCatch(t,o){return t.catch(o)},PromisePrototypeThen(t,o,c){return t.then(o,c)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,o){return t.test(o)},SafeSet:Set,String,StringPrototypeSlice(t,o,c){return t.slice(o,c)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,o,c){return t.set(o,c)},Uint8Array}}),fr=_e((e,r)=>{ye(),we(),be();var t=(yt(),Ke(mt)),o=Object.getPrototypeOf(async function(){}).constructor,c=globalThis.Blob||t.Blob,s=typeof c<"u"?function(l){return l instanceof c}:function(l){return!1},n=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let a="";for(let u=0;u<l.length;u++)a+=`    ${l[u].stack}
`;super(a),this.name="AggregateError",this.errors=l}};r.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(l){let a=!1;return function(...u){a||(a=!0,l.apply(this,u))}},createDeferredPromise:function(){let l,a;return{promise:new Promise((u,h)=>{l=u,a=h}),resolve:l,reject:a}},promisify(l){return new Promise((a,u)=>{l((h,...f)=>h?u(h):a(...f))})},debuglog(){return function(){}},format(l,...a){return l.replace(/%([sdifj])/g,function(...[u,h]){let f=a.shift();return h==="f"?f.toFixed(6):h==="j"?JSON.stringify(f):h==="s"&&typeof f=="object"?`${f.constructor!==Object?f.constructor.name:""} {}`.trim():f.toString()})},inspect(l){switch(typeof l){case"string":if(l.includes("'"))if(l.includes('"')){if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}else return`"${l}"`;return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}},types:{isAsyncFunction(l){return l instanceof o},isArrayBufferView(l){return ArrayBuffer.isView(l)}},isBlob:s},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),qa=_e((e,r)=>{ye(),we(),be();var{AbortController:t,AbortSignal:o}=typeof self<"u"?self:typeof window<"u"?window:void 0;r.exports=t,r.exports.AbortSignal=o,r.exports.default=t}),At=_e((e,r)=>{ye(),we(),be();var{format:t,inspect:o,AggregateError:c}=fr(),s=globalThis.AggregateError||c,n=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",h={};function f(A,T){if(!A)throw new h.ERR_INTERNAL_ASSERTION(T)}function p(A){let T="",k=A.length,R=A[0]==="-"?1:0;for(;k>=R+4;k-=3)T=`_${A.slice(k-3,k)}${T}`;return`${A.slice(0,k)}${T}`}function y(A,T,k){if(typeof T=="function")return f(T.length<=k.length,`Code: ${A}; The provided arguments length (${k.length}) does not match the required ones (${T.length}).`),T(...k);let R=(T.match(/%[dfijoOs]/g)||[]).length;return f(R===k.length,`Code: ${A}; The provided arguments length (${k.length}) does not match the required ones (${R}).`),k.length===0?T:t(T,...k)}function b(A,T,k){k||(k=Error);class R extends k{constructor(...S){super(y(A,T,S))}toString(){return`${this.name} [${A}]: ${this.message}`}}Object.defineProperties(R.prototype,{name:{value:k.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${A}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),R.prototype.code=A,R.prototype[n]=!0,h[A]=R}function w(A){let T=u+A.name;return Object.defineProperty(A,"name",{value:T}),A}function v(A,T){if(A&&T&&A!==T){if(Array.isArray(T.errors))return T.errors.push(A),T;let k=new s([T,A],T.message);return k.code=T.code,k}return A||T}var I=class extends Error{constructor(A="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",T);super(A,T),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(A,T,k)=>{f(typeof A=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let R="The ";A.endsWith(" argument")?R+=`${A} `:R+=`"${A}" ${A.includes(".")?"property":"argument"} `,R+="must be ";let E=[],S=[],P=[];for(let z of T)f(typeof z=="string","All expected entries have to be of type string"),l.includes(z)?E.push(z.toLowerCase()):a.test(z)?S.push(z):(f(z!=="object",'The value "object" should be written as "Object"'),P.push(z));if(S.length>0){let z=E.indexOf("object");z!==-1&&(E.splice(E,z,1),S.push("Object"))}if(E.length>0){switch(E.length){case 1:R+=`of type ${E[0]}`;break;case 2:R+=`one of type ${E[0]} or ${E[1]}`;break;default:{let z=E.pop();R+=`one of type ${E.join(", ")}, or ${z}`}}(S.length>0||P.length>0)&&(R+=" or ")}if(S.length>0){switch(S.length){case 1:R+=`an instance of ${S[0]}`;break;case 2:R+=`an instance of ${S[0]} or ${S[1]}`;break;default:{let z=S.pop();R+=`an instance of ${S.join(", ")}, or ${z}`}}P.length>0&&(R+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(R+="an "),R+=`${P[0]}`;break;case 2:R+=`one of ${P[0]} or ${P[1]}`;break;default:{let z=P.pop();R+=`one of ${P.join(", ")}, or ${z}`}}if(k==null)R+=`. Received ${k}`;else if(typeof k=="function"&&k.name)R+=`. Received function ${k.name}`;else if(typeof k=="object"){var N;if((N=k.constructor)!==null&&N!==void 0&&N.name)R+=`. Received an instance of ${k.constructor.name}`;else{let z=o(k,{depth:-1});R+=`. Received ${z}`}}else{let z=o(k,{colors:!1});z.length>25&&(z=`${z.slice(0,25)}...`),R+=`. Received type ${typeof k} (${z})`}return R},TypeError),b("ERR_INVALID_ARG_VALUE",(A,T,k="is invalid")=>{let R=o(T);return R.length>128&&(R=R.slice(0,128)+"..."),`The ${A.includes(".")?"property":"argument"} '${A}' ${k}. Received ${R}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(A,T,k)=>{var R;let E=k!=null&&(R=k.constructor)!==null&&R!==void 0&&R.name?`instance of ${k.constructor.name}`:`type ${typeof k}`;return`Expected ${A} to be returned from the "${T}" function but got ${E}.`},TypeError),b("ERR_MISSING_ARGS",(...A)=>{f(A.length>0,"At least one arg needs to be specified");let T,k=A.length;switch(A=(Array.isArray(A)?A:[A]).map(R=>`"${R}"`).join(" or "),k){case 1:T+=`The ${A[0]} argument`;break;case 2:T+=`The ${A[0]} and ${A[1]} arguments`;break;default:{let R=A.pop();T+=`The ${A.join(", ")}, and ${R} arguments`}break}return`${T} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(A,T,k)=>{f(T,'Missing "range" argument');let R;return Number.isInteger(k)&&Math.abs(k)>2**32?R=p(String(k)):typeof k=="bigint"?(R=String(k),(k>2n**32n||k<-(2n**32n))&&(R=p(R)),R+="n"):R=o(k),`The value of "${A}" is out of range. It must be ${T}. Received ${R}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),r.exports={AbortError:I,aggregateTwoErrors:w(v),hideStackFrames:w,codes:h}}),Qi=_e((e,r)=>{ye(),we(),be();var{ArrayIsArray:t,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:c,ArrayPrototypeMap:s,NumberIsInteger:n,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:y,StringPrototypeToUpperCase:b,StringPrototypeTrim:w}=ct(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:I,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:R}}=At(),{normalizeEncoding:E}=fr(),{isAsyncFunction:S,isArrayBufferView:P}=fr().types,N={};function z(H){return H===(H|0)}function re(H){return H===H>>>0}var _=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function $(H,te,j){if(typeof H>"u"&&(H=j),typeof H=="string"){if(p(_,H)===null)throw new T(te,H,W);H=h(H,8)}return K(H,te),H}var q=v((H,te,j=u,G=a)=>{if(typeof H!="number")throw new A(te,"number",H);if(!n(H))throw new k(te,"an integer",H);if(H<j||H>G)throw new k(te,`>= ${j} && <= ${G}`,H)}),Z=v((H,te,j=-2147483648,G=2147483647)=>{if(typeof H!="number")throw new A(te,"number",H);if(!n(H))throw new k(te,"an integer",H);if(H<j||H>G)throw new k(te,`>= ${j} && <= ${G}`,H)}),K=v((H,te,j=!1)=>{if(typeof H!="number")throw new A(te,"number",H);if(!n(H))throw new k(te,"an integer",H);let G=j?1:0,ee=4294967295;if(H<G||H>ee)throw new k(te,`>= ${G} && <= ${ee}`,H)});function F(H,te){if(typeof H!="string")throw new A(te,"string",H)}function oe(H,te,j=void 0,G){if(typeof H!="number")throw new A(te,"number",H);if(j!=null&&H<j||G!=null&&H>G||(j!=null||G!=null)&&l(H))throw new k(te,`${j!=null?`>= ${j}`:""}${j!=null&&G!=null?" && ":""}${G!=null?`<= ${G}`:""}`,H)}var se=v((H,te,j)=>{if(!o(j,H)){let G="must be one of: "+c(s(j,ee=>typeof ee=="string"?`'${ee}'`:y(ee)),", ");throw new T(te,H,G)}});function de(H,te){if(typeof H!="boolean")throw new A(te,"boolean",H)}function C(H,te,j){return H==null||!f(H,te)?j:H[te]}var J=v((H,te,j=null)=>{let G=C(j,"allowArray",!1),ee=C(j,"allowFunction",!1);if(!C(j,"nullable",!1)&&H===null||!G&&t(H)||typeof H!="object"&&(!ee||typeof H!="function"))throw new A(te,"Object",H)}),ae=v((H,te)=>{if(H!=null&&typeof H!="object"&&typeof H!="function")throw new A(te,"a dictionary",H)}),Se=v((H,te,j=0)=>{if(!t(H))throw new A(te,"Array",H);if(H.length<j){let G=`must be longer than ${j}`;throw new T(te,H,G)}});function le(H,te){Se(H,te);for(let j=0;j<H.length;j++)F(H[j],`${te}[${j}]`)}function D(H,te){Se(H,te);for(let j=0;j<H.length;j++)de(H[j],`${te}[${j}]`)}function B(H,te="signal"){if(F(H,te),N[H]===void 0)throw N[b(H)]!==void 0?new R(H+" (signals must use all capital letters)"):new R(H)}var X=v((H,te="buffer")=>{if(!P(H))throw new A(te,["Buffer","TypedArray","DataView"],H)});function ce(H,te){let j=E(te),G=H.length;if(j==="hex"&&G%2!==0)throw new T("encoding",te,`is invalid for data of length ${G}`)}function ne(H,te="Port",j=!0){if(typeof H!="number"&&typeof H!="string"||typeof H=="string"&&w(H).length===0||+H!==+H>>>0||H>65535||H===0&&!j)throw new I(te,H,j);return H|0}var ie=v((H,te)=>{if(H!==void 0&&(H===null||typeof H!="object"||!("aborted"in H)))throw new A(te,"AbortSignal",H)}),ge=v((H,te)=>{if(typeof H!="function")throw new A(te,"Function",H)}),pe=v((H,te)=>{if(typeof H!="function"||S(H))throw new A(te,"Function",H)}),U=v((H,te)=>{if(H!==void 0)throw new A(te,"undefined",H)});function Y(H,te,j){if(!o(j,H))throw new A(te,`('${c(j,"|")}')`,H)}var Q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(H,te){if(typeof H>"u"||!p(Q,H))throw new T(te,H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ue(H){if(typeof H=="string")return fe(H,"hints"),H;if(t(H)){let te=H.length,j="";if(te===0)return j;for(let G=0;G<te;G++){let ee=H[G];fe(ee,"hints"),j+=ee,G!==te-1&&(j+=", ")}return j}throw new T("hints",H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}r.exports={isInt32:z,isUint32:re,parseFileMode:$,validateArray:Se,validateStringArray:le,validateBooleanArray:D,validateBoolean:de,validateBuffer:X,validateDictionary:ae,validateEncoding:ce,validateFunction:ge,validateInt32:Z,validateInteger:q,validateNumber:oe,validateObject:J,validateOneOf:se,validatePlainFunction:pe,validatePort:ne,validateSignalName:B,validateString:F,validateUint32:K,validateUndefined:U,validateUnion:Y,validateAbortSignal:ie,validateLinkHeaderValue:ue}}),nn=_e((e,r)=>{ye(),we(),be();var t=r.exports={},o,c;function s(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=s}catch{o=s}try{typeof clearTimeout=="function"?c=clearTimeout:c=n}catch{c=n}})();function l(I){if(o===setTimeout)return setTimeout(I,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(I,0);try{return o(I,0)}catch{try{return o.call(null,I,0)}catch{return o.call(this,I,0)}}}function a(I){if(c===clearTimeout)return clearTimeout(I);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(I);try{return c(I)}catch{try{return c.call(null,I)}catch{return c.call(this,I)}}}var u=[],h=!1,f,p=-1;function y(){!h||!f||(h=!1,f.length?u=f.concat(u):p=-1,u.length&&b())}function b(){if(!h){var I=l(y);h=!0;for(var A=u.length;A;){for(f=u,u=[];++p<A;)f&&f[p].run();p=-1,A=u.length}f=null,h=!1,a(I)}}t.nextTick=function(I){var A=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)A[T-1]=arguments[T];u.push(new w(I,A)),u.length===1&&!h&&l(b)};function w(I,A){this.fun=I,this.array=A}w.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function v(){}t.on=v,t.addListener=v,t.once=v,t.off=v,t.removeListener=v,t.removeAllListeners=v,t.emit=v,t.prependListener=v,t.prependOnceListener=v,t.listeners=function(I){return[]},t.binding=function(I){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(I){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),gr=_e((e,r)=>{ye(),we(),be();var{Symbol:t,SymbolAsyncIterator:o,SymbolIterator:c,SymbolFor:s}=ct(),n=t("kDestroyed"),l=t("kIsErrored"),a=t("kIsReadable"),u=t("kIsDisturbed"),h=s("nodejs.webstream.isClosedPromise"),f=s("nodejs.webstream.controllerErrorFunction");function p(C,J=!1){var ae;return!!(C&&typeof C.pipe=="function"&&typeof C.on=="function"&&(!J||typeof C.pause=="function"&&typeof C.resume=="function")&&(!C._writableState||((ae=C._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!C._writableState||C._readableState))}function y(C){var J;return!!(C&&typeof C.write=="function"&&typeof C.on=="function"&&(!C._readableState||((J=C._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function b(C){return!!(C&&typeof C.pipe=="function"&&C._readableState&&typeof C.on=="function"&&typeof C.write=="function")}function w(C){return C&&(C._readableState||C._writableState||typeof C.write=="function"&&typeof C.on=="function"||typeof C.pipe=="function"&&typeof C.on=="function")}function v(C){return!!(C&&!w(C)&&typeof C.pipeThrough=="function"&&typeof C.getReader=="function"&&typeof C.cancel=="function")}function I(C){return!!(C&&!w(C)&&typeof C.getWriter=="function"&&typeof C.abort=="function")}function A(C){return!!(C&&!w(C)&&typeof C.readable=="object"&&typeof C.writable=="object")}function T(C){return v(C)||I(C)||A(C)}function k(C,J){return C==null?!1:J===!0?typeof C[o]=="function":J===!1?typeof C[c]=="function":typeof C[o]=="function"||typeof C[c]=="function"}function R(C){if(!w(C))return null;let J=C._writableState,ae=C._readableState,Se=J||ae;return!!(C.destroyed||C[n]||Se!=null&&Se.destroyed)}function E(C){if(!y(C))return null;if(C.writableEnded===!0)return!0;let J=C._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function S(C,J){if(!y(C))return null;if(C.writableFinished===!0)return!0;let ae=C._writableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.finished)!="boolean"?null:!!(ae.finished||J===!1&&ae.ended===!0&&ae.length===0)}function P(C){if(!p(C))return null;if(C.readableEnded===!0)return!0;let J=C._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function N(C,J){if(!p(C))return null;let ae=C._readableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.endEmitted)!="boolean"?null:!!(ae.endEmitted||J===!1&&ae.ended===!0&&ae.length===0)}function z(C){return C&&C[a]!=null?C[a]:typeof(C==null?void 0:C.readable)!="boolean"?null:R(C)?!1:p(C)&&C.readable&&!N(C)}function re(C){return typeof(C==null?void 0:C.writable)!="boolean"?null:R(C)?!1:y(C)&&C.writable&&!E(C)}function _(C,J){return w(C)?R(C)?!0:!((J==null?void 0:J.readable)!==!1&&z(C)||(J==null?void 0:J.writable)!==!1&&re(C)):null}function W(C){var J,ae;return w(C)?C.writableErrored?C.writableErrored:(J=(ae=C._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&J!==void 0?J:null:null}function $(C){var J,ae;return w(C)?C.readableErrored?C.readableErrored:(J=(ae=C._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&J!==void 0?J:null:null}function q(C){if(!w(C))return null;if(typeof C.closed=="boolean")return C.closed;let J=C._writableState,ae=C._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(ae==null?void 0:ae.closed)=="boolean"?(J==null?void 0:J.closed)||(ae==null?void 0:ae.closed):typeof C._closed=="boolean"&&Z(C)?C._closed:null}function Z(C){return typeof C._closed=="boolean"&&typeof C._defaultKeepAlive=="boolean"&&typeof C._removedConnection=="boolean"&&typeof C._removedContLen=="boolean"}function K(C){return typeof C._sent100=="boolean"&&Z(C)}function F(C){var J;return typeof C._consuming=="boolean"&&typeof C._dumped=="boolean"&&((J=C.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function oe(C){if(!w(C))return null;let J=C._writableState,ae=C._readableState,Se=J||ae;return!Se&&K(C)||!!(Se&&Se.autoDestroy&&Se.emitClose&&Se.closed===!1)}function se(C){var J;return!!(C&&((J=C[u])!==null&&J!==void 0?J:C.readableDidRead||C.readableAborted))}function de(C){var J,ae,Se,le,D,B,X,ce,ne,ie;return!!(C&&((J=(ae=(Se=(le=(D=(B=C[l])!==null&&B!==void 0?B:C.readableErrored)!==null&&D!==void 0?D:C.writableErrored)!==null&&le!==void 0?le:(X=C._readableState)===null||X===void 0?void 0:X.errorEmitted)!==null&&Se!==void 0?Se:(ce=C._writableState)===null||ce===void 0?void 0:ce.errorEmitted)!==null&&ae!==void 0?ae:(ne=C._readableState)===null||ne===void 0?void 0:ne.errored)!==null&&J!==void 0?J:!((ie=C._writableState)===null||ie===void 0)&&ie.errored))}r.exports={kDestroyed:n,isDisturbed:se,kIsDisturbed:u,isErrored:de,kIsErrored:l,isReadable:z,kIsReadable:a,kIsClosedPromise:h,kControllerErrorFunction:f,isClosed:q,isDestroyed:R,isDuplexNodeStream:b,isFinished:_,isIterable:k,isReadableNodeStream:p,isReadableStream:v,isReadableEnded:P,isReadableFinished:N,isReadableErrored:$,isNodeStream:w,isWebStream:T,isWritable:re,isWritableNodeStream:y,isWritableStream:I,isWritableEnded:E,isWritableFinished:S,isWritableErrored:W,isServerRequest:F,isServerResponse:K,willEmitClose:oe,isTransformStream:A}}),Ir=_e((e,r)=>{ye(),we(),be();var t=nn(),{AbortError:o,codes:c}=At(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:n}=c,{kEmptyObject:l,once:a}=fr(),{validateAbortSignal:u,validateFunction:h,validateObject:f,validateBoolean:p}=Qi(),{Promise:y,PromisePrototypeThen:b}=ct(),{isClosed:w,isReadable:v,isReadableNodeStream:I,isReadableStream:A,isReadableFinished:T,isReadableErrored:k,isWritable:R,isWritableNodeStream:E,isWritableStream:S,isWritableFinished:P,isWritableErrored:N,isNodeStream:z,willEmitClose:re,kIsClosedPromise:_}=gr();function W(F){return F.setHeader&&typeof F.abort=="function"}var $=()=>{};function q(F,oe,se){var de,C;if(arguments.length===2?(se=oe,oe=l):oe==null?oe=l:f(oe,"options"),h(se,"callback"),u(oe.signal,"options.signal"),se=a(se),A(F)||S(F))return Z(F,oe,se);if(!z(F))throw new s("stream",["ReadableStream","WritableStream","Stream"],F);let J=(de=oe.readable)!==null&&de!==void 0?de:I(F),ae=(C=oe.writable)!==null&&C!==void 0?C:E(F),Se=F._writableState,le=F._readableState,D=()=>{F.writable||ce()},B=re(F)&&I(F)===J&&E(F)===ae,X=P(F,!1),ce=()=>{X=!0,F.destroyed&&(B=!1),!(B&&(!F.readable||J))&&(!J||ne)&&se.call(F)},ne=T(F,!1),ie=()=>{ne=!0,F.destroyed&&(B=!1),!(B&&(!F.writable||ae))&&(!ae||X)&&se.call(F)},ge=ue=>{se.call(F,ue)},pe=w(F),U=()=>{pe=!0;let ue=N(F)||k(F);if(ue&&typeof ue!="boolean")return se.call(F,ue);if(J&&!ne&&I(F,!0)&&!T(F,!1))return se.call(F,new n);if(ae&&!X&&!P(F,!1))return se.call(F,new n);se.call(F)},Y=()=>{pe=!0;let ue=N(F)||k(F);if(ue&&typeof ue!="boolean")return se.call(F,ue);se.call(F)},Q=()=>{F.req.on("finish",ce)};W(F)?(F.on("complete",ce),B||F.on("abort",U),F.req?Q():F.on("request",Q)):ae&&!Se&&(F.on("end",D),F.on("close",D)),!B&&typeof F.aborted=="boolean"&&F.on("aborted",U),F.on("end",ie),F.on("finish",ce),oe.error!==!1&&F.on("error",ge),F.on("close",U),pe?t.nextTick(U):Se!=null&&Se.errorEmitted||le!=null&&le.errorEmitted?B||t.nextTick(Y):(!J&&(!B||v(F))&&(X||R(F)===!1)||!ae&&(!B||R(F))&&(ne||v(F)===!1)||le&&F.req&&F.aborted)&&t.nextTick(Y);let fe=()=>{se=$,F.removeListener("aborted",U),F.removeListener("complete",ce),F.removeListener("abort",U),F.removeListener("request",Q),F.req&&F.req.removeListener("finish",ce),F.removeListener("end",D),F.removeListener("close",D),F.removeListener("finish",ce),F.removeListener("end",ie),F.removeListener("error",ge),F.removeListener("close",U)};if(oe.signal&&!pe){let ue=()=>{let H=se;fe(),H.call(F,new o(void 0,{cause:oe.signal.reason}))};if(oe.signal.aborted)t.nextTick(ue);else{let H=se;se=a((...te)=>{oe.signal.removeEventListener("abort",ue),H.apply(F,te)}),oe.signal.addEventListener("abort",ue)}}return fe}function Z(F,oe,se){let de=!1,C=$;if(oe.signal)if(C=()=>{de=!0,se.call(F,new o(void 0,{cause:oe.signal.reason}))},oe.signal.aborted)t.nextTick(C);else{let ae=se;se=a((...Se)=>{oe.signal.removeEventListener("abort",C),ae.apply(F,Se)}),oe.signal.addEventListener("abort",C)}let J=(...ae)=>{de||t.nextTick(()=>se.apply(F,ae))};return b(F[_].promise,J,J),$}function K(F,oe){var se;let de=!1;return oe===null&&(oe=l),(se=oe)!==null&&se!==void 0&&se.cleanup&&(p(oe.cleanup,"cleanup"),de=oe.cleanup),new y((C,J)=>{let ae=q(F,oe,Se=>{de&&ae(),Se?J(Se):C()})})}r.exports=q,r.exports.finished=K}),In=_e((e,r)=>{ye(),we(),be();var t=nn(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:s}=At(),{Symbol:n}=ct(),{kDestroyed:l,isDestroyed:a,isFinished:u,isServerRequest:h}=gr(),f=n("kDestroy"),p=n("kConstruct");function y(_,W,$){_&&(_.stack,W&&!W.errored&&(W.errored=_),$&&!$.errored&&($.errored=_))}function b(_,W){let $=this._readableState,q=this._writableState,Z=q||$;return q!=null&&q.destroyed||$!=null&&$.destroyed?(typeof W=="function"&&W(),this):(y(_,q,$),q&&(q.destroyed=!0),$&&($.destroyed=!0),Z.constructed?w(this,_,W):this.once(f,function(K){w(this,o(K,_),W)}),this)}function w(_,W,$){let q=!1;function Z(K){if(q)return;q=!0;let F=_._readableState,oe=_._writableState;y(K,oe,F),oe&&(oe.closed=!0),F&&(F.closed=!0),typeof $=="function"&&$(K),K?t.nextTick(v,_,K):t.nextTick(I,_)}try{_._destroy(W||null,Z)}catch(K){Z(K)}}function v(_,W){A(_,W),I(_)}function I(_){let W=_._readableState,$=_._writableState;$&&($.closeEmitted=!0),W&&(W.closeEmitted=!0),($!=null&&$.emitClose||W!=null&&W.emitClose)&&_.emit("close")}function A(_,W){let $=_._readableState,q=_._writableState;q!=null&&q.errorEmitted||$!=null&&$.errorEmitted||(q&&(q.errorEmitted=!0),$&&($.errorEmitted=!0),_.emit("error",W))}function T(){let _=this._readableState,W=this._writableState;_&&(_.constructed=!0,_.closed=!1,_.closeEmitted=!1,_.destroyed=!1,_.errored=null,_.errorEmitted=!1,_.reading=!1,_.ended=_.readable===!1,_.endEmitted=_.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function k(_,W,$){let q=_._readableState,Z=_._writableState;if(Z!=null&&Z.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||Z!=null&&Z.autoDestroy?_.destroy(W):W&&(W.stack,Z&&!Z.errored&&(Z.errored=W),q&&!q.errored&&(q.errored=W),$?t.nextTick(A,_,W):A(_,W))}function R(_,W){if(typeof _._construct!="function")return;let $=_._readableState,q=_._writableState;$&&($.constructed=!1),q&&(q.constructed=!1),_.once(p,W),!(_.listenerCount(p)>1)&&t.nextTick(E,_)}function E(_){let W=!1;function $(q){if(W){k(_,q??new c);return}W=!0;let Z=_._readableState,K=_._writableState,F=K||Z;Z&&(Z.constructed=!0),K&&(K.constructed=!0),F.destroyed?_.emit(f,q):q?k(_,q,!0):t.nextTick(S,_)}try{_._construct(q=>{t.nextTick($,q)})}catch(q){t.nextTick($,q)}}function S(_){_.emit(p)}function P(_){return(_==null?void 0:_.setHeader)&&typeof _.abort=="function"}function N(_){_.emit("close")}function z(_,W){_.emit("error",W),t.nextTick(N,_)}function re(_,W){!_||a(_)||(!W&&!u(_)&&(W=new s),h(_)?(_.socket=null,_.destroy(W)):P(_)?_.abort():P(_.req)?_.req.abort():typeof _.destroy=="function"?_.destroy(W):typeof _.close=="function"?_.close():W?t.nextTick(z,_,W):t.nextTick(N,_),_.destroyed||(_[l]=!0))}r.exports={construct:R,destroyer:re,destroy:b,undestroy:T,errorOrDestroy:k}});function Ve(){Ve.init.call(this)}function _i(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ku(e){return e._maxListeners===void 0?Ve.defaultMaxListeners:e._maxListeners}function Gl(e,r,t,o){var c,s,n,l;if(_i(t),(s=e._events)===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),s=e._events),n=s[r]),n===void 0)n=s[r]=t,++e._eventsCount;else if(typeof n=="function"?n=s[r]=o?[t,n]:[n,t]:o?n.unshift(t):n.push(t),(c=ku(e))>0&&n.length>c&&!n.warned){n.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=r,a.count=n.length,l=a,console&&console.warn&&console.warn(l)}return e}function qp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ql(e,r,t){var o={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},c=qp.bind(o);return c.listener=t,o.wrapFn=c,c}function Jl(e,r,t){var o=e._events;if(o===void 0)return[];var c=o[r];return c===void 0?[]:typeof c=="function"?t?[c.listener||c]:[c]:t?function(s){for(var n=new Array(s.length),l=0;l<n.length;++l)n[l]=s[l].listener||s[l];return n}(c):Iu(c,c.length)}function Zl(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function Iu(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e[o];return t}var Xl,ec,xr,Cs,Rs,xs,kt,tc=gt(()=>{ye(),we(),be(),xr=typeof Reflect=="object"?Reflect:null,Cs=xr&&typeof xr.apply=="function"?xr.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},ec=xr&&typeof xr.ownKeys=="function"?xr.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Rs=Number.isNaN||function(e){return e!=e},Xl=Ve,Ve.EventEmitter=Ve,Ve.prototype._events=void 0,Ve.prototype._eventsCount=0,Ve.prototype._maxListeners=void 0,xs=10,Object.defineProperty(Ve,"defaultMaxListeners",{enumerable:!0,get:function(){return xs},set:function(e){if(typeof e!="number"||e<0||Rs(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");xs=e}}),Ve.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ve.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Rs(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ve.prototype.getMaxListeners=function(){return ku(this)},Ve.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var n=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw n.context=s,n}var l=c[e];if(l===void 0)return!1;if(typeof l=="function")Cs(l,this,r);else{var a=l.length,u=Iu(l,a);for(t=0;t<a;++t)Cs(u[t],this,r)}return!0},Ve.prototype.addListener=function(e,r){return Gl(this,e,r,!1)},Ve.prototype.on=Ve.prototype.addListener,Ve.prototype.prependListener=function(e,r){return Gl(this,e,r,!0)},Ve.prototype.once=function(e,r){return _i(r),this.on(e,Ql(this,e,r)),this},Ve.prototype.prependOnceListener=function(e,r){return _i(r),this.prependListener(e,Ql(this,e,r)),this},Ve.prototype.removeListener=function(e,r){var t,o,c,s,n;if(_i(r),(o=this._events)===void 0)return this;if((t=o[e])===void 0)return this;if(t===r||t.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(c=-1,s=t.length-1;s>=0;s--)if(t[s]===r||t[s].listener===r){n=t[s].listener,c=s;break}if(c<0)return this;c===0?t.shift():function(l,a){for(;a+1<l.length;a++)l[a]=l[a+1];l.pop()}(t,c),t.length===1&&(o[e]=t[0]),o.removeListener!==void 0&&this.emit("removeListener",e,n||r)}return this},Ve.prototype.off=Ve.prototype.removeListener,Ve.prototype.removeAllListeners=function(e){var r,t,o;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var c,s=Object.keys(t);for(o=0;o<s.length;++o)(c=s[o])!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(r=t[e])=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this},Ve.prototype.listeners=function(e){return Jl(this,e,!0)},Ve.prototype.rawListeners=function(e){return Jl(this,e,!1)},Ve.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):Zl.call(e,r)},Ve.prototype.listenerCount=Zl,Ve.prototype.eventNames=function(){return this._eventsCount>0?ec(this._events):[]},kt=Xl,kt.EventEmitter,kt.defaultMaxListeners,kt.init,kt.listenerCount,kt.EventEmitter,kt.defaultMaxListeners,kt.init,kt.listenerCount}),sn={};rn(sn,{EventEmitter:()=>Cu,default:()=>kt,defaultMaxListeners:()=>Ru,init:()=>xu,listenerCount:()=>Ou,on:()=>Pu,once:()=>Bu});var Cu,Ru,xu,Ou,Pu,Bu,Cn=gt(()=>{ye(),we(),be(),tc(),tc(),kt.once=function(e,r){return new Promise((t,o)=>{function c(...n){s!==void 0&&e.removeListener("error",s),t(n)}let s;r!=="error"&&(s=n=>{e.removeListener(name,c),o(n)},e.once("error",s)),e.once(r,c)})},kt.on=function(e,r){let t=[],o=[],c=null,s=!1,n={async next(){let u=t.shift();if(u)return createIterResult(u,!1);if(c){let h=Promise.reject(c);return c=null,h}return s?createIterResult(void 0,!0):new Promise((h,f)=>o.push({resolve:h,reject:f}))},async return(){e.removeListener(r,l),e.removeListener("error",a),s=!0;for(let u of o)u.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(u){c=u,e.removeListener(r,l),e.removeListener("error",a)},[Symbol.asyncIterator](){return this}};return e.on(r,l),e.on("error",a),n;function l(...u){let h=o.shift();h?h.resolve(createIterResult(u,!1)):t.push(u)}function a(u){s=!0;let h=o.shift();h?h.reject(u):c=u,n.return()}},{EventEmitter:Cu,defaultMaxListeners:Ru,init:xu,listenerCount:Ou,on:Pu,once:Bu}=kt}),Wa=_e((e,r)=>{ye(),we(),be();var{ArrayIsArray:t,ObjectSetPrototypeOf:o}=ct(),{EventEmitter:c}=(Cn(),Ke(sn));function s(l){c.call(this,l)}o(s.prototype,c.prototype),o(s,c),s.prototype.pipe=function(l,a){let u=this;function h(I){l.writable&&l.write(I)===!1&&u.pause&&u.pause()}u.on("data",h);function f(){u.readable&&u.resume&&u.resume()}l.on("drain",f),!l._isStdio&&(!a||a.end!==!1)&&(u.on("end",y),u.on("close",b));let p=!1;function y(){p||(p=!0,l.end())}function b(){p||(p=!0,typeof l.destroy=="function"&&l.destroy())}function w(I){v(),c.listenerCount(this,"error")===0&&this.emit("error",I)}n(u,"error",w),n(l,"error",w);function v(){u.removeListener("data",h),l.removeListener("drain",f),u.removeListener("end",y),u.removeListener("close",b),u.removeListener("error",w),l.removeListener("error",w),u.removeListener("end",v),u.removeListener("close",v),l.removeListener("close",v)}return u.on("end",v),u.on("close",v),l.on("close",v),l.emit("pipe",u),l};function n(l,a,u){if(typeof l.prependListener=="function")return l.prependListener(a,u);!l._events||!l._events[a]?l.on(a,u):t(l._events[a])?l._events[a].unshift(u):l._events[a]=[u,l._events[a]]}r.exports={Stream:s,prependListener:n}}),Ji=_e((e,r)=>{ye(),we(),be();var{AbortError:t,codes:o}=At(),{isNodeStream:c,isWebStream:s,kControllerErrorFunction:n}=gr(),l=Ir(),{ERR_INVALID_ARG_TYPE:a}=o,u=(h,f)=>{if(typeof h!="object"||!("aborted"in h))throw new a(f,"AbortSignal",h)};r.exports.addAbortSignal=function(h,f){if(u(h,"signal"),!c(f)&&!s(f))throw new a("stream",["ReadableStream","WritableStream","Stream"],f);return r.exports.addAbortSignalNoValidate(h,f)},r.exports.addAbortSignalNoValidate=function(h,f){if(typeof h!="object"||!("aborted"in h))return f;let p=c(f)?()=>{f.destroy(new t(void 0,{cause:h.reason}))}:()=>{f[n](new t(void 0,{cause:h.reason}))};return h.aborted?p():(h.addEventListener("abort",p),l(f,()=>h.removeEventListener("abort",p))),f}}),Wp=_e((e,r)=>{ye(),we(),be();var{StringPrototypeSlice:t,SymbolIterator:o,TypedArrayPrototypeSet:c,Uint8Array:s}=ct(),{Buffer:n}=(yt(),Ke(mt)),{inspect:l}=fr();r.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let u={data:a,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(a){let u={data:a,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let u=this.head,h=""+u.data;for(;(u=u.next)!==null;)h+=a+u.data;return h}concat(a){if(this.length===0)return n.alloc(0);let u=n.allocUnsafe(a>>>0),h=this.head,f=0;for(;h;)c(u,h.data,f),f+=h.data.length,h=h.next;return u}consume(a,u){let h=this.head.data;if(a<h.length){let f=h.slice(0,a);return this.head.data=h.slice(a),f}return a===h.length?this.shift():u?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[o](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let u="",h=this.head,f=0;do{let p=h.data;if(a>p.length)u+=p,a-=p.length;else{a===p.length?(u+=p,++f,h.next?this.head=h.next:this.head=this.tail=null):(u+=t(p,0,a),this.head=h,h.data=t(p,a));break}++f}while((h=h.next)!==null);return this.length-=f,u}_getBuffer(a){let u=n.allocUnsafe(a),h=a,f=this.head,p=0;do{let y=f.data;if(a>y.length)c(u,y,h-a),a-=y.length;else{a===y.length?(c(u,y,h-a),++p,f.next?this.head=f.next:this.head=this.tail=null):(c(u,new s(y.buffer,y.byteOffset,a),h-a),this.head=f,f.data=y.slice(a));break}++p}while((f=f.next)!==null);return this.length-=p,u}[Symbol.for("nodejs.util.inspect.custom")](a,u){return l(this,{...u,depth:0,customInspect:!1})}}}),$a=_e((e,r)=>{ye(),we(),be();var{MathFloor:t,NumberIsInteger:o}=ct(),{ERR_INVALID_ARG_VALUE:c}=At().codes;function s(a,u,h){return a.highWaterMark!=null?a.highWaterMark:u?a[h]:null}function n(a){return a?16:16*1024}function l(a,u,h,f){let p=s(u,f,h);if(p!=null){if(!o(p)||p<0){let y=f?`options.${h}`:"options.highWaterMark";throw new c(y,p)}return t(p)}return n(a.objectMode)}r.exports={getHighWaterMark:l,getDefaultHighWaterMark:n}});function rc(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=r),[t,t===r?0:4-t%4]}function $p(e,r,t){for(var o,c,s=[],n=r;n<t;n+=3)o=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(255&e[n+2]),s.push(Lt[(c=o)>>18&63]+Lt[c>>12&63]+Lt[c>>6&63]+Lt[63&c]);return s.join("")}function ar(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,ve.prototype),r}function ve(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return oa(e)}return Mu(e,r,t)}function Mu(e,r,t){if(typeof e=="string")return function(s,n){if(typeof n=="string"&&n!==""||(n="utf8"),!ve.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var l=0|Lu(s,n),a=ar(l),u=a.write(s,n);return u!==l&&(a=a.slice(0,u)),a}(e,r);if(ArrayBuffer.isView(e))return Os(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(lr(e,ArrayBuffer)||e&&lr(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(lr(e,SharedArrayBuffer)||e&&lr(e.buffer,SharedArrayBuffer)))return Hp(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return ve.from(o,r,t);var c=function(s){if(ve.isBuffer(s)){var n=0|Ha(s.length),l=ar(n);return l.length===0||s.copy(l,0,0,n),l}if(s.length!==void 0)return typeof s.length!="number"||za(s.length)?ar(0):Os(s);if(s.type==="Buffer"&&Array.isArray(s.data))return Os(s.data)}(e);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ve.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Nu(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function oa(e){return Nu(e),ar(e<0?0:0|Ha(e))}function Os(e){for(var r=e.length<0?0:0|Ha(e.length),t=ar(r),o=0;o<r;o+=1)t[o]=255&e[o];return t}function Hp(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=r===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,r):new Uint8Array(e,r,t),Object.setPrototypeOf(o,ve.prototype),o}function Ha(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Lu(e,r){if(ve.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||lr(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&t===0)return 0;for(var c=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return aa(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return Fu(e).length;default:if(c)return o?-1:aa(e).length;r=(""+r).toLowerCase(),c=!0}}function zp(e,r,t){var o=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return eg(this,r,t);case"utf8":case"utf-8":return Du(this,r,t);case"ascii":return Zp(this,r,t);case"latin1":case"binary":return Xp(this,r,t);case"base64":return Jp(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tg(this,r,t);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Or(e,r,t){var o=e[r];e[r]=e[t],e[t]=o}function nc(e,r,t,o,c){if(e.length===0)return-1;if(typeof t=="string"?(o=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),za(t=+t)&&(t=c?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(c)return-1;t=e.length-1}else if(t<0){if(!c)return-1;t=0}if(typeof r=="string"&&(r=ve.from(r,o)),ve.isBuffer(r))return r.length===0?-1:ic(e,r,t,o,c);if(typeof r=="number")return r&=255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):ic(e,[r],t,o,c);throw new TypeError("val must be string, number or Buffer")}function ic(e,r,t,o,c){var s,n=1,l=e.length,a=r.length;if(o!==void 0&&((o=String(o).toLowerCase())==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(e.length<2||r.length<2)return-1;n=2,l/=2,a/=2,t/=2}function u(y,b){return n===1?y[b]:y.readUInt16BE(b*n)}if(c){var h=-1;for(s=t;s<l;s++)if(u(e,s)===u(r,h===-1?0:s-h)){if(h===-1&&(h=s),s-h+1===a)return h*n}else h!==-1&&(s-=s-h),h=-1}else for(t+a>l&&(t=l-a),s=t;s>=0;s--){for(var f=!0,p=0;p<a;p++)if(u(e,s+p)!==u(r,p)){f=!1;break}if(f)return s}return-1}function Vp(e,r,t,o){t=Number(t)||0;var c=e.length-t;o?(o=Number(o))>c&&(o=c):o=c;var s=r.length;o>s/2&&(o=s/2);for(var n=0;n<o;++n){var l=parseInt(r.substr(2*n,2),16);if(za(l))return n;e[t+n]=l}return n}function Kp(e,r,t,o){return Zi(aa(r,e.length-t),e,t,o)}function Uu(e,r,t,o){return Zi(function(c){for(var s=[],n=0;n<c.length;++n)s.push(255&c.charCodeAt(n));return s}(r),e,t,o)}function Yp(e,r,t,o){return Uu(e,r,t,o)}function Gp(e,r,t,o){return Zi(Fu(r),e,t,o)}function Qp(e,r,t,o){return Zi(function(c,s){for(var n,l,a,u=[],h=0;h<c.length&&!((s-=2)<0);++h)n=c.charCodeAt(h),l=n>>8,a=n%256,u.push(a),u.push(l);return u}(r,e.length-t),e,t,o)}function Jp(e,r,t){return r===0&&t===e.length?qi.fromByteArray(e):qi.fromByteArray(e.slice(r,t))}function Du(e,r,t){t=Math.min(e.length,t);for(var o=[],c=r;c<t;){var s,n,l,a,u=e[c],h=null,f=u>239?4:u>223?3:u>191?2:1;if(c+f<=t)switch(f){case 1:u<128&&(h=u);break;case 2:(192&(s=e[c+1]))==128&&(a=(31&u)<<6|63&s)>127&&(h=a);break;case 3:s=e[c+1],n=e[c+2],(192&s)==128&&(192&n)==128&&(a=(15&u)<<12|(63&s)<<6|63&n)>2047&&(a<55296||a>57343)&&(h=a);break;case 4:s=e[c+1],n=e[c+2],l=e[c+3],(192&s)==128&&(192&n)==128&&(192&l)==128&&(a=(15&u)<<18|(63&s)<<12|(63&n)<<6|63&l)>65535&&a<1114112&&(h=a)}h===null?(h=65533,f=1):h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h),c+=f}return function(p){var y=p.length;if(y<=4096)return String.fromCharCode.apply(String,p);for(var b="",w=0;w<y;)b+=String.fromCharCode.apply(String,p.slice(w,w+=4096));return b}(o)}function Zp(e,r,t){var o="";t=Math.min(e.length,t);for(var c=r;c<t;++c)o+=String.fromCharCode(127&e[c]);return o}function Xp(e,r,t){var o="";t=Math.min(e.length,t);for(var c=r;c<t;++c)o+=String.fromCharCode(e[c]);return o}function eg(e,r,t){var o=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>o)&&(t=o);for(var c="",s=r;s<t;++s)c+=Wu[e[s]];return c}function tg(e,r,t){for(var o=e.slice(r,t),c="",s=0;s<o.length;s+=2)c+=String.fromCharCode(o[s]+256*o[s+1]);return c}function ut(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function St(e,r,t,o,c,s){if(!ve.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>c||r<s)throw new RangeError('"value" argument is out of bounds');if(t+o>e.length)throw new RangeError("Index out of range")}function ju(e,r,t,o,c,s){if(t+o>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function sc(e,r,t,o,c){return r=+r,t>>>=0,c||ju(e,0,t,4),jr.write(e,r,t,o,23,4),t+4}function oc(e,r,t,o,c){return r=+r,t>>>=0,c||ju(e,0,t,8),jr.write(e,r,t,o,52,8),t+8}function aa(e,r){var t;r=r||1/0;for(var o=e.length,c=null,s=[],n=0;n<o;++n){if((t=e.charCodeAt(n))>55295&&t<57344){if(!c){if(t>56319){(r-=3)>-1&&s.push(239,191,189);continue}if(n+1===o){(r-=3)>-1&&s.push(239,191,189);continue}c=t;continue}if(t<56320){(r-=3)>-1&&s.push(239,191,189),c=t;continue}t=65536+(c-55296<<10|t-56320)}else c&&(r-=3)>-1&&s.push(239,191,189);if(c=null,t<128){if((r-=1)<0)break;s.push(t)}else if(t<2048){if((r-=2)<0)break;s.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;s.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return s}function Fu(e){return qi.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(qu,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(e))}function Zi(e,r,t,o){for(var c=0;c<o&&!(c+t>=r.length||c>=e.length);++c)r[c+t]=e[c];return c}function lr(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function za(e){return e!=e}function ac(e,r){for(var t in e)r[t]=e[t]}function Pr(e,r,t){return Mt(e,r,t)}function Mn(e){var r;switch(this.encoding=function(t){var o=function(c){if(!c)return"utf8";for(var s;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(s)return;c=(""+c).toLowerCase(),s=!0}}(t);if(typeof o!="string"&&(Wi.isEncoding===la||!la(t)))throw new Error("Unknown encoding: "+t);return o||t}(e),this.encoding){case"utf16le":this.text=ng,this.end=ig,r=4;break;case"utf8":this.fillLast=rg,r=4;break;case"base64":this.text=sg,this.end=og,r=3;break;default:return this.write=ag,this.end=lg,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Wi.allocUnsafe(r)}function Ps(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function rg(e){var r=this.lastTotal-this.lastNeed,t=function(o,c,s){if((192&c[0])!=128)return o.lastNeed=0,"�";if(o.lastNeed>1&&c.length>1){if((192&c[1])!=128)return o.lastNeed=1,"�";if(o.lastNeed>2&&c.length>2&&(192&c[2])!=128)return o.lastNeed=2,"�"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length,void 0)}function ng(e,r){if((e.length-r)%2==0){var t=e.toString("utf16le",r);if(t){var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function ig(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function sg(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function og(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function ag(e){return e.toString(this.encoding)}function lg(e){return e&&e.length?this.write(e):""}var lc,Lt,Tt,cc,ci,Br,uc,hc,Ft,qi,jr,Bs,qu,Wu,Nn,Ln,Mt,fc,mn,Wi,la,dc=gt(()=>{for(ye(),we(),be(),lc={byteLength:function(e){var r=rc(e),t=r[0],o=r[1];return 3*(t+o)/4-o},toByteArray:function(e){var r,t,o=rc(e),c=o[0],s=o[1],n=new cc(function(u,h,f){return 3*(h+f)/4-f}(0,c,s)),l=0,a=s>0?c-4:c;for(t=0;t<a;t+=4)r=Tt[e.charCodeAt(t)]<<18|Tt[e.charCodeAt(t+1)]<<12|Tt[e.charCodeAt(t+2)]<<6|Tt[e.charCodeAt(t+3)],n[l++]=r>>16&255,n[l++]=r>>8&255,n[l++]=255&r;return s===2&&(r=Tt[e.charCodeAt(t)]<<2|Tt[e.charCodeAt(t+1)]>>4,n[l++]=255&r),s===1&&(r=Tt[e.charCodeAt(t)]<<10|Tt[e.charCodeAt(t+1)]<<4|Tt[e.charCodeAt(t+2)]>>2,n[l++]=r>>8&255,n[l++]=255&r),n},fromByteArray:function(e){for(var r,t=e.length,o=t%3,c=[],s=0,n=t-o;s<n;s+=16383)c.push($p(e,s,s+16383>n?n:s+16383));return o===1?(r=e[t-1],c.push(Lt[r>>2]+Lt[r<<4&63]+"==")):o===2&&(r=(e[t-2]<<8)+e[t-1],c.push(Lt[r>>10]+Lt[r>>4&63]+Lt[r<<2&63]+"=")),c.join("")}},Lt=[],Tt=[],cc=typeof Uint8Array<"u"?Uint8Array:Array,ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Br=0,uc=ci.length;Br<uc;++Br)Lt[Br]=ci[Br],Tt[ci.charCodeAt(Br)]=Br;Tt[45]=62,Tt[95]=63,hc={read:function(e,r,t,o,c){var s,n,l=8*c-o-1,a=(1<<l)-1,u=a>>1,h=-7,f=t?c-1:0,p=t?-1:1,y=e[r+f];for(f+=p,s=y&(1<<-h)-1,y>>=-h,h+=l;h>0;s=256*s+e[r+f],f+=p,h-=8);for(n=s&(1<<-h)-1,s>>=-h,h+=o;h>0;n=256*n+e[r+f],f+=p,h-=8);if(s===0)s=1-u;else{if(s===a)return n?NaN:1/0*(y?-1:1);n+=Math.pow(2,o),s-=u}return(y?-1:1)*n*Math.pow(2,s-o)},write:function(e,r,t,o,c,s){var n,l,a,u=8*s-c-1,h=(1<<u)-1,f=h>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:s-1,b=o?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,n=h):(n=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-n))<1&&(n--,a*=2),(r+=n+f>=1?p/a:p*Math.pow(2,1-f))*a>=2&&(n++,a/=2),n+f>=h?(l=0,n=h):n+f>=1?(l=(r*a-1)*Math.pow(2,c),n+=f):(l=r*Math.pow(2,f-1)*Math.pow(2,c),n=0));c>=8;e[t+y]=255&l,y+=b,l/=256,c-=8);for(n=n<<c|l,u+=c;u>0;e[t+y]=255&n,y+=b,n/=256,u-=8);e[t+y-b]|=128*w}},Ft={},qi=lc,jr=hc,Bs=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Ft.Buffer=ve,Ft.SlowBuffer=function(e){return+e!=e&&(e=0),ve.alloc(+e)},Ft.INSPECT_MAX_BYTES=50,Ft.kMaxLength=2147483647,ve.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}(),ve.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ve.prototype,"parent",{enumerable:!0,get:function(){if(ve.isBuffer(this))return this.buffer}}),Object.defineProperty(ve.prototype,"offset",{enumerable:!0,get:function(){if(ve.isBuffer(this))return this.byteOffset}}),ve.poolSize=8192,ve.from=function(e,r,t){return Mu(e,r,t)},Object.setPrototypeOf(ve.prototype,Uint8Array.prototype),Object.setPrototypeOf(ve,Uint8Array),ve.alloc=function(e,r,t){return function(o,c,s){return Nu(o),o<=0?ar(o):c!==void 0?typeof s=="string"?ar(o).fill(c,s):ar(o).fill(c):ar(o)}(e,r,t)},ve.allocUnsafe=function(e){return oa(e)},ve.allocUnsafeSlow=function(e){return oa(e)},ve.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ve.prototype},ve.compare=function(e,r){if(lr(e,Uint8Array)&&(e=ve.from(e,e.offset,e.byteLength)),lr(r,Uint8Array)&&(r=ve.from(r,r.offset,r.byteLength)),!ve.isBuffer(e)||!ve.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var t=e.length,o=r.length,c=0,s=Math.min(t,o);c<s;++c)if(e[c]!==r[c]){t=e[c],o=r[c];break}return t<o?-1:o<t?1:0},ve.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ve.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ve.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var o=ve.allocUnsafe(r),c=0;for(t=0;t<e.length;++t){var s=e[t];if(lr(s,Uint8Array)&&(s=ve.from(s)),!ve.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,c),c+=s.length}return o},ve.byteLength=Lu,ve.prototype._isBuffer=!0,ve.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Or(this,r,r+1);return this},ve.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Or(this,r,r+3),Or(this,r+1,r+2);return this},ve.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Or(this,r,r+7),Or(this,r+1,r+6),Or(this,r+2,r+5),Or(this,r+3,r+4);return this},ve.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Du(this,0,e):zp.apply(this,arguments)},ve.prototype.toLocaleString=ve.prototype.toString,ve.prototype.equals=function(e){if(!ve.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||ve.compare(this,e)===0},ve.prototype.inspect=function(){var e="",r=Ft.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},Bs&&(ve.prototype[Bs]=ve.prototype.inspect),ve.prototype.compare=function(e,r,t,o,c){if(lr(e,Uint8Array)&&(e=ve.from(e,e.offset,e.byteLength)),!ve.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),o===void 0&&(o=0),c===void 0&&(c=this.length),r<0||t>e.length||o<0||c>this.length)throw new RangeError("out of range index");if(o>=c&&r>=t)return 0;if(o>=c)return-1;if(r>=t)return 1;if(this===e)return 0;for(var s=(c>>>=0)-(o>>>=0),n=(t>>>=0)-(r>>>=0),l=Math.min(s,n),a=this.slice(o,c),u=e.slice(r,t),h=0;h<l;++h)if(a[h]!==u[h]){s=a[h],n=u[h];break}return s<n?-1:n<s?1:0},ve.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},ve.prototype.indexOf=function(e,r,t){return nc(this,e,r,t,!0)},ve.prototype.lastIndexOf=function(e,r,t){return nc(this,e,r,t,!1)},ve.prototype.write=function(e,r,t,o){if(r===void 0)o="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")o=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(t)?(t>>>=0,o===void 0&&(o="utf8")):(o=t,t=void 0)}var c=this.length-r;if((t===void 0||t>c)&&(t=c),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return Vp(this,e,r,t);case"utf8":case"utf-8":return Kp(this,e,r,t);case"ascii":return Uu(this,e,r,t);case"latin1":case"binary":return Yp(this,e,r,t);case"base64":return Gp(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qp(this,e,r,t);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},ve.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ve.prototype.slice=function(e,r){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(r=r===void 0?t:~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),r<e&&(r=e);var o=this.subarray(e,r);return Object.setPrototypeOf(o,ve.prototype),o},ve.prototype.readUIntLE=function(e,r,t){e>>>=0,r>>>=0,t||ut(e,r,this.length);for(var o=this[e],c=1,s=0;++s<r&&(c*=256);)o+=this[e+s]*c;return o},ve.prototype.readUIntBE=function(e,r,t){e>>>=0,r>>>=0,t||ut(e,r,this.length);for(var o=this[e+--r],c=1;r>0&&(c*=256);)o+=this[e+--r]*c;return o},ve.prototype.readUInt8=function(e,r){return e>>>=0,r||ut(e,1,this.length),this[e]},ve.prototype.readUInt16LE=function(e,r){return e>>>=0,r||ut(e,2,this.length),this[e]|this[e+1]<<8},ve.prototype.readUInt16BE=function(e,r){return e>>>=0,r||ut(e,2,this.length),this[e]<<8|this[e+1]},ve.prototype.readUInt32LE=function(e,r){return e>>>=0,r||ut(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ve.prototype.readUInt32BE=function(e,r){return e>>>=0,r||ut(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ve.prototype.readIntLE=function(e,r,t){e>>>=0,r>>>=0,t||ut(e,r,this.length);for(var o=this[e],c=1,s=0;++s<r&&(c*=256);)o+=this[e+s]*c;return o>=(c*=128)&&(o-=Math.pow(2,8*r)),o},ve.prototype.readIntBE=function(e,r,t){e>>>=0,r>>>=0,t||ut(e,r,this.length);for(var o=r,c=1,s=this[e+--o];o>0&&(c*=256);)s+=this[e+--o]*c;return s>=(c*=128)&&(s-=Math.pow(2,8*r)),s},ve.prototype.readInt8=function(e,r){return e>>>=0,r||ut(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ve.prototype.readInt16LE=function(e,r){e>>>=0,r||ut(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},ve.prototype.readInt16BE=function(e,r){e>>>=0,r||ut(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},ve.prototype.readInt32LE=function(e,r){return e>>>=0,r||ut(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ve.prototype.readInt32BE=function(e,r){return e>>>=0,r||ut(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ve.prototype.readFloatLE=function(e,r){return e>>>=0,r||ut(e,4,this.length),jr.read(this,e,!0,23,4)},ve.prototype.readFloatBE=function(e,r){return e>>>=0,r||ut(e,4,this.length),jr.read(this,e,!1,23,4)},ve.prototype.readDoubleLE=function(e,r){return e>>>=0,r||ut(e,8,this.length),jr.read(this,e,!0,52,8)},ve.prototype.readDoubleBE=function(e,r){return e>>>=0,r||ut(e,8,this.length),jr.read(this,e,!1,52,8)},ve.prototype.writeUIntLE=function(e,r,t,o){e=+e,r>>>=0,t>>>=0,o||St(this,e,r,t,Math.pow(2,8*t)-1,0);var c=1,s=0;for(this[r]=255&e;++s<t&&(c*=256);)this[r+s]=e/c&255;return r+t},ve.prototype.writeUIntBE=function(e,r,t,o){e=+e,r>>>=0,t>>>=0,o||St(this,e,r,t,Math.pow(2,8*t)-1,0);var c=t-1,s=1;for(this[r+c]=255&e;--c>=0&&(s*=256);)this[r+c]=e/s&255;return r+t},ve.prototype.writeUInt8=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,1,255,0),this[r]=255&e,r+1},ve.prototype.writeUInt16LE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},ve.prototype.writeUInt16BE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},ve.prototype.writeUInt32LE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},ve.prototype.writeUInt32BE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},ve.prototype.writeIntLE=function(e,r,t,o){if(e=+e,r>>>=0,!o){var c=Math.pow(2,8*t-1);St(this,e,r,t,c-1,-c)}var s=0,n=1,l=0;for(this[r]=255&e;++s<t&&(n*=256);)e<0&&l===0&&this[r+s-1]!==0&&(l=1),this[r+s]=(e/n>>0)-l&255;return r+t},ve.prototype.writeIntBE=function(e,r,t,o){if(e=+e,r>>>=0,!o){var c=Math.pow(2,8*t-1);St(this,e,r,t,c-1,-c)}var s=t-1,n=1,l=0;for(this[r+s]=255&e;--s>=0&&(n*=256);)e<0&&l===0&&this[r+s+1]!==0&&(l=1),this[r+s]=(e/n>>0)-l&255;return r+t},ve.prototype.writeInt8=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},ve.prototype.writeInt16LE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},ve.prototype.writeInt16BE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},ve.prototype.writeInt32LE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},ve.prototype.writeInt32BE=function(e,r,t){return e=+e,r>>>=0,t||St(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},ve.prototype.writeFloatLE=function(e,r,t){return sc(this,e,r,!0,t)},ve.prototype.writeFloatBE=function(e,r,t){return sc(this,e,r,!1,t)},ve.prototype.writeDoubleLE=function(e,r,t){return oc(this,e,r,!0,t)},ve.prototype.writeDoubleBE=function(e,r,t){return oc(this,e,r,!1,t)},ve.prototype.copy=function(e,r,t,o){if(!ve.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),o||o===0||(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<t&&(o=t),o===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-t&&(o=e.length-r+t);var c=o-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,t,o);else if(this===e&&t<r&&r<o)for(var s=c-1;s>=0;--s)e[s+r]=this[s+t];else Uint8Array.prototype.set.call(e,this.subarray(t,o),r);return c},ve.prototype.fill=function(e,r,t,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,t=this.length):typeof t=="string"&&(o=t,t=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!ve.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var c=e.charCodeAt(0);(o==="utf8"&&c<128||o==="latin1")&&(e=c)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var s;if(r>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(s=r;s<t;++s)this[s]=e;else{var n=ve.isBuffer(e)?e:ve.from(e,o),l=n.length;if(l===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<t-r;++s)this[s+r]=n[s%l]}return this},qu=/[^+/0-9A-Za-z-_]/g,Wu=function(){for(var e=new Array(256),r=0;r<16;++r)for(var t=16*r,o=0;o<16;++o)e[t+o]="0123456789abcdef"[r]+"0123456789abcdef"[o];return e}(),Ft.Buffer,Ft.INSPECT_MAX_BYTES,Ft.kMaxLength,Nn={},Ln=Ft,Mt=Ln.Buffer,Mt.from&&Mt.alloc&&Mt.allocUnsafe&&Mt.allocUnsafeSlow?Nn=Ln:(ac(Ln,Nn),Nn.Buffer=Pr),Pr.prototype=Object.create(Mt.prototype),ac(Mt,Pr),Pr.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Mt(e,r,t)},Pr.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var o=Mt(e);return r!==void 0?typeof t=="string"?o.fill(r,t):o.fill(r):o.fill(0),o},Pr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Mt(e)},Pr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ln.SlowBuffer(e)},fc=Nn,mn={},Wi=fc.Buffer,la=Wi.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},mn.StringDecoder=Mn,Mn.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if((r=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""},Mn.prototype.end=function(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"�":r},Mn.prototype.text=function(e,r){var t=function(c,s,n){var l=s.length-1;if(l<n)return 0;var a=Ps(s[l]);return a>=0?(a>0&&(c.lastNeed=a-1),a):--l<n||a===-2?0:(a=Ps(s[l]))>=0?(a>0&&(c.lastNeed=a-2),a):--l<n||a===-2?0:(a=Ps(s[l]))>=0?(a>0&&(a===2?a=0:c.lastNeed=a-3),a):0}(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var o=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",r,o)},Mn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},mn.StringDecoder,mn.StringDecoder}),$u={};rn($u,{StringDecoder:()=>Hu,default:()=>mn});var Hu,cg=gt(()=>{ye(),we(),be(),dc(),dc(),Hu=mn.StringDecoder}),zu=_e((e,r)=>{ye(),we(),be();var t=nn(),{PromisePrototypeThen:o,SymbolAsyncIterator:c,SymbolIterator:s}=ct(),{Buffer:n}=(yt(),Ke(mt)),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:a}=At().codes;function u(h,f,p){let y;if(typeof f=="string"||f instanceof n)return new h({objectMode:!0,...p,read(){this.push(f),this.push(null)}});let b;if(f&&f[c])b=!0,y=f[c]();else if(f&&f[s])b=!1,y=f[s]();else throw new l("iterable",["Iterable"],f);let w=new h({objectMode:!0,highWaterMark:1,...p}),v=!1;w._read=function(){v||(v=!0,A())},w._destroy=function(T,k){o(I(T),()=>t.nextTick(k,T),R=>t.nextTick(k,R||T))};async function I(T){let k=T!=null,R=typeof y.throw=="function";if(k&&R){let{value:E,done:S}=await y.throw(T);if(await E,S)return}if(typeof y.return=="function"){let{value:E}=await y.return();await E}}async function A(){for(;;){try{let{value:T,done:k}=b?await y.next():y.next();if(k)w.push(null);else{let R=T&&typeof T.then=="function"?await T:T;if(R===null)throw v=!1,new a;if(w.push(R))continue;v=!1}}catch(T){w.destroy(T)}break}}return w}r.exports=u}),Xi=_e((e,r)=>{ye(),we(),be();var t=nn(),{ArrayPrototypeIndexOf:o,NumberIsInteger:c,NumberIsNaN:s,NumberParseInt:n,ObjectDefineProperties:l,ObjectKeys:a,ObjectSetPrototypeOf:u,Promise:h,SafeSet:f,SymbolAsyncIterator:p,Symbol:y}=ct();r.exports=C,C.ReadableState=de;var{EventEmitter:b}=(Cn(),Ke(sn)),{Stream:w,prependListener:v}=Wa(),{Buffer:I}=(yt(),Ke(mt)),{addAbortSignal:A}=Ji(),T=Ir(),k=fr().debuglog("stream",d=>{k=d}),R=Wp(),E=In(),{getHighWaterMark:S,getDefaultHighWaterMark:P}=$a(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:re,ERR_OUT_OF_RANGE:_,ERR_STREAM_PUSH_AFTER_EOF:W,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$}}=At(),{validateObject:q}=Qi(),Z=y("kPaused"),{StringDecoder:K}=(cg(),Ke($u)),F=zu();u(C.prototype,w.prototype),u(C,w);var oe=()=>{},{errorOrDestroy:se}=E;function de(d,m,x){typeof x!="boolean"&&(x=m instanceof dr()),this.objectMode=!!(d&&d.objectMode),x&&(this.objectMode=this.objectMode||!!(d&&d.readableObjectMode)),this.highWaterMark=d?S(this,d,"readableHighWaterMark",x):P(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Z]=null,this.errorEmitted=!1,this.emitClose=!d||d.emitClose!==!1,this.autoDestroy=!d||d.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=d&&d.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,d&&d.encoding&&(this.decoder=new K(d.encoding),this.encoding=d.encoding)}function C(d){if(!(this instanceof C))return new C(d);let m=this instanceof dr();this._readableState=new de(d,this,m),d&&(typeof d.read=="function"&&(this._read=d.read),typeof d.destroy=="function"&&(this._destroy=d.destroy),typeof d.construct=="function"&&(this._construct=d.construct),d.signal&&!m&&A(d.signal,this)),w.call(this,d),E.construct(this,()=>{this._readableState.needReadable&&ne(this,this._readableState)})}C.prototype.destroy=E.destroy,C.prototype._undestroy=E.undestroy,C.prototype._destroy=function(d,m){m(d)},C.prototype[b.captureRejectionSymbol]=function(d){this.destroy(d)},C.prototype.push=function(d,m){return J(this,d,m,!1)},C.prototype.unshift=function(d,m){return J(this,d,m,!0)};function J(d,m,x,L){k("readableAddChunk",m);let V=d._readableState,he;if(V.objectMode||(typeof m=="string"?(x=x||V.defaultEncoding,V.encoding!==x&&(L&&V.encoding?m=I.from(m,x).toString(V.encoding):(m=I.from(m,x),x=""))):m instanceof I?x="":w._isUint8Array(m)?(m=w._uint8ArrayToBuffer(m),x=""):m!=null&&(he=new z("chunk",["string","Buffer","Uint8Array"],m))),he)se(d,he);else if(m===null)V.reading=!1,B(d,V);else if(V.objectMode||m&&m.length>0)if(L)if(V.endEmitted)se(d,new $);else{if(V.destroyed||V.errored)return!1;ae(d,V,m,!0)}else if(V.ended)se(d,new W);else{if(V.destroyed||V.errored)return!1;V.reading=!1,V.decoder&&!x?(m=V.decoder.write(m),V.objectMode||m.length!==0?ae(d,V,m,!1):ne(d,V)):ae(d,V,m,!1)}else L||(V.reading=!1,ne(d,V));return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function ae(d,m,x,L){m.flowing&&m.length===0&&!m.sync&&d.listenerCount("data")>0?(m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null,m.dataEmitted=!0,d.emit("data",x)):(m.length+=m.objectMode?1:x.length,L?m.buffer.unshift(x):m.buffer.push(x),m.needReadable&&X(d)),ne(d,m)}C.prototype.isPaused=function(){let d=this._readableState;return d[Z]===!0||d.flowing===!1},C.prototype.setEncoding=function(d){let m=new K(d);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;let x=this._readableState.buffer,L="";for(let V of x)L+=m.write(V);return x.clear(),L!==""&&x.push(L),this._readableState.length=L.length,this};var Se=1073741824;function le(d){if(d>Se)throw new _("size","<= 1GiB",d);return d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++,d}function D(d,m){return d<=0||m.length===0&&m.ended?0:m.objectMode?1:s(d)?m.flowing&&m.length?m.buffer.first().length:m.length:d<=m.length?d:m.ended?m.length:0}C.prototype.read=function(d){k("read",d),d===void 0?d=NaN:c(d)||(d=n(d,10));let m=this._readableState,x=d;if(d>m.highWaterMark&&(m.highWaterMark=le(d)),d!==0&&(m.emittedReadable=!1),d===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return k("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?j(this):X(this),null;if(d=D(d,m),d===0&&m.ended)return m.length===0&&j(this),null;let L=m.needReadable;if(k("need readable",L),(m.length===0||m.length-d<m.highWaterMark)&&(L=!0,k("length less than watermark",L)),m.ended||m.reading||m.destroyed||m.errored||!m.constructed)L=!1,k("reading, ended or constructing",L);else if(L){k("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0);try{this._read(m.highWaterMark)}catch(he){se(this,he)}m.sync=!1,m.reading||(d=D(x,m))}let V;return d>0?V=te(d,m):V=null,V===null?(m.needReadable=m.length<=m.highWaterMark,d=0):(m.length-=d,m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null),m.length===0&&(m.ended||(m.needReadable=!0),x!==d&&m.ended&&j(this)),V!==null&&!m.errorEmitted&&!m.closeEmitted&&(m.dataEmitted=!0,this.emit("data",V)),V};function B(d,m){if(k("onEofChunk"),!m.ended){if(m.decoder){let x=m.decoder.end();x&&x.length&&(m.buffer.push(x),m.length+=m.objectMode?1:x.length)}m.ended=!0,m.sync?X(d):(m.needReadable=!1,m.emittedReadable=!0,ce(d))}}function X(d){let m=d._readableState;k("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(k("emitReadable",m.flowing),m.emittedReadable=!0,t.nextTick(ce,d))}function ce(d){let m=d._readableState;k("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&!m.errored&&(m.length||m.ended)&&(d.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,fe(d)}function ne(d,m){!m.readingMore&&m.constructed&&(m.readingMore=!0,t.nextTick(ie,d,m))}function ie(d,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){let x=m.length;if(k("maybeReadMore read 0"),d.read(0),x===m.length)break}m.readingMore=!1}C.prototype._read=function(d){throw new re("_read()")},C.prototype.pipe=function(d,m){let x=this,L=this._readableState;L.pipes.length===1&&(L.multiAwaitDrain||(L.multiAwaitDrain=!0,L.awaitDrainWriters=new f(L.awaitDrainWriters?[L.awaitDrainWriters]:[]))),L.pipes.push(d),k("pipe count=%d opts=%j",L.pipes.length,m);let V=(!m||m.end!==!1)&&d!==t.stdout&&d!==t.stderr?Ce:at;L.endEmitted?t.nextTick(V):x.once("end",V),d.on("unpipe",he);function he(dt,st){k("onunpipe"),dt===x&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,Ie())}function Ce(){k("onend"),d.end()}let Be,Ne=!1;function Ie(){k("cleanup"),d.removeListener("close",it),d.removeListener("finish",Xe),Be&&d.removeListener("drain",Be),d.removeListener("error",He),d.removeListener("unpipe",he),x.removeListener("end",Ce),x.removeListener("end",at),x.removeListener("data",Re),Ne=!0,Be&&L.awaitDrainWriters&&(!d._writableState||d._writableState.needDrain)&&Be()}function Me(){Ne||(L.pipes.length===1&&L.pipes[0]===d?(k("false write response, pause",0),L.awaitDrainWriters=d,L.multiAwaitDrain=!1):L.pipes.length>1&&L.pipes.includes(d)&&(k("false write response, pause",L.awaitDrainWriters.size),L.awaitDrainWriters.add(d)),x.pause()),Be||(Be=ge(x,d),d.on("drain",Be))}x.on("data",Re);function Re(dt){k("ondata");let st=d.write(dt);k("dest.write",st),st===!1&&Me()}function He(dt){if(k("onerror",dt),at(),d.removeListener("error",He),d.listenerCount("error")===0){let st=d._writableState||d._readableState;st&&!st.errorEmitted?se(d,dt):d.emit("error",dt)}}v(d,"error",He);function it(){d.removeListener("finish",Xe),at()}d.once("close",it);function Xe(){k("onfinish"),d.removeListener("close",it),at()}d.once("finish",Xe);function at(){k("unpipe"),x.unpipe(d)}return d.emit("pipe",x),d.writableNeedDrain===!0?L.flowing&&Me():L.flowing||(k("pipe resume"),x.resume()),d};function ge(d,m){return function(){let x=d._readableState;x.awaitDrainWriters===m?(k("pipeOnDrain",1),x.awaitDrainWriters=null):x.multiAwaitDrain&&(k("pipeOnDrain",x.awaitDrainWriters.size),x.awaitDrainWriters.delete(m)),(!x.awaitDrainWriters||x.awaitDrainWriters.size===0)&&d.listenerCount("data")&&d.resume()}}C.prototype.unpipe=function(d){let m=this._readableState,x={hasUnpiped:!1};if(m.pipes.length===0)return this;if(!d){let V=m.pipes;m.pipes=[],this.pause();for(let he=0;he<V.length;he++)V[he].emit("unpipe",this,{hasUnpiped:!1});return this}let L=o(m.pipes,d);return L===-1?this:(m.pipes.splice(L,1),m.pipes.length===0&&this.pause(),d.emit("unpipe",this,x),this)},C.prototype.on=function(d,m){let x=w.prototype.on.call(this,d,m),L=this._readableState;return d==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):d==="readable"&&!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,k("on readable",L.length,L.reading),L.length?X(this):L.reading||t.nextTick(U,this)),x},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(d,m){let x=w.prototype.removeListener.call(this,d,m);return d==="readable"&&t.nextTick(pe,this),x},C.prototype.off=C.prototype.removeListener,C.prototype.removeAllListeners=function(d){let m=w.prototype.removeAllListeners.apply(this,arguments);return(d==="readable"||d===void 0)&&t.nextTick(pe,this),m};function pe(d){let m=d._readableState;m.readableListening=d.listenerCount("readable")>0,m.resumeScheduled&&m[Z]===!1?m.flowing=!0:d.listenerCount("data")>0?d.resume():m.readableListening||(m.flowing=null)}function U(d){k("readable nexttick read 0"),d.read(0)}C.prototype.resume=function(){let d=this._readableState;return d.flowing||(k("resume"),d.flowing=!d.readableListening,Y(this,d)),d[Z]=!1,this};function Y(d,m){m.resumeScheduled||(m.resumeScheduled=!0,t.nextTick(Q,d,m))}function Q(d,m){k("resume",m.reading),m.reading||d.read(0),m.resumeScheduled=!1,d.emit("resume"),fe(d),m.flowing&&!m.reading&&d.read(0)}C.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function fe(d){let m=d._readableState;for(k("flow",m.flowing);m.flowing&&d.read()!==null;);}C.prototype.wrap=function(d){let m=!1;d.on("data",L=>{!this.push(L)&&d.pause&&(m=!0,d.pause())}),d.on("end",()=>{this.push(null)}),d.on("error",L=>{se(this,L)}),d.on("close",()=>{this.destroy()}),d.on("destroy",()=>{this.destroy()}),this._read=()=>{m&&d.resume&&(m=!1,d.resume())};let x=a(d);for(let L=1;L<x.length;L++){let V=x[L];this[V]===void 0&&typeof d[V]=="function"&&(this[V]=d[V].bind(d))}return this},C.prototype[p]=function(){return ue(this)},C.prototype.iterator=function(d){return d!==void 0&&q(d,"options"),ue(this,d)};function ue(d,m){typeof d.read!="function"&&(d=C.wrap(d,{objectMode:!0}));let x=H(d,m);return x.stream=d,x}async function*H(d,m){let x=oe;function L(Ce){this===d?(x(),x=oe):x=Ce}d.on("readable",L);let V,he=T(d,{writable:!1},Ce=>{V=Ce?N(V,Ce):null,x(),x=oe});try{for(;;){let Ce=d.destroyed?null:d.read();if(Ce!==null)yield Ce;else{if(V)throw V;if(V===null)return;await new h(L)}}}catch(Ce){throw V=N(V,Ce),V}finally{(V||(m==null?void 0:m.destroyOnReturn)!==!1)&&(V===void 0||d._readableState.autoDestroy)?E.destroyer(d,null):(d.off("readable",L),he())}}l(C.prototype,{readable:{__proto__:null,get(){let d=this._readableState;return!!d&&d.readable!==!1&&!d.destroyed&&!d.errorEmitted&&!d.endEmitted},set(d){this._readableState&&(this._readableState.readable=!!d)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(d){this._readableState&&(this._readableState.flowing=d)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(d){this._readableState&&(this._readableState.destroyed=d)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(de.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(d){this[Z]=!!d}}}),C._fromList=te;function te(d,m){if(m.length===0)return null;let x;return m.objectMode?x=m.buffer.shift():!d||d>=m.length?(m.decoder?x=m.buffer.join(""):m.buffer.length===1?x=m.buffer.first():x=m.buffer.concat(m.length),m.buffer.clear()):x=m.buffer.consume(d,m.decoder),x}function j(d){let m=d._readableState;k("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,t.nextTick(G,m,d))}function G(d,m){if(k("endReadableNT",d.endEmitted,d.length),!d.errored&&!d.closeEmitted&&!d.endEmitted&&d.length===0){if(d.endEmitted=!0,m.emit("end"),m.writable&&m.allowHalfOpen===!1)t.nextTick(ee,m);else if(d.autoDestroy){let x=m._writableState;(!x||x.autoDestroy&&(x.finished||x.writable===!1))&&m.destroy()}}}function ee(d){d.writable&&!d.writableEnded&&!d.destroyed&&d.end()}C.from=function(d,m){return F(C,d,m)};var me;function g(){return me===void 0&&(me={}),me}C.fromWeb=function(d,m){return g().newStreamReadableFromReadableStream(d,m)},C.toWeb=function(d,m){return g().newReadableStreamFromStreamReadable(d,m)},C.wrap=function(d,m){var x,L;return new C({objectMode:(x=(L=d.readableObjectMode)!==null&&L!==void 0?L:d.objectMode)!==null&&x!==void 0?x:!0,...m,destroy(V,he){E.destroyer(d,V),he(V)}}).wrap(d)}}),Vu=_e((e,r)=>{ye(),we(),be();var t=nn(),{ArrayPrototypeSlice:o,Error:c,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:n,ObjectDefineProperties:l,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:f}=ct();r.exports=K,K.WritableState=q;var{EventEmitter:p}=(Cn(),Ke(sn)),y=Wa().Stream,{Buffer:b}=(yt(),Ke(mt)),w=In(),{addAbortSignal:v}=Ji(),{getHighWaterMark:I,getDefaultHighWaterMark:A}=$a(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:R,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:N,ERR_STREAM_WRITE_AFTER_END:z,ERR_UNKNOWN_ENCODING:re}=At().codes,{errorOrDestroy:_}=w;a(K.prototype,y.prototype),a(K,y);function W(){}var $=h("kOnFinished");function q(U,Y,Q){typeof Q!="boolean"&&(Q=Y instanceof dr()),this.objectMode=!!(U&&U.objectMode),Q&&(this.objectMode=this.objectMode||!!(U&&U.writableObjectMode)),this.highWaterMark=U?I(this,U,"writableHighWaterMark",Q):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let fe=!!(U&&U.decodeStrings===!1);this.decodeStrings=!fe,this.defaultEncoding=U&&U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=C.bind(void 0,Y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!U||U.emitClose!==!1,this.autoDestroy=!U||U.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[$]=[]}function Z(U){U.buffered=[],U.bufferedIndex=0,U.allBuffers=!0,U.allNoop=!0}q.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},n(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K(U){let Y=this instanceof dr();if(!Y&&!s(K,this))return new K(U);this._writableState=new q(U,this,Y),U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final),typeof U.construct=="function"&&(this._construct=U.construct),U.signal&&v(U.signal,this)),y.call(this,U),w.construct(this,()=>{let Q=this._writableState;Q.writing||le(this,Q),ce(this,Q)})}n(K,f,{__proto__:null,value:function(U){return s(this,U)?!0:this!==K?!1:U&&U._writableState instanceof q}}),K.prototype.pipe=function(){_(this,new E)};function F(U,Y,Q,fe){let ue=U._writableState;if(typeof Q=="function")fe=Q,Q=ue.defaultEncoding;else{if(!Q)Q=ue.defaultEncoding;else if(Q!=="buffer"&&!b.isEncoding(Q))throw new re(Q);typeof fe!="function"&&(fe=W)}if(Y===null)throw new N;if(!ue.objectMode)if(typeof Y=="string")ue.decodeStrings!==!1&&(Y=b.from(Y,Q),Q="buffer");else if(Y instanceof b)Q="buffer";else if(y._isUint8Array(Y))Y=y._uint8ArrayToBuffer(Y),Q="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],Y);let H;return ue.ending?H=new z:ue.destroyed&&(H=new S("write")),H?(t.nextTick(fe,H),_(U,H,!0),H):(ue.pendingcb++,oe(U,ue,Y,Q,fe))}K.prototype.write=function(U,Y,Q){return F(this,U,Y,Q)===!0},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){let U=this._writableState;U.corked&&(U.corked--,U.writing||le(this,U))},K.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=u(U)),!b.isEncoding(U))throw new re(U);return this._writableState.defaultEncoding=U,this};function oe(U,Y,Q,fe,ue){let H=Y.objectMode?1:Q.length;Y.length+=H;let te=Y.length<Y.highWaterMark;return te||(Y.needDrain=!0),Y.writing||Y.corked||Y.errored||!Y.constructed?(Y.buffered.push({chunk:Q,encoding:fe,callback:ue}),Y.allBuffers&&fe!=="buffer"&&(Y.allBuffers=!1),Y.allNoop&&ue!==W&&(Y.allNoop=!1)):(Y.writelen=H,Y.writecb=ue,Y.writing=!0,Y.sync=!0,U._write(Q,fe,Y.onwrite),Y.sync=!1),te&&!Y.errored&&!Y.destroyed}function se(U,Y,Q,fe,ue,H,te){Y.writelen=fe,Y.writecb=te,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new S("write")):Q?U._writev(ue,Y.onwrite):U._write(ue,H,Y.onwrite),Y.sync=!1}function de(U,Y,Q,fe){--Y.pendingcb,fe(Q),Se(Y),_(U,Q)}function C(U,Y){let Q=U._writableState,fe=Q.sync,ue=Q.writecb;if(typeof ue!="function"){_(U,new R);return}Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0,Y?(Y.stack,Q.errored||(Q.errored=Y),U._readableState&&!U._readableState.errored&&(U._readableState.errored=Y),fe?t.nextTick(de,U,Q,Y,ue):de(U,Q,Y,ue)):(Q.buffered.length>Q.bufferedIndex&&le(U,Q),fe?Q.afterWriteTickInfo!==null&&Q.afterWriteTickInfo.cb===ue?Q.afterWriteTickInfo.count++:(Q.afterWriteTickInfo={count:1,cb:ue,stream:U,state:Q},t.nextTick(J,Q.afterWriteTickInfo)):ae(U,Q,1,ue))}function J({stream:U,state:Y,count:Q,cb:fe}){return Y.afterWriteTickInfo=null,ae(U,Y,Q,fe)}function ae(U,Y,Q,fe){for(!Y.ending&&!U.destroyed&&Y.length===0&&Y.needDrain&&(Y.needDrain=!1,U.emit("drain"));Q-- >0;)Y.pendingcb--,fe();Y.destroyed&&Se(Y),ce(U,Y)}function Se(U){if(U.writing)return;for(let ue=U.bufferedIndex;ue<U.buffered.length;++ue){var Y;let{chunk:H,callback:te}=U.buffered[ue],j=U.objectMode?1:H.length;U.length-=j,te((Y=U.errored)!==null&&Y!==void 0?Y:new S("write"))}let Q=U[$].splice(0);for(let ue=0;ue<Q.length;ue++){var fe;Q[ue]((fe=U.errored)!==null&&fe!==void 0?fe:new S("end"))}Z(U)}function le(U,Y){if(Y.corked||Y.bufferProcessing||Y.destroyed||!Y.constructed)return;let{buffered:Q,bufferedIndex:fe,objectMode:ue}=Y,H=Q.length-fe;if(!H)return;let te=fe;if(Y.bufferProcessing=!0,H>1&&U._writev){Y.pendingcb-=H-1;let j=Y.allNoop?W:ee=>{for(let me=te;me<Q.length;++me)Q[me].callback(ee)},G=Y.allNoop&&te===0?Q:o(Q,te);G.allBuffers=Y.allBuffers,se(U,Y,!0,Y.length,G,"",j),Z(Y)}else{do{let{chunk:j,encoding:G,callback:ee}=Q[te];Q[te++]=null;let me=ue?1:j.length;se(U,Y,!1,me,j,G,ee)}while(te<Q.length&&!Y.writing);te===Q.length?Z(Y):te>256?(Q.splice(0,te),Y.bufferedIndex=0):Y.bufferedIndex=te}Y.bufferProcessing=!1}K.prototype._write=function(U,Y,Q){if(this._writev)this._writev([{chunk:U,encoding:Y}],Q);else throw new k("_write()")},K.prototype._writev=null,K.prototype.end=function(U,Y,Q){let fe=this._writableState;typeof U=="function"?(Q=U,U=null,Y=null):typeof Y=="function"&&(Q=Y,Y=null);let ue;if(U!=null){let H=F(this,U,Y);H instanceof c&&(ue=H)}return fe.corked&&(fe.corked=1,this.uncork()),ue||(!fe.errored&&!fe.ending?(fe.ending=!0,ce(this,fe,!0),fe.ended=!0):fe.finished?ue=new P("end"):fe.destroyed&&(ue=new S("end"))),typeof Q=="function"&&(ue||fe.finished?t.nextTick(Q,ue):fe[$].push(Q)),this};function D(U){return U.ending&&!U.destroyed&&U.constructed&&U.length===0&&!U.errored&&U.buffered.length===0&&!U.finished&&!U.writing&&!U.errorEmitted&&!U.closeEmitted}function B(U,Y){let Q=!1;function fe(ue){if(Q){_(U,ue??R());return}if(Q=!0,Y.pendingcb--,ue){let H=Y[$].splice(0);for(let te=0;te<H.length;te++)H[te](ue);_(U,ue,Y.sync)}else D(Y)&&(Y.prefinished=!0,U.emit("prefinish"),Y.pendingcb++,t.nextTick(ne,U,Y))}Y.sync=!0,Y.pendingcb++;try{U._final(fe)}catch(ue){fe(ue)}Y.sync=!1}function X(U,Y){!Y.prefinished&&!Y.finalCalled&&(typeof U._final=="function"&&!Y.destroyed?(Y.finalCalled=!0,B(U,Y)):(Y.prefinished=!0,U.emit("prefinish")))}function ce(U,Y,Q){D(Y)&&(X(U,Y),Y.pendingcb===0&&(Q?(Y.pendingcb++,t.nextTick((fe,ue)=>{D(ue)?ne(fe,ue):ue.pendingcb--},U,Y)):D(Y)&&(Y.pendingcb++,ne(U,Y))))}function ne(U,Y){Y.pendingcb--,Y.finished=!0;let Q=Y[$].splice(0);for(let fe=0;fe<Q.length;fe++)Q[fe]();if(U.emit("finish"),Y.autoDestroy){let fe=U._readableState;(!fe||fe.autoDestroy&&(fe.endEmitted||fe.readable===!1))&&U.destroy()}}l(K.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(U){this._writableState&&(this._writableState.destroyed=U)}},writable:{__proto__:null,get(){let U=this._writableState;return!!U&&U.writable!==!1&&!U.destroyed&&!U.errored&&!U.ending&&!U.ended},set(U){this._writableState&&(this._writableState.writable=!!U)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let U=this._writableState;return U?!U.destroyed&&!U.ending&&U.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ie=w.destroy;K.prototype.destroy=function(U,Y){let Q=this._writableState;return!Q.destroyed&&(Q.bufferedIndex<Q.buffered.length||Q[$].length)&&t.nextTick(Se,Q),ie.call(this,U,Y),this},K.prototype._undestroy=w.undestroy,K.prototype._destroy=function(U,Y){Y(U)},K.prototype[p.captureRejectionSymbol]=function(U){this.destroy(U)};var ge;function pe(){return ge===void 0&&(ge={}),ge}K.fromWeb=function(U,Y){return pe().newStreamWritableFromWritableStream(U,Y)},K.toWeb=function(U){return pe().newWritableStreamFromStreamWritable(U)}}),ug=_e((e,r)=>{ye(),we(),be();var t=nn(),o=(yt(),Ke(mt)),{isReadable:c,isWritable:s,isIterable:n,isNodeStream:l,isReadableNodeStream:a,isWritableNodeStream:u,isDuplexNodeStream:h}=gr(),f=Ir(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b}}=At(),{destroyer:w}=In(),v=dr(),I=Xi(),{createDeferredPromise:A}=fr(),T=zu(),k=globalThis.Blob||o.Blob,R=typeof k<"u"?function(re){return re instanceof k}:function(re){return!1},E=globalThis.AbortController||qa().AbortController,{FunctionPrototypeCall:S}=ct(),P=class extends v{constructor(re){super(re),(re==null?void 0:re.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(re==null?void 0:re.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};r.exports=function re(_,W){if(h(_))return _;if(a(_))return z({readable:_});if(u(_))return z({writable:_});if(l(_))return z({writable:!1,readable:!1});if(typeof _=="function"){let{value:q,write:Z,final:K,destroy:F}=N(_);if(n(q))return T(P,q,{objectMode:!0,write:Z,final:K,destroy:F});let oe=q==null?void 0:q.then;if(typeof oe=="function"){let se,de=S(oe,q,C=>{if(C!=null)throw new b("nully","body",C)},C=>{w(se,C)});return se=new P({objectMode:!0,readable:!1,write:Z,final(C){K(async()=>{try{await de,t.nextTick(C,null)}catch(J){t.nextTick(C,J)}})},destroy:F})}throw new b("Iterable, AsyncIterable or AsyncFunction",W,q)}if(R(_))return re(_.arrayBuffer());if(n(_))return T(P,_,{objectMode:!0,writable:!1});if(typeof(_==null?void 0:_.writable)=="object"||typeof(_==null?void 0:_.readable)=="object"){let q=_!=null&&_.readable?a(_==null?void 0:_.readable)?_==null?void 0:_.readable:re(_.readable):void 0,Z=_!=null&&_.writable?u(_==null?void 0:_.writable)?_==null?void 0:_.writable:re(_.writable):void 0;return z({readable:q,writable:Z})}let $=_==null?void 0:_.then;if(typeof $=="function"){let q;return S($,_,Z=>{Z!=null&&q.push(Z),q.push(null)},Z=>{w(q,Z)}),q=new P({objectMode:!0,writable:!1,read(){}})}throw new y(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],_)};function N(re){let{promise:_,resolve:W}=A(),$=new E,q=$.signal;return{value:re(async function*(){for(;;){let Z=_;_=null;let{chunk:K,done:F,cb:oe}=await Z;if(t.nextTick(oe),F)return;if(q.aborted)throw new p(void 0,{cause:q.reason});({promise:_,resolve:W}=A()),yield K}}(),{signal:q}),write(Z,K,F){let oe=W;W=null,oe({chunk:Z,done:!1,cb:F})},final(Z){let K=W;W=null,K({done:!0,cb:Z})},destroy(Z,K){$.abort(),K(Z)}}}function z(re){let _=re.readable&&typeof re.readable.read!="function"?I.wrap(re.readable):re.readable,W=re.writable,$=!!c(_),q=!!s(W),Z,K,F,oe,se;function de(C){let J=oe;oe=null,J?J(C):C&&se.destroy(C)}return se=new P({readableObjectMode:!!(_!=null&&_.readableObjectMode),writableObjectMode:!!(W!=null&&W.writableObjectMode),readable:$,writable:q}),q&&(f(W,C=>{q=!1,C&&w(_,C),de(C)}),se._write=function(C,J,ae){W.write(C,J)?ae():Z=ae},se._final=function(C){W.end(),K=C},W.on("drain",function(){if(Z){let C=Z;Z=null,C()}}),W.on("finish",function(){if(K){let C=K;K=null,C()}})),$&&(f(_,C=>{$=!1,C&&w(_,C),de(C)}),_.on("readable",function(){if(F){let C=F;F=null,C()}}),_.on("end",function(){se.push(null)}),se._read=function(){for(;;){let C=_.read();if(C===null){F=se._read;return}if(!se.push(C))return}}),se._destroy=function(C,J){!C&&oe!==null&&(C=new p),F=null,Z=null,K=null,oe===null?J(C):(oe=J,w(W,C),w(_,C))},se}}),dr=_e((e,r)=>{ye(),we(),be();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:c,ObjectSetPrototypeOf:s}=ct();r.exports=a;var n=Xi(),l=Vu();s(a.prototype,n.prototype),s(a,n);{let p=c(l.prototype);for(let y=0;y<p.length;y++){let b=p[y];a.prototype[b]||(a.prototype[b]=l.prototype[b])}}function a(p){if(!(this instanceof a))return new a(p);n.call(this,p),l.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...o(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(l.prototype,"writableLength")},writableFinished:{__proto__:null,...o(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var u;function h(){return u===void 0&&(u={}),u}a.fromWeb=function(p,y){return h().newStreamDuplexFromReadableWritablePair(p,y)},a.toWeb=function(p){return h().newReadableWritablePairFromDuplex(p)};var f;a.from=function(p){return f||(f=ug()),f(p,"body")}}),Ku=_e((e,r)=>{ye(),we(),be();var{ObjectSetPrototypeOf:t,Symbol:o}=ct();r.exports=a;var{ERR_METHOD_NOT_IMPLEMENTED:c}=At().codes,s=dr(),{getHighWaterMark:n}=$a();t(a.prototype,s.prototype),t(a,s);var l=o("kCallback");function a(f){if(!(this instanceof a))return new a(f);let p=f?n(this,f,"readableHighWaterMark",!0):null;p===0&&(f={...f,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:f.writableHighWaterMark||0}),s.call(this,f),this._readableState.sync=!1,this[l]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",h)}function u(f){typeof this._flush=="function"&&!this.destroyed?this._flush((p,y)=>{if(p){f?f(p):this.destroy(p);return}y!=null&&this.push(y),this.push(null),f&&f()}):(this.push(null),f&&f())}function h(){this._final!==u&&u.call(this)}a.prototype._final=u,a.prototype._transform=function(f,p,y){throw new c("_transform()")},a.prototype._write=function(f,p,y){let b=this._readableState,w=this._writableState,v=b.length;this._transform(f,p,(I,A)=>{if(I){y(I);return}A!=null&&this.push(A),w.ended||v===b.length||b.length<b.highWaterMark?y():this[l]=y})},a.prototype._read=function(){if(this[l]){let f=this[l];this[l]=null,f()}}}),Yu=_e((e,r)=>{ye(),we(),be();var{ObjectSetPrototypeOf:t}=ct();r.exports=c;var o=Ku();t(c.prototype,o.prototype),t(c,o);function c(s){if(!(this instanceof c))return new c(s);o.call(this,s)}c.prototype._transform=function(s,n,l){l(null,s)}}),Va=_e((e,r)=>{ye(),we(),be();var t=nn(),{ArrayIsArray:o,Promise:c,SymbolAsyncIterator:s}=ct(),n=Ir(),{once:l}=fr(),a=In(),u=dr(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:v}=At(),{validateFunction:I,validateAbortSignal:A}=Qi(),{isIterable:T,isReadable:k,isReadableNodeStream:R,isNodeStream:E,isTransformStream:S,isWebStream:P,isReadableStream:N,isReadableEnded:z}=gr(),re=globalThis.AbortController||qa().AbortController,_,W;function $(J,ae,Se){let le=!1;J.on("close",()=>{le=!0});let D=n(J,{readable:ae,writable:Se},B=>{le=!B});return{destroy:B=>{le||(le=!0,a.destroyer(J,B||new b("pipe")))},cleanup:D}}function q(J){return I(J[J.length-1],"streams[stream.length - 1]"),J.pop()}function Z(J){if(T(J))return J;if(R(J))return K(J);throw new f("val",["Readable","Iterable","AsyncIterable"],J)}async function*K(J){W||(W=Xi()),yield*W.prototype[s].call(J)}async function F(J,ae,Se,{end:le}){let D,B=null,X=ie=>{if(ie&&(D=ie),B){let ge=B;B=null,ge()}},ce=()=>new c((ie,ge)=>{D?ge(D):B=()=>{D?ge(D):ie()}});ae.on("drain",X);let ne=n(ae,{readable:!1},X);try{ae.writableNeedDrain&&await ce();for await(let ie of J)ae.write(ie)||await ce();le&&ae.end(),await ce(),Se()}catch(ie){Se(D!==ie?h(D,ie):ie)}finally{ne(),ae.off("drain",X)}}async function oe(J,ae,Se,{end:le}){S(ae)&&(ae=ae.writable);let D=ae.getWriter();try{for await(let B of J)await D.ready,D.write(B).catch(()=>{});await D.ready,le&&await D.close(),Se()}catch(B){try{await D.abort(B),Se(B)}catch(X){Se(X)}}}function se(...J){return de(J,l(q(J)))}function de(J,ae,Se){if(J.length===1&&o(J[0])&&(J=J[0]),J.length<2)throw new y("streams");let le=new re,D=le.signal,B=Se==null?void 0:Se.signal,X=[];A(B,"options.signal");function ce(){Y(new v)}B==null||B.addEventListener("abort",ce);let ne,ie,ge=[],pe=0;function U(H){Y(H,--pe===0)}function Y(H,te){if(H&&(!ne||ne.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ne=H),!(!ne&&!te)){for(;ge.length;)ge.shift()(ne);B==null||B.removeEventListener("abort",ce),le.abort(),te&&(ne||X.forEach(j=>j()),t.nextTick(ae,ne,ie))}}let Q;for(let H=0;H<J.length;H++){let te=J[H],j=H<J.length-1,G=H>0,ee=j||(Se==null?void 0:Se.end)!==!1,me=H===J.length-1;if(E(te)){let g=function(d){d&&d.name!=="AbortError"&&d.code!=="ERR_STREAM_PREMATURE_CLOSE"&&U(d)};if(ee){let{destroy:d,cleanup:m}=$(te,j,G);ge.push(d),k(te)&&me&&X.push(m)}te.on("error",g),k(te)&&me&&X.push(()=>{te.removeListener("error",g)})}if(H===0)if(typeof te=="function"){if(Q=te({signal:D}),!T(Q))throw new p("Iterable, AsyncIterable or Stream","source",Q)}else T(te)||R(te)||S(te)?Q=te:Q=u.from(te);else if(typeof te=="function"){if(S(Q)){var fe;Q=Z((fe=Q)===null||fe===void 0?void 0:fe.readable)}else Q=Z(Q);if(Q=te(Q,{signal:D}),j){if(!T(Q,!0))throw new p("AsyncIterable",`transform[${H-1}]`,Q)}else{var ue;_||(_=Yu());let g=new _({objectMode:!0}),d=(ue=Q)===null||ue===void 0?void 0:ue.then;if(typeof d=="function")pe++,d.call(Q,L=>{ie=L,L!=null&&g.write(L),ee&&g.end(),t.nextTick(U)},L=>{g.destroy(L),t.nextTick(U,L)});else if(T(Q,!0))pe++,F(Q,g,U,{end:ee});else if(N(Q)||S(Q)){let L=Q.readable||Q;pe++,F(L,g,U,{end:ee})}else throw new p("AsyncIterable or Promise","destination",Q);Q=g;let{destroy:m,cleanup:x}=$(Q,!1,!0);ge.push(m),me&&X.push(x)}}else if(E(te)){if(R(Q)){pe+=2;let g=C(Q,te,U,{end:ee});k(te)&&me&&X.push(g)}else if(S(Q)||N(Q)){let g=Q.readable||Q;pe++,F(g,te,U,{end:ee})}else if(T(Q))pe++,F(Q,te,U,{end:ee});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Q);Q=te}else if(P(te)){if(R(Q))pe++,oe(Z(Q),te,U,{end:ee});else if(N(Q)||T(Q))pe++,oe(Q,te,U,{end:ee});else if(S(Q))pe++,oe(Q.readable,te,U,{end:ee});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Q);Q=te}else Q=u.from(te)}return(D!=null&&D.aborted||B!=null&&B.aborted)&&t.nextTick(ce),Q}function C(J,ae,Se,{end:le}){let D=!1;if(ae.on("close",()=>{D||Se(new w)}),J.pipe(ae,{end:!1}),le){let B=function(){D=!0,ae.end()};z(J)?t.nextTick(B):J.once("end",B)}else Se();return n(J,{readable:!0,writable:!1},B=>{let X=J._readableState;B&&B.code==="ERR_STREAM_PREMATURE_CLOSE"&&X&&X.ended&&!X.errored&&!X.errorEmitted?J.once("end",Se).once("error",Se):Se(B)}),n(ae,{readable:!1,writable:!0},Se)}r.exports={pipelineImpl:de,pipeline:se}}),Gu=_e((e,r)=>{ye(),we(),be();var{pipeline:t}=Va(),o=dr(),{destroyer:c}=In(),{isNodeStream:s,isReadable:n,isWritable:l,isWebStream:a,isTransformStream:u,isWritableStream:h,isReadableStream:f}=gr(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:y,ERR_MISSING_ARGS:b}}=At(),w=Ir();r.exports=function(...v){if(v.length===0)throw new b("streams");if(v.length===1)return o.from(v[0]);let I=[...v];if(typeof v[0]=="function"&&(v[0]=o.from(v[0])),typeof v[v.length-1]=="function"){let _=v.length-1;v[_]=o.from(v[_])}for(let _=0;_<v.length;++_)if(!(!s(v[_])&&!a(v[_]))){if(_<v.length-1&&!(n(v[_])||f(v[_])||u(v[_])))throw new y(`streams[${_}]`,I[_],"must be readable");if(_>0&&!(l(v[_])||h(v[_])||u(v[_])))throw new y(`streams[${_}]`,I[_],"must be writable")}let A,T,k,R,E;function S(_){let W=R;R=null,W?W(_):_?E.destroy(_):!re&&!z&&E.destroy()}let P=v[0],N=t(v,S),z=!!(l(P)||h(P)||u(P)),re=!!(n(N)||f(N)||u(N));if(E=new o({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(N!=null&&N.writableObjectMode),writable:z,readable:re}),z){if(s(P))E._write=function(W,$,q){P.write(W,$)?q():A=q},E._final=function(W){P.end(),T=W},P.on("drain",function(){if(A){let W=A;A=null,W()}});else if(a(P)){let W=(u(P)?P.writable:P).getWriter();E._write=async function($,q,Z){try{await W.ready,W.write($).catch(()=>{}),Z()}catch(K){Z(K)}},E._final=async function($){try{await W.ready,W.close().catch(()=>{}),T=$}catch(q){$(q)}}}let _=u(N)?N.readable:N;w(_,()=>{if(T){let W=T;T=null,W()}})}if(re){if(s(N))N.on("readable",function(){if(k){let _=k;k=null,_()}}),N.on("end",function(){E.push(null)}),E._read=function(){for(;;){let _=N.read();if(_===null){k=E._read;return}if(!E.push(_))return}};else if(a(N)){let _=(u(N)?N.readable:N).getReader();E._read=async function(){for(;;)try{let{value:W,done:$}=await _.read();if(!E.push(W))return;if($){E.push(null);return}}catch{return}}}}return E._destroy=function(_,W){!_&&R!==null&&(_=new p),k=null,A=null,T=null,R===null?W(_):(R=W,s(N)&&c(N,_))},E}}),hg=_e((e,r)=>{ye(),we(),be();var t=globalThis.AbortController||qa().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:n},AbortError:l}=At(),{validateAbortSignal:a,validateInteger:u,validateObject:h}=Qi(),f=ct().Symbol("kWeak"),{finished:p}=Ir(),y=Gu(),{addAbortSignalNoValidate:b}=Ji(),{isWritable:w,isNodeStream:v}=gr(),{ArrayPrototypePush:I,MathFloor:A,Number:T,NumberIsNaN:k,Promise:R,PromiseReject:E,PromisePrototypeThen:S,Symbol:P}=ct(),N=P("kEmpty"),z=P("kEof");function re(le,D){if(D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),v(le)&&!w(le))throw new o("stream",le,"must be writable");let B=y(this,le);return D!=null&&D.signal&&b(D.signal,B),B}function _(le,D){if(typeof le!="function")throw new c("fn",["Function","AsyncFunction"],le);D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal");let B=1;return(D==null?void 0:D.concurrency)!=null&&(B=A(D.concurrency)),u(B,"concurrency",1),(async function*(){var X,ce;let ne=new t,ie=this,ge=[],pe=ne.signal,U={signal:pe},Y=()=>ne.abort();D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted&&Y(),D==null||(ce=D.signal)===null||ce===void 0||ce.addEventListener("abort",Y);let Q,fe,ue=!1;function H(){ue=!0}async function te(){try{for await(let ee of ie){var j;if(ue)return;if(pe.aborted)throw new l;try{ee=le(ee,U)}catch(me){ee=E(me)}ee!==N&&(typeof((j=ee)===null||j===void 0?void 0:j.catch)=="function"&&ee.catch(H),ge.push(ee),Q&&(Q(),Q=null),!ue&&ge.length&&ge.length>=B&&await new R(me=>{fe=me}))}ge.push(z)}catch(ee){let me=E(ee);S(me,void 0,H),ge.push(me)}finally{var G;ue=!0,Q&&(Q(),Q=null),D==null||(G=D.signal)===null||G===void 0||G.removeEventListener("abort",Y)}}te();try{for(;;){for(;ge.length>0;){let j=await ge[0];if(j===z)return;if(pe.aborted)throw new l;j!==N&&(yield j),ge.shift(),fe&&(fe(),fe=null)}await new R(j=>{Q=j})}}finally{ne.abort(),ue=!0,fe&&(fe(),fe=null)}}).call(this)}function W(le=void 0){return le!=null&&h(le,"options"),(le==null?void 0:le.signal)!=null&&a(le.signal,"options.signal"),(async function*(){let D=0;for await(let X of this){var B;if(le!=null&&(B=le.signal)!==null&&B!==void 0&&B.aborted)throw new l({cause:le.signal.reason});yield[D++,X]}}).call(this)}async function $(le,D=void 0){for await(let B of F.call(this,le,D))return!0;return!1}async function q(le,D=void 0){if(typeof le!="function")throw new c("fn",["Function","AsyncFunction"],le);return!await $.call(this,async(...B)=>!await le(...B),D)}async function Z(le,D){for await(let B of F.call(this,le,D))return B}async function K(le,D){if(typeof le!="function")throw new c("fn",["Function","AsyncFunction"],le);async function B(X,ce){return await le(X,ce),N}for await(let X of _.call(this,B,D));}function F(le,D){if(typeof le!="function")throw new c("fn",["Function","AsyncFunction"],le);async function B(X,ce){return await le(X,ce)?X:N}return _.call(this,B,D)}var oe=class extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function se(le,D,B){var X;if(typeof le!="function")throw new c("reducer",["Function","AsyncFunction"],le);B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&a(B.signal,"options.signal");let ce=arguments.length>1;if(B!=null&&(X=B.signal)!==null&&X!==void 0&&X.aborted){let U=new l(void 0,{cause:B.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(U)),U}let ne=new t,ie=ne.signal;if(B!=null&&B.signal){let U={once:!0,[f]:this};B.signal.addEventListener("abort",()=>ne.abort(),U)}let ge=!1;try{for await(let U of this){var pe;if(ge=!0,B!=null&&(pe=B.signal)!==null&&pe!==void 0&&pe.aborted)throw new l;ce?D=await le(D,U,{signal:ie}):(D=U,ce=!0)}if(!ge&&!ce)throw new oe}finally{ne.abort()}return D}async function de(le){le!=null&&h(le,"options"),(le==null?void 0:le.signal)!=null&&a(le.signal,"options.signal");let D=[];for await(let X of this){var B;if(le!=null&&(B=le.signal)!==null&&B!==void 0&&B.aborted)throw new l(void 0,{cause:le.signal.reason});I(D,X)}return D}function C(le,D){let B=_.call(this,le,D);return(async function*(){for await(let X of B)yield*X}).call(this)}function J(le){if(le=T(le),k(le))return 0;if(le<0)throw new n("number",">= 0",le);return le}function ae(le,D=void 0){return D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),le=J(le),(async function*(){var B;if(D!=null&&(B=D.signal)!==null&&B!==void 0&&B.aborted)throw new l;for await(let ce of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new l;le--<=0&&(yield ce)}}).call(this)}function Se(le,D=void 0){return D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),le=J(le),(async function*(){var B;if(D!=null&&(B=D.signal)!==null&&B!==void 0&&B.aborted)throw new l;for await(let ce of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new l;if(le-- >0)yield ce;else return}}).call(this)}r.exports.streamReturningOperators={asIndexedPairs:W,drop:ae,filter:F,flatMap:C,map:_,take:Se,compose:re},r.exports.promiseReturningOperators={every:q,forEach:K,reduce:se,toArray:de,some:$,find:Z}}),Qu=_e((e,r)=>{ye(),we(),be();var{ArrayPrototypePop:t,Promise:o}=ct(),{isIterable:c,isNodeStream:s,isWebStream:n}=gr(),{pipelineImpl:l}=Va(),{finished:a}=Ir();Ju();function u(...h){return new o((f,p)=>{let y,b,w=h[h.length-1];if(w&&typeof w=="object"&&!s(w)&&!c(w)&&!n(w)){let v=t(h);y=v.signal,b=v.end}l(h,(v,I)=>{v?p(v):f(I)},{signal:y,end:b})})}r.exports={finished:a,pipeline:u}}),Ju=_e((e,r)=>{ye(),we(),be();var{Buffer:t}=(yt(),Ke(mt)),{ObjectDefineProperty:o,ObjectKeys:c,ReflectApply:s}=ct(),{promisify:{custom:n}}=fr(),{streamReturningOperators:l,promiseReturningOperators:a}=hg(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=At(),h=Gu(),{pipeline:f}=Va(),{destroyer:p}=In(),y=Ir(),b=Qu(),w=gr(),v=r.exports=Wa().Stream;v.isDisturbed=w.isDisturbed,v.isErrored=w.isErrored,v.isReadable=w.isReadable,v.Readable=Xi();for(let A of c(l)){let T=function(...R){if(new.target)throw u();return v.Readable.from(s(k,this,R))},k=l[A];o(T,"name",{__proto__:null,value:k.name}),o(T,"length",{__proto__:null,value:k.length}),o(v.Readable.prototype,A,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let A of c(a)){let T=function(...R){if(new.target)throw u();return s(k,this,R)},k=a[A];o(T,"name",{__proto__:null,value:k.name}),o(T,"length",{__proto__:null,value:k.length}),o(v.Readable.prototype,A,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}v.Writable=Vu(),v.Duplex=dr(),v.Transform=Ku(),v.PassThrough=Yu(),v.pipeline=f;var{addAbortSignal:I}=Ji();v.addAbortSignal=I,v.finished=y,v.destroy=p,v.compose=h,o(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),o(f,n,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),o(y,n,{__proto__:null,enumerable:!0,get(){return b.finished}}),v.Stream=v,v._isUint8Array=function(A){return A instanceof Uint8Array},v._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)}}),on=_e((e,r)=>{ye(),we(),be();var t=Ju(),o=Qu(),c=t.Readable.destroy;r.exports=t.Readable,r.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,r.exports._isUint8Array=t._isUint8Array,r.exports.isDisturbed=t.isDisturbed,r.exports.isErrored=t.isErrored,r.exports.isReadable=t.isReadable,r.exports.Readable=t.Readable,r.exports.Writable=t.Writable,r.exports.Duplex=t.Duplex,r.exports.Transform=t.Transform,r.exports.PassThrough=t.PassThrough,r.exports.addAbortSignal=t.addAbortSignal,r.exports.finished=t.finished,r.exports.destroy=t.destroy,r.exports.destroy=c,r.exports.pipeline=t.pipeline,r.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return o}}),r.exports.Stream=t.Stream,r.exports.default=r.exports}),fg=_e((e,r)=>{ye(),we(),be(),typeof Object.create=="function"?r.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,o){if(o){t.super_=o;var c=function(){};c.prototype=o.prototype,t.prototype=new c,t.prototype.constructor=t}}}),dg=_e((e,r)=>{ye(),we(),be();var{Buffer:t}=(yt(),Ke(mt)),o=Symbol.for("BufferList");function c(s){if(!(this instanceof c))return new c(s);c._init.call(this,s)}c._init=function(s){Object.defineProperty(this,o,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},c.prototype._new=function(s){return new c(s)},c.prototype._offset=function(s){if(s===0)return[0,0];let n=0;for(let l=0;l<this._bufs.length;l++){let a=n+this._bufs[l].length;if(s<a||l===this._bufs.length-1)return[l,s-n];n=a}},c.prototype._reverseOffset=function(s){let n=s[0],l=s[1];for(let a=0;a<n;a++)l+=this._bufs[a].length;return l},c.prototype.get=function(s){if(s>this.length||s<0)return;let n=this._offset(s);return this._bufs[n[0]][n[1]]},c.prototype.slice=function(s,n){return typeof s=="number"&&s<0&&(s+=this.length),typeof n=="number"&&n<0&&(n+=this.length),this.copy(null,0,s,n)},c.prototype.copy=function(s,n,l,a){if((typeof l!="number"||l<0)&&(l=0),(typeof a!="number"||a>this.length)&&(a=this.length),l>=this.length||a<=0)return s||t.alloc(0);let u=!!s,h=this._offset(l),f=a-l,p=f,y=u&&n||0,b=h[1];if(l===0&&a===this.length){if(!u)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(s,y),y+=this._bufs[w].length;return s}if(p<=this._bufs[h[0]].length-b)return u?this._bufs[h[0]].copy(s,n,b,b+p):this._bufs[h[0]].slice(b,b+p);u||(s=t.allocUnsafe(f));for(let w=h[0];w<this._bufs.length;w++){let v=this._bufs[w].length-b;if(p>v)this._bufs[w].copy(s,y,b),y+=v;else{this._bufs[w].copy(s,y,b,b+p),y+=v;break}p-=v,b&&(b=0)}return s.length>y?s.slice(0,y):s},c.prototype.shallowSlice=function(s,n){if(s=s||0,n=typeof n!="number"?this.length:n,s<0&&(s+=this.length),n<0&&(n+=this.length),s===n)return this._new();let l=this._offset(s),a=this._offset(n),u=this._bufs.slice(l[0],a[0]+1);return a[1]===0?u.pop():u[u.length-1]=u[u.length-1].slice(0,a[1]),l[1]!==0&&(u[0]=u[0].slice(l[1])),this._new(u)},c.prototype.toString=function(s,n,l){return this.slice(n,l).toString(s)},c.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},c.prototype.duplicate=function(){let s=this._new();for(let n=0;n<this._bufs.length;n++)s.append(this._bufs[n]);return s},c.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(t.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let n=0;n<s.length;n++)this.append(s[n]);else if(this._isBufferList(s))for(let n=0;n<s._bufs.length;n++)this.append(s._bufs[n]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(t.from(s));return this},c.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},c.prototype.indexOf=function(s,n,l){if(l===void 0&&typeof n=="string"&&(l=n,n=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=t.from([s]):typeof s=="string"?s=t.from(s,l):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=t.from(s.buffer,s.byteOffset,s.byteLength):t.isBuffer(s)||(s=t.from(s)),n=Number(n||0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),s.length===0)return n>this.length?this.length:n;let a=this._offset(n),u=a[0],h=a[1];for(;u<this._bufs.length;u++){let f=this._bufs[u];for(;h<f.length;)if(f.length-h>=s.length){let p=f.indexOf(s,h);if(p!==-1)return this._reverseOffset([u,p]);h=f.length-s.length+1}else{let p=this._reverseOffset([u,h]);if(this._match(p,s))return p;h++}h=0}return-1},c.prototype._match=function(s,n){if(this.length-s<n.length)return!1;for(let l=0;l<n.length;l++)if(this.get(s+l)!==n[l])return!1;return!0},function(){let s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let n in s)(function(l){s[l]===null?c.prototype[l]=function(a,u){return this.slice(a,a+u)[l](0,u)}:c.prototype[l]=function(a=0){return this.slice(a,a+s[l])[l](0)}})(n)}(),c.prototype._isBufferList=function(s){return s instanceof c||c.isBufferList(s)},c.isBufferList=function(s){return s!=null&&s[o]},r.exports=c}),pg=_e((e,r)=>{ye(),we(),be();var t=on().Duplex,o=fg(),c=dg();function s(n){if(!(this instanceof s))return new s(n);if(typeof n=="function"){this._callback=n;let l=(function(a){this._callback&&(this._callback(a),this._callback=null)}).bind(this);this.on("pipe",function(a){a.on("error",l)}),this.on("unpipe",function(a){a.removeListener("error",l)}),n=null}c._init.call(this,n),t.call(this)}o(s,t),Object.assign(s.prototype,c.prototype),s.prototype._new=function(n){return new s(n)},s.prototype._write=function(n,l,a){this._appendBuffer(n),typeof a=="function"&&a()},s.prototype._read=function(n){if(!this.length)return this.push(null);n=Math.min(n,this.length),this.push(this.slice(0,n)),this.consume(n)},s.prototype.end=function(n){t.prototype.end.call(this,n),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(n,l){this._bufs.length=0,this.length=0,l(n)},s.prototype._isBufferList=function(n){return n instanceof s||n instanceof c||s.isBufferList(n)},s.isBufferList=c.isBufferList,r.exports=s,r.exports.BufferListStream=s,r.exports.BufferList=c}),gg=_e((e,r)=>{ye(),we(),be();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};r.exports=t}),Zu=_e((e,r)=>{ye(),we(),be();var t=r.exports,{Buffer:o}=(yt(),Ke(mt));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let s in t.requiredHeaderFlags){let n=t.requiredHeaderFlags[s];t.requiredHeaderFlagsErrors[s]="Invalid header flag bits, must be 0x"+n.toString(16)+" for "+t.types[s]+" packet"}t.codes={};for(let s in t.types){let n=t.types[s];t.codes[n]=s}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=o.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=o.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=o.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let s in t.properties){let n=t.properties[s];t.propertiesCodes[n]=s}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(s){return[0,1,2].map(n=>[0,1].map(l=>[0,1].map(a=>{let u=o.alloc(1);return u.writeUInt8(t.codes[s]<<t.CMD_SHIFT|(l?t.DUP_MASK:0)|n<<t.QOS_SHIFT|a,0,!0),u})))}t.PUBLISH_HEADER=c("publish"),t.SUBSCRIBE_HEADER=c("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=c("unsubscribe"),t.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},t.SUBACK_HEADER=o.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=o.from([3]),t.VERSION4=o.from([4]),t.VERSION5=o.from([5]),t.VERSION131=o.from([131]),t.VERSION132=o.from([132]),t.QOS=[0,1,2].map(s=>o.from([s])),t.EMPTY={pingreq:o.from([t.codes.pingreq<<4,0]),pingresp:o.from([t.codes.pingresp<<4,0]),disconnect:o.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),mg=_e((e,r)=>{ye(),we(),be();var t=1e3,o=t*60,c=o*60,s=c*24,n=s*7,l=s*365.25;r.exports=function(p,y){y=y||{};var b=typeof p;if(b==="string"&&p.length>0)return a(p);if(b==="number"&&isFinite(p))return y.long?h(p):u(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function a(p){if(p=String(p),!(p.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(y){var b=parseFloat(y[1]),w=(y[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return b*l;case"weeks":case"week":case"w":return b*n;case"days":case"day":case"d":return b*s;case"hours":case"hour":case"hrs":case"hr":case"h":return b*c;case"minutes":case"minute":case"mins":case"min":case"m":return b*o;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function u(p){var y=Math.abs(p);return y>=s?Math.round(p/s)+"d":y>=c?Math.round(p/c)+"h":y>=o?Math.round(p/o)+"m":y>=t?Math.round(p/t)+"s":p+"ms"}function h(p){var y=Math.abs(p);return y>=s?f(p,y,s,"day"):y>=c?f(p,y,c,"hour"):y>=o?f(p,y,o,"minute"):y>=t?f(p,y,t,"second"):p+" ms"}function f(p,y,b,w){var v=y>=b*1.5;return Math.round(p/b)+" "+w+(v?"s":"")}}),yg=_e((e,r)=>{ye(),we(),be();function t(o){s.debug=s,s.default=s,s.coerce=f,s.disable=a,s.enable=l,s.enabled=u,s.humanize=mg(),s.destroy=p,Object.keys(o).forEach(y=>{s[y]=o[y]}),s.names=[],s.skips=[],s.formatters={};function c(y){let b=0;for(let w=0;w<y.length;w++)b=(b<<5)-b+y.charCodeAt(w),b|=0;return s.colors[Math.abs(b)%s.colors.length]}s.selectColor=c;function s(y){let b,w=null,v,I;function A(...T){if(!A.enabled)return;let k=A,R=Number(new Date),E=R-(b||R);k.diff=E,k.prev=b,k.curr=R,b=R,T[0]=s.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let S=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(P,N)=>{if(P==="%%")return"%";S++;let z=s.formatters[N];if(typeof z=="function"){let re=T[S];P=z.call(k,re),T.splice(S,1),S--}return P}),s.formatArgs.call(k,T),(k.log||s.log).apply(k,T)}return A.namespace=y,A.useColors=s.useColors(),A.color=s.selectColor(y),A.extend=n,A.destroy=s.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(v!==s.namespaces&&(v=s.namespaces,I=s.enabled(y)),I),set:T=>{w=T}}),typeof s.init=="function"&&s.init(A),A}function n(y,b){let w=s(this.namespace+(typeof b>"u"?":":b)+y);return w.log=this.log,w}function l(y){s.save(y),s.namespaces=y,s.names=[],s.skips=[];let b,w=(typeof y=="string"?y:"").split(/[\s,]+/),v=w.length;for(b=0;b<v;b++)w[b]&&(y=w[b].replace(/\*/g,".*?"),y[0]==="-"?s.skips.push(new RegExp("^"+y.slice(1)+"$")):s.names.push(new RegExp("^"+y+"$")))}function a(){let y=[...s.names.map(h),...s.skips.map(h).map(b=>"-"+b)].join(",");return s.enable(""),y}function u(y){if(y[y.length-1]==="*")return!0;let b,w;for(b=0,w=s.skips.length;b<w;b++)if(s.skips[b].test(y))return!1;for(b=0,w=s.names.length;b<w;b++)if(s.names[b].test(y))return!0;return!1}function h(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function f(y){return y instanceof Error?y.stack||y.message:y}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}r.exports=t}),pr=_e((e,r)=>{ye(),we(),be(),e.formatArgs=o,e.save=c,e.load=s,e.useColors=t,e.storage=n(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let u="color: "+this.color;a.splice(1,0,u,"color: inherit");let h=0,f=0;a[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(f=h))}),a.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function c(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function s(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof We<"u"&&"env"in We&&(a=We.env.DEBUG),a}function n(){try{return localStorage}catch{}}r.exports=yg()(e);var{formatters:l}=r.exports;l.j=function(a){try{return JSON.stringify(a)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}),bg=_e((e,r)=>{ye(),we(),be();var t=pg(),{EventEmitter:o}=(Cn(),Ke(sn)),c=gg(),s=Zu(),n=pr()("mqtt-packet:parser"),l=class ca extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(u){return this instanceof ca?(this.settings=u||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new ca().parser(u)}_resetState(){n("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=t(),this._stateCounter=0}parse(u){for(this.error&&this._resetState(),this._list.append(u),n("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,n("parse: state complete. _stateCounter is now: %d",this._stateCounter),n("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return n("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let u=this._list.readUInt8(0),h=u>>s.CMD_SHIFT;this.packet.cmd=s.types[h];let f=u&15,p=s.requiredHeaderFlags[h];return p!=null&&f!==p?this._emitError(new Error(s.requiredHeaderFlagsErrors[h])):(this.packet.retain=(u&s.RETAIN_MASK)!==0,this.packet.qos=u>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(u&s.DUP_MASK)!==0,n("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let u=this._parseVarByteNum(!0);return u&&(this.packet.length=u.value,this._list.consume(u.bytes)),n("_parseLength %d",u.value),!!u}_parsePayload(){n("_parsePayload: payload %O",this._list);let u=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}u=!0}return n("_parsePayload complete result: %s",u),u}_parseConnect(){n("_parseConnect");let u,h,f,p,y={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;let v=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),I=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(y.will)b.will={},b.will.retain=v,b.will.qos=I;else{if(v)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(I)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(b.properties=T)}let A=this._parseString();if(A===null)return this._emitError(new Error("Packet too short"));if(b.clientId=A,n("_parseConnect: packet.clientId: %s",b.clientId),y.will){if(b.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(b.will.properties=T)}if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=u,n("_parseConnect: packet.will.topic: %s",b.will.topic),h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=h,n("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(y.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,n("_parseConnect: packet.username: %s",b.username)}if(y.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));b.password=f}return this.settings=b,n("_parseConnect: complete"),b}_parseConnack(){n("_parseConnack");let u=this.packet;if(this._list.length<1)return null;let h=this._list.readUInt8(this._pos++);if(h>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(u.sessionPresent=!!(h&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?u.reasonCode=this._list.readUInt8(this._pos++):u.reasonCode=0;else{if(this._list.length<2)return null;u.returnCode=this._list.readUInt8(this._pos++)}if(u.returnCode===-1||u.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(u.properties=f)}n("_parseConnack: complete")}_parsePublish(){n("_parsePublish");let u=this.packet;if(u.topic=this._parseString(),u.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(u.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(u.properties=h)}u.payload=this._list.slice(this._pos,u.length),n("_parsePublish: payload from buffer list: %o",u.payload)}}_parseSubscribe(){n("_parseSubscribe");let u=this.packet,h,f,p,y,b,w,v;if(u.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let I=this._parseProperties();Object.getOwnPropertyNames(I).length&&(u.properties=I)}if(u.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<u.length;){if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=u.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=f&s.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(w=(f>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(f>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=f>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,y>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));v={topic:h,qos:p},this.settings.protocolVersion===5?(v.nl=w,v.rap=b,v.rh=y):this.settings.bridgeMode&&(v.rh=0,v.rap=!0,v.nl=!0),n("_parseSubscribe: push subscription `%s` to subscription",v),u.subscriptions.push(v)}}}_parseSuback(){n("_parseSuback");let u=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(u.properties=h)}if(u.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!s.MQTT5_SUBACK_CODES[h])return this._emitError(new Error("Invalid suback code"))}else if(h>2&&h!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(h)}}}_parseUnsubscribe(){n("_parseUnsubscribe");let u=this.packet;if(u.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(u.properties=h)}if(u.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<u.length;){let h=this._parseString();if(h===null)return this._emitError(new Error("Cannot parse topic"));n("_parseUnsubscribe: push topic `%s` to unsubscriptions",h),u.unsubscriptions.push(h)}}}_parseUnsuback(){n("_parseUnsuback");let u=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&u.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(u.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let h=this._parseProperties();for(Object.getOwnPropertyNames(h).length&&(u.properties=h),u.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){n("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let u=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(u.length>2){switch(u.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}n("_parseConfirmation: packet.reasonCode `%d`",u.reasonCode)}else u.reasonCode=0;if(u.length>3){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(u.properties=h)}}return!0}_parseDisconnect(){let u=this.packet;if(n("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(u.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[u.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):u.reasonCode=0;let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(u.properties=h)}return n("_parseDisconnect result: true"),!0}_parseAuth(){n("_parseAuth");let u=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(u.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[u.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let h=this._parseProperties();return Object.getOwnPropertyNames(h).length&&(u.properties=h),n("_parseAuth: result: true"),!0}_parseMessageId(){let u=this.packet;return u.messageId=this._parseNum(),u.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(n("_parseMessageId: packet.messageId %d",u.messageId),!0)}_parseString(u){let h=this._parseNum(),f=h+this._pos;if(h===-1||f>this._list.length||f>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,f);return this._pos+=h,n("_parseString: result: %s",p),p}_parseStringPair(){return n("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let u=this._parseNum(),h=u+this._pos;if(u===-1||h>this._list.length||h>this.packet.length)return null;let f=this._list.slice(this._pos,h);return this._pos+=u,n("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let u=this._list.readUInt16BE(this._pos);return this._pos+=2,n("_parseNum: result: %s",u),u}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let u=this._list.readUInt32BE(this._pos);return this._pos+=4,n("_parse4ByteNum: result: %s",u),u}_parseVarByteNum(u){n("_parseVarByteNum");let h=4,f=0,p=1,y=0,b=!1,w,v=this._pos?this._pos:0;for(;f<h&&v+f<this._list.length;){if(w=this._list.readUInt8(v+f++),y+=p*(w&s.VARBYTEINT_MASK),p*=128,!(w&s.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=f)break}return!b&&f===h&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),v&&(this._pos+=f),b?u?b={bytes:f,value:y}:b=y:b=!1,n("_parseVarByteNum: result: %o",b),b}_parseByte(){let u;return this._pos<this._list.length&&(u=this._list.readUInt8(this._pos),this._pos++),n("_parseByte: result: %o",u),u}_parseByType(u){switch(n("_parseByType: type: %s",u),u){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){n("_parseProperties");let u=this._parseVarByteNum(),h=this._pos+u,f={};for(;this._pos<h;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let y=s.propertiesCodes[p];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){f[y]||(f[y]=Object.create(null));let b=this._parseByType(s.propertiesTypes[y]);if(f[y][b.name])if(Array.isArray(f[y][b.name]))f[y][b.name].push(b.value);else{let w=f[y][b.name];f[y][b.name]=[w],f[y][b.name].push(b.value)}else f[y][b.name]=b.value;continue}f[y]?Array.isArray(f[y])?f[y].push(this._parseByType(s.propertiesTypes[y])):(f[y]=[f[y]],f[y].push(this._parseByType(s.propertiesTypes[y]))):f[y]=this._parseByType(s.propertiesTypes[y])}return f}_newPacket(){return n("_newPacket"),this.packet&&(this._list.consume(this.packet.length),n("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),n("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(u){n("_emitError",u),this.error=u,this.emit("error",u)}};r.exports=l}),wg=_e((e,r)=>{ye(),we(),be();var{Buffer:t}=(yt(),Ke(mt)),o=65536,c={},s=t.isBuffer(t.from([1,2]).subarray(0,1));function n(h){let f=t.allocUnsafe(2);return f.writeUInt8(h>>8,0),f.writeUInt8(h&255,1),f}function l(){for(let h=0;h<o;h++)c[h]=n(h)}function a(h){let f=0,p=0,y=t.allocUnsafe(4);do f=h%128|0,h=h/128|0,h>0&&(f=f|128),y.writeUInt8(f,p++);while(h>0&&p<4);return h>0&&(p=0),s?y.subarray(0,p):y.slice(0,p)}function u(h){let f=t.allocUnsafe(4);return f.writeUInt32BE(h,0),f}r.exports={cache:c,generateCache:l,generateNumber:n,genBufVariableByteInt:a,generate4ByteBuffer:u}}),vg=_e((e,r)=>{ye(),we(),be(),typeof We>"u"||!We.version||We.version.indexOf("v0.")===0||We.version.indexOf("v1.")===0&&We.version.indexOf("v1.8.")!==0?r.exports={nextTick:t}:r.exports=We;function t(o,c,s,n){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var l=arguments.length,a,u;switch(l){case 0:case 1:return We.nextTick(o);case 2:return We.nextTick(function(){o.call(null,c)});case 3:return We.nextTick(function(){o.call(null,c,s)});case 4:return We.nextTick(function(){o.call(null,c,s,n)});default:for(a=new Array(l-1),u=0;u<a.length;)a[u++]=arguments[u];return We.nextTick(function(){o.apply(null,a)})}}}),Xu=_e((e,r)=>{ye(),we(),be();var t=Zu(),{Buffer:o}=(yt(),Ke(mt)),c=o.allocUnsafe(0),s=o.from([0]),n=wg(),l=vg().nextTick,a=pr()("mqtt-packet:writeToStream"),u=n.cache,h=n.generateNumber,f=n.generateCache,p=n.genBufVariableByteInt,y=n.generate4ByteBuffer,b=K,w=!0;function v(D,B,X){switch(a("generate called"),B.cork&&(B.cork(),l(I,B)),w&&(w=!1,f()),a("generate: packet.cmd: %s",D.cmd),D.cmd){case"connect":return A(D,B);case"connack":return T(D,B,X);case"publish":return k(D,B,X);case"puback":case"pubrec":case"pubrel":case"pubcomp":return R(D,B,X);case"subscribe":return E(D,B,X);case"suback":return S(D,B,X);case"unsubscribe":return P(D,B,X);case"unsuback":return N(D,B,X);case"pingreq":case"pingresp":return z(D,B);case"disconnect":return re(D,B,X);case"auth":return _(D,B,X);default:return B.destroy(new Error("Unknown command")),!1}}Object.defineProperty(v,"cacheNumbers",{get(){return b===K},set(D){D?((!u||Object.keys(u).length===0)&&(w=!0),b=K):(w=!1,b=F)}});function I(D){D.uncork()}function A(D,B,X){let ce=D||{},ne=ce.protocolId||"MQTT",ie=ce.protocolVersion||4,ge=ce.will,pe=ce.clean,U=ce.keepalive||0,Y=ce.clientId||"",Q=ce.username,fe=ce.password,ue=ce.properties;pe===void 0&&(pe=!0);let H=0;if(!ne||typeof ne!="string"&&!o.isBuffer(ne))return B.destroy(new Error("Invalid protocolId")),!1;if(H+=ne.length+2,ie!==3&&ie!==4&&ie!==5)return B.destroy(new Error("Invalid protocol version")),!1;if(H+=1,(typeof Y=="string"||o.isBuffer(Y))&&(Y||ie>=4)&&(Y||pe))H+=o.byteLength(Y)+2;else{if(ie<4)return B.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(pe*1===0)return B.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof U!="number"||U<0||U>65535||U%1!==0)return B.destroy(new Error("Invalid keepalive")),!1;H+=2,H+=1;let te,j;if(ie===5){if(te=de(B,ue),!te)return!1;H+=te.length}if(ge){if(typeof ge!="object")return B.destroy(new Error("Invalid will")),!1;if(!ge.topic||typeof ge.topic!="string")return B.destroy(new Error("Invalid will topic")),!1;if(H+=o.byteLength(ge.topic)+2,H+=2,ge.payload)if(ge.payload.length>=0)typeof ge.payload=="string"?H+=o.byteLength(ge.payload):H+=ge.payload.length;else return B.destroy(new Error("Invalid will payload")),!1;if(j={},ie===5){if(j=de(B,ge.properties),!j)return!1;H+=j.length}}let G=!1;if(Q!=null)if(le(Q))G=!0,H+=o.byteLength(Q)+2;else return B.destroy(new Error("Invalid username")),!1;if(fe!=null){if(!G)return B.destroy(new Error("Username is required to use password")),!1;if(le(fe))H+=Se(fe)+2;else return B.destroy(new Error("Invalid password")),!1}B.write(t.CONNECT_HEADER),$(B,H),se(B,ne),ce.bridgeMode&&(ie+=128),B.write(ie===131?t.VERSION131:ie===132?t.VERSION132:ie===4?t.VERSION4:ie===5?t.VERSION5:t.VERSION3);let ee=0;return ee|=Q!=null?t.USERNAME_MASK:0,ee|=fe!=null?t.PASSWORD_MASK:0,ee|=ge&&ge.retain?t.WILL_RETAIN_MASK:0,ee|=ge&&ge.qos?ge.qos<<t.WILL_QOS_SHIFT:0,ee|=ge?t.WILL_FLAG_MASK:0,ee|=pe?t.CLEAN_SESSION_MASK:0,B.write(o.from([ee])),b(B,U),ie===5&&te.write(),se(B,Y),ge&&(ie===5&&j.write(),q(B,ge.topic),se(B,ge.payload)),Q!=null&&se(B,Q),fe!=null&&se(B,fe),!0}function T(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ce===5?ne.reasonCode:ne.returnCode,ge=ne.properties,pe=2;if(typeof ie!="number")return B.destroy(new Error("Invalid return code")),!1;let U=null;if(ce===5){if(U=de(B,ge),!U)return!1;pe+=U.length}return B.write(t.CONNACK_HEADER),$(B,pe),B.write(ne.sessionPresent?t.SESSIONPRESENT_HEADER:s),B.write(o.from([ie])),U==null||U.write(),!0}function k(D,B,X){a("publish: packet: %o",D);let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.qos||0,ge=ne.retain?t.RETAIN_MASK:0,pe=ne.topic,U=ne.payload||c,Y=ne.messageId,Q=ne.properties,fe=0;if(typeof pe=="string")fe+=o.byteLength(pe)+2;else if(o.isBuffer(pe))fe+=pe.length+2;else return B.destroy(new Error("Invalid topic")),!1;if(o.isBuffer(U)?fe+=U.length:fe+=o.byteLength(U),ie&&typeof Y!="number")return B.destroy(new Error("Invalid messageId")),!1;ie&&(fe+=2);let ue=null;if(ce===5){if(ue=de(B,Q),!ue)return!1;fe+=ue.length}return B.write(t.PUBLISH_HEADER[ie][ne.dup?1:0][ge?1:0]),$(B,fe),b(B,Se(pe)),B.write(pe),ie>0&&b(B,Y),ue==null||ue.write(),a("publish: payload: %o",U),B.write(U)}function R(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.cmd||"puback",ge=ne.messageId,pe=ne.dup&&ie==="pubrel"?t.DUP_MASK:0,U=0,Y=ne.reasonCode,Q=ne.properties,fe=ce===5?3:2;if(ie==="pubrel"&&(U=1),typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;let ue=null;if(ce===5&&typeof Q=="object"){if(ue=C(B,Q,X,fe),!ue)return!1;fe+=ue.length}return B.write(t.ACKS[ie][U][pe][0]),fe===3&&(fe+=Y!==0?1:-1),$(B,fe),b(B,ge),ce===5&&fe!==2&&B.write(o.from([Y])),ue!==null?ue.write():fe===4&&B.write(o.from([0])),!0}function E(D,B,X){a("subscribe: packet: ");let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.dup?t.DUP_MASK:0,ge=ne.messageId,pe=ne.subscriptions,U=ne.properties,Y=0;if(typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;Y+=2;let Q=null;if(ce===5){if(Q=de(B,U),!Q)return!1;Y+=Q.length}if(typeof pe=="object"&&pe.length)for(let ue=0;ue<pe.length;ue+=1){let H=pe[ue].topic,te=pe[ue].qos;if(typeof H!="string")return B.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof te!="number")return B.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ce===5){if(typeof(pe[ue].nl||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(pe[ue].rap||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let j=pe[ue].rh||0;if(typeof j!="number"||j>2)return B.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}Y+=o.byteLength(H)+2+1}else return B.destroy(new Error("Invalid subscriptions")),!1;a("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),B.write(t.SUBSCRIBE_HEADER[1][ie?1:0][0]),$(B,Y),b(B,ge),Q!==null&&Q.write();let fe=!0;for(let ue of pe){let H=ue.topic,te=ue.qos,j=+ue.nl,G=+ue.rap,ee=ue.rh,me;q(B,H),me=t.SUBSCRIBE_OPTIONS_QOS[te],ce===5&&(me|=j?t.SUBSCRIBE_OPTIONS_NL:0,me|=G?t.SUBSCRIBE_OPTIONS_RAP:0,me|=ee?t.SUBSCRIBE_OPTIONS_RH[ee]:0),fe=B.write(o.from([me]))}return fe}function S(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.granted,pe=ne.properties,U=0;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(U+=2,typeof ge=="object"&&ge.length)for(let Q=0;Q<ge.length;Q+=1){if(typeof ge[Q]!="number")return B.destroy(new Error("Invalid qos vector")),!1;U+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let Y=null;if(ce===5){if(Y=C(B,pe,X,U),!Y)return!1;U+=Y.length}return B.write(t.SUBACK_HEADER),$(B,U),b(B,ie),Y!==null&&Y.write(),B.write(o.from(ge))}function P(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.dup?t.DUP_MASK:0,pe=ne.unsubscriptions,U=ne.properties,Y=0;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(Y+=2,typeof pe=="object"&&pe.length)for(let ue=0;ue<pe.length;ue+=1){if(typeof pe[ue]!="string")return B.destroy(new Error("Invalid unsubscriptions")),!1;Y+=o.byteLength(pe[ue])+2}else return B.destroy(new Error("Invalid unsubscriptions")),!1;let Q=null;if(ce===5){if(Q=de(B,U),!Q)return!1;Y+=Q.length}B.write(t.UNSUBSCRIBE_HEADER[1][ge?1:0][0]),$(B,Y),b(B,ie),Q!==null&&Q.write();let fe=!0;for(let ue=0;ue<pe.length;ue++)fe=q(B,pe[ue]);return fe}function N(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.dup?t.DUP_MASK:0,pe=ne.granted,U=ne.properties,Y=ne.cmd,Q=0,fe=2;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(ce===5)if(typeof pe=="object"&&pe.length)for(let H=0;H<pe.length;H+=1){if(typeof pe[H]!="number")return B.destroy(new Error("Invalid qos vector")),!1;fe+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let ue=null;if(ce===5){if(ue=C(B,U,X,fe),!ue)return!1;fe+=ue.length}return B.write(t.ACKS[Y][Q][ge][0]),$(B,fe),b(B,ie),ue!==null&&ue.write(),ce===5&&B.write(o.from(pe)),!0}function z(D,B,X){return B.write(t.EMPTY[D.cmd])}function re(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.reasonCode,ge=ne.properties,pe=ce===5?1:0,U=null;if(ce===5){if(U=C(B,ge,X,pe),!U)return!1;pe+=U.length}return B.write(o.from([t.codes.disconnect<<4])),$(B,pe),ce===5&&B.write(o.from([ie])),U!==null&&U.write(),!0}function _(D,B,X){let ce=X?X.protocolVersion:4,ne=D||{},ie=ne.reasonCode,ge=ne.properties,pe=ce===5?1:0;ce!==5&&B.destroy(new Error("Invalid mqtt version for auth packet"));let U=C(B,ge,X,pe);return U?(pe+=U.length,B.write(o.from([t.codes.auth<<4])),$(B,pe),B.write(o.from([ie])),U!==null&&U.write(),!0):!1}var W={};function $(D,B){if(B>t.VARBYTEINT_MAX)return D.destroy(new Error(`Invalid variable byte integer: ${B}`)),!1;let X=W[B];return X||(X=p(B),B<16384&&(W[B]=X)),a("writeVarByteInt: writing to stream: %o",X),D.write(X)}function q(D,B){let X=o.byteLength(B);return b(D,X),a("writeString: %s",B),D.write(B,"utf8")}function Z(D,B,X){q(D,B),q(D,X)}function K(D,B){return a("writeNumberCached: number: %d",B),a("writeNumberCached: %o",u[B]),D.write(u[B])}function F(D,B){let X=h(B);return a("writeNumberGenerated: %o",X),D.write(X)}function oe(D,B){let X=y(B);return a("write4ByteNumber: %o",X),D.write(X)}function se(D,B){typeof B=="string"?q(D,B):B?(b(D,B.length),D.write(B)):b(D,0)}function de(D,B){if(typeof B!="object"||B.length!=null)return{length:1,write(){ae(D,{},0)}};let X=0;function ce(ne,ie){let ge=t.propertiesTypes[ne],pe=0;switch(ge){case"byte":{if(typeof ie!="boolean")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=2;break}case"int8":{if(typeof ie!="number"||ie<0||ie>255)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=2;break}case"binary":{if(ie&&ie===null)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=1+o.byteLength(ie)+2;break}case"int16":{if(typeof ie!="number"||ie<0||ie>65535)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=3;break}case"int32":{if(typeof ie!="number"||ie<0||ie>4294967295)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=5;break}case"var":{if(typeof ie!="number"||ie<0||ie>268435455)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=1+o.byteLength(p(ie));break}case"string":{if(typeof ie!="string")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=3+o.byteLength(ie.toString());break}case"pair":{if(typeof ie!="object")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=Object.getOwnPropertyNames(ie).reduce((U,Y)=>{let Q=ie[Y];return Array.isArray(Q)?U+=Q.reduce((fe,ue)=>(fe+=3+o.byteLength(Y.toString())+2+o.byteLength(ue.toString()),fe),0):U+=3+o.byteLength(Y.toString())+2+o.byteLength(ie[Y].toString()),U},0);break}default:return D.destroy(new Error(`Invalid property ${ne}: ${ie}`)),!1}return pe}if(B)for(let ne in B){let ie=0,ge=0,pe=B[ne];if(Array.isArray(pe))for(let U=0;U<pe.length;U++){if(ge=ce(ne,pe[U]),!ge)return!1;ie+=ge}else{if(ge=ce(ne,pe),!ge)return!1;ie=ge}if(!ie)return!1;X+=ie}return{length:o.byteLength(p(X))+X,write(){ae(D,B,X)}}}function C(D,B,X,ce){let ne=["reasonString","userProperties"],ie=X&&X.properties&&X.properties.maximumPacketSize?X.properties.maximumPacketSize:0,ge=de(D,B);if(ie)for(;ce+ge.length>ie;){let pe=ne.shift();if(pe&&B[pe])delete B[pe],ge=de(D,B);else return!1}return ge}function J(D,B,X){switch(t.propertiesTypes[B]){case"byte":{D.write(o.from([t.properties[B]])),D.write(o.from([+X]));break}case"int8":{D.write(o.from([t.properties[B]])),D.write(o.from([X]));break}case"binary":{D.write(o.from([t.properties[B]])),se(D,X);break}case"int16":{D.write(o.from([t.properties[B]])),b(D,X);break}case"int32":{D.write(o.from([t.properties[B]])),oe(D,X);break}case"var":{D.write(o.from([t.properties[B]])),$(D,X);break}case"string":{D.write(o.from([t.properties[B]])),q(D,X);break}case"pair":{Object.getOwnPropertyNames(X).forEach(ce=>{let ne=X[ce];Array.isArray(ne)?ne.forEach(ie=>{D.write(o.from([t.properties[B]])),Z(D,ce.toString(),ie.toString())}):(D.write(o.from([t.properties[B]])),Z(D,ce.toString(),ne.toString()))});break}default:return D.destroy(new Error(`Invalid property ${B} value: ${X}`)),!1}}function ae(D,B,X){$(D,X);for(let ce in B)if(Object.prototype.hasOwnProperty.call(B,ce)&&B[ce]!==null){let ne=B[ce];if(Array.isArray(ne))for(let ie=0;ie<ne.length;ie++)J(D,ce,ne[ie]);else J(D,ce,ne)}}function Se(D){return D?D instanceof o?D.length:o.byteLength(D):0}function le(D){return typeof D=="string"||D instanceof o}r.exports=v}),_g=_e((e,r)=>{ye(),we(),be();var t=Xu(),{EventEmitter:o}=(Cn(),Ke(sn)),{Buffer:c}=(yt(),Ke(mt));function s(l,a){let u=new n;return t(l,u,a),u.concat()}var n=class extends o{constructor(){super(),this._array=new Array(20),this._i=0}write(l){return this._array[this._i++]=l,!0}concat(){let l=0,a=new Array(this._array.length),u=this._array,h=0,f;for(f=0;f<u.length&&u[f]!==void 0;f++)typeof u[f]!="string"?a[f]=u[f].length:a[f]=c.byteLength(u[f]),l+=a[f];let p=c.allocUnsafe(l);for(f=0;f<u.length&&u[f]!==void 0;f++)typeof u[f]!="string"?(u[f].copy(p,h),h+=a[f]):(p.write(u[f],h),h+=a[f]);return p}destroy(l){l&&this.emit("error",l)}};r.exports=s}),Eg=_e(e=>{ye(),we(),be(),e.parser=bg().parser,e.generate=_g(),e.writeToStream=Xu()}),eh=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=r}),Sg=_e((e,r)=>{ye(),we(),be(),r.exports=o;function t(s){return s instanceof Fi?Fi.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function o(s){if(s=s||{},s.circles)return c(s);return s.proto?a:l;function n(u,h){for(var f=Object.keys(u),p=new Array(f.length),y=0;y<f.length;y++){var b=f[y],w=u[b];typeof w!="object"||w===null?p[b]=w:w instanceof Date?p[b]=new Date(w):ArrayBuffer.isView(w)?p[b]=t(w):p[b]=h(w)}return p}function l(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return n(u,l);if(u instanceof Map)return new Map(n(Array.from(u),l));if(u instanceof Set)return new Set(n(Array.from(u),l));var h={};for(var f in u)if(Object.hasOwnProperty.call(u,f)!==!1){var p=u[f];typeof p!="object"||p===null?h[f]=p:p instanceof Date?h[f]=new Date(p):p instanceof Map?h[f]=new Map(n(Array.from(p),l)):p instanceof Set?h[f]=new Set(n(Array.from(p),l)):ArrayBuffer.isView(p)?h[f]=t(p):h[f]=l(p)}return h}function a(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return n(u,a);if(u instanceof Map)return new Map(n(Array.from(u),a));if(u instanceof Set)return new Set(n(Array.from(u),a));var h={};for(var f in u){var p=u[f];typeof p!="object"||p===null?h[f]=p:p instanceof Date?h[f]=new Date(p):p instanceof Map?h[f]=new Map(n(Array.from(p),a)):p instanceof Set?h[f]=new Set(n(Array.from(p),a)):ArrayBuffer.isView(p)?h[f]=t(p):h[f]=a(p)}return h}}function c(s){var n=[],l=[];return s.proto?h:u;function a(f,p){for(var y=Object.keys(f),b=new Array(y.length),w=0;w<y.length;w++){var v=y[w],I=f[v];if(typeof I!="object"||I===null)b[v]=I;else if(I instanceof Date)b[v]=new Date(I);else if(ArrayBuffer.isView(I))b[v]=t(I);else{var A=n.indexOf(I);A!==-1?b[v]=l[A]:b[v]=p(I)}}return b}function u(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return a(f,u);if(f instanceof Map)return new Map(a(Array.from(f),u));if(f instanceof Set)return new Set(a(Array.from(f),u));var p={};n.push(f),l.push(p);for(var y in f)if(Object.hasOwnProperty.call(f,y)!==!1){var b=f[y];if(typeof b!="object"||b===null)p[y]=b;else if(b instanceof Date)p[y]=new Date(b);else if(b instanceof Map)p[y]=new Map(a(Array.from(b),u));else if(b instanceof Set)p[y]=new Set(a(Array.from(b),u));else if(ArrayBuffer.isView(b))p[y]=t(b);else{var w=n.indexOf(b);w!==-1?p[y]=l[w]:p[y]=u(b)}}return n.pop(),l.pop(),p}function h(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return a(f,h);if(f instanceof Map)return new Map(a(Array.from(f),h));if(f instanceof Set)return new Set(a(Array.from(f),h));var p={};n.push(f),l.push(p);for(var y in f){var b=f[y];if(typeof b!="object"||b===null)p[y]=b;else if(b instanceof Date)p[y]=new Date(b);else if(b instanceof Map)p[y]=new Map(a(Array.from(b),h));else if(b instanceof Set)p[y]=new Set(a(Array.from(b),h));else if(ArrayBuffer.isView(b))p[y]=t(b);else{var w=n.indexOf(b);w!==-1?p[y]=l[w]:p[y]=h(b)}}return n.pop(),l.pop(),p}}}),Ag=_e((e,r)=>{ye(),we(),be(),r.exports=Sg()()}),Tg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function r(o){let c=o.split("/");for(let s=0;s<c.length;s++)if(c[s]!=="+"){if(c[s]==="#")return s===c.length-1;if(c[s].indexOf("+")!==-1||c[s].indexOf("#")!==-1)return!1}return!0}e.validateTopic=r;function t(o){if(o.length===0)return"empty_topic_list";for(let c=0;c<o.length;c++)if(!r(o[c]))return o[c];return null}e.validateTopics=t}),th=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=on(),t={objectMode:!0},o={clean:!0},c=class{constructor(s){this.options=s||{},this.options=Object.assign(Object.assign({},o),s),this._inflights=new Map}put(s,n){return this._inflights.set(s.messageId,s),n&&n(),this}createStream(){let s=new r.Readable(t),n=[],l=!1,a=0;return this._inflights.forEach((u,h)=>{n.push(u)}),s._read=()=>{!l&&a<n.length?s.push(n[a++]):s.push(null)},s.destroy=u=>{if(!l)return l=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,n){let l=this._inflights.get(s.messageId);return l?(this._inflights.delete(s.messageId),n(null,l)):n&&n(new Error("missing packet")),this}get(s,n){let l=this._inflights.get(s.messageId);return l?n(null,l):n&&n(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}};e.default=c}),kg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=[0,16,128,131,135,144,145,151,153],t=(o,c,s)=>{o.log("handlePublish: packet %o",c),s=typeof s<"u"?s:o.noop;let n=c.topic.toString(),l=c.payload,{qos:a}=c,{messageId:u}=c,{options:h}=o;if(o.options.protocolVersion===5){let f;if(c.properties&&(f=c.properties.topicAlias),typeof f<"u")if(n.length===0)if(f>0&&f<=65535){let p=o.topicAliasRecv.getTopicByAlias(f);if(p)n=p,o.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,f);else{o.log("handlePublish :: unregistered topic alias. alias: %d",f),o.emit("error",new Error("Received unregistered Topic Alias"));return}}else{o.log("handlePublish :: topic alias out of range. alias: %d",f),o.emit("error",new Error("Received Topic Alias is out of range"));return}else if(o.topicAliasRecv.put(n,f))o.log("handlePublish :: registered topic: %s - alias: %d",n,f);else{o.log("handlePublish :: topic alias out of range. alias: %d",f),o.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(o.log("handlePublish: qos %d",a),a){case 2:{h.customHandleAcks(n,l,c,(f,p)=>{if(typeof f=="number"&&(p=f,f=null),f)return o.emit("error",f);if(r.indexOf(p)===-1)return o.emit("error",new Error("Wrong reason code for pubrec"));p?o._sendPacket({cmd:"pubrec",messageId:u,reasonCode:p},s):o.incomingStore.put(c,()=>{o._sendPacket({cmd:"pubrec",messageId:u},s)})});break}case 1:{h.customHandleAcks(n,l,c,(f,p)=>{if(typeof f=="number"&&(p=f,f=null),f)return o.emit("error",f);if(r.indexOf(p)===-1)return o.emit("error",new Error("Wrong reason code for puback"));p||o.emit("message",n,l,c),o.handleMessage(c,y=>{if(y)return s&&s(y);o._sendPacket({cmd:"puback",messageId:u,reasonCode:p},s)})});break}case 0:o.emit("message",n,l,c),o.handleMessage(c,s);break;default:o.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),Ig=_e((e,r)=>{r.exports={version:"5.10.1"}}),Rn=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var r=class rh extends Error{constructor(c,s){super(c),this.code=s,Object.setPrototypeOf(this,rh.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=r;function t(o,c,s=!1){var n;let l=[c];for(;;){let a=l[0],u=Object.getPrototypeOf(a);if(u!=null&&u.prototype)l.unshift(u);else break}for(let a of l)for(let u of Object.getOwnPropertyNames(a.prototype))(s||u!=="constructor")&&Object.defineProperty(o.prototype,u,(n=Object.getOwnPropertyDescriptor(a.prototype,u))!==null&&n!==void 0?n:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(We==null?void 0:We.nextTick)=="function"?We.nextTick:o=>{setTimeout(o,0)},e.MQTTJS_VERSION=Ig().version}),es=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var r=Rn();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(o,c)=>{let{messageId:s}=c,n=c.cmd,l=null,a=o.outgoing[s]?o.outgoing[s].cb:null,u=null;if(!a){o.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(o.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let h=c.reasonCode;h&&h>0&&h!==16?(u=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),o._removeOutgoingAndStoreMessage(s,()=>{a(u,c)})):o._removeOutgoingAndStoreMessage(s,a);break}case"pubrec":{l={cmd:"pubrel",qos:2,messageId:s};let h=c.reasonCode;h&&h>0&&h!==16?(u=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),o._removeOutgoingAndStoreMessage(s,()=>{a(u,c)})):o._sendPacket(l);break}case"suback":{delete o.outgoing[s],o.messageIdProvider.deallocate(s);let h=c.granted;for(let f=0;f<h.length;f++){let p=h[f];if(p&128){u=new Error(`Subscribe error: ${e.ReasonCodes[p]}`),u.code=p;let y=o.messageIdToTopic[s];y&&y.forEach(b=>{delete o._resubscribeTopics[b]})}}delete o.messageIdToTopic[s],o._invokeStoreProcessingQueue(),a(u,c);break}case"unsuback":{delete o.outgoing[s],o.messageIdProvider.deallocate(s),o._invokeStoreProcessingQueue(),a(null,c);break}default:o.emit("error",new Error("unrecognized packet type"))}o.disconnecting&&Object.keys(o.outgoing).length===0&&o.emit("outgoingEmpty")};e.default=t}),Cg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=Rn(),t=es(),o=(c,s)=>{let{options:n}=c,l=n.protocolVersion,a=l===5?s.reasonCode:s.returnCode;if(l!==5){let u=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${l}`,a);c.emit("error",u);return}c.handleAuth(s,(u,h)=>{if(u){c.emit("error",u);return}if(a===24)c.reconnecting=!1,c._sendPacket(h);else{let f=new r.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);c.emit("error",f)}})};e.default=o}),Rg=_e(e=>{var y,b,w,v,I,A,T,k,R,E,S,P,N,z,re,_,W,$,q,Z,K,F,oe,se,de,C,ua,ae,Se,le,D,nh,X,ce,ne,Er,Sr,ha,Ei,Si,Qe,fa,Wn,H;ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var r=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,o=typeof We=="object"&&We?We:{},c=(te,j,G,ee)=>{typeof o.emitWarning=="function"?o.emitWarning(te,j,G,ee):console.error(`[${G}] ${j}: ${te}`)},s=globalThis.AbortController,n=globalThis.AbortSignal;if(typeof s>"u"){n=class{constructor(){Ue(this,"onabort");Ue(this,"_onabort",[]);Ue(this,"reason");Ue(this,"aborted",!1)}addEventListener(G,ee){this._onabort.push(ee)}},s=class{constructor(){Ue(this,"signal",new n);j()}abort(G){var ee,me;if(!this.signal.aborted){this.signal.reason=G,this.signal.aborted=!0;for(let g of this.signal._onabort)g(G);(me=(ee=this.signal).onabort)==null||me.call(ee,G)}}};let te=((y=o.env)==null?void 0:y.LRU_CACHE_IGNORE_AC_WARNING)!=="1",j=()=>{te&&(te=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",j))}}var l=te=>!t.has(te),a=te=>te&&te===Math.floor(te)&&te>0&&isFinite(te),u=te=>a(te)?te<=Math.pow(2,8)?Uint8Array:te<=Math.pow(2,16)?Uint16Array:te<=Math.pow(2,32)?Uint32Array:te<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(te){super(te),this.fill(0)}},f=(b=class{constructor(j,G){Ue(this,"heap");Ue(this,"length");if(!O(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new G(j),this.length=0}static create(j){let G=u(j);if(!G)return[];ke(b,w,!0);let ee=new b(j,G);return ke(b,w,!1),ee}push(j){this.heap[this.length++]=j}pop(){return this.heap[--this.length]}},w=new WeakMap,xe(b,w,!1),b),p=(H=class{constructor(j){xe(this,C);xe(this,v);xe(this,I);xe(this,A);xe(this,T);xe(this,k);Ue(this,"ttl");Ue(this,"ttlResolution");Ue(this,"ttlAutopurge");Ue(this,"updateAgeOnGet");Ue(this,"updateAgeOnHas");Ue(this,"allowStale");Ue(this,"noDisposeOnSet");Ue(this,"noUpdateTTL");Ue(this,"maxEntrySize");Ue(this,"sizeCalculation");Ue(this,"noDeleteOnFetchRejection");Ue(this,"noDeleteOnStaleGet");Ue(this,"allowStaleOnFetchAbort");Ue(this,"allowStaleOnFetchRejection");Ue(this,"ignoreFetchAbort");xe(this,R);xe(this,E);xe(this,S);xe(this,P);xe(this,N);xe(this,z);xe(this,re);xe(this,_);xe(this,W);xe(this,$);xe(this,q);xe(this,Z);xe(this,K);xe(this,F);xe(this,oe);xe(this,se);xe(this,de);xe(this,ae,()=>{});xe(this,Se,()=>{});xe(this,le,()=>{});xe(this,D,()=>!1);xe(this,X,j=>{});xe(this,ce,(j,G,ee)=>{});xe(this,ne,(j,G,ee,me)=>{if(ee||me)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:G=0,ttl:ee,ttlResolution:me=1,ttlAutopurge:g,updateAgeOnGet:d,updateAgeOnHas:m,allowStale:x,dispose:L,disposeAfter:V,noDisposeOnSet:he,noUpdateTTL:Ce,maxSize:Be=0,maxEntrySize:Ne=0,sizeCalculation:Ie,fetchMethod:Me,noDeleteOnFetchRejection:Re,noDeleteOnStaleGet:He,allowStaleOnFetchRejection:it,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:at}=j;if(G!==0&&!a(G))throw new TypeError("max option must be a nonnegative integer");let dt=G?u(G):Array;if(!dt)throw new Error("invalid max value: "+G);if(ke(this,v,G),ke(this,I,Be),this.maxEntrySize=Ne||O(this,I),this.sizeCalculation=Ie,this.sizeCalculation){if(!O(this,I)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Me!==void 0&&typeof Me!="function")throw new TypeError("fetchMethod must be a function if specified");if(ke(this,k,Me),ke(this,se,!!Me),ke(this,S,new Map),ke(this,P,new Array(G).fill(void 0)),ke(this,N,new Array(G).fill(void 0)),ke(this,z,new dt(G)),ke(this,re,new dt(G)),ke(this,_,0),ke(this,W,0),ke(this,$,f.create(G)),ke(this,R,0),ke(this,E,0),typeof L=="function"&&ke(this,A,L),typeof V=="function"?(ke(this,T,V),ke(this,q,[])):(ke(this,T,void 0),ke(this,q,void 0)),ke(this,oe,!!O(this,A)),ke(this,de,!!O(this,T)),this.noDisposeOnSet=!!he,this.noUpdateTTL=!!Ce,this.noDeleteOnFetchRejection=!!Re,this.allowStaleOnFetchRejection=!!it,this.allowStaleOnFetchAbort=!!Xe,this.ignoreFetchAbort=!!at,this.maxEntrySize!==0){if(O(this,I)!==0&&!a(O(this,I)))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ae(this,C,nh).call(this)}if(this.allowStale=!!x,this.noDeleteOnStaleGet=!!He,this.updateAgeOnGet=!!d,this.updateAgeOnHas=!!m,this.ttlResolution=a(me)||me===0?me:1,this.ttlAutopurge=!!g,this.ttl=ee||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ae(this,C,ua).call(this)}if(O(this,v)===0&&this.ttl===0&&O(this,I)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!O(this,v)&&!O(this,I)){let st="LRU_CACHE_UNBOUNDED";l(st)&&(t.add(st),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",st,H))}}static unsafeExposeInternals(j){return{starts:O(j,K),ttls:O(j,F),sizes:O(j,Z),keyMap:O(j,S),keyList:O(j,P),valList:O(j,N),next:O(j,z),prev:O(j,re),get head(){return O(j,_)},get tail(){return O(j,W)},free:O(j,$),isBackgroundFetch:G=>{var ee;return Ae(ee=j,C,Qe).call(ee,G)},backgroundFetch:(G,ee,me,g)=>{var d;return Ae(d=j,C,Si).call(d,G,ee,me,g)},moveToTail:G=>{var ee;return Ae(ee=j,C,Wn).call(ee,G)},indexes:G=>{var ee;return Ae(ee=j,C,Er).call(ee,G)},rindexes:G=>{var ee;return Ae(ee=j,C,Sr).call(ee,G)},isStale:G=>{var ee;return O(ee=j,D).call(ee,G)}}}get max(){return O(this,v)}get maxSize(){return O(this,I)}get calculatedSize(){return O(this,E)}get size(){return O(this,R)}get fetchMethod(){return O(this,k)}get dispose(){return O(this,A)}get disposeAfter(){return O(this,T)}getRemainingTTL(j){return O(this,S).has(j)?1/0:0}*entries(){for(let j of Ae(this,C,Er).call(this))O(this,N)[j]!==void 0&&O(this,P)[j]!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield[O(this,P)[j],O(this,N)[j]])}*rentries(){for(let j of Ae(this,C,Sr).call(this))O(this,N)[j]!==void 0&&O(this,P)[j]!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield[O(this,P)[j],O(this,N)[j]])}*keys(){for(let j of Ae(this,C,Er).call(this)){let G=O(this,P)[j];G!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield G)}}*rkeys(){for(let j of Ae(this,C,Sr).call(this)){let G=O(this,P)[j];G!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield G)}}*values(){for(let j of Ae(this,C,Er).call(this))O(this,N)[j]!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield O(this,N)[j])}*rvalues(){for(let j of Ae(this,C,Sr).call(this))O(this,N)[j]!==void 0&&!Ae(this,C,Qe).call(this,O(this,N)[j])&&(yield O(this,N)[j])}[Symbol.iterator](){return this.entries()}find(j,G={}){for(let ee of Ae(this,C,Er).call(this)){let me=O(this,N)[ee],g=Ae(this,C,Qe).call(this,me)?me.__staleWhileFetching:me;if(g!==void 0&&j(g,O(this,P)[ee],this))return this.get(O(this,P)[ee],G)}}forEach(j,G=this){for(let ee of Ae(this,C,Er).call(this)){let me=O(this,N)[ee],g=Ae(this,C,Qe).call(this,me)?me.__staleWhileFetching:me;g!==void 0&&j.call(G,g,O(this,P)[ee],this)}}rforEach(j,G=this){for(let ee of Ae(this,C,Sr).call(this)){let me=O(this,N)[ee],g=Ae(this,C,Qe).call(this,me)?me.__staleWhileFetching:me;g!==void 0&&j.call(G,g,O(this,P)[ee],this)}}purgeStale(){let j=!1;for(let G of Ae(this,C,Sr).call(this,{allowStale:!0}))O(this,D).call(this,G)&&(this.delete(O(this,P)[G]),j=!0);return j}dump(){let j=[];for(let G of Ae(this,C,Er).call(this,{allowStale:!0})){let ee=O(this,P)[G],me=O(this,N)[G],g=Ae(this,C,Qe).call(this,me)?me.__staleWhileFetching:me;if(g===void 0||ee===void 0)continue;let d={value:g};if(O(this,F)&&O(this,K)){d.ttl=O(this,F)[G];let m=r.now()-O(this,K)[G];d.start=Math.floor(Date.now()-m)}O(this,Z)&&(d.size=O(this,Z)[G]),j.unshift([ee,d])}return j}load(j){this.clear();for(let[G,ee]of j){if(ee.start){let me=Date.now()-ee.start;ee.start=r.now()-me}this.set(G,ee.value,ee)}}set(j,G,ee={}){var Ce,Be,Ne,Ie,Me;if(G===void 0)return this.delete(j),this;let{ttl:me=this.ttl,start:g,noDisposeOnSet:d=this.noDisposeOnSet,sizeCalculation:m=this.sizeCalculation,status:x}=ee,{noUpdateTTL:L=this.noUpdateTTL}=ee,V=O(this,ne).call(this,j,G,ee.size||0,m);if(this.maxEntrySize&&V>this.maxEntrySize)return x&&(x.set="miss",x.maxEntrySizeExceeded=!0),this.delete(j),this;let he=O(this,R)===0?void 0:O(this,S).get(j);if(he===void 0)he=O(this,R)===0?O(this,W):O(this,$).length!==0?O(this,$).pop():O(this,R)===O(this,v)?Ae(this,C,Ei).call(this,!1):O(this,R),O(this,P)[he]=j,O(this,N)[he]=G,O(this,S).set(j,he),O(this,z)[O(this,W)]=he,O(this,re)[he]=O(this,W),ke(this,W,he),ri(this,R)._++,O(this,ce).call(this,he,V,x),x&&(x.set="add"),L=!1;else{Ae(this,C,Wn).call(this,he);let Re=O(this,N)[he];if(G!==Re){if(O(this,se)&&Ae(this,C,Qe).call(this,Re)){Re.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:He}=Re;He!==void 0&&!d&&(O(this,oe)&&((Ce=O(this,A))==null||Ce.call(this,He,j,"set")),O(this,de)&&((Be=O(this,q))==null||Be.push([He,j,"set"])))}else d||(O(this,oe)&&((Ne=O(this,A))==null||Ne.call(this,Re,j,"set")),O(this,de)&&((Ie=O(this,q))==null||Ie.push([Re,j,"set"])));if(O(this,X).call(this,he),O(this,ce).call(this,he,V,x),O(this,N)[he]=G,x){x.set="replace";let He=Re&&Ae(this,C,Qe).call(this,Re)?Re.__staleWhileFetching:Re;He!==void 0&&(x.oldValue=He)}}else x&&(x.set="update")}if(me!==0&&!O(this,F)&&Ae(this,C,ua).call(this),O(this,F)&&(L||O(this,le).call(this,he,me,g),x&&O(this,Se).call(this,x,he)),!d&&O(this,de)&&O(this,q)){let Re=O(this,q),He;for(;He=Re==null?void 0:Re.shift();)(Me=O(this,T))==null||Me.call(this,...He)}return this}pop(){var j;try{for(;O(this,R);){let G=O(this,N)[O(this,_)];if(Ae(this,C,Ei).call(this,!0),Ae(this,C,Qe).call(this,G)){if(G.__staleWhileFetching)return G.__staleWhileFetching}else if(G!==void 0)return G}}finally{if(O(this,de)&&O(this,q)){let G=O(this,q),ee;for(;ee=G==null?void 0:G.shift();)(j=O(this,T))==null||j.call(this,...ee)}}}has(j,G={}){let{updateAgeOnHas:ee=this.updateAgeOnHas,status:me}=G,g=O(this,S).get(j);if(g!==void 0){let d=O(this,N)[g];if(Ae(this,C,Qe).call(this,d)&&d.__staleWhileFetching===void 0)return!1;if(O(this,D).call(this,g))me&&(me.has="stale",O(this,Se).call(this,me,g));else return ee&&O(this,ae).call(this,g),me&&(me.has="hit",O(this,Se).call(this,me,g)),!0}else me&&(me.has="miss");return!1}peek(j,G={}){let{allowStale:ee=this.allowStale}=G,me=O(this,S).get(j);if(me!==void 0&&(ee||!O(this,D).call(this,me))){let g=O(this,N)[me];return Ae(this,C,Qe).call(this,g)?g.__staleWhileFetching:g}}async fetch(j,G={}){let{allowStale:ee=this.allowStale,updateAgeOnGet:me=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,ttl:d=this.ttl,noDisposeOnSet:m=this.noDisposeOnSet,size:x=0,sizeCalculation:L=this.sizeCalculation,noUpdateTTL:V=this.noUpdateTTL,noDeleteOnFetchRejection:he=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ce=this.allowStaleOnFetchRejection,ignoreFetchAbort:Be=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ne=this.allowStaleOnFetchAbort,context:Ie,forceRefresh:Me=!1,status:Re,signal:He}=G;if(!O(this,se))return Re&&(Re.fetch="get"),this.get(j,{allowStale:ee,updateAgeOnGet:me,noDeleteOnStaleGet:g,status:Re});let it={allowStale:ee,updateAgeOnGet:me,noDeleteOnStaleGet:g,ttl:d,noDisposeOnSet:m,size:x,sizeCalculation:L,noUpdateTTL:V,noDeleteOnFetchRejection:he,allowStaleOnFetchRejection:Ce,allowStaleOnFetchAbort:Ne,ignoreFetchAbort:Be,status:Re,signal:He},Xe=O(this,S).get(j);if(Xe===void 0){Re&&(Re.fetch="miss");let at=Ae(this,C,Si).call(this,j,Xe,it,Ie);return at.__returned=at}else{let at=O(this,N)[Xe];if(Ae(this,C,Qe).call(this,at)){let xn=ee&&at.__staleWhileFetching!==void 0;return Re&&(Re.fetch="inflight",xn&&(Re.returnedStale=!0)),xn?at.__staleWhileFetching:at.__returned=at}let dt=O(this,D).call(this,Xe);if(!Me&&!dt)return Re&&(Re.fetch="hit"),Ae(this,C,Wn).call(this,Xe),me&&O(this,ae).call(this,Xe),Re&&O(this,Se).call(this,Re,Xe),at;let st=Ae(this,C,Si).call(this,j,Xe,it,Ie),ei=st.__staleWhileFetching!==void 0&&ee;return Re&&(Re.fetch=dt?"stale":"refresh",ei&&dt&&(Re.returnedStale=!0)),ei?st.__staleWhileFetching:st.__returned=st}}get(j,G={}){let{allowStale:ee=this.allowStale,updateAgeOnGet:me=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,status:d}=G,m=O(this,S).get(j);if(m!==void 0){let x=O(this,N)[m],L=Ae(this,C,Qe).call(this,x);return d&&O(this,Se).call(this,d,m),O(this,D).call(this,m)?(d&&(d.get="stale"),L?(d&&ee&&x.__staleWhileFetching!==void 0&&(d.returnedStale=!0),ee?x.__staleWhileFetching:void 0):(g||this.delete(j),d&&ee&&(d.returnedStale=!0),ee?x:void 0)):(d&&(d.get="hit"),L?x.__staleWhileFetching:(Ae(this,C,Wn).call(this,m),me&&O(this,ae).call(this,m),x))}else d&&(d.get="miss")}delete(j){var ee,me,g,d;let G=!1;if(O(this,R)!==0){let m=O(this,S).get(j);if(m!==void 0)if(G=!0,O(this,R)===1)this.clear();else{O(this,X).call(this,m);let x=O(this,N)[m];Ae(this,C,Qe).call(this,x)?x.__abortController.abort(new Error("deleted")):(O(this,oe)||O(this,de))&&(O(this,oe)&&((ee=O(this,A))==null||ee.call(this,x,j,"delete")),O(this,de)&&((me=O(this,q))==null||me.push([x,j,"delete"]))),O(this,S).delete(j),O(this,P)[m]=void 0,O(this,N)[m]=void 0,m===O(this,W)?ke(this,W,O(this,re)[m]):m===O(this,_)?ke(this,_,O(this,z)[m]):(O(this,z)[O(this,re)[m]]=O(this,z)[m],O(this,re)[O(this,z)[m]]=O(this,re)[m]),ri(this,R)._--,O(this,$).push(m)}}if(O(this,de)&&((g=O(this,q))!=null&&g.length)){let m=O(this,q),x;for(;x=m==null?void 0:m.shift();)(d=O(this,T))==null||d.call(this,...x)}return G}clear(){var j,G,ee;for(let me of Ae(this,C,Sr).call(this,{allowStale:!0})){let g=O(this,N)[me];if(Ae(this,C,Qe).call(this,g))g.__abortController.abort(new Error("deleted"));else{let d=O(this,P)[me];O(this,oe)&&((j=O(this,A))==null||j.call(this,g,d,"delete")),O(this,de)&&((G=O(this,q))==null||G.push([g,d,"delete"]))}}if(O(this,S).clear(),O(this,N).fill(void 0),O(this,P).fill(void 0),O(this,F)&&O(this,K)&&(O(this,F).fill(0),O(this,K).fill(0)),O(this,Z)&&O(this,Z).fill(0),ke(this,_,0),ke(this,W,0),O(this,$).length=0,ke(this,E,0),ke(this,R,0),O(this,de)&&O(this,q)){let me=O(this,q),g;for(;g=me==null?void 0:me.shift();)(ee=O(this,T))==null||ee.call(this,...g)}}},v=new WeakMap,I=new WeakMap,A=new WeakMap,T=new WeakMap,k=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,P=new WeakMap,N=new WeakMap,z=new WeakMap,re=new WeakMap,_=new WeakMap,W=new WeakMap,$=new WeakMap,q=new WeakMap,Z=new WeakMap,K=new WeakMap,F=new WeakMap,oe=new WeakMap,se=new WeakMap,de=new WeakMap,C=new WeakSet,ua=function(){let j=new h(O(this,v)),G=new h(O(this,v));ke(this,F,j),ke(this,K,G),ke(this,le,(g,d,m=r.now())=>{if(G[g]=d!==0?m:0,j[g]=d,d!==0&&this.ttlAutopurge){let x=setTimeout(()=>{O(this,D).call(this,g)&&this.delete(O(this,P)[g])},d+1);x.unref&&x.unref()}}),ke(this,ae,g=>{G[g]=j[g]!==0?r.now():0}),ke(this,Se,(g,d)=>{if(j[d]){let m=j[d],x=G[d];g.ttl=m,g.start=x,g.now=ee||me();let L=g.now-x;g.remainingTTL=m-L}});let ee=0,me=()=>{let g=r.now();if(this.ttlResolution>0){ee=g;let d=setTimeout(()=>ee=0,this.ttlResolution);d.unref&&d.unref()}return g};this.getRemainingTTL=g=>{let d=O(this,S).get(g);if(d===void 0)return 0;let m=j[d],x=G[d];if(m===0||x===0)return 1/0;let L=(ee||me())-x;return m-L},ke(this,D,g=>j[g]!==0&&G[g]!==0&&(ee||me())-G[g]>j[g])},ae=new WeakMap,Se=new WeakMap,le=new WeakMap,D=new WeakMap,nh=function(){let j=new h(O(this,v));ke(this,E,0),ke(this,Z,j),ke(this,X,G=>{ke(this,E,O(this,E)-j[G]),j[G]=0}),ke(this,ne,(G,ee,me,g)=>{if(Ae(this,C,Qe).call(this,ee))return 0;if(!a(me))if(g){if(typeof g!="function")throw new TypeError("sizeCalculation must be a function");if(me=g(ee,G),!a(me))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return me}),ke(this,ce,(G,ee,me)=>{if(j[G]=ee,O(this,I)){let g=O(this,I)-j[G];for(;O(this,E)>g;)Ae(this,C,Ei).call(this,!0)}ke(this,E,O(this,E)+j[G]),me&&(me.entrySize=ee,me.totalCalculatedSize=O(this,E))})},X=new WeakMap,ce=new WeakMap,ne=new WeakMap,Er=function*({allowStale:j=this.allowStale}={}){if(O(this,R))for(let G=O(this,W);!(!Ae(this,C,ha).call(this,G)||((j||!O(this,D).call(this,G))&&(yield G),G===O(this,_)));)G=O(this,re)[G]},Sr=function*({allowStale:j=this.allowStale}={}){if(O(this,R))for(let G=O(this,_);!(!Ae(this,C,ha).call(this,G)||((j||!O(this,D).call(this,G))&&(yield G),G===O(this,W)));)G=O(this,z)[G]},ha=function(j){return j!==void 0&&O(this,S).get(O(this,P)[j])===j},Ei=function(j){var g,d;let G=O(this,_),ee=O(this,P)[G],me=O(this,N)[G];return O(this,se)&&Ae(this,C,Qe).call(this,me)?me.__abortController.abort(new Error("evicted")):(O(this,oe)||O(this,de))&&(O(this,oe)&&((g=O(this,A))==null||g.call(this,me,ee,"evict")),O(this,de)&&((d=O(this,q))==null||d.push([me,ee,"evict"]))),O(this,X).call(this,G),j&&(O(this,P)[G]=void 0,O(this,N)[G]=void 0,O(this,$).push(G)),O(this,R)===1?(ke(this,_,ke(this,W,0)),O(this,$).length=0):ke(this,_,O(this,z)[G]),O(this,S).delete(ee),ri(this,R)._--,G},Si=function(j,G,ee,me){let g=G===void 0?void 0:O(this,N)[G];if(Ae(this,C,Qe).call(this,g))return g;let d=new s,{signal:m}=ee;m==null||m.addEventListener("abort",()=>d.abort(m.reason),{signal:d.signal});let x={signal:d.signal,options:ee,context:me},L=(Ie,Me=!1)=>{let{aborted:Re}=d.signal,He=ee.ignoreFetchAbort&&Ie!==void 0;if(ee.status&&(Re&&!Me?(ee.status.fetchAborted=!0,ee.status.fetchError=d.signal.reason,He&&(ee.status.fetchAbortIgnored=!0)):ee.status.fetchResolved=!0),Re&&!He&&!Me)return he(d.signal.reason);let it=Be;return O(this,N)[G]===Be&&(Ie===void 0?it.__staleWhileFetching?O(this,N)[G]=it.__staleWhileFetching:this.delete(j):(ee.status&&(ee.status.fetchUpdated=!0),this.set(j,Ie,x.options))),Ie},V=Ie=>(ee.status&&(ee.status.fetchRejected=!0,ee.status.fetchError=Ie),he(Ie)),he=Ie=>{let{aborted:Me}=d.signal,Re=Me&&ee.allowStaleOnFetchAbort,He=Re||ee.allowStaleOnFetchRejection,it=He||ee.noDeleteOnFetchRejection,Xe=Be;if(O(this,N)[G]===Be&&(!it||Xe.__staleWhileFetching===void 0?this.delete(j):Re||(O(this,N)[G]=Xe.__staleWhileFetching)),He)return ee.status&&Xe.__staleWhileFetching!==void 0&&(ee.status.returnedStale=!0),Xe.__staleWhileFetching;if(Xe.__returned===Xe)throw Ie},Ce=(Ie,Me)=>{var He;let Re=(He=O(this,k))==null?void 0:He.call(this,j,g,x);Re&&Re instanceof Promise&&Re.then(it=>Ie(it===void 0?void 0:it),Me),d.signal.addEventListener("abort",()=>{(!ee.ignoreFetchAbort||ee.allowStaleOnFetchAbort)&&(Ie(void 0),ee.allowStaleOnFetchAbort&&(Ie=it=>L(it,!0)))})};ee.status&&(ee.status.fetchDispatched=!0);let Be=new Promise(Ce).then(L,V),Ne=Object.assign(Be,{__abortController:d,__staleWhileFetching:g,__returned:void 0});return G===void 0?(this.set(j,Ne,{...x.options,status:void 0}),G=O(this,S).get(j)):O(this,N)[G]=Ne,Ne},Qe=function(j){if(!O(this,se))return!1;let G=j;return!!G&&G instanceof Promise&&G.hasOwnProperty("__staleWhileFetching")&&G.__abortController instanceof s},fa=function(j,G){O(this,re)[G]=j,O(this,z)[j]=G},Wn=function(j){j!==O(this,W)&&(j===O(this,_)?ke(this,_,O(this,z)[j]):Ae(this,C,fa).call(this,O(this,re)[j],O(this,z)[j]),Ae(this,C,fa).call(this,O(this,W),j),ke(this,W,j))},H);e.LRUCache=p}),mr=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var r=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};e.ContainerIterator=r;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var o=class extends t{};e.Container=o}),xg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=mr(),t=class extends r.Base{constructor(c=[]){super(),this.S=[];let s=this;c.forEach(function(n){s.push(n)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},o=t;e.default=o}),Og=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=mr(),t=class extends r.Base{constructor(c=[]){super(),this.j=0,this.q=[];let s=this;c.forEach(function(n){s.push(n)})}clear(){this.q=[],this.i=this.j=0}push(c){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let n=this.i;for(let l=0;l<n;++l)this.q[l]=this.q[this.j+l];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},o=t;e.default=o}),Pg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=mr(),t=class extends r.Base{constructor(c=[],s=function(l,a){return l>a?-1:l<a?1:0},n=!0){if(super(),this.v=s,Array.isArray(c))this.C=n?[...c]:c;else{this.C=[];let a=this;c.forEach(function(u){a.C.push(u)})}this.i=this.C.length;let l=this.i>>1;for(let a=this.i-1>>1;a>=0;--a)this.k(a,l)}m(c){let s=this.C[c];for(;c>0;){let n=c-1>>1,l=this.C[n];if(this.v(l,s)<=0)break;this.C[c]=l,c=n}this.C[c]=s}k(c,s){let n=this.C[c];for(;c<s;){let l=c<<1|1,a=l+1,u=this.C[l];if(a<this.i&&this.v(u,this.C[a])>0&&(l=a,u=this.C[a]),this.v(u,n)>=0)break;this.C[c]=u,c=l}this.C[c]=n}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let s=this.C.indexOf(c);return s<0?!1:(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(c){let s=this.C.indexOf(c);return s<0?!1:(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}},o=t;e.default=o}),Ka=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=mr(),t=class extends r.Container{},o=t;e.default=o}),yr=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=r;function r(){throw new RangeError("Iterator access denied!")}}),ih=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var r=mr(),t=yr(),o=class extends r.ContainerIterator{constructor(c,s){super(s),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};e.RandomIterator=o}),Bg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=o(Ka()),t=ih();function o(l){return l&&l.t?l:{default:l}}var c=class sh extends t.RandomIterator{constructor(a,u,h){super(a,h),this.container=u}copy(){return new sh(this.o,this.container,this.iteratorType)}},s=class extends r.default{constructor(l=[],a=!0){if(super(),Array.isArray(l))this.J=a?[...l]:l,this.i=l.length;else{this.J=[];let u=this;l.forEach(function(h){u.pushBack(h)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;return this.J[l]}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;return this.J.splice(l,1),this.i-=1,this.i}eraseElementByValue(l){let a=0;for(let u=0;u<this.i;++u)this.J[u]!==l&&(this.J[a++]=this.J[u]);return this.i=this.J.length=a,this.i}eraseElementByIterator(l){let a=l.o;return l=l.next(),this.eraseElementByPos(a),l}pushBack(l){return this.J.push(l),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(l,a){if(l<0||l>this.i-1)throw new RangeError;this.J[l]=a}insert(l,a,u=1){if(l<0||l>this.i)throw new RangeError;return this.J.splice(l,0,...new Array(u).fill(a)),this.i+=u,this.i}find(l){for(let a=0;a<this.i;++a)if(this.J[a]===l)return new c(a,this);return this.end()}reverse(){this.J.reverse()}unique(){let l=1;for(let a=1;a<this.i;++a)this.J[a]!==this.J[a-1]&&(this.J[l++]=this.J[a]);return this.i=this.J.length=l,this.i}sort(l){this.J.sort(l)}forEach(l){for(let a=0;a<this.i;++a)l(this.J[a],a,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},n=s;e.default=n}),Mg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(Ka()),t=mr(),o=yr();function c(a){return a&&a.t?a:{default:a}}var s=class oh extends t.ContainerIterator{constructor(u,h,f,p){super(p),this.o=u,this.h=h,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l}set pointer(u){this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l=u}copy(){return new oh(this.o,this.h,this.container,this.iteratorType)}},n=class extends r.default{constructor(a=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let u=this;a.forEach(function(h){u.pushBack(h)})}V(a){let{L:u,B:h}=a;u.B=h,h.L=u,a===this.p&&(this.p=h),a===this._&&(this._=u),this.i-=1}G(a,u){let h=u.B,f={l:a,L:u,B:h};u.B=f,h.L=f,u===this.h&&(this.p=f),h===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let u=this.p;for(;a--;)u=u.B;return u.l}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let u=this.p;for(;a--;)u=u.B;return this.V(u),this.i}eraseElementByValue(a){let u=this.p;for(;u!==this.h;)u.l===a&&this.V(u),u=u.B;return this.i}eraseElementByIterator(a){let u=a.o;return u===this.h&&(0,o.throwIteratorAccessError)(),a=a.next(),this.V(u),a}pushBack(a){return this.G(a,this._),this.i}popBack(){if(this.i===0)return;let a=this._.l;return this.V(this._),a}pushFront(a){return this.G(a,this.h),this.i}popFront(){if(this.i===0)return;let a=this.p.l;return this.V(this.p),a}setElementByPos(a,u){if(a<0||a>this.i-1)throw new RangeError;let h=this.p;for(;a--;)h=h.B;h.l=u}insert(a,u,h=1){if(a<0||a>this.i)throw new RangeError;if(h<=0)return this.i;if(a===0)for(;h--;)this.pushFront(u);else if(a===this.i)for(;h--;)this.pushBack(u);else{let f=this.p;for(let y=1;y<a;++y)f=f.B;let p=f.B;for(this.i+=h;h--;)f.B={l:u,L:f},f.B.L=f,f=f.B;f.B=p,p.L=f}return this.i}find(a){let u=this.p;for(;u!==this.h;){if(u.l===a)return new s(u,this.h,this);u=u.B}return this.end()}reverse(){if(this.i<=1)return;let a=this.p,u=this._,h=0;for(;h<<1<this.i;){let f=a.l;a.l=u.l,u.l=f,a=a.B,u=u.L,h+=1}}unique(){if(this.i<=1)return this.i;let a=this.p;for(;a!==this.h;){let u=a;for(;u.B!==this.h&&u.l===u.B.l;)u=u.B,this.i-=1;a.B=u.B,a.B.L=a,a=a.B}return this.i}sort(a){if(this.i<=1)return;let u=[];this.forEach(function(f){u.push(f)}),u.sort(a);let h=this.p;u.forEach(function(f){h.l=f,h=h.B})}merge(a){let u=this;if(this.i===0)a.forEach(function(h){u.pushBack(h)});else{let h=this.p;a.forEach(function(f){for(;h!==u.h&&h.l<=f;)h=h.B;u.G(f,h.L)})}return this.i}forEach(a){let u=this.p,h=0;for(;u!==this.h;)a(u.l,h++,this),u=u.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let a=this.p;for(;a!==this.h;)yield a.l,a=a.B}).bind(this)()}},l=n;e.default=l}),Ng=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=o(Ka()),t=ih();function o(l){return l&&l.t?l:{default:l}}var c=class ah extends t.RandomIterator{constructor(a,u,h){super(a,h),this.container=u}copy(){return new ah(this.o,this.container,this.iteratorType)}},s=class extends r.default{constructor(l=[],a=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let u=(()=>{if(typeof l.length=="number")return l.length;if(typeof l.size=="number")return l.size;if(typeof l.size=="function")return l.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=a,this.P=Math.max(Math.ceil(u/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let h=Math.ceil(u/this.F);this.j=this.R=(this.P>>1)-(h>>1),this.D=this.N=this.F-u%this.F>>1;let f=this;l.forEach(function(p){f.pushBack(p)})}T(){let l=[],a=Math.max(this.P>>1,1);for(let u=0;u<a;++u)l[u]=new Array(this.F);for(let u=this.j;u<this.P;++u)l[l.length]=this.A[u];for(let u=0;u<this.R;++u)l[l.length]=this.A[u];l[l.length]=[...this.A[this.R]],this.j=a,this.R=l.length-1;for(let u=0;u<a;++u)l[l.length]=new Array(this.F);this.A=l,this.P=l.length}O(l){let a=this.D+l+1,u=a%this.F,h=u-1,f=this.j+(a-u)/this.F;return u===0&&(f-=1),f%=this.P,h<0&&(h+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:h}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(l){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=l,this.i}popBack(){if(this.i===0)return;let l=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,l}pushFront(l){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=l,this.i}popFront(){if(this.i===0)return;let l=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:u}=this.O(l);return this.A[a][u]}setElementByPos(l,a){if(l<0||l>this.i-1)throw new RangeError;let{curNodeBucketIndex:u,curNodePointerIndex:h}=this.O(l);this.A[u][h]=a}insert(l,a,u=1){if(l<0||l>this.i)throw new RangeError;if(l===0)for(;u--;)this.pushFront(a);else if(l===this.i)for(;u--;)this.pushBack(a);else{let h=[];for(let f=l;f<this.i;++f)h.push(this.getElementByPos(f));this.cut(l-1);for(let f=0;f<u;++f)this.pushBack(a);for(let f=0;f<h.length;++f)this.pushBack(h[f])}return this.i}cut(l){if(l<0)return this.clear(),0;let{curNodeBucketIndex:a,curNodePointerIndex:u}=this.O(l);return this.R=a,this.N=u,this.i=l+1,this.i}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;if(l===0)this.popFront();else if(l===this.i-1)this.popBack();else{let a=[];for(let h=l+1;h<this.i;++h)a.push(this.getElementByPos(h));this.cut(l),this.popBack();let u=this;a.forEach(function(h){u.pushBack(h)})}return this.i}eraseElementByValue(l){if(this.i===0)return 0;let a=[];for(let h=0;h<this.i;++h){let f=this.getElementByPos(h);f!==l&&a.push(f)}let u=a.length;for(let h=0;h<u;++h)this.setElementByPos(h,a[h]);return this.cut(u-1)}eraseElementByIterator(l){let a=l.o;return this.eraseElementByPos(a),l=l.next(),l}find(l){for(let a=0;a<this.i;++a)if(this.getElementByPos(a)===l)return new c(a,this);return this.end()}reverse(){let l=0,a=this.i-1;for(;l<a;){let u=this.getElementByPos(l);this.setElementByPos(l,this.getElementByPos(a)),this.setElementByPos(a,u),l+=1,a-=1}}unique(){if(this.i<=1)return this.i;let l=1,a=this.getElementByPos(0);for(let u=1;u<this.i;++u){let h=this.getElementByPos(u);h!==a&&(a=h,this.setElementByPos(l++,h))}for(;this.i>l;)this.popBack();return this.i}sort(l){let a=[];for(let u=0;u<this.i;++u)a.push(this.getElementByPos(u));a.sort(l);for(let u=0;u<this.i;++u)this.setElementByPos(u,a[u])}shrinkToFit(){if(this.i===0)return;let l=[];this.forEach(function(a){l.push(a)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let a=0;a<this.P;++a)this.A.push(new Array(this.F));for(let a=0;a<l.length;++a)this.pushBack(l[a])}forEach(l){for(let a=0;a<this.i;++a)l(this.getElementByPos(a),a,this)}[Symbol.iterator](){return(function*(){for(let l=0;l<this.i;++l)yield this.getElementByPos(l)}).bind(this)()}},n=s;e.default=n}),Lg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var r=class{constructor(o,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=o,this.l=c}L(){let o=this;if(o.ee===1&&o.tt.tt===o)o=o.W;else if(o.U)for(o=o.U;o.W;)o=o.W;else{let c=o.tt;for(;c.U===o;)o=c,c=o.tt;o=c}return o}B(){let o=this;if(o.W){for(o=o.W;o.U;)o=o.U;return o}else{let c=o.tt;for(;c.W===o;)o=c,c=o.tt;return o.W!==c?c:o}}te(){let o=this.tt,c=this.W,s=c.U;return o.tt===this?o.tt=c:o.U===this?o.U=c:o.W=c,c.tt=o,c.U=this,this.tt=c,this.W=s,s&&(s.tt=this),c}se(){let o=this.tt,c=this.U,s=c.W;return o.tt===this?o.tt=c:o.U===this?o.U=c:o.W=c,c.tt=o,c.W=this,this.tt=c,this.U=s,s&&(s.tt=this),c}};e.TreeNode=r;var t=class extends r{constructor(){super(...arguments),this.rt=1}te(){let o=super.te();return this.ie(),o.ie(),o}se(){let o=super.se();return this.ie(),o.ie(),o}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),lh=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Lg(),t=mr(),o=yr(),c=class extends t.Container{constructor(n=function(a,u){return a<u?-1:a>u?1:0},l=!1){super(),this.Y=void 0,this.v=n,l?(this.re=r.TreeNodeEnableIndex,this.M=function(a,u,h){let f=this.ne(a,u,h);if(f){let p=f.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let y=this.he(f);if(y){let{parentNode:b,grandParent:w,curNode:v}=y;b.ie(),w.ie(),v.ie()}}return this.i},this.V=function(a){let u=this.fe(a);for(;u!==this.h;)u.rt-=1,u=u.tt}):(this.re=r.TreeNode,this.M=function(a,u,h){let f=this.ne(a,u,h);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(n,l){let a=this.h;for(;n;){let u=this.v(n.u,l);if(u<0)n=n.W;else if(u>0)a=n,n=n.U;else return n}return a}Z(n,l){let a=this.h;for(;n;)this.v(n.u,l)<=0?n=n.W:(a=n,n=n.U);return a}$(n,l){let a=this.h;for(;n;){let u=this.v(n.u,l);if(u<0)a=n,n=n.W;else if(u>0)n=n.U;else return n}return a}rr(n,l){let a=this.h;for(;n;)this.v(n.u,l)<0?(a=n,n=n.W):n=n.U;return a}ue(n){for(;;){let l=n.tt;if(l===this.h)return;if(n.ee===1){n.ee=0;return}if(n===l.U){let a=l.W;if(a.ee===1)a.ee=0,l.ee=1,l===this.Y?this.Y=l.te():l.te();else if(a.W&&a.W.ee===1){a.ee=l.ee,l.ee=0,a.W.ee=0,l===this.Y?this.Y=l.te():l.te();return}else a.U&&a.U.ee===1?(a.ee=1,a.U.ee=0,a.se()):(a.ee=1,n=l)}else{let a=l.U;if(a.ee===1)a.ee=0,l.ee=1,l===this.Y?this.Y=l.se():l.se();else if(a.U&&a.U.ee===1){a.ee=l.ee,l.ee=0,a.U.ee=0,l===this.Y?this.Y=l.se():l.se();return}else a.W&&a.W.ee===1?(a.ee=1,a.W.ee=0,a.te()):(a.ee=1,n=l)}}}fe(n){if(this.i===1)return this.clear(),this.h;let l=n;for(;l.U||l.W;){if(l.W)for(l=l.W;l.U;)l=l.U;else l=l.U;[n.u,l.u]=[l.u,n.u],[n.l,l.l]=[l.l,n.l],n=l}this.h.U===l?this.h.U=l.tt:this.h.W===l&&(this.h.W=l.tt),this.ue(l);let a=l.tt;return l===a.U?a.U=void 0:a.W=void 0,this.i-=1,this.Y.ee=0,a}oe(n,l){return n===void 0?!1:this.oe(n.U,l)||l(n)?!0:this.oe(n.W,l)}he(n){for(;;){let l=n.tt;if(l.ee===0)return;let a=l.tt;if(l===a.U){let u=a.W;if(u&&u.ee===1){if(u.ee=l.ee=0,a===this.Y)return;a.ee=1,n=a;continue}else if(n===l.W){if(n.ee=0,n.U&&(n.U.tt=l),n.W&&(n.W.tt=a),l.W=n.U,a.U=n.W,n.U=l,n.W=a,a===this.Y)this.Y=n,this.h.tt=n;else{let h=a.tt;h.U===a?h.U=n:h.W=n}return n.tt=a.tt,l.tt=n,a.tt=n,a.ee=1,{parentNode:l,grandParent:a,curNode:n}}else l.ee=0,a===this.Y?this.Y=a.se():a.se(),a.ee=1}else{let u=a.U;if(u&&u.ee===1){if(u.ee=l.ee=0,a===this.Y)return;a.ee=1,n=a;continue}else if(n===l.U){if(n.ee=0,n.U&&(n.U.tt=a),n.W&&(n.W.tt=l),a.W=n.U,l.U=n.W,n.U=a,n.W=l,a===this.Y)this.Y=n,this.h.tt=n;else{let h=a.tt;h.U===a?h.U=n:h.W=n}return n.tt=a.tt,l.tt=n,a.tt=n,a.ee=1,{parentNode:l,grandParent:a,curNode:n}}else l.ee=0,a===this.Y?this.Y=a.te():a.te(),a.ee=1}return}}ne(n,l,a){if(this.Y===void 0){this.i+=1,this.Y=new this.re(n,l),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let u,h=this.h.U,f=this.v(h.u,n);if(f===0){h.l=l;return}else if(f>0)h.U=new this.re(n,l),h.U.tt=h,u=h.U,this.h.U=u;else{let p=this.h.W,y=this.v(p.u,n);if(y===0){p.l=l;return}else if(y<0)p.W=new this.re(n,l),p.W.tt=p,u=p.W,this.h.W=u;else{if(a!==void 0){let b=a.o;if(b!==this.h){let w=this.v(b.u,n);if(w===0){b.l=l;return}else if(w>0){let v=b.L(),I=this.v(v.u,n);if(I===0){v.l=l;return}else I<0&&(u=new this.re(n,l),v.W===void 0?(v.W=u,u.tt=v):(b.U=u,u.tt=b))}}}if(u===void 0)for(u=this.Y;;){let b=this.v(u.u,n);if(b>0){if(u.U===void 0){u.U=new this.re(n,l),u.U.tt=u,u=u.U;break}u=u.U}else if(b<0){if(u.W===void 0){u.W=new this.re(n,l),u.W.tt=u,u=u.W;break}u=u.W}else{u.l=l;return}}}}return this.i+=1,u}I(n,l){for(;n;){let a=this.v(n.u,l);if(a<0)n=n.W;else if(a>0)n=n.U;else return n}return n||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(n,l){let a=n.o;if(a===this.h&&(0,o.throwIteratorAccessError)(),this.i===1)return a.u=l,!0;if(a===this.h.U)return this.v(a.B().u,l)>0?(a.u=l,!0):!1;if(a===this.h.W)return this.v(a.L().u,l)<0?(a.u=l,!0):!1;let u=a.L().u;if(this.v(u,l)>=0)return!1;let h=a.B().u;return this.v(h,l)<=0?!1:(a.u=l,!0)}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l=0,a=this;return this.oe(this.Y,function(u){return n===l?(a.V(u),!0):(l+=1,!1)}),this.i}eraseElementByKey(n){if(this.i===0)return!1;let l=this.I(this.Y,n);return l===this.h?!1:(this.V(l),!0)}eraseElementByIterator(n){let l=n.o;l===this.h&&(0,o.throwIteratorAccessError)();let a=l.W===void 0;return n.iteratorType===0?a&&n.next():(!a||l.U===void 0)&&n.next(),this.V(l),n}forEach(n){let l=0;for(let a of this)n(a,l++,this)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l,a=0;for(let u of this){if(a===n){l=u;break}a+=1}return l}getHeight(){if(this.i===0)return 0;let n=function(l){return l?Math.max(n(l.U),n(l.W))+1:0};return n(this.Y)}},s=c;e.default=s}),ch=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=mr(),t=yr(),o=class extends r.ContainerIterator{constructor(s,n,l){super(l),this.o=s,this.h=n,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,n=this.h.tt;if(s===this.h)return n?n.rt-1:0;let l=0;for(s.U&&(l+=s.U.rt);s!==n;){let a=s.tt;s===a.W&&(l+=1,a.U&&(l+=a.U.rt)),s=a}return l}},c=o;e.default=c}),Ug=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(lh()),t=c(ch()),o=yr();function c(a){return a&&a.t?a:{default:a}}var s=class uh extends t.default{constructor(u,h,f,p){super(u,h,p),this.container=f}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new uh(this.o,this.h,this.container,this.iteratorType)}},n=class extends r.default{constructor(a=[],u,h){super(u,h);let f=this;a.forEach(function(p){f.insert(p)})}*K(a){a!==void 0&&(yield*this.K(a.U),yield a.u,yield*this.K(a.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(a,u){return this.M(a,void 0,u)}find(a){let u=this.I(this.Y,a);return new s(u,this.h,this)}lowerBound(a){let u=this.X(this.Y,a);return new s(u,this.h,this)}upperBound(a){let u=this.Z(this.Y,a);return new s(u,this.h,this)}reverseLowerBound(a){let u=this.$(this.Y,a);return new s(u,this.h,this)}reverseUpperBound(a){let u=this.rr(this.Y,a);return new s(u,this.h,this)}union(a){let u=this;return a.forEach(function(h){u.insert(h)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},l=n;e.default=l}),Dg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(lh()),t=c(ch()),o=yr();function c(a){return a&&a.t?a:{default:a}}var s=class hh extends t.default{constructor(u,h,f,p){super(u,h,p),this.container=f}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let u=this;return new Proxy([],{get(h,f){if(f==="0")return u.o.u;if(f==="1")return u.o.l},set(h,f,p){if(f!=="1")throw new TypeError("props must be 1");return u.o.l=p,!0}})}copy(){return new hh(this.o,this.h,this.container,this.iteratorType)}},n=class extends r.default{constructor(a=[],u,h){super(u,h);let f=this;a.forEach(function(p){f.setElement(p[0],p[1])})}*K(a){a!==void 0&&(yield*this.K(a.U),yield[a.u,a.l],yield*this.K(a.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;let a=this.h.U;return[a.u,a.l]}back(){if(this.i===0)return;let a=this.h.W;return[a.u,a.l]}lowerBound(a){let u=this.X(this.Y,a);return new s(u,this.h,this)}upperBound(a){let u=this.Z(this.Y,a);return new s(u,this.h,this)}reverseLowerBound(a){let u=this.$(this.Y,a);return new s(u,this.h,this)}reverseUpperBound(a){let u=this.rr(this.Y,a);return new s(u,this.h,this)}setElement(a,u,h){return this.M(a,u,h)}find(a){let u=this.I(this.Y,a);return new s(u,this.h,this)}getElementByKey(a){return this.I(this.Y,a).l}union(a){let u=this;return a.forEach(function(h){u.setElement(h[0],h[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},l=n;e.default=l}),fh=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=r;function r(t){let o=typeof t;return o==="object"&&t!==null||o==="function"}}),dh=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var r=mr(),t=c(fh()),o=yr();function c(l){return l&&l.t?l:{default:l}}var s=class extends r.ContainerIterator{constructor(l,a,u){super(u),this.o=l,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=s;var n=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(l){let{L:a,B:u}=l;a.B=u,u.L=a,l===this.p&&(this.p=u),l===this._&&(this._=a),this.i-=1}M(l,a,u){u===void 0&&(u=(0,t.default)(l));let h;if(u){let f=l[this.HASH_TAG];if(f!==void 0)return this.H[f].l=a,this.i;Object.defineProperty(l,this.HASH_TAG,{value:this.H.length,configurable:!0}),h={u:l,l:a,L:this._,B:this.h},this.H.push(h)}else{let f=this.g[l];if(f)return f.l=a,this.i;h={u:l,l:a,L:this._,B:this.h},this.g[l]=h}return this.i===0?(this.p=h,this.h.B=h):this._.B=h,this._=h,this.h.L=h,++this.i}I(l,a){if(a===void 0&&(a=(0,t.default)(l)),a){let u=l[this.HASH_TAG];return u===void 0?this.h:this.H[u]}else return this.g[l]||this.h}clear(){let l=this.HASH_TAG;this.H.forEach(function(a){delete a.u[l]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(l,a){let u;if(a===void 0&&(a=(0,t.default)(l)),a){let h=l[this.HASH_TAG];if(h===void 0)return!1;delete l[this.HASH_TAG],u=this.H[h],delete this.H[h]}else{if(u=this.g[l],u===void 0)return!1;delete this.g[l]}return this.V(u),!0}eraseElementByIterator(l){let a=l.o;return a===this.h&&(0,o.throwIteratorAccessError)(),this.V(a),l.next()}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let a=this.p;for(;l--;)a=a.B;return this.V(a),this.i}};e.HashContainer=n}),jg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=dh(),t=yr(),o=class ph extends r.HashContainerIterator{constructor(l,a,u,h){super(l,a,h),this.container=u}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new ph(this.o,this.h,this.container,this.iteratorType)}},c=class extends r.HashContainer{constructor(n=[]){super();let l=this;n.forEach(function(a){l.insert(a)})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(n,l){return this.M(n,void 0,l)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l=this.p;for(;n--;)l=l.B;return l.u}find(n,l){let a=this.I(n,l);return new o(a,this.h,this)}forEach(n){let l=0,a=this.p;for(;a!==this.h;)n(a.u,l++,this),a=a.B}[Symbol.iterator](){return(function*(){let n=this.p;for(;n!==this.h;)yield n.u,n=n.B}).bind(this)()}},s=c;e.default=s}),Fg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=dh(),t=c(fh()),o=yr();function c(a){return a&&a.t?a:{default:a}}var s=class gh extends r.HashContainerIterator{constructor(u,h,f,p){super(u,h,p),this.container=f}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let u=this;return new Proxy([],{get(h,f){if(f==="0")return u.o.u;if(f==="1")return u.o.l},set(h,f,p){if(f!=="1")throw new TypeError("props must be 1");return u.o.l=p,!0}})}copy(){return new gh(this.o,this.h,this.container,this.iteratorType)}},n=class extends r.HashContainer{constructor(a=[]){super();let u=this;a.forEach(function(h){u.setElement(h[0],h[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(a,u,h){return this.M(a,u,h)}getElementByKey(a,u){if(u===void 0&&(u=(0,t.default)(a)),u){let f=a[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let h=this.g[a];return h?h.l:void 0}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let u=this.p;for(;a--;)u=u.B;return[u.u,u.l]}find(a,u){let h=this.I(a,u);return new s(h,this.h,this)}forEach(a){let u=0,h=this.p;for(;h!==this.h;)a([h.u,h.l],u++,this),h=h.B}[Symbol.iterator](){return(function*(){let a=this.p;for(;a!==this.h;)yield[a.u,a.l],a=a.B}).bind(this)()}},l=n;e.default=l}),qg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return c.default}});var r=f(xg()),t=f(Og()),o=f(Pg()),c=f(Bg()),s=f(Mg()),n=f(Ng()),l=f(Ug()),a=f(Dg()),u=f(jg()),h=f(Fg());function f(p){return p&&p.t?p:{default:p}}}),Wg=_e((e,r)=>{ye(),we(),be();var t=qg().OrderedSet,o=pr()("number-allocator:trace"),c=pr()("number-allocator:error");function s(l,a){this.low=l,this.high=a}s.prototype.equals=function(l){return this.low===l.low&&this.high===l.high},s.prototype.compare=function(l){return this.low<l.low&&this.high<l.low?-1:l.low<this.low&&l.high<this.low?1:0};function n(l,a){if(!(this instanceof n))return new n(l,a);this.min=l,this.max=a,this.ss=new t([],(u,h)=>u.compare(h)),o("Create"),this.clear()}n.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},n.prototype.alloc=function(){if(this.ss.size()===0)return o("alloc():empty"),null;let l=this.ss.begin(),a=l.pointer.low,u=l.pointer.high,h=a;return h+1<=u?this.ss.updateKeyByIterator(l,new s(a+1,u)):this.ss.eraseElementByPos(0),o("alloc():"+h),h},n.prototype.use=function(l){let a=new s(l,l),u=this.ss.lowerBound(a);if(!u.equals(this.ss.end())){let h=u.pointer.low,f=u.pointer.high;return u.pointer.equals(a)?(this.ss.eraseElementByIterator(u),o("use():"+l),!0):h>l?!1:h===l?(this.ss.updateKeyByIterator(u,new s(h+1,f)),o("use():"+l),!0):f===l?(this.ss.updateKeyByIterator(u,new s(h,f-1)),o("use():"+l),!0):(this.ss.updateKeyByIterator(u,new s(l+1,f)),this.ss.insert(new s(h,l-1)),o("use():"+l),!0)}return o("use():failed"),!1},n.prototype.free=function(l){if(l<this.min||l>this.max){c("free():"+l+" is out of range");return}let a=new s(l,l),u=this.ss.upperBound(a);if(u.equals(this.ss.end())){if(u.equals(this.ss.begin())){this.ss.insert(a);return}u.pre();let h=u.pointer.high;u.pointer.high+1===l?this.ss.updateKeyByIterator(u,new s(h,l)):this.ss.insert(a)}else if(u.equals(this.ss.begin()))if(l+1===u.pointer.low){let h=u.pointer.high;this.ss.updateKeyByIterator(u,new s(l,h))}else this.ss.insert(a);else{let h=u.pointer.low,f=u.pointer.high;u.pre();let p=u.pointer.low;u.pointer.high+1===l?l+1===h?(this.ss.eraseElementByIterator(u),this.ss.updateKeyByIterator(u,new s(p,f))):this.ss.updateKeyByIterator(u,new s(p,l)):l+1===h?(this.ss.eraseElementByIterator(u.next()),this.ss.insert(new s(l,f))):this.ss.insert(a)}o("free():"+l)},n.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},n.prototype.intervalCount=function(){return this.ss.size()},n.prototype.dump=function(){console.log("length:"+this.ss.size());for(let l of this.ss)console.log(l)},r.exports=n}),mh=_e((e,r)=>{ye(),we(),be();var t=Wg();r.exports.NumberAllocator=t}),$g=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=Rg(),t=mh(),o=class{constructor(c){c>0&&(this.aliasToTopic=new r.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,s){if(s===0||s>this.max)return!1;let n=this.aliasToTopic.get(s);return n&&delete this.topicToAlias[n],this.aliasToTopic.set(s,c),this.topicToAlias[c]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let s=this.topicToAlias[c];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=o}),Hg=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});var t=es(),o=r($g()),c=Rn(),s=(n,l)=>{n.log("_handleConnack");let{options:a}=n,u=a.protocolVersion===5?l.reasonCode:l.returnCode;if(clearTimeout(n.connackTimer),delete n.topicAliasSend,l.properties){if(l.properties.topicAliasMaximum){if(l.properties.topicAliasMaximum>65535){n.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}l.properties.topicAliasMaximum>0&&(n.topicAliasSend=new o.default(l.properties.topicAliasMaximum))}l.properties.serverKeepAlive&&a.keepalive&&(a.keepalive=l.properties.serverKeepAlive),l.properties.maximumPacketSize&&(a.properties||(a.properties={}),a.properties.maximumPacketSize=l.properties.maximumPacketSize)}if(u===0)n.reconnecting=!1,n._onConnect(l);else if(u>0){let h=new c.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[u]}`,u);n.emit("error",h)}};e.default=s}),zg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(t,o,c)=>{t.log("handling pubrel packet");let s=typeof c<"u"?c:t.noop,{messageId:n}=o,l={cmd:"pubcomp",messageId:n};t.incomingStore.get(o,(a,u)=>{a?t._sendPacket(l,s):(t.emit("message",u.topic,u.payload,u),t.handleMessage(u,h=>{if(h)return s(h);t.incomingStore.del(u,t.noop),t._sendPacket(l,s)}))})};e.default=r}),Vg=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(kg()),o=r(Cg()),c=r(Hg()),s=r(es()),n=r(zg()),l=(a,u,h)=>{let{options:f}=a;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<u.length)return a.emit("error",new Error(`exceeding packets size ${u.cmd}`)),a.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),a;switch(a.log("_handlePacket :: emitting packetreceive"),a.emit("packetreceive",u),u.cmd){case"publish":(0,t.default)(a,u,h);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":a.reschedulePing(),(0,s.default)(a,u),h();break;case"pubrel":a.reschedulePing(),(0,n.default)(a,u,h);break;case"connack":(0,c.default)(a,u),h();break;case"auth":a.reschedulePing(),(0,o.default)(a,u),h();break;case"pingresp":a.log("_handlePacket :: received pingresp"),a.reschedulePing(!0),h();break;case"disconnect":a.emit("disconnect",u),h();break;default:a.log("_handlePacket :: unknown command"),h();break}};e.default=l}),Kg=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=r((Cn(),Ke(sn))),o=Rn(),c=class{};e.TypedEventEmitter=c,(0,o.applyMixin)(c,t.default)}),ts=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var r=()=>{var s;return typeof window<"u"?typeof navigator<"u"&&((s=navigator.userAgent)===null||s===void 0?void 0:s.toLowerCase().indexOf(" electron/"))>-1&&We!=null&&We.versions?!Object.prototype.hasOwnProperty.call(We.versions,"electron"):typeof window.document<"u":!1},t=()=>{var s,n;return!!(typeof self=="object"&&!((n=(s=self==null?void 0:self.constructor)===null||s===void 0?void 0:s.name)===null||n===void 0)&&n.includes("WorkerGlobalScope"))},o=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c=r()||t()||o();e.isWebWorker=t(),e.isReactNativeBrowser=o(),e.default=c}),Yg=_e((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.fastUniqueNumbers={}))}(e,function(t){var o=function(y){return function(b){var w=y(b);return b.add(w),w}},c=function(y){return function(b,w){return y.set(b,w),w}},s=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,l=n*2,a=function(y,b){return function(w){var v=b.get(w),I=v===void 0?w.size:v<l?v+1:0;if(!w.has(I))return y(w,I);if(w.size<n){for(;w.has(I);)I=Math.floor(Math.random()*l);return y(w,I)}if(w.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(I);)I=Math.floor(Math.random()*s);return y(w,I)}},u=new WeakMap,h=c(u),f=a(h,u),p=o(f);t.addUniqueNumber=p,t.generateUniqueNumber=f})}),Gg=_e((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e,Yg()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,o){var c=function(l){return l.method!==void 0&&l.method==="call"},s=function(l){return l.error===null&&typeof l.id=="number"},n=function(l){var a=new Map([[0,function(){}]]),u=new Map([[0,function(){}]]),h=new Map,f=new Worker(l);f.addEventListener("message",function(v){var I=v.data;if(c(I)){var A=I.params,T=A.timerId,k=A.timerType;if(k==="interval"){var R=a.get(T);if(typeof R=="number"){var E=h.get(R);if(E===void 0||E.timerId!==T||E.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof R<"u")R();else throw new Error("The timer is in an undefined state.")}else if(k==="timeout"){var S=u.get(T);if(typeof S=="number"){var P=h.get(S);if(P===void 0||P.timerId!==T||P.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof S<"u")S(),u.delete(T);else throw new Error("The timer is in an undefined state.")}}else if(s(I)){var N=I.id,z=h.get(N);if(z===void 0)throw new Error("The timer is in an undefined state.");var re=z.timerId,_=z.timerType;h.delete(N),_==="interval"?a.delete(re):u.delete(re)}else{var W=I.error.message;throw new Error(W)}});var p=function(v){var I=o.generateUniqueNumber(h);h.set(I,{timerId:v,timerType:"interval"}),a.set(v,I),f.postMessage({id:I,method:"clear",params:{timerId:v,timerType:"interval"}})},y=function(v){var I=o.generateUniqueNumber(h);h.set(I,{timerId:v,timerType:"timeout"}),u.set(v,I),f.postMessage({id:I,method:"clear",params:{timerId:v,timerType:"timeout"}})},b=function(v){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=o.generateUniqueNumber(a);return a.set(A,function(){v(),typeof a.get(A)=="function"&&f.postMessage({id:null,method:"set",params:{delay:I,now:performance.now(),timerId:A,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:I,now:performance.now(),timerId:A,timerType:"interval"}}),A},w=function(v){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=o.generateUniqueNumber(u);return u.set(A,v),f.postMessage({id:null,method:"set",params:{delay:I,now:performance.now(),timerId:A,timerType:"timeout"}}),A};return{clearInterval:p,clearTimeout:y,setInterval:b,setTimeout:w}};t.load=n})}),Qg=_e((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e,Gg()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimers={},t.workerTimersBroker))}(e,function(t,o){var c=function(f,p){var y=null;return function(){if(y!==null)return y;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(b);return y=f(w),setTimeout(function(){return URL.revokeObjectURL(w)}),y}},s=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,n=c(o.load,s),l=function(f){return n().clearInterval(f)},a=function(f){return n().clearTimeout(f)},u=function(){var f;return(f=n()).setInterval.apply(f,arguments)},h=function(){var f;return(f=n()).setTimeout.apply(f,arguments)};t.clearInterval=l,t.clearTimeout=a,t.setInterval=u,t.setTimeout=h})}),Jg=_e(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(u,h,f,p){p===void 0&&(p=f);var y=Object.getOwnPropertyDescriptor(h,f);(!y||("get"in y?!h.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(u,p,y)}:function(u,h,f,p){p===void 0&&(p=f),u[p]=h[f]}),t=e&&e.__setModuleDefault||(Object.create?function(u,h){Object.defineProperty(u,"default",{enumerable:!0,value:h})}:function(u,h){u.default=h}),o=e&&e.__importStar||function(u){if(u&&u.__esModule)return u;var h={};if(u!=null)for(var f in u)f!=="default"&&Object.prototype.hasOwnProperty.call(u,f)&&r(h,u,f);return t(h,u),h};Object.defineProperty(e,"__esModule",{value:!0});var c=o(ts()),s=Qg(),n={set:s.setInterval,clear:s.clearInterval},l={set:(u,h)=>setInterval(u,h),clear:u=>clearInterval(u)},a=u=>{switch(u){case"native":return l;case"worker":return n;case"auto":default:return c.default&&!c.isWebWorker&&!c.isReactNativeBrowser?n:l}};e.default=a}),yh=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Jg()),o=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(c,s){this.destroyed=!1,this.client=c,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,t.default)(s),this.setKeepalive(c.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=o}),da=_e(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(R,E,S,P){P===void 0&&(P=S);var N=Object.getOwnPropertyDescriptor(E,S);(!N||("get"in N?!E.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(R,P,N)}:function(R,E,S,P){P===void 0&&(P=S),R[P]=E[S]}),t=e&&e.__setModuleDefault||(Object.create?function(R,E){Object.defineProperty(R,"default",{enumerable:!0,value:E})}:function(R,E){R.default=E}),o=e&&e.__importStar||function(R){if(R&&R.__esModule)return R;var E={};if(R!=null)for(var S in R)S!=="default"&&Object.prototype.hasOwnProperty.call(R,S)&&r(E,R,S);return t(E,R),E},c=e&&e.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0});var s=c(Fp()),n=c(Eg()),l=c(eh()),a=on(),u=c(Ag()),h=o(Tg()),f=c(pr()),p=c(th()),y=c(Vg()),b=Rn(),w=Kg(),v=c(yh()),I=o(ts()),A=globalThis.setImmediate||((...R)=>{let E=R.shift();(0,b.nextTick)(()=>{E(...R)})}),T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},k=class pa extends w.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(E,S){super(),this.options=S||{};for(let P in T)typeof this.options[P]>"u"?this.options[P]=T[P]:this.options[P]=S[P];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",pa.VERSION),I.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",I.default?"browser":"node"),this.log("MqttClient :: options.protocol",S.protocol),this.log("MqttClient :: options.protocolVersion",S.protocolVersion),this.log("MqttClient :: options.username",S.username),this.log("MqttClient :: options.keepalive",S.keepalive),this.log("MqttClient :: options.reconnectPeriod",S.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",S.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",S.properties?S.properties.topicAliasMaximum:void 0),this.options.clientId=typeof S.clientId=="string"?S.clientId:pa.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=S.protocolVersion===5&&S.customHandleAcks?S.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(n.default.writeToStream.cacheNumbers=!1),this.streamBuilder=E,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new l.default:this.options.messageIdProvider,this.outgoingStore=S.outgoingStore||new p.default,this.incomingStore=S.incomingStore||new p.default,this.queueQoSZero=S.queueQoSZero===void 0?!0:S.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,S.properties&&S.properties.topicAliasMaximum>0&&(S.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new s.default(S.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,N=()=>{let z=P.shift();this.log("deliver :: entry %o",z);let re=null;if(!z){this._resubscribe();return}re=z.packet,this.log("deliver :: call _sendPacket for %o",re);let _=!0;re.messageId&&re.messageId!==0&&(this.messageIdProvider.register(re.messageId)||(_=!1)),_?this._sendPacket(re,W=>{z.cb&&z.cb(W),N()}):(this.log("messageId: %d has already used. The message is skipped and removed.",re.messageId),N())};this.log("connect :: sending queued packets"),N()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(E,S){S()}handleMessage(E,S){S()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var E;let S=new a.Writable,P=n.default.parser(this.options),N=null,z=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),P.on("packet",q=>{this.log("parser :: on packet push to packets array."),z.push(q)});let re=()=>{this.log("work :: getting next packet in queue");let q=z.shift();if(q)this.log("work :: packet pulled from queue"),(0,y.default)(this,q,_);else{this.log("work :: no packets in queue");let Z=N;N=null,this.log("work :: done flag is %s",!!Z),Z&&Z()}},_=()=>{if(z.length)(0,b.nextTick)(re);else{let q=N;N=null,q()}};S._write=(q,Z,K)=>{N=K,this.log("writable stream :: parsing buffer"),P.parse(q),re()};let W=q=>{this.log("streamErrorHandler :: error",q.message),q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",q)):this.noop(q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(S),this.stream.on("error",W),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let $={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&($.will=Object.assign(Object.assign({},this.options.will),{payload:(E=this.options.will)===null||E===void 0?void 0:E.payload})),this.topicAliasRecv&&($.properties||($.properties={}),this.topicAliasRecv&&($.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket($),P.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let q=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(E,S,P,N){this.log("publish :: message `%s` to topic `%s`",S,E);let{options:z}=this;typeof P=="function"&&(N=P,P=null),P=P||{},P=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),P);let{qos:re,retain:_,dup:W,properties:$,cbStorePut:q}=P;if(this._checkDisconnecting(N))return this;let Z=()=>{let K=0;if((re===1||re===2)&&(K=this._nextId(),K===null))return this.log("No messageId left"),!1;let F={cmd:"publish",topic:E,payload:S,qos:re,retain:_,messageId:K,dup:W};switch(z.protocolVersion===5&&(F.properties=$),this.log("publish :: qos",re),re){case 1:case 2:this.outgoing[F.messageId]={volatile:!1,cb:N||this.noop},this.log("MqttClient:publish: packet cmd: %s",F.cmd),this._sendPacket(F,void 0,q);break;default:this.log("MqttClient:publish: packet cmd: %s",F.cmd),this._sendPacket(F,N,q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Z())&&this._storeProcessingQueue.push({invoke:Z,cbStorePut:P.cbStorePut,callback:N}),this}publishAsync(E,S,P){return new Promise((N,z)=>{this.publish(E,S,P,(re,_)=>{re?z(re):N(_)})})}subscribe(E,S,P){let N=this.options.protocolVersion;typeof S=="function"&&(P=S),P=P||this.noop;let z=!1,re=[];typeof E=="string"?(E=[E],re=E):Array.isArray(E)?re=E:typeof E=="object"&&(z=E.resubscribe,delete E.resubscribe,re=Object.keys(E));let _=h.validateTopics(re);if(_!==null)return A(P,new Error(`Invalid topic ${_}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let W={qos:0};N===5&&(W.nl=!1,W.rap=!1,W.rh=0),S=Object.assign(Object.assign({},W),S);let $=S.properties,q=[],Z=(F,oe)=>{if(oe=oe||S,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,F)||this._resubscribeTopics[F].qos<oe.qos||z){let se={topic:F,qos:oe.qos};N===5&&(se.nl=oe.nl,se.rap=oe.rap,se.rh=oe.rh,se.properties=$),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",se.topic,se.qos),q.push(se)}};if(Array.isArray(E)?E.forEach(F=>{this.log("subscribe: array topic %s",F),Z(F)}):Object.keys(E).forEach(F=>{this.log("subscribe: object topic %s, %o",F,E[F]),Z(F,E[F])}),!q.length)return P(null,[]),this;let K=()=>{let F=this._nextId();if(F===null)return this.log("No messageId left"),!1;let oe={cmd:"subscribe",subscriptions:q,messageId:F};if($&&(oe.properties=$),this.options.resubscribe){this.log("subscribe :: resubscribe true");let se=[];q.forEach(de=>{if(this.options.reconnectPeriod>0){let C={qos:de.qos};N===5&&(C.nl=de.nl||!1,C.rap=de.rap||!1,C.rh=de.rh||0,C.properties=de.properties),this._resubscribeTopics[de.topic]=C,se.push(de.topic)}}),this.messageIdToTopic[oe.messageId]=se}return this.outgoing[oe.messageId]={volatile:!0,cb(se,de){if(!se){let{granted:C}=de;for(let J=0;J<C.length;J+=1)q[J].qos=C[J]}P(se,q,de)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(oe),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:P}),this}subscribeAsync(E,S){return new Promise((P,N)=>{this.subscribe(E,S,(z,re)=>{z?N(z):P(re)})})}unsubscribe(E,S,P){typeof E=="string"&&(E=[E]),typeof S=="function"&&(P=S),P=P||this.noop;let N=h.validateTopics(E);if(N!==null)return A(P,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(P))return this;let z=()=>{let re=this._nextId();if(re===null)return this.log("No messageId left"),!1;let _={cmd:"unsubscribe",messageId:re,unsubscriptions:[]};return typeof E=="string"?_.unsubscriptions=[E]:Array.isArray(E)&&(_.unsubscriptions=E),this.options.resubscribe&&_.unsubscriptions.forEach(W=>{delete this._resubscribeTopics[W]}),typeof S=="object"&&S.properties&&(_.properties=S.properties),this.outgoing[_.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(_),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!z())&&this._storeProcessingQueue.push({invoke:z,callback:P}),this}unsubscribeAsync(E,S){return new Promise((P,N)=>{this.unsubscribe(E,S,(z,re)=>{z?N(z):P(re)})})}end(E,S,P){this.log("end :: (%s)",this.options.clientId),(E==null||typeof E!="boolean")&&(P=P||S,S=E,E=!1),typeof S!="object"&&(P=P||S,S=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let N=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(re=>{this.outgoingStore.close(_=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let W=re||_;this.log("end :: closeStores: invoking callback with args"),P(W)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},z=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,E),this._cleanUp(E,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(N)},S)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,z,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),z()),this)}endAsync(E,S){return new Promise((P,N)=>{this.end(E,S,z=>{z?N(z):P()})})}removeOutgoingMessage(E){if(this.outgoing[E]){let{cb:S}=this.outgoing[E];this._removeOutgoingAndStoreMessage(E,()=>{S(new Error("Message removed"))})}return this}reconnect(E){this.log("client reconnect");let S=()=>{E?(this.options.incomingStore=E.incomingStore,this.options.outgoingStore=E.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=S:S(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(E=>{this.outgoing[E].volatile&&typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(E=>{typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_removeTopicAliasAndRecoverTopicName(E){let S;E.properties&&(S=E.properties.topicAlias);let P=E.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",S,P),P.length===0){if(typeof S>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(S),typeof P>"u")return new Error("Unregistered Topic Alias");E.topic=P}S&&delete E.properties.topicAlias}_checkDisconnecting(E){return this.disconnecting&&(E&&E!==this.noop?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(E,S,P={}){if(S&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",S)),this.log("_cleanUp :: forced? %s",E),E)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let N=Object.assign({cmd:"disconnect"},P);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(N,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),A(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),S&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",S),S())}_storeAndSend(E,S,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",E.cmd);let N=E,z;if(N.cmd==="publish"&&(N=(0,u.default)(E),z=this._removeTopicAliasAndRecoverTopicName(N),z))return S&&S(z);this.outgoingStore.put(N,re=>{if(re)return S&&S(re);P(),this._writePacket(E,S)})}_applyTopicAlias(E){if(this.options.protocolVersion===5&&E.cmd==="publish"){let S;E.properties&&(S=E.properties.topicAlias);let P=E.topic.toString();if(this.topicAliasSend)if(S){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,S),!this.topicAliasSend.put(P,S)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,S),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(S=this.topicAliasSend.getAliasByTopic(P),S?(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:S}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,S)):(S=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,S),E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:S}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,S))):this.options.autoUseTopicAlias&&(S=this.topicAliasSend.getAliasByTopic(P),S&&(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:S}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,S))));else if(S)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,S),new Error("Sending Topic Alias out of range")}}_noop(E){this.log("noop ::",E)}_writePacket(E,S){this.log("_writePacket :: packet: %O",E),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",E),this.log("_writePacket :: writing to stream");let P=n.default.writeToStream(E,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&S&&S!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",S)):S&&(this.log("_writePacket :: invoking cb"),S())}_sendPacket(E,S,P,N){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,S=S||this.noop;let z=this._applyTopicAlias(E);if(z){S(z);return}if(!this.connected){if(E.cmd==="auth"){this._writePacket(E,S);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(E,S,P);return}if(N){this._writePacket(E,S);return}switch(E.cmd){case"publish":break;case"pubrel":this._storeAndSend(E,S,P);return;default:this._writePacket(E,S);return}switch(E.qos){case 2:case 1:this._storeAndSend(E,S,P);break;case 0:default:this._writePacket(E,S);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(E,S,P){this.log("_storePacket :: packet: %o",E),this.log("_storePacket :: cb? %s",!!S),P=P||this.noop;let N=E;if(N.cmd==="publish"){N=(0,u.default)(E);let re=this._removeTopicAliasAndRecoverTopicName(N);if(re)return S&&S(re)}let z=N.qos||0;z===0&&this.queueQoSZero||N.cmd!=="publish"?this.queue.push({packet:N,cb:S}):z>0?(S=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoingStore.put(N,re=>{if(re)return S&&S(re);P()})):S&&S(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new v.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(E=!1){this.keepaliveManager&&this.options.keepalive&&(E||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let S=0;S<E.length;S++){let P={};P[E[S]]=this._resubscribeTopics[E[S]],P.resubscribe=!0,this.subscribe(P,{properties:P[E[S]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(E){if(this.disconnected){this.emit("connect",E);return}this.connackPacket=E,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let S=()=>{let P=this.outgoingStore.createStream(),N=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),z()},z=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",N),P.on("error",_=>{z(),this._flushStoreProcessingQueue(),this.removeListener("close",N),this.emit("error",_)});let re=()=>{if(!P)return;let _=P.read(1),W;if(!_){P.once("readable",re);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[_.messageId]){re();return}!this.disconnecting&&!this.reconnectTimer?(W=this.outgoing[_.messageId]?this.outgoing[_.messageId].cb:null,this.outgoing[_.messageId]={volatile:!1,cb($,q){W&&W($,q),re()}},this._packetIdsDuringStoreProcessing[_.messageId]=!0,this.messageIdProvider.register(_.messageId)?this._sendPacket(_,void 0,void 0,!0):this.log("messageId: %d has already used.",_.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let _=!0;for(let W in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[W]){_=!1;break}this.removeListener("close",N),_?(z(),this._invokeAllStoreProcessingQueue(),this.emit("connect",E)):S()}),re()};S()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(E,S){delete this.outgoing[E],this.outgoingStore.del({messageId:E},(P,N)=>{S(P,N),this.messageIdProvider.deallocate(E),this._invokeStoreProcessingQueue()})}};k.VERSION=b.MQTTJS_VERSION,e.default=k}),Zg=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=mh(),t=class{constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(o){return this.numberAllocator.use(o)}deallocate(o){this.numberAllocator.free(o)}clear(){this.numberAllocator.clear()}};e.default=t});function Mr(e){throw new RangeError(wh[e])}function pc(e,r){let t=e.split("@"),o="";t.length>1&&(o=t[0]+"@",e=t[1]);let c=function(s,n){let l=[],a=s.length;for(;a--;)l[a]=n(s[a]);return l}((e=e.replace(bh,".")).split("."),r).join(".");return o+c}function gc(e){let r=[],t=0,o=e.length;for(;t<o;){let c=e.charCodeAt(t++);if(c>=55296&&c<=56319&&t<o){let s=e.charCodeAt(t++);(64512&s)==56320?r.push(((1023&c)<<10)+(1023&s)+65536):(r.push(c),t--)}else r.push(c)}return r}var mc,yc,bh,wh,Bt,ui,Ms,Ns,Ls,Us,Ar,Xg=gt(()=>{ye(),we(),be(),mc=/^xn--/,yc=/[^\0-\x7E]/,bh=/[\x2E\u3002\uFF0E\uFF61]/g,wh={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Bt=Math.floor,ui=String.fromCharCode,Ms=function(e,r){return e+22+75*(e<26)-((r!=0)<<5)},Ns=function(e,r,t){let o=0;for(e=t?Bt(e/700):e>>1,e+=Bt(e/r);e>455;o+=36)e=Bt(e/35);return Bt(o+36*e/(e+38))},Ls=function(e){let r=[],t=e.length,o=0,c=128,s=72,n=e.lastIndexOf("-");n<0&&(n=0);for(let a=0;a<n;++a)e.charCodeAt(a)>=128&&Mr("not-basic"),r.push(e.charCodeAt(a));for(let a=n>0?n+1:0;a<t;){let u=o;for(let f=1,p=36;;p+=36){a>=t&&Mr("invalid-input");let y=(l=e.charCodeAt(a++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36;(y>=36||y>Bt((2147483647-o)/f))&&Mr("overflow"),o+=y*f;let b=p<=s?1:p>=s+26?26:p-s;if(y<b)break;let w=36-b;f>Bt(2147483647/w)&&Mr("overflow"),f*=w}let h=r.length+1;s=Ns(o-u,h,u==0),Bt(o/h)>2147483647-c&&Mr("overflow"),c+=Bt(o/h),o%=h,r.splice(o++,0,c)}var l;return String.fromCodePoint(...r)},Us=function(e){let r=[],t=(e=gc(e)).length,o=128,c=0,s=72;for(let a of e)a<128&&r.push(ui(a));let n=r.length,l=n;for(n&&r.push("-");l<t;){let a=2147483647;for(let h of e)h>=o&&h<a&&(a=h);let u=l+1;a-o>Bt((2147483647-c)/u)&&Mr("overflow"),c+=(a-o)*u,o=a;for(let h of e)if(h<o&&++c>2147483647&&Mr("overflow"),h==o){let f=c;for(let p=36;;p+=36){let y=p<=s?1:p>=s+26?26:p-s;if(f<y)break;let b=f-y,w=36-y;r.push(ui(Ms(y+b%w,0))),f=Bt(b/w)}r.push(ui(Ms(f,0))),s=Ns(c,u,l==n),c=0,++l}++c,++o}return r.join("")},Ar={version:"2.1.0",ucs2:{decode:gc,encode:e=>String.fromCodePoint(...e)},decode:Ls,encode:Us,toASCII:function(e){return pc(e,function(r){return yc.test(r)?"xn--"+Us(r):r})},toUnicode:function(e){return pc(e,function(r){return mc.test(r)?Ls(r.slice(4).toLowerCase()):r})}},Ar.decode,Ar.encode,Ar.toASCII,Ar.toUnicode,Ar.ucs2,Ar.version});function e0(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var bc,hn,wc,qt,t0=gt(()=>{ye(),we(),be(),bc=function(e,r,t,o){r=r||"&",t=t||"=";var c={};if(typeof e!="string"||e.length===0)return c;var s=/\+/g;e=e.split(r);var n=1e3;o&&typeof o.maxKeys=="number"&&(n=o.maxKeys);var l=e.length;n>0&&l>n&&(l=n);for(var a=0;a<l;++a){var u,h,f,p,y=e[a].replace(s,"%20"),b=y.indexOf(t);b>=0?(u=y.substr(0,b),h=y.substr(b+1)):(u=y,h=""),f=decodeURIComponent(u),p=decodeURIComponent(h),e0(c,f)?Array.isArray(c[f])?c[f].push(p):c[f]=[c[f],p]:c[f]=p}return c},hn=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},wc=function(e,r,t,o){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(c){var s=encodeURIComponent(hn(c))+t;return Array.isArray(e[c])?e[c].map(function(n){return s+encodeURIComponent(hn(n))}).join(r):s+encodeURIComponent(hn(e[c]))}).join(r):o?encodeURIComponent(hn(o))+t+encodeURIComponent(hn(e)):""},qt={},qt.decode=qt.parse=bc,qt.encode=qt.stringify=wc,qt.decode,qt.encode,qt.parse,qt.stringify});function ga(){throw new Error("setTimeout has not been defined")}function ma(){throw new Error("clearTimeout has not been defined")}function vh(e){if(Jt===setTimeout)return setTimeout(e,0);if((Jt===ga||!Jt)&&setTimeout)return Jt=setTimeout,setTimeout(e,0);try{return Jt(e,0)}catch{try{return Jt.call(null,e,0)}catch{return Jt.call(this||Jr,e,0)}}}function r0(){Zr&&$r&&(Zr=!1,$r.length?Ht=$r.concat(Ht):Hn=-1,Ht.length&&_h())}function _h(){if(!Zr){var e=vh(r0);Zr=!0;for(var r=Ht.length;r;){for($r=Ht,Ht=[];++Hn<r;)$r&&$r[Hn].run();Hn=-1,r=Ht.length}$r=null,Zr=!1,function(t){if(Zt===clearTimeout)return clearTimeout(t);if((Zt===ma||!Zt)&&clearTimeout)return Zt=clearTimeout,clearTimeout(t);try{Zt(t)}catch{try{return Zt.call(null,t)}catch{return Zt.call(this||Jr,t)}}}(e)}}function vc(e,r){(this||Jr).fun=e,(this||Jr).array=r}function Yt(){}var _c,Jt,Zt,Jr,tt,$r,Ht,Zr,Hn,et,n0=gt(()=>{ye(),we(),be(),Jr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,tt=_c={},function(){try{Jt=typeof setTimeout=="function"?setTimeout:ga}catch{Jt=ga}try{Zt=typeof clearTimeout=="function"?clearTimeout:ma}catch{Zt=ma}}(),Ht=[],Zr=!1,Hn=-1,tt.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];Ht.push(new vc(e,r)),Ht.length!==1||Zr||vh(_h)},vc.prototype.run=function(){(this||Jr).fun.apply(null,(this||Jr).array)},tt.title="browser",tt.browser=!0,tt.env={},tt.argv=[],tt.version="",tt.versions={},tt.on=Yt,tt.addListener=Yt,tt.once=Yt,tt.off=Yt,tt.removeListener=Yt,tt.removeAllListeners=Yt,tt.emit=Yt,tt.prependListener=Yt,tt.prependOnceListener=Yt,tt.listeners=function(e){return[]},tt.binding=function(e){throw new Error("process.binding is not supported")},tt.cwd=function(){return"/"},tt.chdir=function(e){throw new Error("process.chdir is not supported")},tt.umask=function(){return 0},et=_c,et.addListener,et.argv,et.binding,et.browser,et.chdir,et.cwd,et.emit,et.env,et.listeners,et.nextTick,et.off,et.on,et.once,et.prependListener,et.prependOnceListener,et.removeAllListeners,et.removeListener,et.title,et.umask,et.version,et.versions});function i0(){if(ya)return Ai;ya=!0;var e=Ai={},r,t;function o(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=o}catch{r=o}try{typeof clearTimeout=="function"?t=clearTimeout:t=c}catch{t=c}})();function s(w){if(r===setTimeout)return setTimeout(w,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(w,0);try{return r(w,0)}catch{try{return r.call(null,w,0)}catch{return r.call(this||Ur,w,0)}}}function n(w){if(t===clearTimeout)return clearTimeout(w);if((t===c||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(w);try{return t(w)}catch{try{return t.call(null,w)}catch{return t.call(this||Ur,w)}}}var l=[],a=!1,u,h=-1;function f(){!a||!u||(a=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!a){var w=s(f);a=!0;for(var v=l.length;v;){for(u=l,l=[];++h<v;)u&&u[h].run();h=-1,v=l.length}u=null,a=!1,n(w)}}e.nextTick=function(w){var v=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)v[I-1]=arguments[I];l.push(new y(w,v)),l.length===1&&!a&&s(p)};function y(w,v){(this||Ur).fun=w,(this||Ur).array=v}y.prototype.run=function(){(this||Ur).fun.apply(null,(this||Ur).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(w){return[]},e.binding=function(w){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(w){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Ai}var Ai,ya,Ur,Je,Eh=gt(()=>{ye(),we(),be(),Ai={},ya=!1,Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Je=i0(),Je.platform="browser",Je.addListener,Je.argv,Je.binding,Je.browser,Je.chdir,Je.cwd,Je.emit,Je.env,Je.listeners,Je.nextTick,Je.off,Je.on,Je.once,Je.prependListener,Je.prependOnceListener,Je.removeAllListeners,Je.removeListener,Je.title,Je.umask,Je.version,Je.versions});function s0(){if(ba)return Ti;ba=!0;var e=Je;function r(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function t(s,n){for(var l="",a=0,u=-1,h=0,f,p=0;p<=s.length;++p){if(p<s.length)f=s.charCodeAt(p);else{if(f===47)break;f=47}if(f===47){if(!(u===p-1||h===1))if(u!==p-1&&h===2){if(l.length<2||a!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var y=l.lastIndexOf("/");if(y!==l.length-1){y===-1?(l="",a=0):(l=l.slice(0,y),a=l.length-1-l.lastIndexOf("/")),u=p,h=0;continue}}else if(l.length===2||l.length===1){l="",a=0,u=p,h=0;continue}}n&&(l.length>0?l+="/..":l="..",a=2)}else l.length>0?l+="/"+s.slice(u+1,p):l=s.slice(u+1,p),a=p-u-1;u=p,h=0}else f===46&&h!==-1?++h:h=-1}return l}function o(s,n){var l=n.dir||n.root,a=n.base||(n.name||"")+(n.ext||"");return l?l===n.root?l+a:l+s+a:a}var c={resolve:function(){for(var s="",n=!1,l,a=arguments.length-1;a>=-1&&!n;a--){var u;a>=0?u=arguments[a]:(l===void 0&&(l=e.cwd()),u=l),r(u),u.length!==0&&(s=u+"/"+s,n=u.charCodeAt(0)===47)}return s=t(s,!n),n?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(r(s),s.length===0)return".";var n=s.charCodeAt(0)===47,l=s.charCodeAt(s.length-1)===47;return s=t(s,!n),s.length===0&&!n&&(s="."),s.length>0&&l&&(s+="/"),n?"/"+s:s},isAbsolute:function(s){return r(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,n=0;n<arguments.length;++n){var l=arguments[n];r(l),l.length>0&&(s===void 0?s=l:s+="/"+l)}return s===void 0?".":c.normalize(s)},relative:function(s,n){if(r(s),r(n),s===n||(s=c.resolve(s),n=c.resolve(n),s===n))return"";for(var l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var a=s.length,u=a-l,h=1;h<n.length&&n.charCodeAt(h)===47;++h);for(var f=n.length,p=f-h,y=u<p?u:p,b=-1,w=0;w<=y;++w){if(w===y){if(p>y){if(n.charCodeAt(h+w)===47)return n.slice(h+w+1);if(w===0)return n.slice(h+w)}else u>y&&(s.charCodeAt(l+w)===47?b=w:w===0&&(b=0));break}var v=s.charCodeAt(l+w),I=n.charCodeAt(h+w);if(v!==I)break;v===47&&(b=w)}var A="";for(w=l+b+1;w<=a;++w)(w===a||s.charCodeAt(w)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+n.slice(h+b):(h+=b,n.charCodeAt(h)===47&&++h,n.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(r(s),s.length===0)return".";for(var n=s.charCodeAt(0),l=n===47,a=-1,u=!0,h=s.length-1;h>=1;--h)if(n=s.charCodeAt(h),n===47){if(!u){a=h;break}}else u=!1;return a===-1?l?"/":".":l&&a===1?"//":s.slice(0,a)},basename:function(s,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');r(s);var l=0,a=-1,u=!0,h;if(n!==void 0&&n.length>0&&n.length<=s.length){if(n.length===s.length&&n===s)return"";var f=n.length-1,p=-1;for(h=s.length-1;h>=0;--h){var y=s.charCodeAt(h);if(y===47){if(!u){l=h+1;break}}else p===-1&&(u=!1,p=h+1),f>=0&&(y===n.charCodeAt(f)?--f===-1&&(a=h):(f=-1,a=p))}return l===a?a=p:a===-1&&(a=s.length),s.slice(l,a)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!u){l=h+1;break}}else a===-1&&(u=!1,a=h+1);return a===-1?"":s.slice(l,a)}},extname:function(s){r(s);for(var n=-1,l=0,a=-1,u=!0,h=0,f=s.length-1;f>=0;--f){var p=s.charCodeAt(f);if(p===47){if(!u){l=f+1;break}continue}a===-1&&(u=!1,a=f+1),p===46?n===-1?n=f:h!==1&&(h=1):n!==-1&&(h=-1)}return n===-1||a===-1||h===0||h===1&&n===a-1&&n===l+1?"":s.slice(n,a)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return o("/",s)},parse:function(s){r(s);var n={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return n;var l=s.charCodeAt(0),a=l===47,u;a?(n.root="/",u=1):u=0;for(var h=-1,f=0,p=-1,y=!0,b=s.length-1,w=0;b>=u;--b){if(l=s.charCodeAt(b),l===47){if(!y){f=b+1;break}continue}p===-1&&(y=!1,p=b+1),l===46?h===-1?h=b:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||p===-1||w===0||w===1&&h===p-1&&h===f+1?p!==-1&&(f===0&&a?n.base=n.name=s.slice(1,p):n.base=n.name=s.slice(f,p)):(f===0&&a?(n.name=s.slice(1,h),n.base=s.slice(1,p)):(n.name=s.slice(f,h),n.base=s.slice(f,p)),n.ext=s.slice(h,p)),f>0?n.dir=s.slice(0,f-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Ti=c,Ti}var Ti,ba,wa,o0=gt(()=>{ye(),we(),be(),Eh(),Ti={},ba=!1,wa=s0()}),Sh={};rn(Sh,{URL:()=>qh,Url:()=>Lh,default:()=>ze,fileURLToPath:()=>Ah,format:()=>Uh,parse:()=>Fh,pathToFileURL:()=>Th,resolve:()=>Dh,resolveObject:()=>jh});function Rt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Un(e,r,t){if(e&&Nt.isObject(e)&&e instanceof Rt)return e;var o=new Rt;return o.parse(e,r,t),o}function a0(){if(va)return ki;va=!0;var e=et;function r(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function t(s,n){for(var l="",a=0,u=-1,h=0,f,p=0;p<=s.length;++p){if(p<s.length)f=s.charCodeAt(p);else{if(f===47)break;f=47}if(f===47){if(!(u===p-1||h===1))if(u!==p-1&&h===2){if(l.length<2||a!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var y=l.lastIndexOf("/");if(y!==l.length-1){y===-1?(l="",a=0):(l=l.slice(0,y),a=l.length-1-l.lastIndexOf("/")),u=p,h=0;continue}}else if(l.length===2||l.length===1){l="",a=0,u=p,h=0;continue}}n&&(l.length>0?l+="/..":l="..",a=2)}else l.length>0?l+="/"+s.slice(u+1,p):l=s.slice(u+1,p),a=p-u-1;u=p,h=0}else f===46&&h!==-1?++h:h=-1}return l}function o(s,n){var l=n.dir||n.root,a=n.base||(n.name||"")+(n.ext||"");return l?l===n.root?l+a:l+s+a:a}var c={resolve:function(){for(var s="",n=!1,l,a=arguments.length-1;a>=-1&&!n;a--){var u;a>=0?u=arguments[a]:(l===void 0&&(l=e.cwd()),u=l),r(u),u.length!==0&&(s=u+"/"+s,n=u.charCodeAt(0)===47)}return s=t(s,!n),n?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(r(s),s.length===0)return".";var n=s.charCodeAt(0)===47,l=s.charCodeAt(s.length-1)===47;return s=t(s,!n),s.length===0&&!n&&(s="."),s.length>0&&l&&(s+="/"),n?"/"+s:s},isAbsolute:function(s){return r(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,n=0;n<arguments.length;++n){var l=arguments[n];r(l),l.length>0&&(s===void 0?s=l:s+="/"+l)}return s===void 0?".":c.normalize(s)},relative:function(s,n){if(r(s),r(n),s===n||(s=c.resolve(s),n=c.resolve(n),s===n))return"";for(var l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var a=s.length,u=a-l,h=1;h<n.length&&n.charCodeAt(h)===47;++h);for(var f=n.length,p=f-h,y=u<p?u:p,b=-1,w=0;w<=y;++w){if(w===y){if(p>y){if(n.charCodeAt(h+w)===47)return n.slice(h+w+1);if(w===0)return n.slice(h+w)}else u>y&&(s.charCodeAt(l+w)===47?b=w:w===0&&(b=0));break}var v=s.charCodeAt(l+w),I=n.charCodeAt(h+w);if(v!==I)break;v===47&&(b=w)}var A="";for(w=l+b+1;w<=a;++w)(w===a||s.charCodeAt(w)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+n.slice(h+b):(h+=b,n.charCodeAt(h)===47&&++h,n.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(r(s),s.length===0)return".";for(var n=s.charCodeAt(0),l=n===47,a=-1,u=!0,h=s.length-1;h>=1;--h)if(n=s.charCodeAt(h),n===47){if(!u){a=h;break}}else u=!1;return a===-1?l?"/":".":l&&a===1?"//":s.slice(0,a)},basename:function(s,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');r(s);var l=0,a=-1,u=!0,h;if(n!==void 0&&n.length>0&&n.length<=s.length){if(n.length===s.length&&n===s)return"";var f=n.length-1,p=-1;for(h=s.length-1;h>=0;--h){var y=s.charCodeAt(h);if(y===47){if(!u){l=h+1;break}}else p===-1&&(u=!1,p=h+1),f>=0&&(y===n.charCodeAt(f)?--f===-1&&(a=h):(f=-1,a=p))}return l===a?a=p:a===-1&&(a=s.length),s.slice(l,a)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!u){l=h+1;break}}else a===-1&&(u=!1,a=h+1);return a===-1?"":s.slice(l,a)}},extname:function(s){r(s);for(var n=-1,l=0,a=-1,u=!0,h=0,f=s.length-1;f>=0;--f){var p=s.charCodeAt(f);if(p===47){if(!u){l=f+1;break}continue}a===-1&&(u=!1,a=f+1),p===46?n===-1?n=f:h!==1&&(h=1):n!==-1&&(h=-1)}return n===-1||a===-1||h===0||h===1&&n===a-1&&n===l+1?"":s.slice(n,a)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return o("/",s)},parse:function(s){r(s);var n={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return n;var l=s.charCodeAt(0),a=l===47,u;a?(n.root="/",u=1):u=0;for(var h=-1,f=0,p=-1,y=!0,b=s.length-1,w=0;b>=u;--b){if(l=s.charCodeAt(b),l===47){if(!y){f=b+1;break}continue}p===-1&&(y=!1,p=b+1),l===46?h===-1?h=b:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||p===-1||w===0||w===1&&h===p-1&&h===f+1?p!==-1&&(f===0&&a?n.base=n.name=s.slice(1,p):n.base=n.name=s.slice(f,p)):(f===0&&a?(n.name=s.slice(1,h),n.base=s.slice(1,p)):(n.name=s.slice(f,h),n.base=s.slice(f,p)),n.ext=s.slice(h,p)),f>0?n.dir=s.slice(0,f-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,ki=c,ki}function l0(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return $i?c0(e):u0(e)}function c0(e){let r=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let c=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&c===102||t[o+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(xh,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let o=t.codePointAt(1)|32,c=t[2];if(o<Ch||o>Rh||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function u0(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let o=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function h0(e){let r=_a.resolve(e),t=e.charCodeAt(e.length-1);(t===Ih||$i&&t===kh)&&r[r.length-1]!==_a.sep&&(r+="/");let o=new URL("file://");return r.includes("%")&&(r=r.replace(Oh,"%25")),!$i&&r.includes("\\")&&(r=r.replace(Ph,"%5C")),r.includes(`
`)&&(r=r.replace(Bh,"%0A")),r.includes("\r")&&(r=r.replace(Mh,"%0D")),r.includes("	")&&(r=r.replace(Nh,"%09")),o.pathname=r,o}function Ah(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Hi?f0(e):d0(e)}function f0(e){let r=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let c=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&c===102||t[o+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Vh,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let o=t.codePointAt(1)|32,c=t[2];if(o<Hh||o>zh||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function d0(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let o=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function Th(e){let r=wa.resolve(e),t=e.charCodeAt(e.length-1);(t===$h||Hi&&t===Wh)&&r[r.length-1]!==wa.sep&&(r+="/");let o=new URL("file://");return r.includes("%")&&(r=r.replace(Kh,"%25")),!Hi&&r.includes("\\")&&(r=r.replace(Yh,"%5C")),r.includes(`
`)&&(r=r.replace(Gh,"%0A")),r.includes("\r")&&(r=r.replace(Qh,"%0D")),r.includes("	")&&(r=r.replace(Jh,"%09")),o.pathname=r,o}var ze,Ec,Nt,Sc,Ac,Tc,kc,hi,Ds,js,Fs,Ic,Cc,fi,Nr,di,ki,va,_a,Rc,kh,Ih,Ch,Rh,$i,xh,Oh,Ph,Bh,Mh,Nh,xc,Lh,Uh,Dh,jh,Fh,qh,Wh,$h,Hh,zh,Hi,Vh,Kh,Yh,Gh,Qh,Jh,p0=gt(()=>{ye(),we(),be(),Xg(),t0(),n0(),o0(),Eh(),ze={},Ec=Ar,Nt={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},ze.parse=Un,ze.resolve=function(e,r){return Un(e,!1,!0).resolve(r)},ze.resolveObject=function(e,r){return e?Un(e,!1,!0).resolveObject(r):r},ze.format=function(e){return Nt.isString(e)&&(e=Un(e)),e instanceof Rt?e.format():Rt.prototype.format.call(e)},ze.Url=Rt,Sc=/^([a-z0-9.+-]+:)/i,Ac=/:[0-9]*$/,Tc=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,kc=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),hi=["'"].concat(kc),Ds=["%","/","?",";","#"].concat(hi),js=["/","?","#"],Fs=/^[+a-z0-9A-Z_-]{0,63}$/,Ic=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Cc={javascript:!0,"javascript:":!0},fi={javascript:!0,"javascript:":!0},Nr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},di=qt,Rt.prototype.parse=function(e,r,t){if(!Nt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),c=o!==-1&&o<e.indexOf("#")?"?":"#",s=e.split(c);s[0]=s[0].replace(/\\/g,"/");var n=e=s.join(c);if(n=n.trim(),!t&&e.split("#").length===1){var l=Tc.exec(n);if(l)return this.path=n,this.href=n,this.pathname=l[1],l[2]?(this.search=l[2],this.query=r?di.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var a=Sc.exec(n);if(a){var u=(a=a[0]).toLowerCase();this.protocol=u,n=n.substr(a.length)}if(t||a||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=n.substr(0,2)==="//";!h||a&&fi[a]||(n=n.substr(2),this.slashes=!0)}if(!fi[a]&&(h||a&&!Nr[a])){for(var f,p,y=-1,b=0;b<js.length;b++)(w=n.indexOf(js[b]))!==-1&&(y===-1||w<y)&&(y=w);for((p=y===-1?n.lastIndexOf("@"):n.lastIndexOf("@",y))!==-1&&(f=n.slice(0,p),n=n.slice(p+1),this.auth=decodeURIComponent(f)),y=-1,b=0;b<Ds.length;b++){var w;(w=n.indexOf(Ds[b]))!==-1&&(y===-1||w<y)&&(y=w)}y===-1&&(y=n.length),this.host=n.slice(0,y),n=n.slice(y),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var I=this.hostname.split(/\./),A=(b=0,I.length);b<A;b++){var T=I[b];if(T&&!T.match(Fs)){for(var k="",R=0,E=T.length;R<E;R++)T.charCodeAt(R)>127?k+="x":k+=T[R];if(!k.match(Fs)){var S=I.slice(0,b),P=I.slice(b+1),N=T.match(Ic);N&&(S.push(N[1]),P.unshift(N[2])),P.length&&(n="/"+P.join(".")+n),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=Ec.toASCII(this.hostname));var z=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+z,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),n[0]!=="/"&&(n="/"+n))}if(!Cc[u])for(b=0,A=hi.length;b<A;b++){var _=hi[b];if(n.indexOf(_)!==-1){var W=encodeURIComponent(_);W===_&&(W=escape(_)),n=n.split(_).join(W)}}var $=n.indexOf("#");$!==-1&&(this.hash=n.substr($),n=n.slice(0,$));var q=n.indexOf("?");if(q!==-1?(this.search=n.substr(q),this.query=n.substr(q+1),r&&(this.query=di.parse(this.query)),n=n.slice(0,q)):r&&(this.search="",this.query={}),n&&(this.pathname=n),Nr[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var Z=this.search||"";this.path=z+Z}return this.href=this.format(),this},Rt.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",o=this.hash||"",c=!1,s="";this.host?c=e+this.host:this.hostname&&(c=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port)),this.query&&Nt.isObject(this.query)&&Object.keys(this.query).length&&(s=di.stringify(this.query));var n=this.search||s&&"?"+s||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Nr[r])&&c!==!1?(c="//"+(c||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):c||(c=""),o&&o.charAt(0)!=="#"&&(o="#"+o),n&&n.charAt(0)!=="?"&&(n="?"+n),r+c+(t=t.replace(/[?#]/g,function(l){return encodeURIComponent(l)}))+(n=n.replace("#","%23"))+o},Rt.prototype.resolve=function(e){return this.resolveObject(Un(e,!1,!0)).format()},Rt.prototype.resolveObject=function(e){if(Nt.isString(e)){var r=new Rt;r.parse(e,!1,!0),e=r}for(var t=new Rt,o=Object.keys(this),c=0;c<o.length;c++){var s=o[c];t[s]=this[s]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var n=Object.keys(e),l=0;l<n.length;l++){var a=n[l];a!=="protocol"&&(t[a]=e[a])}return Nr[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Nr[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var f=u[h];t[f]=e[f]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||fi[e.protocol])t.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),t.pathname=p.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var y=t.pathname||"",b=t.search||"";t.path=y+b}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var w=t.pathname&&t.pathname.charAt(0)==="/",v=e.host||e.pathname&&e.pathname.charAt(0)==="/",I=v||w||t.host&&e.pathname,A=I,T=t.pathname&&t.pathname.split("/")||[],k=(p=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Nr[t.protocol]);if(k&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(p[0]===""?p[0]=e.host:p.unshift(e.host)),e.host=null),I=I&&(p[0]===""||T[0]==="")),v)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),t.search=e.search,t.query=e.query;else if(!Nt.isNullOrUndefined(e.search))return k&&(t.hostname=t.host=T.shift(),(N=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),t.search=e.search,t.query=e.query,Nt.isNull(t.pathname)&&Nt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var R=T.slice(-1)[0],E=(t.host||e.host||T.length>1)&&(R==="."||R==="..")||R==="",S=0,P=T.length;P>=0;P--)(R=T[P])==="."?T.splice(P,1):R===".."?(T.splice(P,1),S++):S&&(T.splice(P,1),S--);if(!I&&!A)for(;S--;S)T.unshift("..");!I||T[0]===""||T[0]&&T[0].charAt(0)==="/"||T.unshift(""),E&&T.join("/").substr(-1)!=="/"&&T.push("");var N,z=T[0]===""||T[0]&&T[0].charAt(0)==="/";return k&&(t.hostname=t.host=z?"":T.length?T.shift():"",(N=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),(I=I||t.host&&T.length)&&!z&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),Nt.isNull(t.pathname)&&Nt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},Rt.prototype.parseHost=function(){var e=this.host,r=Ac.exec(e);r&&((r=r[0])!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)},ze.Url,ze.format,ze.resolve,ze.resolveObject,ki={},va=!1,_a=a0(),Rc=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,ze.URL=typeof URL<"u"?URL:null,ze.pathToFileURL=h0,ze.fileURLToPath=l0,ze.Url,ze.format,ze.resolve,ze.resolveObject,ze.URL,kh=92,Ih=47,Ch=97,Rh=122,$i=Rc==="win32",xh=/\//g,Oh=/%/g,Ph=/\\/g,Bh=/\n/g,Mh=/\r/g,Nh=/\t/g,xc=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,ze.URL=typeof URL<"u"?URL:null,ze.pathToFileURL=Th,ze.fileURLToPath=Ah,Lh=ze.Url,Uh=ze.format,Dh=ze.resolve,jh=ze.resolveObject,Fh=ze.parse,qh=ze.URL,Wh=92,$h=47,Hh=97,zh=122,Hi=xc==="win32",Vh=/\//g,Kh=/%/g,Yh=/\\/g,Gh=/\n/g,Qh=/\r/g,Jh=/\t/g}),g0=_e((e,r)=>{ye(),we(),be(),r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Ya=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var r=on(),t=(yt(),Ke(mt));function o(s,n){let l=new Array(s.length);for(let a=0;a<s.length;a++)typeof s[a].chunk=="string"?l[a]=t.Buffer.from(s[a].chunk,"utf8"):l[a]=s[a].chunk;this._write(t.Buffer.concat(l),"binary",n)}e.writev=o;var c=class extends r.Duplex{constructor(s,n,l){super({objectMode:!0}),this.proxy=n,this.socket=l,this.writeQueue=[],s.objectMode||(this._writev=o.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",a=>{this.destroyed||this.push(a)})}_read(s){this.proxy.read(s)}_write(s,n,l){this.isSocketOpen?this.writeToProxy(s,n,l):this.writeQueue.push({chunk:s,encoding:n,cb:l})}_final(s){this.writeQueue=[],this.proxy.end(s)}_destroy(s,n){this.writeQueue=[],this.proxy.destroy(),n(s)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(s,n,l){this.proxy.write(s,n)===!1?this.proxy.once("drain",l):l()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:s,encoding:n,cb:l}=this.writeQueue.shift();this.writeToProxy(s,n,l)}}};e.BufferedDuplex=c}),pi=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(yt(),Ke(mt)),o=r(g0()),c=r(pr()),s=on(),n=r(ts()),l=Ya(),a=(0,c.default)("mqttjs:ws"),u=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function h(I,A){let T=`${I.protocol}://${I.hostname}:${I.port}${I.path}`;return typeof I.transformWsUrl=="function"&&(T=I.transformWsUrl(T,I,A)),T}function f(I){let A=I;return I.port||(I.protocol==="wss"?A.port=443:A.port=80),I.path||(A.path="/"),I.wsOptions||(A.wsOptions={}),!n.default&&!I.forceNativeWebSocket&&I.protocol==="wss"&&u.forEach(T=>{Object.prototype.hasOwnProperty.call(I,T)&&!Object.prototype.hasOwnProperty.call(I.wsOptions,T)&&(A.wsOptions[T]=I[T])}),A}function p(I){let A=f(I);if(A.hostname||(A.hostname=A.host),!A.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let T=new URL(document.URL);A.hostname=T.hostname,A.port||(A.port=Number(T.port))}return A.objectMode===void 0&&(A.objectMode=!(A.binary===!0||A.binary===void 0)),A}function y(I,A,T){a("createWebSocket"),a(`protocol: ${T.protocolId} ${T.protocolVersion}`);let k=T.protocolId==="MQIsdp"&&T.protocolVersion===3?"mqttv3.1":"mqtt";a(`creating new Websocket for url: ${A} and protocol: ${k}`);let R;return T.createWebsocket?R=T.createWebsocket(A,[k],T):R=new o.default(A,[k],T.wsOptions),R}function b(I,A){let T=A.protocolId==="MQIsdp"&&A.protocolVersion===3?"mqttv3.1":"mqtt",k=h(A,I),R;return A.createWebsocket?R=A.createWebsocket(k,[T],A):R=new WebSocket(k,[T]),R.binaryType="arraybuffer",R}var w=(I,A)=>{a("streamBuilder");let T=f(A);T.hostname=T.hostname||T.host||"localhost";let k=h(T,I),R=y(I,k,T),E=o.default.createWebSocketStream(R,T.wsOptions);return E.url=k,R.on("close",()=>{E.destroy()}),E};e.streamBuilder=w;var v=(I,A)=>{a("browserStreamBuilder");let T,k=p(A).browserBufferSize||1024*512,R=A.browserBufferTimeout||1e3,E=!A.objectMode,S=b(I,A),P=z(A,q,Z);A.objectMode||(P._writev=l.writev.bind(P)),P.on("close",()=>{S.close()});let N=typeof S.addEventListener<"u";S.readyState===S.OPEN?(T=P,T.socket=S):(T=new l.BufferedDuplex(A,P,S),N?S.addEventListener("open",re):S.onopen=re),N?(S.addEventListener("close",_),S.addEventListener("error",W),S.addEventListener("message",$)):(S.onclose=_,S.onerror=W,S.onmessage=$);function z(K,F,oe){let se=new s.Transform({objectMode:K.objectMode});return se._write=F,se._flush=oe,se}function re(){a("WebSocket onOpen"),T instanceof l.BufferedDuplex&&T.socketReady()}function _(K){a("WebSocket onClose",K),T.end(),T.destroy()}function W(K){a("WebSocket onError",K);let F=new Error("WebSocket error");F.event=K,T.destroy(F)}async function $(K){let{data:F}=K;F instanceof ArrayBuffer?F=t.Buffer.from(F):F instanceof Blob?F=t.Buffer.from(await new Response(F).arrayBuffer()):F=t.Buffer.from(F,"utf8"),P&&!P.destroyed&&P.push(F)}function q(K,F,oe){if(S.bufferedAmount>k){setTimeout(q,R,K,F,oe);return}E&&typeof K=="string"&&(K=t.Buffer.from(K,"utf8"));try{S.send(K)}catch(se){return oe(se)}oe()}function Z(K){S.close(),K()}return T};e.browserStreamBuilder=v}),Ga={};rn(Ga,{Server:()=>Ze,Socket:()=>Ze,Stream:()=>Ze,_createServerHandle:()=>Ze,_normalizeArgs:()=>Ze,_setSimultaneousAccepts:()=>Ze,connect:()=>Ze,createConnection:()=>Ze,createServer:()=>Ze,default:()=>Zh,isIP:()=>Ze,isIPv4:()=>Ze,isIPv6:()=>Ze});function Ze(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Zh,Xh=gt(()=>{ye(),we(),be(),Zh={_createServerHandle:Ze,_normalizeArgs:Ze,_setSimultaneousAccepts:Ze,connect:Ze,createConnection:Ze,createServer:Ze,isIP:Ze,isIPv4:Ze,isIPv6:Ze,Server:Ze,Socket:Ze,Stream:Ze}}),Oc=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Xh(),Ke(Ga))),o=r(pr()),c=(0,o.default)("mqttjs:tcp"),s=(n,l)=>{l.port=l.port||1883,l.hostname=l.hostname||l.host||"localhost";let{port:a,path:u}=l,h=l.hostname;return c("port %d and host %s",a,h),t.default.createConnection({port:a,host:h,path:u})};e.default=s}),ef={};rn(ef,{default:()=>tf});var tf,m0=gt(()=>{ye(),we(),be(),tf={}}),Pc=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((m0(),Ke(ef))),o=r((Xh(),Ke(Ga))),c=r(pr()),s=(0,c.default)("mqttjs:tls"),n=(l,a)=>{a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",o.default.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,s("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);let u=t.default.connect(a);u.on("secureConnect",()=>{a.rejectUnauthorized&&!u.authorized?u.emit("error",new Error("TLS not authorized")):u.removeListener("error",h)});function h(f){a.rejectUnauthorized&&l.emit("error",f),u.end()}return u.on("error",h),u};e.default=n}),Bc=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(yt(),Ke(mt)),t=on(),o=Ya(),c,s,n;function l(){let p=new t.Transform;return p._write=(y,b,w)=>{c.send({data:y.buffer,success(){w()},fail(v){w(new Error(v))}})},p._flush=y=>{c.close({success(){y()}})},p}function a(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function u(p,y){let b=p.protocol==="wxs"?"wss":"ws",w=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(w=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(w=p.transformWsUrl(w,p,y)),w}function h(){c.onOpen(()=>{n.socketReady()}),c.onMessage(p=>{let{data:y}=p;y instanceof ArrayBuffer?y=r.Buffer.from(y):y=r.Buffer.from(y,"utf8"),s.push(y)}),c.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),c.onError(p=>{let y=new Error(p.errMsg);n.destroy(y)})}var f=(p,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let b=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";a(y);let w=u(y,p);c=wx.connectSocket({url:w,protocols:[b]}),s=l(),n=new o.BufferedDuplex(y,s,c),n._destroy=(I,A)=>{c.close({success(){A&&A(I)}})};let v=n.destroy;return n.destroy=(I,A)=>(n.destroy=v,setTimeout(()=>{c.close({fail(){n._destroy(I,A)}})},0),n),h(),n};e.default=f}),Mc=_e(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(yt(),Ke(mt)),t=on(),o=Ya(),c,s,n,l=!1;function a(){let y=new t.Transform;return y._write=(b,w,v)=>{c.sendSocketMessage({data:b.buffer,success(){v()},fail(){v(new Error)}})},y._flush=b=>{c.closeSocket({success(){b()}})},y}function u(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function h(y,b){let w=y.protocol==="alis"?"wss":"ws",v=`${w}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(v=`${w}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(v=y.transformWsUrl(v,y,b)),v}function f(){l||(l=!0,c.onSocketOpen(()=>{n.socketReady()}),c.onSocketMessage(y=>{if(typeof y.data=="string"){let b=r.Buffer.from(y.data,"base64");s.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w instanceof ArrayBuffer?w=r.Buffer.from(w):w=r.Buffer.from(w,"utf8"),s.push(w)}),b.readAsArrayBuffer(y.data)}}),c.onSocketClose(()=>{n.end(),n.destroy()}),c.onSocketError(y=>{n.destroy(y)}))}var p=(y,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";u(b);let v=h(b,y);return c=b.my,c.connectSocket({url:v,protocols:w}),s=a(),n=new o.BufferedDuplex(b,s,c),f(),n};e.default=p}),y0=_e(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=r(pr()),o=r((p0(),Ke(Sh))),c=r(da()),s=r(ts());typeof(We==null?void 0:We.nextTick)!="function"&&(We.nextTick=setImmediate);var n=(0,t.default)("mqttjs"),l=null;function a(f){let p;f.auth&&(p=f.auth.match(/^(.+):(.+)$/),p?(f.username=p[1],f.password=p[2]):f.username=f.auth)}function u(f,p){var y,b,w,v;if(n("connecting to an MQTT broker..."),typeof f=="object"&&!p&&(p=f,f=""),p=p||{},f&&typeof f=="string"){let T=o.default.parse(f,!0),k={};if(T.port!=null&&(k.port=Number(T.port)),k.host=T.hostname,k.query=T.query,k.auth=T.auth,k.protocol=T.protocol,k.path=T.path,k.protocol=(y=k.protocol)===null||y===void 0?void 0:y.replace(/:$/,""),p=Object.assign(Object.assign({},k),p),!p.protocol)throw new Error("Missing protocol")}if(p.unixSocket=p.unixSocket||((b=p.protocol)===null||b===void 0?void 0:b.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!(!((w=p.protocol)===null||w===void 0)&&w.startsWith("ws"))&&!(!((v=p.protocol)===null||v===void 0)&&v.startsWith("wx"))&&delete p.path,a(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(l||(l={},!s.default&&!p.forceNativeWebSocket?(l.ws=pi().streamBuilder,l.wss=pi().streamBuilder,l.mqtt=Oc().default,l.tcp=Oc().default,l.ssl=Pc().default,l.tls=l.ssl,l.mqtts=Pc().default):(l.ws=pi().browserStreamBuilder,l.wss=pi().browserStreamBuilder,l.wx=Bc().default,l.wxs=Bc().default,l.ali=Mc().default,l.alis=Mc().default)),!l[p.protocol]){let T=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((k,R)=>T&&R%2===0?!1:typeof l[k]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function I(T){return p.servers&&((!T._reconnectCount||T._reconnectCount===p.servers.length)&&(T._reconnectCount=0),p.host=p.servers[T._reconnectCount].host,p.port=p.servers[T._reconnectCount].port,p.protocol=p.servers[T._reconnectCount].protocol?p.servers[T._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,T._reconnectCount++),n("calling streambuilder for",p.protocol),l[p.protocol](T,p)}let A=new c.default(I,p);return A.on("error",()=>{}),A}function h(f,p,y=!0){return new Promise((b,w)=>{let v=u(f,p),I={connect:T=>{A(),b(v)},end:()=>{A(),b(v)},error:T=>{A(),v.end(),w(T)}};y===!1&&(I.close=()=>{I.error(new Error("Couldn't connect to server"))});function A(){Object.keys(I).forEach(T=>{v.off(T,I[T])})}Object.keys(I).forEach(T=>{v.on(T,I[T])})})}e.connectAsync=h,e.default=u}),Nc=_e(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(y,b,w,v){v===void 0&&(v=w);var I=Object.getOwnPropertyDescriptor(b,w);(!I||("get"in I?!b.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(y,v,I)}:function(y,b,w,v){v===void 0&&(v=w),y[v]=b[w]}),t=e&&e.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),o=e&&e.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var w in y)w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)&&r(b,y,w);return t(b,y),b},c=e&&e.__exportStar||function(y,b){for(var w in y)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&r(b,y,w)},s=e&&e.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var n=s(da());e.MqttClient=n.default;var l=s(eh());e.DefaultMessageIdProvider=l.default;var a=s(Zg());e.UniqueMessageIdProvider=a.default;var u=s(th());e.Store=u.default;var h=o(y0());e.connect=h.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var f=s(yh());e.KeepaliveManager=f.default,e.Client=n.default,c(da(),e),c(Rn(),e);var p=es();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),b0=_e(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(n,l,a,u){u===void 0&&(u=a);var h=Object.getOwnPropertyDescriptor(l,a);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(n,u,h)}:function(n,l,a,u){u===void 0&&(u=a),n[u]=l[a]}),t=e&&e.__setModuleDefault||(Object.create?function(n,l){Object.defineProperty(n,"default",{enumerable:!0,value:l})}:function(n,l){n.default=l}),o=e&&e.__importStar||function(n){if(n&&n.__esModule)return n;var l={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&r(l,n,a);return t(l,n),l},c=e&&e.__exportStar||function(n,l){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(l,a)&&r(l,n,a)};Object.defineProperty(e,"__esModule",{value:!0});var s=o(Nc());e.default=s,c(Nc(),e)}),w0=b0();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/const v0=5,fn={},Lc=({options:e})=>e.host+e.path,_0=au({init:e=>tu(e,E0,v0).map(r=>{const t=w0.connect(r),o=Lc(t);return t.stream.socket,fn[o]={},t.on("message",(c,s)=>{var n,l;return(l=(n=fn[o])[c])==null?void 0:l.call(n,c,s.toString())}),new Promise(c=>t.on("connect",()=>c(t)))}),subscribe:(e,r,t,o)=>{const c=Lc(e);return fn[c][r]=fn[c][t]=(s,n)=>o(s,n,e.publish.bind(e)),e.subscribe(r),e.subscribe(t),()=>{e.unsubscribe(r),e.unsubscribe(t),delete fn[c][r],delete fn[c][t]}},announce:(e,r)=>e.publish(r,Vt({peerId:Wt}))}),E0=["mqtt.eclipseprojects.io/mqtt","broker.hivemq.com:8884/mqtt","public.mqtthq.com:8084/mqtt","test.mosquitto.org:8081/mqtt","broker.emqx.io:8084/mqtt"].map(e=>"wss://"+e);//! Copyright Nuzulul Zulkarnain. Released under The MIT License.
//! webConnect.js -- https://github.com/nuzulul/webConnect.js
var je,Vi,xt,Ot,Pt,nr,ir,sr,Qn,Oe,Ii,Ci,Ri,xi,wt,Oi,Pi,rf,nf,A0,Hr,zr,Vr,lt,Kr,Yr;class S0{constructor(r){xe(this,Oe);xe(this,je);xe(this,Vi);xe(this,xt);xe(this,Ot);xe(this,Pt);xe(this,nr);xe(this,ir);xe(this,sr);xe(this,Qn);xe(this,Hr,()=>{});Ue(this,"onConnect",r=>ke(this,Hr,r));xe(this,zr,()=>{});Ue(this,"onDisconnect",r=>ke(this,zr,r));xe(this,Vr,()=>{});Ue(this,"onReceive",r=>ke(this,Vr,r));xe(this,lt,()=>{});Ue(this,"onSendProgress",r=>ke(this,lt,r));xe(this,Kr,()=>{});Ue(this,"onReceiveProgress",r=>ke(this,Kr,r));xe(this,Yr,()=>{});Ue(this,"onStreaming",r=>ke(this,Yr,r));ke(this,je,[]);const t=r.db,o=r.room.roomTORRENT,c=r.room.roomNOSTR,s=r.room.roomMQTT,n=r.MyId;ke(this,Vi,t),ke(this,xt,o),ke(this,Ot,s),ke(this,Pt,c),ke(this,Qn,n),o.onPeerJoin(v=>{Ae(this,Oe,Ii).call(this,v,"torrent",O(this,Hr))}),c.onPeerJoin(v=>{Ae(this,Oe,Ii).call(this,v,"nostr",O(this,Hr))}),s.onPeerJoin(v=>{Ae(this,Oe,Ii).call(this,v,"mqtt",O(this,Hr))}),o.onPeerLeave(v=>{Ae(this,Oe,Ci).call(this,v,"torrent",O(this,zr))}),c.onPeerLeave(v=>{Ae(this,Oe,Ci).call(this,v,"nostr",O(this,zr))}),s.onPeerLeave(v=>{Ae(this,Oe,Ci).call(this,v,"mqtt",O(this,zr))}),o.onPeerStream((v,I,A)=>{Ae(this,Oe,Ri).call(this,v,I,A,"torrent",O(this,Yr))}),c.onPeerStream((v,I,A)=>{Ae(this,Oe,Ri).call(this,v,I,A,"nostr",O(this,Yr))}),s.onPeerStream((v,I,A)=>{Ae(this,Oe,Ri).call(this,setream,I,A,"mqtt",O(this,Yr))});const[l,a,u]=o.makeAction("data");ke(this,nr,l),a((v,I,A)=>Ae(this,Oe,Pi).call(this,v,I,A,"torrent",O(this,Vr))),u((v,I,A)=>{Ae(this,Oe,Oi).call(this,v,I,A,"torrent",O(this,Kr))});const[h,f,p]=c.makeAction("data");ke(this,ir,h),f((v,I,A)=>Ae(this,Oe,Pi).call(this,v,I,A,"nostr",O(this,Vr))),p((v,I,A)=>{Ae(this,Oe,Oi).call(this,v,I,A,"mqtt",O(this,Kr))});const[y,b,w]=s.makeAction("data");ke(this,sr,y),b((v,I,A)=>Ae(this,Oe,Pi).call(this,v,I,A,"mqtt",O(this,Vr))),w((v,I,A)=>{Ae(this,Oe,Oi).call(this,v,I,A,"nostr",O(this,Kr))})}Send(r,t){Ae(this,Oe,xi).call(this,"",r,t.connectId,t.metadata)}openStreaming(r,t){let o=t.connectId,c=t.metadata;if(o==null)O(this,je).forEach((s,n)=>{let l=s.engine;l.includes("torrent")?O(this,xt).addStream(r,s.id,c):l.includes("mqtt")?O(this,Ot).addStream(r,s.id,c):l.includes("nostr")&&O(this,Pt).addStream(r,s.id,c)});else{const s=O(this,je).findIndex(n=>n.id==o);if(s>-1){let n=O(this,je)[s].engine;n.includes("torrent")?O(this,xt).addStream(r,o,c):n.includes("mqtt")?O(this,Ot).addStream(r,o,c):n.includes("nostr")&&O(this,Pt).addStream(r,o,c)}}}closeStreaming(r,t){let o=t.connectId;if(o==null)O(this,je).forEach((c,s)=>{c.engine.forEach((l,a)=>{l=="torrent"&&O(this,xt).removeStream(r,c.id),l=="mqtt"&&O(this,Ot).removeStream(r,c.id),l=="nostr"&&O(this,Pt).removeStream(r,c.id)})});else if(typeof o=="string"){const c=O(this,je).findIndex(s=>s.id==o);if(c>-1){let s=O(this,je)[c].engine;s.includes("torrent")?O(this,xt).addStream(r,o):s.includes("mqtt")?O(this,Ot).addStream(r,o):s.includes("nostr")&&O(this,Pt).addStream(r,o)}}}async Ping(r){let t=r.connectId;if(t==null)return null;if(typeof t=="string"){const o=O(this,je).findIndex(c=>c.id==t);if(o>-1){let c=O(this,je)[o].engine;if(c.includes("torrent"))return await O(this,xt).ping(t);if(c.includes("mqtt"))return await O(this,Ot).ping(t);if(c.includes("nostr"))return await O(this,Pt).ping(t)}}else return[]}Disconnect(){Object.keys(O(this,xt).getPeers()).length!==0&&O(this,xt).leave(),Object.keys(O(this,Ot).getPeers()).length!==0&&O(this,Ot).leave(),Object.keys(O(this,Pt).getPeers()).length!==0&&O(this,Pt).leave()}getConnection(r){let t=[];O(this,je).forEach((s,n)=>{t.push(s.id)});const o=O(this,xt).getPeers()||O(this,Ot).getPeers()||O(this,Pt).getPeers();r({connection:t,connections:o})}getMyId(r){let t={connectId:O(this,Qn)};r(t)}}je=new WeakMap,Vi=new WeakMap,xt=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,nr=new WeakMap,ir=new WeakMap,sr=new WeakMap,Qn=new WeakMap,Oe=new WeakSet,Ii=function(r,t,o){let c={id:r,engine:[t],online:{}};const s=O(this,je).findIndex(n=>n.id==r);s==-1?(O(this,je).push(c),o({connectId:r})):O(this,je)[s].engine.includes(t)||O(this,je)[s].engine.push(t)},Ci=function(r,t,o){const c=O(this,je).findIndex(s=>s.id==r);if(c>-1){const n=O(this,je)[c].engine.findIndex(l=>l==t);n>-1&&(O(this,je)[c].engine.splice(n,1),O(this,je)[c].engine.length==0&&(O(this,je).splice(c,1),o({connectId:r})))}},Ri=function(r,t,o,c,s){s(r,{connectId:t,metadata:o})},xi=function(r,t,o,c){if(r!==""&&r!=null)r=="torrent"?O(this,nr).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"torrent",O(this,lt))}):r=="mqtt"?O(this,sr).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"mqtt",O(this,lt))}):r=="nostr"&&O(this,ir).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"nostr",O(this,lt))});else if(o!=null&&Array.isArray(o))for(const s of o){const n=O(this,je).findIndex(l=>l.id==s);if(n>-1){let l=O(this,je)[n].engine;l.includes("torrent")?O(this,nr).call(this,t,s,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"torrent",O(this,lt))}):l.includes("mqtt")?O(this,sr).call(this,t,s,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"mqtt",O(this,lt))}):l.includes("nostr")&&O(this,ir).call(this,t,s,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"nostr",O(this,lt))})}}else if(o!=null&&typeof o=="string"){const s=O(this,je).findIndex(n=>n.id==o);if(s>-1){let n=O(this,je)[s].engine;n.includes("torrent")?O(this,nr).call(this,t,o,c,(l,a)=>{Ae(this,Oe,wt).call(this,l,a,c,"torrent",O(this,lt))}):n.includes("mqtt")?O(this,sr).call(this,t,o,c,(l,a)=>{Ae(this,Oe,wt).call(this,l,a,c,"mqtt",O(this,lt))}):n.includes("nostr")&&O(this,ir).call(this,t,o,c,(l,a)=>{Ae(this,Oe,wt).call(this,l,a,c,"nostr",O(this,lt))})}}else t=="webconnectping"?(O(this,nr).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"torrent",O(this,lt))}),O(this,sr).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"mqtt",O(this,lt))}),O(this,ir).call(this,t,o,c,(s,n)=>{Ae(this,Oe,wt).call(this,s,n,c,"nostr",O(this,lt))})):O(this,je).forEach((s,n)=>{let l=s.engine;l.includes("torrent")?O(this,nr).call(this,t,s.id,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"torrent",O(this,lt))}):l.includes("mqtt")?O(this,sr).call(this,t,s.id,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"mqtt",O(this,lt))}):l.includes("nostr")&&O(this,ir).call(this,t,s.id,c,(a,u)=>{Ae(this,Oe,wt).call(this,a,u,c,"nostr",O(this,lt))})})},wt=function(r,t,o,c,s){s({percent:r,connectId:t,metadata:o})},Oi=function(r,t,o,c,s){s({percent:r,connectId:t,metadata:o})},Pi=function(r,t,o,c,s){if(typeof r=="string"&&r=="webconnectping")Ae(this,Oe,nf).call(this,t,c);else if(typeof r=="string"&&r=="webconnectpong"){const n=O(this,je).findIndex(l=>l.id==t);if(n>-1){let a=new Date().getTime();c=="torrent"?O(this,je)[n].online.torrent=a:c=="mqtt"?O(this,je)[n].online.mqtt=a:c=="nostr"&&(O(this,je)[n].online.nostr=a)}}else s(r,{connectId:t,metadata:o})},rf=function(r,t){Ae(this,Oe,xi).call(this,t,"webconnectping",r)},nf=function(r,t){Ae(this,Oe,xi).call(this,t,"webconnectpong",r)},A0=function(){setInterval(()=>{Ae(this,Oe,rf).call(this,null);let t=new Date().getTime();O(this,je).forEach((o,c)=>{o.engine.forEach((s,n)=>{t-o.online[s]>3e4&&O(this,je)[c].engine.splice(n,1)})})},1e4)},Hr=new WeakMap,zr=new WeakMap,Vr=new WeakMap,lt=new WeakMap,Kr=new WeakMap,Yr=new WeakMap;function T0({appName:e="webConnect",channelName:r="webConnectChannel",connectPassword:t="Browser to browser connection without server",iceConfiguration:o={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]}}){const c={appId:e,password:t,rtcConfig:o},s=Yl(c,r),n=Yl(c,r),l=_0(c,r),h={db:!1,room:{roomTORRENT:s,roomNOSTR:n,roomMQTT:l},MyId:Wt||Wt||Wt};return new S0(h)}//! https://github.com/nuzulul/wifidrop
const k0="stun:stun.l.google.com:19302",I0="stun:global.stun.twilio.com:3478",C0="dHVybjp0dXJuMDEuYnJpZS5maTo1MzQ5",R0="YnJpZQ==",x0="Zmk=",O0="dHVybjpyZWxheTEuZXhwcmVzc3R1cm4uY29tOjM0Nzg=",P0="ZWZJSllZNjdDNElRMzFZQUlP",B0="Vk01SmdhODlkYjJaWU9aSA==",M0=100*1024*1024,N0=!1;//! Copyright Nuzulul Zulkarnain. Released under The MIT License.
//! WIFIDrop -- https://github.com/nuzulul/wifidrop
let qe={},ot=new Map,rs=new Map,Tn=new Map,sf="",Uc=[],Bi=new Map,_t,ns,zt,It,Ut=new Map,Et=new Map,Gn=new Map,yn=new Map,rr=new Map,tn=new Map,hr=!1;const L0=N0,Qa=M0;typeof showOpenFilePicker==typeof Function&&typeof showSaveFilePicker==typeof Function&&(hr=!0);document.querySelector("#app").innerHTML=`
  <span id="loader" style="display:block;"><div class="loading">Loading&#8230;</div></span>
  <div>
    <a href="/">
      <img src="${$f}" class="logo vanilla" alt="WIFIDrop logo" /><h1 class="logo-text">WIFIDrop</h1>
    </a>
    
    <div class="frame">
      <button id="drop" type="button">Drop a file or click to select a file</button>
    </div>
	
	<div class="peers">
		<div class="peer me">
			<div class="device"></div>
			<div class="device-name">DEVICE</div>
			<div class="radar">

				<svg id="radar-circle">
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="0.75s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="0.75s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="1.5s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="1.5s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="5" fill="#C1D82F" stroke="#979797"></circle>
				</svg>

			</div>
		</div>	
	</div>
	<div class="attribution">
		<p>WIFIDrop - Local peer-to-peer file transfer via WIFI</p>
		<p><a target="_blank" href="https://github.com/nuzulul/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"> <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/> </svg> GitHub</a></p>
	</div>
  </div>
`;const of=(e,r)=>{const t=sf+new Date().getTime().toString()+Math.floor(Math.random()*1e6);rs.set(t,e),r&&(hr=!1),setTimeout(()=>{Y0(t)},500)};zf(document.querySelector("#drop"),hr,of);navigator.serviceWorker.addEventListener("message",function(e){if(console.log("message",e),new URL(window.location.href).searchParams.has("receiving-file-share")){const t=e.data.files;of(t,!0)}});(async function(){if(_t=await cs({runtime:"browser",storageName:"wifidropdbMe"}),ns=await cs({runtime:"browser",storageName:"wifidropdbBio"}),zt=await cs({runtime:"browser",storageName:"wifidropdbHistory"}),(await _t.list()).keys.length==0){const{publicKey:b,privateKey:w}=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),v=await window.crypto.subtle.exportKey("jwk",b),I=await window.crypto.subtle.exportKey("jwk",w);qe.jwkpublicKey=v,qe.jwkprivateKey=I;const A=JSON.stringify(v);qe.publicKey=A,await _t.put("publicKey",A),await _t.put("privateKey",JSON.stringify(I));const T=Yf();qe.name=T,await _t.put("name",T);const k=btoa(A);qe.id=k;var t=Math.floor(Math.random()*16777215).toString(16);t.length<6&&(t="000000"),await _t.put("color",t),qe.color=t,await _t.put("skipconfirmation",!1);const S=vn(A);qe.key=S}else{const b=await _t.get("publicKey"),w=JSON.parse(b),v=await _t.get("privateKey"),I=JSON.parse(v);qe.jwkpublicKey=w,qe.jwkprivateKey=I,qe.publicKey=b;const A=await _t.get("name");qe.name=A;const T=btoa(b);qe.id=T;const k=await _t.get("color");qe.color=k;const R=vn(b);qe.key=R}var t=Math.floor(Math.random()*16777215).toString(16);t.length<6&&(t="000000"),qe.varian=t,Ea(),U0();const o=k0,c=I0,s=atob(O0),n=atob(P0),l=atob(B0),a=atob(C0),u=atob(R0),h=atob(x0);async function f(b,w,v,I,A){return new Promise(T=>{let k=!1,R=!1;const E=setTimeout(()=>{let z=[];z.push(k),z.push(R),T(z)},A);function S(){if(k&&R){let z=[];z.push(k),z.push(R),clearTimeout(E),T(z)}}const P=[{urls:b},{urls:w,username:v,credential:I}],N=new RTCPeerConnection({iceServers:P});N.onicecandidate=z=>{z.candidate&&(z.candidate.type=="srflx"&&(qe.address=z.candidate.address,qe.priority=z.candidate.priority,k={urls:b},S()),z.candidate.type=="relay"&&(R={urls:w,username:v,credential:I},S()))},N.onicecandidateerror=z=>{console.debug(z)},N.createDataChannel("webpeerjs"),N.createOffer().then(z=>N.setLocalDescription(z))})}let p=[];p=await f(o,s,n,l,5e3),!p[0]&&!p[1]?p=await f(c,a,u,h,5e3):p[0]&&!p[1]?p=await f(o,a,u,h,5e3):!p[0]&&p[1]&&(p=await f(c,s,n,l,5e3)),p.forEach(function(b,w){b||this.splice(w,1)},p);let y="Tb5xazDnJy9GryD7mQnjSOmT8EL4bAkzG5WR84B7jPTX2S52J64UbtU7JRj8XBCn-"+qe.address;It=T0({appName:"WIFIDrop",channelName:"WIFIDropRoom",connectPassword:y,iceConfiguration:{config:{iceServers:p}}}),It.getMyId(b=>{sf=b.connectId,Ea()}),It.onConnect(async b=>{It.getConnection(w=>{}),af(b.connectId)}),It.onDisconnect(b=>{V0(b.connectId),K0(b.connectId)}),It.onReceive((b,w)=>{w.metadata==null?F0(b,w):tm(b,w)}),It.onReceiveProgress(b=>{b.metadata!=null&&em(b)}),It.onSendProgress(b=>{b.metadata!=null&&rm(b)})})();async function U0(){const e=await zt.list();let r=[];for(const t of e.keys){const o=await zt.get(t);r.push(o)}r.sort((t,o)=>t.time-o.time);for(const t of r){const o=await ns.get(t.author),c=t.fileid,s=t.time,n=t.send,l=t.complete,a={size:t.size,name:t.name};qr(o,a,c,s,n,l)}}function is(e,r){return`https://blobcdn.com/blob.svg?seed=${nt(e)}&fill=${nt(r)}&extraPoints=9`}function Ea(){const e=is(qe.id,qe.varian);document.querySelector(".peer.me .device-name").innerHTML=`<span class="varian" style="border:2px solid #${nt(qe.varian)};background:#${qe.varian};"></span>`+qe.name,document.querySelector(".peer.me .device").innerHTML=`
		<img class="device-avatar" src="${e}">
	`}function af(e){const r={command:"announce",data:{name:qe.name,color:qe.color,varian:qe.varian}};kn(r,e)}async function D0(e){return await window.crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-384"},!0,["sign"])}async function j0(e){return await window.crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-384"},!0,["verify"])}async function kn(e,r){e.data.jwkpublicKey=qe.jwkpublicKey;const t=await D0(qe.jwkprivateKey);let o=new TextEncoder,c=o.encode(JSON.stringify(e.data));const s=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-384"}},t,c),n=Array.from(new Uint8Array(s));e.sign=n;let l=o.encode(JSON.stringify(e));It.Send(l,{connectId:r})}async function F0(e,r){typeof e=="object"&&(e=new TextDecoder().decode(e));const t=JSON.parse(e),o=t.data.jwkpublicKey,c=await j0(o),s=new Uint8Array(t.sign).buffer;let l=new TextEncoder().encode(JSON.stringify(t.data));if(!await window.crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-384"}},c,s,l))return;const u=r.connectId;if(r.metadata,t.command=="announce")ot.has(u)?H0(u,t.data):q0(u,t.data);else if(t.command=="offer")t.data,G0(r.connectId,t.data);else if(t.command=="answer")t.data.value?Q0(r.connectId,t.data):J0(r.connectId,t.data);else if(t.command=="clipboard"){const h=t.data.clip;Bi.set(u,h),document.querySelector(".clipboard.clipboard-"+u)&&(document.querySelector(".clipboard .message .content #clipboard").value=h)}else t.command=="state"&&X0(r.connectId,t.data)}async function q0(e,r){let t=r;const o=JSON.stringify(r.jwkpublicKey),c=btoa(o);t.id=c,t.connectId=e,ot.set(e,t);const s=setInterval(()=>{It.getConnection(async h=>{const f=h.connections[e];if(f){const y=await p();let b=ot.get(e);b.type=y,ot.set(e,b),W0(e),clearInterval(s)}async function p(){const y=await f.getStats();if(y){let b=null;for(const[v,I]of y)if(I.type=="transport"){b=I.selectedCandidatePairId;break}let w=y.get(b);if(!w){for(const[v,I]of y)if(I.type=="candidate-pair"&&I.selected){w=I;break}}if(w){for(const[v,I]of y)if(v==w.remoteCandidateId)return I.candidateType}}}})},1e3),n=vn(o);await ns.put(n,t);const l=is(t.id,t.varian),a=t.type?t.type:"none",u=`
		<div class="peer peer-${e}">
			<div class="device"><img class="device-avatar" src="${l}"></div>
			<div class="device-name"><span class="varian ${a}" style="border:2px solid #${nt(t.varian)};"></span>${nt(t.name)}</div>
		</div>
	`;document.querySelector(".peers .peer.me").insertAdjacentHTML("afterend",u),document.querySelector(".sendto-list")!=null&&cf(t,window.currentfilesid),document.querySelector(".peers .peer-"+e).addEventListener("click",()=>{$0(e)})}function W0(e){const t=ot.get(e).type,o=document.querySelectorAll(".peer.peer-"+e+" .varian");for(const c of o)c.classList.remove("none"),c.classList.add(t)}function $0(e){const r=document.createElement("div");r.innerHTML=`
			<div class="dialog clipboard clipboard-${nt(e)}">
				<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div class="device-name" style="padding:10px 10px;">title</div></div>
					<div class="content" >
						<textarea id="clipboard" name="clipboard" rows="10" cols="30"></textarea>
					</div>
					<div class="footer">
						<button class="save">SAVE</button>
						<button class="copy">COPY</button>
					</div>
				</div>
		</div>`,document.body.appendChild(r),document.querySelector(".clipboard #parax").addEventListener("click",()=>{r.remove()});const t=ot.get(e),o=t.type?t.type:"none";document.querySelector(".clipboard .message .title div").innerHTML=`<span class="varian ${o}" style="border:2px solid #${nt(t.varian)};"></span>${nt(t.name)}'s clipboard`,document.querySelector(".clipboard .message .content #clipboard").value=Bi.has(e)?Bi.get(e):"",document.querySelector(".clipboard .message .footer .save").addEventListener("click",()=>{const c=document.querySelector(".clipboard .message .content #clipboard").value,s={command:"clipboard",data:{clip:c}};Bi.set(e,c),kn(s,e);const n=`
				<span class="check">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
					  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
					</svg>		
				</span>`,l=".clipboard .message .footer .save";document.querySelector(l).insertAdjacentHTML("afterbegin",n),setTimeout(()=>{document.querySelector(l+" .check")&&document.querySelector(l+" .check").remove()},3e3)}),document.querySelector(".clipboard .message .footer .copy").addEventListener("click",()=>{const c=document.querySelector(".clipboard .message .content #clipboard").value;navigator.clipboard.writeText(c).then(()=>{const s=`
						<span class="check">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
							  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
							</svg>		
						</span>`,n=".clipboard .message .footer .copy";document.querySelector(n).insertAdjacentHTML("afterbegin",s),setTimeout(()=>{document.querySelector(n+" .check")&&document.querySelector(n+" .check").remove()},3e3)},()=>{})})}async function H0(e,r){let t=ot.get(e);t.name=r.name,ot.set(e,t);const o=document.querySelectorAll(".peer.peer-"+e+" .device-name");for(const c of o)c.innerText=t.name}function z0(e){let r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};return e.replace(/[&"'<>]/g,t=>r[t])}function nt(e){e=String(e);var r=z0(e);return r}function V0(e){ot.delete(e),document.querySelector(".peers .peer.peer-"+e)&&document.querySelector(".peers .peer.peer-"+e).remove(),document.querySelector(".sendto-list")!=null&&(document.querySelector(".sendto-list .peer.peer-"+e).remove(),ot.size==0&&lf())}function K0(e){const r=document.querySelectorAll(".file.connect-"+e);for(const t of r)t.dataset.complete!=="100"&&(t.style.backgroundColor="#b81127",t.children[2].children[1].children[0].innerHTML="Failed");document.querySelector(".clipboard.clipboard-"+e)&&document.querySelector(".clipboard.clipboard-"+e).remove()}async function Y0(e){let r=rs.get(e);const t=r.length;let o=0;for(const s of r){const n=hr?await s.getFile():s;o+=n.size}const c=document.createElement("div");c.innerHTML=`<div class="dialog sendto"><div id="parax"><span style="font-size:30px;color:#fff;">X</span></div><div class="popup"><div class="title"><div style="padding:10px 10px;">Send ${nt(t)} file(s) of ${$e(nt(o))} to ...</div></div><div class="scroller sendto-list" ></div></div></div>`,document.body.appendChild(c),document.querySelector(".sendto #parax").addEventListener("click",()=>{c.remove()}),window.currentfilesid=e,ot.size>0?ot.forEach(s=>{cf(s,e)}):lf()}function lf(){document.querySelector(".sendto-list").innerHTML='<div class="infonopeers" style="padding:15px 15px;">Waiting for other devices connected to WIFIDrop on the same network ...</div>'}function cf(e,r){document.querySelector(".infonopeers")!=null&&document.querySelector(".infonopeers").remove();const t=is(e.id,e.varian),o=e.type?e.type:"none",c=`
		<div class="peer peer-${e.connectId}" data-peer="${e.connectId}">
			<div class="device"><img class="device-avatar" src="${t}"></div>
			<div class="device-name"><span class="varian ${o}" style="border:2px solid #${nt(e.varian)};"></span>${nt(e.name)}</div>
		</div>
	`;document.querySelector(".sendto-list").innerHTML+=c,document.querySelector(".sendto-list .peer.peer-"+e.connectId).style.display="none",setTimeout(()=>{document.querySelector(".sendto-list .peer.peer-"+e.connectId).addEventListener("click",()=>{zi(e,r)}),document.querySelector(".sendto-list .peer.peer-"+e.connectId).style.display="block";const s=document.querySelector(".scroller");s.scrollTop=s.scrollHeight},1e3)}async function zi(e,r,t){let o=rs.get(r);const c=o.length;let s=!1,n=0;for(const f of o){const p=hr?await f.getFile():f;n+=p.size}n>Qa&&(s=!0),document.querySelector(".sendto")&&document.querySelector(".sendto").remove();const l=document.createElement("div");if(l.innerHTML=`<div class="dialog offer offer-${r}"><div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div><div class="message"><div class="title"><div style="padding:10px 10px;">Waiting confirmation</div></div><div class="content" >You want to send  ${nt(c)} file(s) of ${$e(nt(n))} to ${nt(e.name)} ...</div></div></div>`,document.body.appendChild(l),document.querySelector(".offer.offer-"+r+" #parax").addEventListener("click",()=>{l.remove()}),!hr&&s&&t==null){document.querySelector(".offer.offer-"+r)&&document.querySelector(".offer.offer-"+r).remove(),t=!0,zi(e,r,t);return}let a=[];for(const f of o){const p=hr?await f.getFile():f,y=p.name,b=p.size,w=p.type,v=new Date().getTime(),I=p.size.toString()+v.toString()+Math.floor(Math.random()*1e6),A={name:y,size:b,type:w,fileid:I};a.push(A)}kn({command:"offer",data:{length:c,size:n,filesid:r,namefiles:a,large:s,force:!!t}},e.connectId)}async function G0(e,r){if(ot.has(e)){const t=ot.get(e),c=!!r.force;if(!hr&&r.size>Qa&&!c){const p={command:"answer",data:{value:!1,filesid:r.filesid,largelimit:!0}};kn(p,e);return}if(await _t.get("skipconfirmation")){Dc(r,e);return}let n="<ul>";for(const f of r.namefiles){const p=`<li>${nt(f.name)}</li>`;n+=p}n+="</ul>";const l=document.createElement("div");l.innerHTML=`
			<div class="dialog answer answer-${r.filesid}">
				<div id="parax" style="display:none;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div style="padding:10px 10px;">Confirmation</div></div>
					<div class="content" style="width:100%;">
						<div class="profile" style="display:flex;justify-content: center;align-items: center;margin-bottom:10px;"></div>
						<div style="padding:10px 10px;">${t.name} wants to send you ${nt(r.length)} file(s) of ${$e(nt(r.size))}</div>
						<div style="max-height:125px;max-width:90%;overflow:scroll;">${n}</div>
					</div>
					<div class="footer">
						<button class="decline">DECLINE</button>
						<button class="accept">ACCEPT</button>
					</div>
				</div>
		</div>`,document.body.appendChild(l);const a=is(t.id,t.varian),u=t.type?t.type:"none",h=`
			<div class="peer peer-${t.connectId}" data-peer="${t.connectId}">
				<div class="device"><img class="device-avatar" src="${a}"></div>
				<div class="device-name"><span class="varian ${u}" style="border:2px solid #${nt(t.varian)};"></span>${nt(t.name)}</div>
			</div>
		`;document.querySelector(".answer.answer-"+r.filesid+" .message .content .profile").innerHTML=h,document.querySelector(".answer.answer-"+r.filesid+" #parax").addEventListener("click",()=>{l.remove()}),document.querySelector(".answer.answer-"+r.filesid+" .decline").addEventListener("click",()=>{l.remove();const p={command:"answer",data:{value:!1,filesid:r.filesid}};kn(p,e)}),document.querySelector(".answer.answer-"+r.filesid+" .accept").addEventListener("click",()=>{l.remove(),Dc(r,e)})}}async function Dc(e,r){let t=[];for(const a of e.namefiles){const u=new Date().getTime();let h=btoa(a.name+a.size+a.size.toString()+u.toString()+Math.floor(Math.random()*1e6));t.push(h);const f={nonceid:h,connectId:r,...a};Tn.set(h,f)}const o=e.filesid,c=e.namefiles,s=e.large,n=e.force;if(s&&!n)for(const a of c){const u=a.fileid;yn.set(u,0);let h=await showSaveFilePicker({suggestedName:a.name});try{const f=await h.createWritable();tn.set(u,f)}catch(f){console.error(f);return}}if(s&&n)for(const a of c){const u=a.fileid,h=a.name,f=a.size;yn.set(u,0),await new Promise(async p=>{const[y,b]=await promptSave(h,f);tn.set(u,b),setTimeout(()=>{p()},1e3)})}kn({command:"answer",data:{value:!0,filesid:o,namefiles:c,large:s,nonce:t,force:n}},r)}function Q0(e,r){document.querySelector(".offer.offer-"+r.filesid)&&document.querySelector(".offer.offer-"+r.filesid).remove(),Z0(e,r)}function J0(e,r){const t=r.filesid;if(r.largelimit&&!L0){document.querySelector(".offer.offer-"+r.filesid).remove();let o=ot.get(e);o.force=!0,zi(o,t,!0)}else if(document.querySelector(".offer.offer-"+r.filesid)){let o="Destination device decline";r.largelimit&&(o=`Destination device doesn't support large transfer (${$e(nt(Qa))})`);const c=`
				<span class="check" style="padding:10px 10px;color:red;display:inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-x-fill" viewBox="0 0 16 16">
					  <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M6.854 6.146 8 7.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 8l1.147 1.146a.5.5 0 0 1-.708.708L8 8.707 6.854 9.854a.5.5 0 0 1-.708-.708L7.293 8 6.146 6.854a.5.5 0 1 1 .708-.708"/>
					</svg>
					<span class="msg">${o}</span>
					<div class="footer" style="display:none">
						<p>Caution ! Legacy FORCE large transfer!</p>
						<button class="force" >TRY FORCE TRANSFER</button>
					</div>
				</span>`,s=".offer .message .content";document.querySelector(s).insertAdjacentHTML("beforeend",c),document.querySelector(s+" .check .footer .force").addEventListener("click",()=>{let n=ot.get(e);n.force=!0,document.querySelector(".offer.offer-"+t)&&document.querySelector(".offer.offer-"+t).remove(),zi(n,t,!0)}),setTimeout(()=>{document.querySelector(s+" .check .footer").style.display="block",r.largelimit||(document.querySelector(".offer.offer-"+r.filesid).remove(),document.querySelector(s+" .check")&&document.querySelector(s+" .check").remove())},2e3)}}async function Z0(e,r){Fr();const t=r.filesid,o=r.large,c=r.nonce,s=r.force,n=r.namefiles,l=ot.get(e),a=JSON.stringify(l.jwkpublicKey);vn(a);const u=!0,h="start";let f=rs.get(t);for(const p of f){const y=hr?await p.getFile():p,b=y.name,w=n.find(A=>A.name==b).fileid,v=c.shift(),I=new Date().getTime();setTimeout(async()=>{if(qr(l,y,w,I,u,h),!o){Ut.set(w,0),Gn.set(w,0),Et.set(w,new Date().getTime());let A=new FileReader;A.onload=function(){let T=this.result;const k={connectId:e,metadata:{fileid:w,name:y.name,type:y.type,size:y.size,nonceid:v,large:o}};It.Send(T,k)},A.readAsArrayBuffer(y)}if(o&&!s&&(Ut.set(w,0),Et.set(w,new Date().getTime()),rr.set(w,!1),y.stream().pipeTo(new WritableStream({async write(T,k){return new Promise((R,E)=>{const S=T.byteLength,P={connectId:e,metadata:{fileid:w,name:y.name,type:y.type,size:y.size,nonceid:v,large:o,chuncksize:S}};It.Send(T,P);let N=setInterval(()=>{rr.get(w)||(rr.set(w,!0),clearInterval(N),R())},10)})},close(){}}))),o&&s){Ut.set(w,0),Et.set(w,new Date().getTime()),rr.set(w,!1);const A=1*1024*1024,T=Math.ceil(y.size/A);let k=0;for(let R=1;R<=T;R++){const E=Math.min(k+A,y.size),S=y.slice(k,E);await new Promise((P,N)=>{let z=new FileReader;z.onload=function(){rr.set(w,!0);const _=this.result.byteLength,W={connectId:e,metadata:{fileid:w,name:y.name,type:y.type,size:y.size,nonceid:v,large:o,force:s,chuncksize:_,i:R}};It.Send(S,W);let $=setInterval(()=>{rr.get(w)||(clearInterval($),P())},10)},z.readAsArrayBuffer(S)}),k=E}}},500)}}async function X0(e,r){const t=r.fileid,o=r.state;o==="finished"?await tn.close():o==="next"&&rr.set(t,!1)}async function em(e){const r=e.connectId,t=ot.get(r),o=JSON.stringify(t.jwkpublicKey),c=vn(o),s=e.percent,n=e.metadata,l=n.fileid,a=n.name,u=n.size,h=n.type,f=n.large,p=n.force,y=n.nonceid;if(!Tn.has(y))return;const b=Tn.get(y),w=new Date().getTime(),v=!1,I=Math.floor(s*100),A={name:a,size:u};if(!f){const T=Gn.get(l);if(s==T)return;Gn.set(l,s);let k=s*u;const R=Math.floor(k-Ut.get(l));Ut.set(l,k);const E=Math.floor(1/((w-Et.get(l))/1e3)*R);Et.set(l,w);const S=Math.floor((u-k)/E*1e3);if(document.querySelector(".file.file-"+l))document.querySelector(".file.file-"+l+" .progress").innerHTML=I+"%",document.querySelector(".file.file-"+l+" .size").innerHTML=`${wn(S)} - ${$e(E)}/s - ${$e(k)}/${$e(u)}`;else{if(r!=b.connectId||a!=b.name||u!=b.size||h!=b.type)return;Fr(),qr(t,A,l,w,v,I)}if(s==1){const P={author:c,fileid:l,time:w,name:a,size:u,send:v,complete:I};await zt.put(l,P),document.querySelector(".file.file-"+l+" .size").innerHTML=`${$e(u)}`,document.querySelector(".file.file-"+l).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+l).dataset.complete=I,Mi(y)}}if(f&&!p){if(s<.1&&!document.querySelector(".file.file-"+l)){if(r!=b.connectId||a!=b.name||u!=b.size||h!=b.type)return;Fr(),qr(t,A,l,w,v,I)}const T=n.chuncksize;if(s==1){let k=yn.get(l)+T;yn.set(l,k);const R=k/u*100,E=Math.floor(R),S=Math.floor(1/((w-Et.get(l))/1e3)*T);Et.set(l,w);const P=Math.floor((u-k)/S*1e3);if(document.querySelector(".file.file-"+l))document.querySelector(".file.file-"+l+" .progress").innerHTML=E+"%",document.querySelector(".file.file-"+l+" .size").innerHTML=`${wn(P)} - ${$e(S)}/s - ${$e(k)}/${$e(u)}`;else{if(r!=b.connectId||a!=b.name||u!=b.size||h!=b.type)return;Fr(),qr(t,A,l,w,v,E)}if(R==100){const N={author:c,fileid:l,time:w,name:a,size:u,send:v,complete:E};await zt.put(l,N),document.querySelector(".file.file-"+l+" .size").innerHTML=`${$e(u)}`,document.querySelector(".file.file-"+l).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+l).dataset.complete=E,Mi(y),await tn.get(l).close()}}}if(f&&p){if(s<.1&&!document.querySelector(".file.file-"+l)){if(r!=b.connectId||a!=b.name||u!=b.size||h!=b.type)return;Fr(),qr(t,A,l,w,v,I)}const T=n.chuncksize;if(s==1){let k=yn.get(l)+T;yn.set(l,k);const R=k/u*100,E=Math.floor(R),S=Math.floor(1/((w-Et.get(l))/1e3)*T);Et.set(l,w);const P=Math.floor((u-k)/S*1e3);if(document.querySelector(".file.file-"+l))document.querySelector(".file.file-"+l+" .progress").innerHTML=E+"%",document.querySelector(".file.file-"+l+" .size").innerHTML=`${wn(P)} - ${$e(S)}/s - ${$e(k)}/${$e(u)}`;else{if(r!=b.connectId||a!=b.name||u!=b.size||h!=b.type)return;Fr(),qr(t,A,l,w,v,E)}if(R==100){const N={author:c,fileid:l,time:w,name:a,size:u,send:v,complete:E};await zt.put(l,N),document.querySelector(".file.file-"+l+" .size").innerHTML=`${$e(u)}`,document.querySelector(".file.file-"+l).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+l).dataset.complete=E,Mi(y),await tn.get(l).close()}}}}async function tm(e,r){const t=r.connectId,o=r.metadata,c=o.name,s=o.size,n=o.type,l=o.large,a=o.force,u=o.fileid,h=o.nonceid;if(!Tn.has(h))return;const f=Tn.get(h);if(!(t!=f.connectId||c!=f.name||s!=f.size||n!=f.type)){if(!l){let p=new Blob([new Uint8Array(e)],{type:r.metadata.type});const y=document.createElement("a");y.setAttribute("download",r.metadata.name);const b=URL.createObjectURL(p);y.setAttribute("href",b),y.setAttribute("target","_blank"),y.click(),URL.revokeObjectURL(b),Mi(h)}l&&!a&&(e.byteLength||e.size)&&await tn.get(u).write(e),l&&a&&(e.byteLength||e.size)&&await tn.get(u).write(e)}}function Mi(e){Uc.includes(e)?setTimeout(()=>{Tn.delete(e)},100):Uc.push(e)}async function rm(e){const r=e.connectId,t=ot.get(r),o=JSON.stringify(t.jwkpublicKey),c=vn(o),s=e.metadata,n=s.fileid,l=s.name,a=s.size,u=s.large,h=s.force,f=new Date().getTime(),p=e.percent,y=Math.floor(p*100),b=!0;if(!u){const w=Gn.get(n);if(y==w)return;const v=Et.get(n);if(f==v&&y!=100)return;Gn.set(n,y);let I=Math.floor(p*a),A=Ut.get(n);const T=I-A;Ut.set(n,I);const k=Math.floor(1/((f-v)/1e3)*T);Et.set(n,f);const R=Math.floor((a-I)/k*1e3);if(document.querySelector(".file.file-"+n+" .progress").innerHTML=y+"%",document.querySelector(".file.file-"+n+" .size").innerHTML=`${wn(R)} - ${$e(k)}/s - ${$e(I)}/${$e(a)}`,p==1){const E={author:c,fileid:n,time:f,name:l,size:a,send:b,complete:y};await zt.put(n,E),document.querySelector(".file.file-"+n+" .size").innerHTML=`${$e(a)}`,document.querySelector(".file.file-"+n).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+n).dataset.complete=y}}if(u&&!h){const w=s.chuncksize;if(p==1){rr.set(n,!1);let v=Ut.get(n)+w;Ut.set(n,v);const I=v/a*100,A=Math.floor(I),T=Math.floor(1/((f-Et.get(n))/1e3)*w);Et.set(n,f);const k=Math.floor((a-v)/T*1e3);if(document.querySelector(".file.file-"+n+" .progress").innerHTML=A+"%",document.querySelector(".file.file-"+n+" .size").innerHTML=`${wn(k)} - ${$e(T)}/s - ${$e(v)}/${$e(a)}`,I==100){const R={author:c,fileid:n,time:f,name:l,size:a,send:b,complete:A};await zt.put(n,R),document.querySelector(".file.file-"+n+" .size").innerHTML=`${$e(a)}`,document.querySelector(".file.file-"+n).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+n).dataset.complete=A}}}if(u&&h){const w=s.chuncksize;if(p==1){rr.set(n,!1);let v=Ut.get(n)+w;Ut.set(n,v);const I=v/a*100,A=Math.floor(I),T=Math.floor(1/((f-Et.get(n))/1e3)*w);Et.set(n,f);const k=Math.floor((a-v)/T*1e3);if(document.querySelector(".file.file-"+n+" .progress").innerHTML=A+"%",document.querySelector(".file.file-"+n+" .size").innerHTML=`${wn(k)} - ${$e(T)}/s - ${$e(v)}/${$e(a)}`,I==100){const R={author:c,fileid:n,time:f,name:l,size:a,send:b,complete:A};await zt.put(n,R),document.querySelector(".file.file-"+n+" .size").innerHTML=`${$e(a)}`,document.querySelector(".file.file-"+n).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+n).dataset.complete=A}}}}function wn(e){var r=6e4,t=r*60,o=t*24,c=o*30,s=o*365;return e<r?Math.round(e/1e3)+" s left":e<t?Math.round(e/r)+" m left":e<o?Math.round(e/t)+" h left":e<c?"approximately "+Math.round(e/o)+" d left":e<s?"approximately "+Math.round(e/c)+" mo left":"approximately "+Math.round(e/s)+" y left"}const uf=document.createElement("div");uf.innerHTML=`
	<div class="dialog explorer">
		<div id="explorerx"><span style="font-size:30px;color:#fff;">X</span></div>
		<div  class="popup">
			<div class="title">
				<div style="padding:10px 10px;">
					Files 
					<span class="options" style="float:right;cursor:pointer;">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
						  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
						</svg>
					</span>
				</div>
			</div>
			<div class="scroller files" ></div>
		</div>
	</div>`;document.body.appendChild(uf);document.querySelector("#explorerx").addEventListener("click",()=>{document.querySelector(".explorer").style.display="none"});document.querySelector(".peers .peer.me").addEventListener("click",()=>{Fr()});window.location.href.indexOf("localhost")==-1;document.querySelector(".explorer .popup .title .options").addEventListener("click",()=>{nm()});async function nm(){const e=await _t.get("skipconfirmation");let r="";e&&(r="checked");const t=document.createElement("div");t.innerHTML=`
	<div class="dialog options">
		<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
		<div class="message">
			<div class="title">
				<div style="padding:10px 10px;">WIFIDrop Settings</div>
			</div>
			<div class="content" >
				<div class="item cache" style="cursor:pointer;">
					<span>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
					  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
					  <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
					</svg>
					</span>
					<span>Clear cache </span>
				</div>
				<div class="item skipconfirmation">
					<input type="checkbox" id="skipconfirmation" name="skipconfirmation" value="skipconfirmation" ${r}>
					<label for="skipconfirmation"> Auto accept download</label>
				</div>
				<div class="item alias">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-laptop" viewBox="0 0 16 16">
					  <path d="M13.5 3a.5.5 0 0 1 .5.5V11H2V3.5a.5.5 0 0 1 .5-.5zm-11-1A1.5 1.5 0 0 0 1 3.5V12h14V3.5A1.5 1.5 0 0 0 13.5 2zM0 12.5h16a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5"/>
					</svg>					
					<label for="alias">Change alias:</label>
					<input style="border:none" type="text" id="alias" name="alias" value="${qe.name}">
				</div>
				<div class="item downloads" >
					<p>Platforms :</p>
					<a target="_blank" href="https://wifidrop.js.org"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-browser-chrome" viewBox="0 0 16 16">   <path fill-rule="evenodd" d="M16 8a8 8 0 0 1-7.022 7.94l1.902-7.098a3 3 0 0 0 .05-1.492A3 3 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8M0 8a8 8 0 0 0 7.927 8l1.426-5.321a3 3 0 0 1-.723.255 3 3 0 0 1-1.743-.147 3 3 0 0 1-1.043-.7L.633 4.876A8 8 0 0 0 0 8m5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a3 3 0 0 0-1.252.243 2.99 2.99 0 0 0-1.81 2.59M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/> </svg> Online</a></br> 
					<a target="_blank" href="https://play.google.com/store/apps/details?id=org.js.wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-android" viewBox="0 0 16 16">   <path d="M2.76 3.061a.5.5 0 0 1 .679.2l1.283 2.352A8.9 8.9 0 0 1 8 5a8.9 8.9 0 0 1 3.278.613l1.283-2.352a.5.5 0 1 1 .878.478l-1.252 2.295C14.475 7.266 16 9.477 16 12H0c0-2.523 1.525-4.734 3.813-5.966L2.56 3.74a.5.5 0 0 1 .2-.678ZM5 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/> </svg> Android</a> </br>
					<a target="_blank" href="https://apps.microsoft.com/detail/9MVN98K4BBWC"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-windows" viewBox="0 0 16 16">   <path d="M6.555 1.375 0 2.237v5.45h6.555zM0 13.795l6.555.933V8.313H0zm7.278-5.4.026 6.378L16 16V8.395zM16 0 7.33 1.244v6.414H16z"/> </svg> Windows</a> </br>
					<a target="_blank" href="https://snapcraft.io/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tux" viewBox="0 0 16 16">   <path d="M8.996 4.497c.104-.076.1-.168.186-.158s.022.102-.098.207c-.12.104-.308.243-.46.323-.291.152-.631.336-.993.336s-.647-.167-.853-.33c-.102-.082-.186-.162-.248-.221-.11-.086-.096-.207-.052-.204.075.01.087.109.134.153.064.06.144.137.241.214.195.154.454.304.778.304s.702-.19.932-.32c.13-.073.297-.204.433-.304M7.34 3.781c.055-.02.123-.031.174-.003.011.006.024.021.02.034-.012.038-.074.032-.11.05-.032.017-.057.052-.093.054-.034 0-.086-.012-.09-.046-.007-.044.058-.072.1-.089m.581-.003c.05-.028.119-.018.173.003.041.017.106.045.1.09-.004.033-.057.046-.09.045-.036-.002-.062-.037-.093-.053-.036-.019-.098-.013-.11-.051-.004-.013.008-.028.02-.034"/>   <path fill-rule="evenodd" d="M8.446.019c2.521.003 2.38 2.66 2.364 4.093-.01.939.509 1.574 1.04 2.244.474.56 1.095 1.38 1.45 2.32.29.765.402 1.613.115 2.465a.8.8 0 0 1 .254.152l.001.002c.207.175.271.447.329.698.058.252.112.488.224.615.344.382.494.667.48.922-.015.254-.203.43-.435.57-.465.28-1.164.491-1.586 1.002-.443.527-.99.83-1.505.871a1.25 1.25 0 0 1-1.256-.716v-.001a1 1 0 0 1-.078-.21c-.67.038-1.252-.165-1.718-.128-.687.038-1.116.204-1.506.206-.151.331-.445.547-.808.63-.5.114-1.126 0-1.743-.324-.577-.306-1.31-.278-1.85-.39-.27-.057-.51-.157-.626-.384-.116-.226-.095-.538.07-.988.051-.16.012-.398-.026-.648a2.5 2.5 0 0 1-.037-.369c0-.133.022-.265.087-.386v-.002c.14-.266.368-.377.577-.451s.397-.125.53-.258c.143-.15.27-.374.443-.56q.036-.037.073-.07c-.081-.538.007-1.105.192-1.662.393-1.18 1.223-2.314 1.811-3.014.502-.713.65-1.287.701-2.016.042-.997-.705-3.974 2.112-4.2q.168-.015.321-.013m2.596 10.866-.03.016c-.223.121-.348.337-.427.656-.08.32-.107.733-.13 1.206v.001c-.023.37-.192.824-.31 1.267s-.176.862-.036 1.128v.002c.226.452.608.636 1.051.601s.947-.304 1.36-.795c.474-.576 1.218-.796 1.638-1.05.21-.126.324-.242.333-.4.009-.157-.097-.403-.425-.767-.17-.192-.217-.462-.274-.71-.056-.247-.122-.468-.26-.585l-.001-.001c-.18-.157-.356-.17-.565-.164q-.069.001-.14.005c-.239.275-.805.612-1.197.508-.359-.09-.562-.508-.587-.918m-7.204.03H3.83c-.189.002-.314.09-.44.225-.149.158-.276.382-.445.56v.002h-.002c-.183.184-.414.239-.61.31-.195.069-.353.143-.46.35v.002c-.085.155-.066.378-.029.624.038.245.096.507.018.746v.002l-.001.002c-.157.427-.155.678-.082.822.074.143.235.22.48.272.493.103 1.26.069 1.906.41.583.305 1.168.404 1.598.305.431-.098.712-.369.75-.867v-.002c.029-.292-.195-.673-.485-1.052-.29-.38-.633-.752-.795-1.09v-.002l-.61-1.11c-.21-.286-.43-.462-.68-.5a1 1 0 0 0-.106-.008M9.584 4.85c-.14.2-.386.37-.695.467-.147.048-.302.17-.495.28a1.3 1.3 0 0 1-.74.19.97.97 0 0 1-.582-.227c-.14-.113-.25-.237-.394-.322a3 3 0 0 1-.192-.126c-.063 1.179-.85 2.658-1.226 3.511a5.4 5.4 0 0 0-.43 1.917c-.68-.906-.184-2.066.081-2.568.297-.55.343-.701.27-.649-.266.436-.685 1.13-.848 1.844-.085.372-.1.749.01 1.097.11.349.345.67.766.931.573.351.963.703 1.193 1.015s.302.584.23.777a.4.4 0 0 1-.212.22.7.7 0 0 1-.307.056l.184.235c.094.124.186.249.266.375 1.179.805 2.567.496 3.568-.218.1-.342.197-.664.212-.903.024-.474.05-.896.136-1.245s.244-.634.53-.791a1 1 0 0 1 .138-.061q.005-.045.013-.087c.082-.546.569-.572 1.18-.303.588.266.81.499.71.814h.13c.122-.398-.133-.69-.822-1.025l-.137-.06a2.35 2.35 0 0 0-.012-1.113c-.188-.79-.704-1.49-1.098-1.838-.072-.003-.065.06.081.203.363.333 1.156 1.532.727 2.644a1.2 1.2 0 0 0-.342-.043c-.164-.907-.543-1.66-.735-2.014-.359-.668-.918-2.036-1.158-2.983M7.72 3.503a1 1 0 0 0-.312.053c-.268.093-.447.286-.559.391-.022.021-.05.04-.119.091s-.172.126-.321.238q-.198.151-.13.38c.046.15.192.325.459.476.166.098.28.23.41.334a1 1 0 0 0 .215.133.9.9 0 0 0 .298.066c.282.017.49-.068.673-.173s.34-.233.518-.29c.365-.115.627-.345.709-.564a.37.37 0 0 0-.01-.309c-.048-.096-.148-.187-.318-.257h-.001c-.354-.151-.507-.162-.705-.29-.321-.207-.587-.28-.807-.279m-.89-1.122h-.025a.4.4 0 0 0-.278.135.76.76 0 0 0-.191.334 1.2 1.2 0 0 0-.051.445v.001c.01.162.041.299.102.436.05.116.109.204.183.274l.089-.065.117-.09-.023-.018a.4.4 0 0 1-.11-.161.7.7 0 0 1-.054-.22v-.01a.7.7 0 0 1 .014-.234.4.4 0 0 1 .08-.179q.056-.069.126-.073h.013a.18.18 0 0 1 .123.05c.045.04.08.09.11.162a.7.7 0 0 1 .054.22v.01a.7.7 0 0 1-.002.17 1.1 1.1 0 0 1 .317-.143 1.3 1.3 0 0 0 .002-.194V3.23a1.2 1.2 0 0 0-.102-.437.8.8 0 0 0-.227-.31.4.4 0 0 0-.268-.102m1.95-.155a.63.63 0 0 0-.394.14.9.9 0 0 0-.287.376 1.2 1.2 0 0 0-.1.51v.015q0 .079.01.152c.114.027.278.074.406.138a1 1 0 0 1-.011-.172.8.8 0 0 1 .058-.278.5.5 0 0 1 .139-.2.26.26 0 0 1 .182-.069.26.26 0 0 1 .178.081c.055.054.094.12.124.21.029.086.042.17.04.27l-.002.012a.8.8 0 0 1-.057.277c-.024.059-.089.106-.122.145.046.016.09.03.146.052a5 5 0 0 1 .248.102 1.2 1.2 0 0 0 .244-.763 1.2 1.2 0 0 0-.11-.495.9.9 0 0 0-.294-.37.64.64 0 0 0-.39-.133z"/> </svg> Linux</a> </br>
					<a target="_blank" href="https://www.npmjs.com/package/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-fill" viewBox="0 0 16 16">   <path fill-rule="evenodd" d="M15.528 2.973a.75.75 0 0 1 .472.696v8.662a.75.75 0 0 1-.472.696l-7.25 2.9a.75.75 0 0 1-.557 0l-7.25-2.9A.75.75 0 0 1 0 12.331V3.669a.75.75 0 0 1 .471-.696L7.443.184l.004-.001.274-.11a.75.75 0 0 1 .558 0l.274.11.004.001zm-1.374.527L8 5.962 1.846 3.5 1 3.839v.4l6.5 2.6v7.922l.5.2.5-.2V6.84l6.5-2.6v-.4l-.846-.339Z"/> </svg> NPM</a> </br>
					<a target="_blank" href="https://github.com/nuzulul/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-square" viewBox="0 0 16 16">   <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>   <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0m2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0"/> </svg> Self-hosted</a> 					
				</div>
				<div class="item about">
					<p>About :</p>
					WIFIDrop &copy; 2024 - <a href="https://narojil.my.id" target="_blank">Narojil Studio</a></br>
					Developed by <a href="https://github.com/nuzulul" target="_blank">Nuzulul Zulkarnain</a></br>
					Made in Indonesia
				</div>
			</div>
		</div>
	</div>`,document.body.appendChild(t),document.querySelector(".options #parax").addEventListener("click",()=>{t.remove()}),document.querySelector(".options .content .cache").addEventListener("click",async()=>{await ns.clear(),await zt.clear();const c=document.querySelectorAll(".explorer .files .file");for(const n of c)n.remove();document.querySelector(".options .content .cache span").insertAdjacentHTML("afterend",`
			<span class="cachecheck">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
				  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
				</svg>		
			</span>
		`),setTimeout(()=>{document.querySelector(".options .content .cache .cachecheck")&&document.querySelector(".options .content .cache .cachecheck").remove()},3e3)}),document.querySelector(".options .content .skipconfirmation").addEventListener("click",async()=>{const c=document.querySelector(".options .content .skipconfirmation #skipconfirmation");await _t.put("skipconfirmation",c.checked)});var o=document.getElementById("alias");o.addEventListener("keypress",async function(c){if(c.key==="Enter"){c.preventDefault();const s=`
				<span class="check">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
					  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
					</svg>		
				</span>
			`;document.querySelector(".options .content .alias #alias").blur(),document.querySelector(".options .content .alias svg").insertAdjacentHTML("afterend",s),setTimeout(()=>{document.querySelector(".options .content .alias .check")&&document.querySelector(".options .content .alias .check").remove()},3e3);const n=document.querySelector(".options .content .alias #alias").value;qe.name=n,await _t.put("name",n),Ea();for(const l of ot){const a=l[0];af(a)}}})}function Fr(){setTimeout(()=>{document.querySelector(".explorer").style.display="flex";const e=document.querySelector(".scroller");e.scrollTop=e.scrollHeight},200)}function qr(e,r,t,o,c,s){const n=$e(r.size),l=c?"You sent to ":"Sent by ";let a="0%";s==="start"||s==="finish"||(a=s+"%");let u="";(s==="finish"||s==100)&&(u="background:#bec4cf;");let h=`
		<div class="file file-${t} connect-${e.connectId}" data-complete="${s}" style="${u}">
			<div class="icon"><div style="width:50px;height:50px"><img src="${Hf}"></div></div>
			<div class="loader"><div style="width:50px;height:50px"><div class="progress">${a}</div></div></div>
			<div class="body">
				<div class="name">${r.name}</div>
				<div class="meta"><span class="size">${n}</span> | <span class="note">${l}</span> <span class="to">${e.name}</span></div> 
			</div>
			
		</div>
	`;document.querySelector(".explorer .files").innerHTML+=h;const f=document.querySelector(".scroller");f.scrollTop=f.scrollHeight}window.location.href.indexOf("localhost")==-1&&(window.addEventListener("error",e=>{e.preventDefault()}),window.addEventListener("unhandledrejection",e=>{e.preventDefault()}));Qf();document.getElementById("loader").style.display="none";typeof navigator.serviceWorker<"u"&&navigator.serviceWorker.register("sw.js");
