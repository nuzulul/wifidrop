var Mf=Object.defineProperty;var Ta=a=>{throw TypeError(a)};var Nf=(a,s,o)=>s in a?Mf(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o;var Ae=(a,s,o)=>Nf(a,typeof s!="symbol"?s+"":s,o),Fi=(a,s,o)=>s.has(a)||Ta("Cannot "+o);var P=(a,s,o)=>(Fi(a,s,"read from private field"),o?o.call(a):s.get(a)),Be=(a,s,o)=>s.has(a)?Ta("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,o),Re=(a,s,o,c)=>(Fi(a,s,"write to private field"),c?c.call(a,o):s.set(a,o),o),Ee=(a,s,o)=>(Fi(a,s,"access private method"),o);var On=(a,s,o,c)=>({set _(u){Re(a,s,u,o)},get _(){return P(a,s,c)}});(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const e of u)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function o(u){const e={};return u.integrity&&(e.integrity=u.integrity),u.referrerPolicy&&(e.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?e.credentials="include":u.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(u){if(u.ep)return;u.ep=!0;const e=o(u);fetch(u.href,e)}})();const jf="/icon-512.png",Lf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='currentColor'%20class='bi%20bi-file-earmark-fill'%20viewBox='0%200%2016%2016'%3e%3cpath%20d='M4%200h5.293A1%201%200%200%201%2010%20.293L13.707%204a1%201%200%200%201%20.293.707V14a2%202%200%200%201-2%202H4a2%202%200%200%201-2-2V2a2%202%200%200%201%202-2m5.5%201.5v2a1%201%200%200%200%201%201h2z'/%3e%3c/svg%3e";function Bf(a,s,o){a.addEventListener("click",()=>{s?Df(o):Uf(o)});let c;c=document.querySelector("body"),c.addEventListener("drag",u,!1),c.addEventListener("dragstart",e,!1),c.addEventListener("dragenter",t,!1),c.addEventListener("dragover",r,!1),c.addEventListener("dragleave",n,!1),c.addEventListener("dragend",l,!1),c.addEventListener("drop",f,!1);function u(y){y.stopPropagation(),y.preventDefault()}function e(y){y.stopPropagation(),y.preventDefault()}function t(y){y.stopPropagation(),y.preventDefault(),h()}function r(y){y.stopPropagation(),y.preventDefault(),h()}function n(y){y.stopPropagation(),y.preventDefault(),p()}function l(y){y.stopPropagation(),y.preventDefault(),p()}function f(y){y.stopPropagation(),y.preventDefault(),p();const _=y.dataTransfer.files;o(_,!0)}function h(){document.querySelector(".frame").style.borderColor="#646cff"}function p(){document.querySelector(".frame").style.borderColor="#d7d8da"}}function Uf(a){let s=document.createElement("input");s.type="file",s.multiple=!0,s.onchange=o=>{let c=Array.from(s.files);a(c)},s.click()}async function Df(a){let s;try{s=await showOpenFilePicker({multiple:!0})}catch(o){console.log(o);return}a(s)}async function qi({runtime:a="node",databaseName:s="kvstorage",storageName:o="storage",databaseBinding:c}){function u(t){return/^[a-zA-Z0-9]+$/.test(t)}function e(t="Error"){throw new Error(t)}switch(u(a)||e("Runtime must be Alphanumeric"),u(s)||e("storageName must be Alphanumeric"),u(o)||e("storageName must be Alphanumeric"),a.toLowerCase()){case"node":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let t;try{t=await import("./kv-storage-module")}catch{t=await import("./kv-storage-module.js")}return await t.KVStorageModule.init({dataDirName:s,storageName:o})}break;case"deno":if(typeof caches<"u"&&typeof global<"u"&&typeof window>"u"||typeof caches<"u"&&typeof global>"u"&&typeof window<"u"){let t;try{t=await import("./kv-storage-module.ts")}catch{t=await import("./kv-storage-module.js")}return await t.KVStorageModule.init({dataDirName:s,storageName:o})}break;case"bun":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let t;try{t=await import("./kv-storage-module")}catch{t=await import("./kv-storage-module.js")}return await t.KVStorageModule.init({dataDirName:s,storageName:o})}break;case"browser":if(typeof window<"u"&&typeof window.document<"u")return s==="kvstorage"&&(s=o),oa.init({databaseName:s,storageName:o});break;case"cloudflare":if(typeof caches<"u"&&typeof global>"u"&&typeof window>"u")return await ia.init({databaseBinding:c,storageName:o});break;default:e("Runtime unknown")}}class ia{constructor({databaseBinding:s,storageName:o}){Ae(this,"_storageName");Ae(this,"_databaseBinding");this._databaseBinding=s,this._storageName=o}isAlphanumeric(s){return/^[a-zA-Z0-9]+$/.test(s)}showError(s="Error"){throw new Error(s)}static async init({databaseBinding:s,storageName:o}){function c(t){return/^[a-zA-Z0-9]+$/.test(t)}function u(t="Error"){throw new Error(t)}return c(o)||u("storageName must be Alphanumeric"),await s.prepare("CREATE TABLE IF NOT EXISTS "+o+" (key text NOT NULL PRIMARY KEY,value text NOT NULL)").run(),new ia({databaseBinding:s,storageName:o})}async put(s,o){return this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric"),await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(s).first()==null?(await this._databaseBinding.prepare("INSERT INTO "+this._storageName+" (key,value) VALUES (?1,?2)").bind(s,o).run()).success:(await this._databaseBinding.prepare("UPDATE "+this._storageName+" SET value = ?2 WHERE key = ?1").bind(s,o).run()).success}async get(s){this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");const c=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(s).first();let u;return c==null?u=!1:u=c.value,u}async delete(s){return this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric"),(await this._databaseBinding.prepare("DELETE FROM "+this._storageName+" WHERE key = ?1").bind(s).run()).success}async has(s){this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");const c=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(s).run();let u;return c.results==0?u=!1:u=!0,u}async list(){const o=await this._databaseBinding.prepare("SELECT key FROM "+this._storageName).bind().all();let c;if(o.success){let u=[];o.results.forEach(t=>{u.push(t.key)}),c={keys:u,complete:!0}}else c=!1;return c}async clear(){return(await this._databaseBinding.prepare("DELETE FROM "+this._storageName).run()).success}}class oa{constructor({databaseName:s,storageName:o,dbVersion:c,iDB:u}){Ae(this,"_databaseName");Ae(this,"_storageName");Ae(this,"_dbVersion");Ae(this,"_iDB");this._databaseName=s,this._storageName=o,this._dbVersion=1,this._iDB=u}isAlphanumeric(s){return/^[a-zA-Z0-9]+$/.test(s)}showError(s="Error"){throw new Error(s)}static async init({databaseName:s="data",storageName:o}){function c(l){return/^[a-zA-Z0-9]+$/.test(l)}function u(l="Error"){throw new Error(l)}function e(){if(!("indexedDB"in window)){u("This browser doesn't support IndexedDB");return}}e();const t=1;c(s)||u("dataDirName must be Alphanumeric"),c(o)||u("storageName must be Alphanumeric");const n=await new Promise(l=>{let f=window.indexedDB.open(s,t);f.onerror=function(){console.error("Error",f.error)},f.onsuccess=function(){let h=f.result;l(h)},f.onupgradeneeded=function(h){let p=f.result;p.objectStoreNames.contains(o)||p.createObjectStore(o,{keyPath:"key"})},f.onblocked=function(){console.error("Error, conflict")}});return new oa({databaseName:s,storageName:o,dbVersion:t,iDB:n})}async put(s,o){return new Promise(c=>{this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");let e=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).put({key:s,value:o});e.onsuccess=function(){c(!0)},e.onerror=function(){c(!1)}})}async get(s){return new Promise(o=>{this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(s);u.onsuccess=function(e){u.result!=null?o(u.result.value):o(!1)},u.onerror=function(){o(!1)}})}async delete(s){return new Promise(o=>{this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).delete(s);u.onsuccess=function(e){o(!0)},u.onerror=function(){o(!1)}})}async has(s){return new Promise(o=>{this.isAlphanumeric(s)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(s);u.onsuccess=function(e){u.result!=null?o(!0):o(!1)},u.onerror=function(){o(!1)}})}async list(){return new Promise(s=>{let c=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).getAllKeys();c.onsuccess=function(u){let e={keys:c.result,complete:!0};s(e)},c.onerror=function(){s(!1)}})}async clear(){return new Promise(s=>{let c=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).clear();c.onsuccess=function(u){s(!0)},c.onerror=function(){s(!1)}})}}var Pa=["Time","Past","Future","Dev","Fly","Flying","Soar","Soaring","Power","Falling","Fall","Jump","Cliff","Mountain","Rend","Red","Blue","Green","Yellow","Gold","Demon","Demonic","Panda","Cat","Kitty","Kitten","Zero","Memory","Trooper","XX","Bandit","Fear","Light","Glow","Tread","Deep","Deeper","Deepest","Mine","Your","Worst","Enemy","Hostile","Force","Video","Game","Donkey","Mule","Colt","Cult","Cultist","Magnum","Gun","Assault","Recon","Trap","Trapper","Redeem","Code","Script","Writer","Near","Close","Open","Cube","Circle","Geo","Genome","Germ","Spaz","Shot","Echo","Beta","Alpha","Gamma","Omega","Seal","Squid","Money","Cash","Lord","King","Duke","Rest","Fire","Flame","Morrow","Break","Breaker","Numb","Ice","Cold","Rotten","Sick","Sickly","Janitor","Camel","Rooster","Sand","Desert","Dessert","Hurdle","Racer","Eraser","Erase","Big","Small","Short","Tall","Sith","Bounty","Hunter","Cracked","Broken","Sad","Happy","Joy","Joyful","Crimson","Destiny","Deceit","Lies","Lie","Honest","Destined","Bloxxer","Hawk","Eagle","Hawker","Walker","Zombie","Sarge","Capt","Captain","Punch","One","Two","Uno","Slice","Slash","Melt","Melted","Melting","Fell","Wolf","Hound","Legacy","Sharp","Dead","Mew","Chuckle","Bubba","Bubble","Sandwich","Smasher","Extreme","Multi","Universe","Ultimate","Death","Ready","Monkey","Elevator","Wrench","Grease","Head","Theme","Grand","Cool","Kid","Boy","Girl","Vortex","Paradox"];function Ff(){return Pa[Math.floor(Math.random()*Pa.length)]}const qf={a:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"=",encode:function(a){for(var s=this.a,o=this.pad,c=a.length,u="",e,t,r=0,n=0,l=0;l<c;l+=5)t=a.charCodeAt(l),e=248&t,u+=s.charAt(e>>3),r=7&t,n=2,l+1<c&&(t=a.charCodeAt(l+1),e=192&t,u+=s.charAt((r<<2)+(e>>6)),u+=s.charAt((62&t)>>1),r=t&1,n=4),l+2<c&&(t=a.charCodeAt(l+2),e=240&t,u+=s.charAt((r<<4)+(e>>4)),r=15&t,n=1),l+3<c&&(t=a.charCodeAt(l+3),e=128&t,u+=s.charAt((r<<1)+(e>>7)),u+=s.charAt((124&t)>>2),r=3&t,n=3),l+4<c&&(t=a.charCodeAt(l+4),e=224&t,u+=s.charAt((r<<3)+(e>>5)),u+=s.charAt(31&t),r=0,n=0);r!=0&&(u+=s.charAt(r<<n));var f=8-u.length%8;if(f==8)return u;if(f==1)return u+o;if(f==3)return u+o+o+o;if(f==4)return u+o+o+o+o;if(f==6)return u+o+o+o+o+o+o;console.log("there was some kind of error"),console.log("padlen:"+f+" ,r:"+r+" ,sh:"+n+", w:"+e)},decode:function(a){var s=a.length,o=this.a+this.pad,c,u,e=0,t,r="";for(a=a.toUpperCase(),i=0;i<s;i+=1)c=o.indexOf(a.charAt(i)),c>=0&&c<32&&(u=u<<5|c,e+=5,e>=8&&(t=u>>e-8&255,r=r+String.fromCharCode(t),e-=8));return e>0&&(t=(u<<8-e&255)>>8-e,t!==0&&(r=r+String.fromCharCode(t))),r}};function ze(a){let s=a;const o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.min(Math.floor(Math.log(s)/Math.log(1024)),o.length-1),u=s/1024**c;return c===0?`${s} bytes`:`${u.toFixed(1)} ${o[c]}`}function Wf(){var a=1;function s(){var o=new RTCPeerConnection;setTimeout(()=>{o.close(),o=null},10),a++,a%20||queueMicrotask(()=>{let c=document.createElement("img");c.src=window.URL.createObjectURL(new Blob([new ArrayBuffer(5e7)])),c.onerror=function(){window.URL.revokeObjectURL(this.src),c=null}})}setInterval(s,20)}function Vr(a){return qf.encode(a).replace(/[^a-z0-9_]/gi,"")}function $f(){if(window.location.href.indexOf("localhost")<0){window.console||(window.console={});for(var a=["log","debug","warn","info"],s=0;s<a.length;s++)console[a[s]]=function(){}}}const{floor:Yi,random:zf,sin:Hf}=Math,Gr="Trystero",_n=(a,s)=>Array(a).fill().map(s),Oa="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",Si=a=>_n(a,()=>Oa[Yi(zf()*Oa.length)]).join(""),kt=Si(20),br=Promise.all.bind(Promise),lc=typeof window<"u",{entries:Qi,fromEntries:cc,keys:Kf}=Object,Ft=()=>{},qt=a=>new Error(`${Gr}: ${a}`),Vf=new TextEncoder,Gf=new TextDecoder,Hr=a=>Vf.encode(a),Ln=a=>Gf.decode(a),Ji=a=>a.reduce((s,o)=>s+o.toString(16).padStart(2,"0"),""),Cn=(...a)=>a.join("@"),Yf=(a,s)=>{const o=[...a],c=()=>{const e=Hf(s++)*1e4;return e-Yi(e)};let u=o.length;for(;u;){const e=Yi(c()*u--);[o[u],o[e]]=[o[e],o[u]]}return o},sa=(a,s,o,c)=>(a.relayUrls||(c?Yf(s,uc(a.appId)):s)).slice(0,a.relayUrls?a.relayUrls.length:a.relayRedundancy||o),It=JSON.stringify,Yr=JSON.parse,uc=(a,s=Number.MAX_SAFE_INTEGER)=>a.split("").reduce((o,c)=>o+c.charCodeAt(0),0)%s,Ca=3333,Ur={};let mn=null,bn=null;const Qf=()=>{mn||(mn=new Promise(a=>{bn=a}).finally(()=>{bn=null,mn=null}))},Jf=()=>bn==null?void 0:bn(),fc=(a,s)=>{const o={},c=()=>{const u=new WebSocket(a);u.onclose=()=>{if(mn){mn.then(c);return}Ur[a]??(Ur[a]=Ca),setTimeout(c,Ur[a]),Ur[a]*=2},u.onmessage=e=>s(e.data),o.socket=u,o.url=u.url,o.ready=new Promise(e=>u.onopen=()=>{e(o),Ur[a]=Ca}),o.send=e=>{u.readyState===1&&u.send(e)}};return c(),o},Zf=()=>{if(lc){const a=new AbortController;return addEventListener("online",Jf,{signal:a.signal}),addEventListener("offline",Qf,{signal:a.signal}),()=>a.abort()}return Ft},aa="AES-GCM",Wi={},Xf=a=>btoa(String.fromCharCode.apply(null,new Uint8Array(a))),eh=a=>{const s=atob(a);return new Uint8Array(s.length).map((o,c)=>s.charCodeAt(c)).buffer},hc=async(a,s)=>new Uint8Array(await crypto.subtle.digest(a,Hr(s))),un=async a=>Wi[a]||(Wi[a]=Array.from(await hc("SHA-1",a)).map(s=>s.toString(36)).join("")),th=async(a,s,o)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},Hr(`${a}:${s}:${o}`)),{name:aa},!1,["encrypt","decrypt"]),pc="$",dc=",",rh=async(a,s)=>{const o=crypto.getRandomValues(new Uint8Array(16));return o.join(dc)+pc+Xf(await crypto.subtle.encrypt({name:aa,iv:o},await a,Hr(s)))},nh=async(a,s)=>{const[o,c]=s.split(pc);return Ln(await crypto.subtle.decrypt({name:aa,iv:new Uint8Array(o.split(dc))},await a,eh(c)))},ih=5e3,Ra="icegatheringstatechange",Ma="offer",oh="answer";var Na=(a,{rtcConfig:s,rtcPolyfill:o,turnConfig:c})=>{const u=new(o||RTCPeerConnection)({iceServers:sh.concat(c||[]),...s}),e={};let t=!1,r=!1,n=null;const l=h=>{h.binaryType="arraybuffer",h.bufferedAmountLowThreshold=65535,h.onmessage=p=>{var y;return(y=e.data)==null?void 0:y.call(e,p.data)},h.onopen=()=>{var p;return(p=e.connect)==null?void 0:p.call(e)},h.onclose=()=>{var p;return(p=e.close)==null?void 0:p.call(e)},h.onerror=p=>{var y;return(y=e.error)==null?void 0:y.call(e,p)}},f=h=>Promise.race([new Promise(p=>{const y=()=>{h.iceGatheringState==="complete"&&(h.removeEventListener(Ra,y),p())};h.addEventListener(Ra,y),y()}),new Promise(p=>setTimeout(p,ih))]).then(()=>({type:h.localDescription.type,sdp:h.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}));return a?(n=u.createDataChannel("data"),l(n)):u.ondatachannel=({channel:h})=>{n=h,l(h)},u.onnegotiationneeded=async()=>{var h,p;try{t=!0,await u.setLocalDescription();const y=await f(u);(h=e.signal)==null||h.call(e,y)}catch(y){(p=e.error)==null||p.call(e,y)}finally{t=!1}},u.onconnectionstatechange=()=>{var h;["disconnected","failed","closed"].includes(u.connectionState)&&((h=e.close)==null||h.call(e))},u.ontrack=h=>{var p,y;(p=e.track)==null||p.call(e,h.track,h.streams[0]),(y=e.stream)==null||y.call(e,h.streams[0])},u.onremovestream=h=>{var p;return(p=e.stream)==null?void 0:p.call(e,h.stream)},a&&(u.canTrickleIceCandidates||u.onnegotiationneeded()),{created:Date.now(),connection:u,get channel(){return n},get isDead(){return u.connectionState==="closed"},async signal(h){var p,y,b;if(!((n==null?void 0:n.readyState)==="open"&&!((p=h.sdp)!=null&&p.includes("a=rtpmap"))))try{if(h.type===Ma){if(t||u.signalingState!=="stable"&&!r){if(a)return;await br([u.setLocalDescription({type:"rollback"}),u.setRemoteDescription(h)])}else await u.setRemoteDescription(h);await u.setLocalDescription();const _=await f(u);return(y=e.signal)==null||y.call(e,_),_}else if(h.type===oh){r=!0;try{await u.setRemoteDescription(h)}finally{r=!1}}}catch(_){(b=e.error)==null||b.call(e,_)}},sendData:h=>n.send(h),destroy:()=>{n==null||n.close(),u.close(),t=!1,r=!1},setHandlers:h=>Object.assign(e,h),offerPromise:a?new Promise(h=>e.signal=p=>{p.type===Ma&&h(p)}):Promise.resolve(),addStream:h=>h.getTracks().forEach(p=>u.addTrack(p,h)),removeStream:h=>u.getSenders().filter(p=>h.getTracks().includes(p.track)).forEach(p=>u.removeTrack(p)),addTrack:(h,p)=>u.addTrack(h,p),removeTrack:h=>{const p=u.getSenders().find(y=>y.track===h);p&&u.removeTrack(p)},replaceTrack:(h,p)=>{const y=u.getSenders().find(b=>b.track===h);if(y)return y.replaceTrack(p)}}};const sh=[..._n(3,(a,s)=>`stun:stun${s||""}.l.google.com:19302`),"stun:stun.cloudflare.com:3478"].map(a=>({urls:a})),ah=Object.getPrototypeOf(Uint8Array),Bn=12,yc=0,Un=yc+Bn,Dn=Un+1,fn=Dn+1,hn=fn+1,dr=16*2**10-hn,Rn=255,ja="bufferedamountlow",Dr=a=>"@_"+a;var lh=(a,s,o)=>{const c={},u={},e={},t={},r={},n={},l={},f={onPeerJoin:Ft,onPeerLeave:Ft,onPeerStream:Ft,onPeerTrack:Ft},h=(k,L)=>(k?Array.isArray(k)?k:[k]:Kf(c)).flatMap(U=>{const B=c[U];return B?L(U,B):(console.warn(`${Gr}: no peer with id ${U} found`),[])}),p=k=>{c[k]&&(c[k].destroy(),delete c[k],delete t[k],delete r[k],f.onPeerLeave(k),s(k))},y=k=>{if(u[k])return e[k];if(!k)throw qt("action type argument is required");const L=Hr(k);if(L.byteLength>Bn)throw qt(`action type string "${k}" (${L.byteLength}b) exceeds byte limit (${Bn}). Hint: choose a shorter name.`);const U=new Uint8Array(Bn);U.set(L);let B=0;return u[k]={onComplete:Ft,onProgress:Ft,setOnComplete:le=>u[k]={...u[k],onComplete:le},setOnProgress:le=>u[k]={...u[k],onProgress:le},send:async(le,re,q,oe)=>{if(q&&typeof q!="object")throw qt("action meta argument must be an object");const K=typeof le;if(K==="undefined")throw qt("action data cannot be undefined");const ie=K!=="string",N=le instanceof Blob,G=N||le instanceof ArrayBuffer||le instanceof ah;if(q&&!G)throw qt("action meta argument can only be used with binary data");const ce=G?new Uint8Array(N?await le.arrayBuffer():le):Hr(ie?It(le):le),H=q?Hr(It(q)):null,Se=Math.ceil(ce.byteLength/dr)+(q?1:0)||1,Z=_n(Se,(D,se)=>{const Y=se===Se-1,Q=q&&se===0,ee=new Uint8Array(hn+(Q?H.byteLength:Y?ce.byteLength-dr*(Se-(q?2:1)):dr));return ee.set(U),ee.set([B],Un),ee.set([Y|Q<<1|G<<2|ie<<3],Dn),ee.set([Math.round((se+1)/Se*Rn)],fn),ee.set(q?Q?H:ce.subarray((se-1)*dr,se*dr):ce.subarray(se*dr,(se+1)*dr),hn),ee});return B=B+1&Rn,br(h(re,async(D,se)=>{const{channel:Y}=se;let Q=0;for(;Q<Se;){const ee=Z[Q];if(Y.bufferedAmount>Y.bufferedAmountLowThreshold&&await new Promise(ge=>{const fe=()=>{Y.removeEventListener(ja,fe),ge()};Y.addEventListener(ja,fe)}),!c[D])break;se.sendData(ee),Q++,oe==null||oe(ee[fn]/Rn,D,q)}}))}},e[k]||(e[k]=[u[k].send,u[k].setOnComplete,u[k].setOnProgress])},b=(k,L)=>{var Se,Z;const U=new Uint8Array(L),B=Ln(U.subarray(yc,Un)).replaceAll("\0",""),[le]=U.subarray(Un,Dn),[re]=U.subarray(Dn,fn),[q]=U.subarray(fn,hn),oe=U.subarray(hn),K=!!(re&1),ie=!!(re&2),N=!!(re&4),G=!!(re&8);if(!u[B]){console.warn(`${Gr}: received message with unregistered type (${B})`);return}t[k]||(t[k]={}),(Se=t[k])[B]||(Se[B]={});const ce=(Z=t[k][B])[le]||(Z[le]={chunks:[]});if(ie?ce.meta=Yr(Ln(oe)):ce.chunks.push(oe),u[B].onProgress(q/Rn,k,ce.meta),!K)return;const H=new Uint8Array(ce.chunks.reduce((D,se)=>D+se.byteLength,0));if(ce.chunks.reduce((D,se)=>(H.set(se,D),D+se.byteLength),0),delete t[k][B][le],N)u[B].onComplete(H,k,ce.meta);else{const D=Ln(H);u[B].onComplete(G?Yr(D):D,k)}},_=async()=>{await T(""),await new Promise(k=>setTimeout(k,99)),Qi(c).forEach(([k,L])=>{L.destroy(),delete c[k]}),o()},[w,x]=y(Dr("ping")),[m,E]=y(Dr("pong")),[A,S]=y(Dr("signal")),[M,C]=y(Dr("stream")),[I,R]=y(Dr("track")),[T,$]=y(Dr("leave"));return a((k,L)=>{c[L]||(c[L]=k,k.setHandlers({data:U=>b(L,U),stream:U=>{f.onPeerStream(U,L,n[L]),delete n[L]},track:(U,B)=>{f.onPeerTrack(U,B,L,l[L]),delete l[L]},signal:U=>A(U,L),close:()=>p(L),error:U=>{console.error(U),p(L)}}),f.onPeerJoin(L))}),x((k,L)=>m("",L)),E((k,L)=>{var U;(U=r[L])==null||U.call(r),delete r[L]}),S((k,L)=>{var U;return(U=c[L])==null?void 0:U.signal(k)}),C((k,L)=>n[L]=k),R((k,L)=>l[L]=k),$((k,L)=>p(L)),lc&&addEventListener("beforeunload",_),{makeAction:y,leave:_,ping:async k=>{if(!k)throw qt("ping() must be called with target peer ID");const L=Date.now();return w("",k),await new Promise(U=>r[k]=U),Date.now()-L},getPeers:()=>cc(Qi(c).map(([k,L])=>[k,L.connection])),addStream:(k,L,U)=>h(L,async(B,le)=>{U&&await M(U,B),le.addStream(k)}),removeStream:(k,L)=>h(L,(U,B)=>B.removeStream(k)),addTrack:(k,L,U,B)=>h(U,async(le,re)=>{B&&await I(B,le),re.addTrack(k,L)}),removeTrack:(k,L)=>h(L,(U,B)=>B.removeTrack(k)),replaceTrack:(k,L,U,B)=>h(U,async(le,re)=>{B&&await I(B,le),re.replaceTrack(k,L)}),onPeerJoin:k=>f.onPeerJoin=k,onPeerLeave:k=>f.onPeerLeave=k,onPeerStream:k=>f.onPeerStream=k,onPeerTrack:k=>f.onPeerTrack=k}};const ch=20,uh=5333,La=57333;var la=({init:a,subscribe:s,announce:o})=>{const c={};let u=!1,e,t,r,n;return(l,f,h)=>{var re;const{appId:p}=l;if((re=c[p])!=null&&re[f])return c[p][f];const y={},b={},_=Cn(Gr,p,f),w=un(_),x=un(Cn(_,kt)),m=th(l.password||"",p,f),E=q=>async oe=>({type:oe.type,sdp:await q(m,oe.sdp)}),A=E(nh),S=E(rh),M=()=>Na(!0,l),C=(q,oe,K)=>{var ie;if(b[oe]){b[oe]!==q&&q.destroy();return}b[oe]=q,le(q,oe),(ie=y[oe])==null||ie.forEach((N,G)=>{G!==K&&N.destroy()}),delete y[oe]},I=(q,oe)=>{b[oe]===q&&delete b[oe]},R=(q,oe)=>{var ie;if(b[q])return;const K=(ie=y[q])==null?void 0:ie[oe];K&&(delete y[q][oe],K.destroy())},T=q=>(t.push(..._n(q,M)),br(t.splice(0,q).map(oe=>oe.offerPromise.then(S).then(K=>({peer:oe,offer:K}))))),$=(q,oe)=>h==null?void 0:h({error:`incorrect password (${l.password}) when decrypting ${oe}`,appId:p,peerId:q,roomId:f}),k=q=>async(oe,K,ie)=>{var D,se,Y;const[N,G]=await br([w,x]);if(oe!==N&&oe!==G)return;const{peerId:ce,offer:H,answer:Se,peer:Z}=typeof K=="string"?Yr(K):K;if(!(ce===kt||b[ce])){if(ce&&!H&&!Se){if((D=y[ce])!=null&&D[q])return;const[[{peer:Q,offer:ee}],ge]=await br([T(1),un(Cn(_,ce))]);y[ce]||(y[ce]=[]),y[ce][q]=Q,setTimeout(()=>R(ce,q),L[q]*.9),Q.setHandlers({connect:()=>C(Q,ce,q),close:()=>I(Q,ce)}),ie(ge,It({peerId:kt,offer:ee}))}else if(H){if(((se=y[ce])==null?void 0:se[q])&&kt>ce)return;const ee=Na(!1,l);ee.setHandlers({connect:()=>C(ee,ce,q),close:()=>I(ee,ce)});let ge;try{ge=await A(H)}catch{$(ce,"offer");return}if(ee.isDead)return;const[fe,W]=await br([un(Cn(_,ce)),ee.signal(ge)]);ie(fe,It({peerId:kt,answer:await S(W)}))}else if(Se){let Q;try{Q=await A(Se)}catch{$(ce,"answer");return}if(Z)Z.setHandlers({connect:()=>C(Z,ce,q),close:()=>I(Z,ce)}),Z.signal(Q);else{const ee=(Y=y[ce])==null?void 0:Y[q];ee&&!ee.isDead&&ee.signal(Q)}}}};if(!l)throw qt("requires a config map as the first argument");if(!p&&!l.firebaseApp)throw qt("config map is missing appId field");if(!f)throw qt("roomId argument required");if(!u){const q=a(l);t=_n(ch,M),e=Array.isArray(q)?q:[q],u=!0,r=setInterval(()=>t=t.filter(oe=>{const K=Date.now()-oe.created<La;return K||oe.destroy(),K}),La*1.03),n=l.manualRelayReconnection?Ft:Zf()}const L=e.map(()=>uh),U=[],B=e.map(async(q,oe)=>s(await q,await w,await x,k(oe),T));br([w,x]).then(([q,oe])=>{const K=async(ie,N)=>{const G=await o(ie,q,oe);typeof G=="number"&&(L[N]=G),U[N]=setTimeout(()=>K(ie,N),L[N])};B.forEach(async(ie,N)=>{await ie,K(await e[N],N)})});let le=Ft;return c[p]||(c[p]={}),c[p][f]=lh(q=>le=q,q=>delete b[q],()=>{delete c[p][f],U.forEach(clearTimeout),B.forEach(async q=>(await q)()),clearInterval(r),n(),u=!1})}};const $i={},gc={},yr={},gr={},cn={},Ba={},Mn={},fh="announce",mc=20,Ua=10,hh=33333,ph=120333,dh=3,yh=async a=>{if($i[a])return $i[a];const s=(await un(a)).slice(0,mc);return $i[a]=s,gc[s]=a,s},Da=async(a,s,o)=>a.send(It({action:fh,info_hash:await yh(s),peer_id:kt,...o})),Fa=(a,s,o)=>console.warn(`${Gr}: torrent tracker ${o?"failure":"warning"} from ${a} - ${s}`),gh=la({init:a=>sa(a,mh,dh).map(s=>{const o=fc(s,u=>{var f,h;const e=Yr(u),t=e["failure reason"],r=e["warning message"],{interval:n}=e,l=gc[e.info_hash];if(t){Fa(c,t,!0);return}if(r&&Fa(c,r),n&&n*1e3>cn[c]&&gr[c][l]){const p=Math.min(n*1e3,ph);clearInterval(yr[c][l]),cn[c]=p,yr[c][l]=setInterval(gr[c][l],p)}Ba[e.offer_id]||(e.offer||e.answer)&&(Ba[e.offer_id]=!0,(h=(f=Mn[c])[l])==null||h.call(f,e))}),{url:c}=o;return Mn[c]={},o.ready}),subscribe:(a,s,o,c,u)=>{const{url:e}=a,t=async()=>{const r=cc((await u(Ua)).map(n=>[Si(mc),n]));Mn[a.url][s]=n=>{if(n.offer)c(s,{offer:n.offer,peerId:n.peer_id},(l,f)=>Da(a,s,{answer:Yr(f).answer,offer_id:n.offer_id,to_peer_id:n.peer_id}));else if(n.answer){const l=r[n.offer_id];l&&c(s,{answer:n.answer,peerId:n.peer_id,peer:l.peer})}},Da(a,s,{numwant:Ua,offers:Qi(r).map(([n,{offer:l}])=>({offer_id:n,offer:l}))})};return cn[e]=hh,gr[e]||(gr[e]={}),gr[e][s]=t,yr[e]||(yr[e]={}),yr[e][s]=setInterval(t,cn[e]),t(),()=>{clearInterval(yr[e][s]),delete Mn[e][s],delete gr[e][s]}},announce:a=>cn[a.url]}),mh=["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map(a=>"wss://"+a);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const bc={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},{p:lr,n:kn,Gx:bh,Gy:vh,b:vc}=bc,vt=32,Qr=64,Zi={publicKey:vt+1,publicKeyUncompressed:Qr+1,signature:Qr,seed:vt+vt/2},wh=(...a)=>{"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...a)},tt=(a="")=>{const s=new Error(a);throw wh(s,tt),s},_h=a=>typeof a=="bigint",Sh=a=>typeof a=="string",Eh=a=>a instanceof Uint8Array||ArrayBuffer.isView(a)&&a.constructor.name==="Uint8Array",Mt=(a,s,o="")=>{const c=Eh(a),u=a==null?void 0:a.length,e=s!==void 0;if(!c||e&&u!==s){const t=o&&`"${o}" `,r=e?` of length ${s}`:"",n=c?`length=${u}`:`type=${typeof a}`;tt(t+"expected Uint8Array"+r+", got "+n)}return a},Sn=a=>new Uint8Array(a),wc=(a,s)=>a.toString(16).padStart(s,"0"),_c=a=>Array.from(Mt(a)).map(s=>wc(s,2)).join(""),Bt={_0:48,_9:57,A:65,F:70,a:97,f:102},qa=a=>{if(a>=Bt._0&&a<=Bt._9)return a-Bt._0;if(a>=Bt.A&&a<=Bt.F)return a-(Bt.A-10);if(a>=Bt.a&&a<=Bt.f)return a-(Bt.a-10)},Sc=a=>{const s="hex invalid";if(!Sh(a))return tt(s);const o=a.length,c=o/2;if(o%2)return tt(s);const u=Sn(c);for(let e=0,t=0;e<c;e++,t+=2){const r=qa(a.charCodeAt(t)),n=qa(a.charCodeAt(t+1));if(r===void 0||n===void 0)return tt(s);u[e]=r*16+n}return u},Ec=()=>globalThis==null?void 0:globalThis.crypto,Wa=()=>{var a;return((a=Ec())==null?void 0:a.subtle)??tt("crypto.subtle must be defined, consider polyfill")},Jr=(...a)=>{const s=Sn(a.reduce((c,u)=>c+Mt(u).length,0));let o=0;return a.forEach(c=>{s.set(c,o),o+=c.length}),s},ca=(a=vt)=>Ec().getRandomValues(Sn(a)),Ei=BigInt,Cr=(a,s,o,c="bad number: out of range")=>_h(a)&&s<=a&&a<o?a:tt(c),Me=(a,s=lr)=>{const o=a%s;return o>=0n?o:s+o},Oi=a=>Me(a,kn),Ah=(a,s)=>{(a===0n||s<=0n)&&tt("no inverse n="+a+" mod="+s);let o=Me(a,s),c=s,u=0n,e=1n;for(;o!==0n;){const t=c/o,r=c%o,n=u-e*t;c=o,o=r,u=e,e=n}return c===1n?Me(u,s):tt("no inverse")},xh=a=>{const s=Ic[a];return tt("hashes."+a+" not set"),s},zi=a=>a instanceof cr?a:tt("Point expected"),Ac=a=>Me(Me(a*a)*a+vc),$a=a=>Cr(a,0n,lr),Fn=a=>Cr(a,1n,lr),kh=a=>Cr(a,1n,kn),Zr=a=>(a&1n)===0n,xc=a=>Uint8Array.of(a),Ih=a=>xc(Zr(a)?2:3),kc=a=>{const s=Ac(Fn(a));let o=1n;for(let c=s,u=(lr+1n)/4n;u>0n;u>>=1n)u&1n&&(o=o*c%lr),c=c*c%lr;return Me(o*o)===s?o:tt("sqrt invalid")},Ot=class Ot{constructor(s,o,c){Ae(this,"X");Ae(this,"Y");Ae(this,"Z");this.X=$a(s),this.Y=Fn(o),this.Z=$a(c),Object.freeze(this)}static CURVE(){return bc}static fromAffine(s){const{x:o,y:c}=s;return o===0n&&c===0n?vr:new Ot(o,c,1n)}static fromBytes(s){Mt(s);const{publicKey:o,publicKeyUncompressed:c}=Zi;let u;const e=s.length,t=s[0],r=s.subarray(1),n=Ai(r,0,vt);if(e===o&&(t===2||t===3)){let l=kc(n);const f=Zr(l);Zr(Ei(t))!==f&&(l=Me(-l)),u=new Ot(n,l,1n)}return e===c&&t===4&&(u=new Ot(n,Ai(r,vt,Qr),1n)),u?u.assertValidity():tt("bad point: not on curve")}static fromHex(s){return Ot.fromBytes(Sc(s))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(s){const{X:o,Y:c,Z:u}=this,{X:e,Y:t,Z:r}=zi(s),n=Me(o*r),l=Me(e*u),f=Me(c*r),h=Me(t*u);return n===l&&f===h}is0(){return this.equals(vr)}negate(){return new Ot(this.X,Me(-this.Y),this.Z)}double(){return this.add(this)}add(s){const{X:o,Y:c,Z:u}=this,{X:e,Y:t,Z:r}=zi(s),n=0n,l=vc;let f=0n,h=0n,p=0n;const y=Me(l*3n);let b=Me(o*e),_=Me(c*t),w=Me(u*r),x=Me(o+c),m=Me(e+t);x=Me(x*m),m=Me(b+_),x=Me(x-m),m=Me(o+u);let E=Me(e+r);return m=Me(m*E),E=Me(b+w),m=Me(m-E),E=Me(c+u),f=Me(t+r),E=Me(E*f),f=Me(_+w),E=Me(E-f),p=Me(n*m),f=Me(y*w),p=Me(f+p),f=Me(_-p),p=Me(_+p),h=Me(f*p),_=Me(b+b),_=Me(_+b),w=Me(n*w),m=Me(y*m),_=Me(_+w),w=Me(b-w),w=Me(n*w),m=Me(m+w),b=Me(_*m),h=Me(h+b),b=Me(E*m),f=Me(x*f),f=Me(f-b),b=Me(x*_),p=Me(E*p),p=Me(p+b),new Ot(f,h,p)}subtract(s){return this.add(zi(s).negate())}multiply(s,o=!0){if(!o&&s===0n)return vr;if(kh(s),s===1n)return this;if(this.equals(Rr))return Dh(s).p;let c=vr,u=Rr;for(let e=this;s>0n;e=e.double(),s>>=1n)s&1n?c=c.add(e):o&&(u=u.add(e));return c}multiplyUnsafe(s){return this.multiply(s,!1)}toAffine(){const{X:s,Y:o,Z:c}=this;if(this.equals(vr))return{x:0n,y:0n};if(c===1n)return{x:s,y:o};const u=Ah(c,lr);return Me(c*u)!==1n&&tt("inverse invalid"),{x:Me(s*u),y:Me(o*u)}}assertValidity(){const{x:s,y:o}=this.toAffine();return Fn(s),Fn(o),Me(o*o)===Ac(s)?this:tt("bad point: not on curve")}toBytes(s=!0){const{x:o,y:c}=this.assertValidity().toAffine(),u=jt(o);return s?Jr(Ih(c),u):Jr(xc(4),u,jt(c))}toHex(s){return _c(this.toBytes(s))}};Ae(Ot,"BASE"),Ae(Ot,"ZERO");let cr=Ot;const Rr=new cr(bh,vh,1n),vr=new cr(0n,1n,0n);cr.BASE=Rr;cr.ZERO=vr;const Th=(a,s,o)=>Rr.multiply(s,!1).add(a.multiply(o,!1)).assertValidity(),Nr=a=>Ei("0x"+(_c(a)||"0")),Ai=(a,s,o)=>Nr(a.subarray(s,o)),Ph=2n**256n,jt=a=>Sc(wc(Cr(a,0n,Ph),Qr)),Oh=a=>{const s=Nr(Mt(a,vt,"secret key"));return Cr(s,1n,kn,"invalid secret key: outside of range")},za="SHA-256",Ic={hmacSha256Async:async(a,s)=>{const o=Wa(),c="HMAC",u=await o.importKey("raw",a,{name:c,hash:{name:za}},!1,["sign"]);return Sn(await o.sign(c,u,s))},hmacSha256:void 0,sha256Async:async a=>Sn(await Wa().digest(za,a)),sha256:void 0},Ch=(a=ca(Zi.seed))=>{Mt(a),(a.length<Zi.seed||a.length>1024)&&tt("expected 40-1024b");const s=Me(Nr(a),kn-1n);return jt(s+1n)},Rh=a=>s=>{const o=Ch(s);return{secretKey:o,publicKey:a(o)}},Tc=a=>Uint8Array.from("BIP0340/"+a,s=>s.charCodeAt(0)),Pc="aux",Oc="nonce",Cc="challenge",Xi=(a,...s)=>{const o=xh("sha256"),c=o(Tc(a));return o(Jr(c,c,...s))},eo=async(a,...s)=>{const o=Ic.sha256Async,c=await o(Tc(a));return await o(Jr(c,c,...s))},ua=a=>{const s=Oh(a),o=Rr.multiply(s),{x:c,y:u}=o.assertValidity().toAffine(),e=Zr(u)?s:Oi(-s),t=jt(c);return{d:e,px:t}},fa=a=>Oi(Nr(a)),Rc=(...a)=>fa(Xi(Cc,...a)),Mc=async(...a)=>fa(await eo(Cc,...a)),Nc=a=>ua(a).px,Mh=Rh(Nc),jc=(a,s,o)=>{const{px:c,d:u}=ua(s);return{m:Mt(a),px:c,d:u,a:Mt(o,vt)}},Lc=a=>{const s=fa(a);s===0n&&tt("sign failed: k is zero");const{px:o,d:c}=ua(jt(s));return{rx:o,k:c}},Bc=(a,s,o,c)=>Jr(s,jt(Oi(a+o*c))),Uc="invalid signature produced",Nh=(a,s,o=ca(vt))=>{const{m:c,px:u,d:e,a:t}=jc(a,s,o),r=Xi(Pc,t),n=jt(e^Nr(r)),l=Xi(Oc,n,u,c),{rx:f,k:h}=Lc(l),p=Rc(f,u,c),y=Bc(h,f,p,e);return Fc(y,c,u)||tt(Uc),y},jh=async(a,s,o=ca(vt))=>{const{m:c,px:u,d:e,a:t}=jc(a,s,o),r=await eo(Pc,t),n=jt(e^Nr(r)),l=await eo(Oc,n,u,c),{rx:f,k:h}=Lc(l),p=await Mc(f,u,c),y=Bc(h,f,p,e);return await qc(y,c,u)||tt(Uc),y},Lh=(a,s)=>a instanceof Promise?a.then(s):s(a),Dc=(a,s,o,c)=>{const u=Mt(a,Qr,"signature"),e=Mt(s,void 0,"message"),t=Mt(o,vt,"publicKey");try{const r=Nr(t),n=kc(r),l=Zr(n)?n:Me(-n),f=new cr(r,l,1n).assertValidity(),h=jt(f.toAffine().x),p=Ai(u,0,vt);Cr(p,1n,lr);const y=Ai(u,vt,Qr);Cr(y,1n,kn);const b=Jr(jt(p),h,e);return Lh(c(b),_=>{const{x:w,y:x}=Th(f,y,Oi(-_)).toAffine();return!(!Zr(x)||w!==p)})}catch{return!1}},Fc=(a,s,o)=>Dc(a,s,o,Rc),qc=async(a,s,o)=>Dc(a,s,o,Mc),Wc={keygen:Mh,getPublicKey:Nc,sign:Nh,verify:Fc,signAsync:jh,verifyAsync:qc},xi=8,Bh=256,$c=Math.ceil(Bh/xi)+1,to=2**(xi-1),Uh=()=>{const a=[];let s=Rr,o=s;for(let c=0;c<$c;c++){o=s,a.push(o);for(let u=1;u<to;u++)o=o.add(s),a.push(o);s=o.double()}return a};let Ha;const Ka=(a,s)=>{const o=s.negate();return a?o:s},Dh=a=>{const s=Ha||(Ha=Uh());let o=vr,c=Rr;const u=2**xi,e=u,t=Ei(u-1),r=Ei(xi);for(let n=0;n<$c;n++){let l=Number(a&t);a>>=r,l>to&&(l-=e,a+=1n);const f=n*to,h=f,p=f+Math.abs(l)-1,y=n%2!==0,b=l<0;l===0?c=c.add(Ka(y,s[h])):o=o.add(Ka(b,s[p]))}return a!==0n&&tt("invalid wnaf"),{p:o,f:c}},Fh=5,zc="x",Hc="EVENT",{secretKey:qh,publicKey:Wh}=Wc.keygen(),$h=Ji(Wh),ha={},mr={},Hi={},Kc=()=>Math.floor(Date.now()/1e3),Vc=a=>Hi[a]??(Hi[a]=uc(a,1e4)+2e4),Va=async(a,s)=>{const o={kind:Vc(a),tags:[[zc,a]],created_at:Kc(),content:s,pubkey:$h},c=await hc("SHA-256",It([0,o.pubkey,o.created_at,o.kind,o.tags,o.content]));return It([Hc,{...o,id:Ji(c),sig:Ji(await Wc.signAsync(c,qh))}])},Ga=(a,s)=>(ha[a]=s,It(["REQ",a,{kinds:[Vc(s)],since:Kc(),["#"+zc]:[s]}])),Ya=a=>(delete ha[a],It(["CLOSE",a])),zh=la({init:a=>sa(a,Hh,Fh,!0).map(s=>{const o=fc(s,c=>{var n;const[u,e,t,r]=Yr(c);if(u!==Hc){const l=`${Gr}: relay failure from ${o.url} - `;u==="NOTICE"?console.warn(l+e):u==="OK"&&!t&&console.warn(l+r);return}(n=mr[e])==null||n.call(mr,ha[e],t.content)});return o.ready}),subscribe:(a,s,o,c)=>{const u=Si(64),e=Si(64);return mr[u]=mr[e]=(t,r)=>c(t,r,async(n,l)=>a.send(await Va(n,l))),a.send(Ga(u,s)),a.send(Ga(e,o)),()=>{a.send(Ya(u)),a.send(Ya(e)),delete mr[u],delete mr[e]}},announce:async(a,s)=>a.send(await Va(s,It({peerId:kt})))}),Hh=["black.nostrcity.club","ftp.halifax.rwth-aachen.de/nostr","nos.lol","nostr.cool110.xyz","nostr.data.haus","nostr.sathoarder.com","nostr.vulpem.com","relay.agorist.space","relay.binaryrobot.com","relay.damus.io","relay.fountain.fm","relay.mostro.network","relay.nostraddress.com","relay.nostrdice.com","relay.nostromo.social","relay.oldenburg.cool","relay.verified-nostr.com","yabu.me/v2"].map(a=>"wss://"+a);var pa=Object.defineProperty,Kh=Object.getOwnPropertyDescriptor,Vh=Object.getOwnPropertyNames,Gh=Object.prototype.hasOwnProperty,mt=(a,s)=>()=>(a&&(s=a(a=0)),s),ve=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),tn=(a,s)=>{for(var o in s)pa(a,o,{get:s[o],enumerable:!0})},Yh=(a,s,o,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of Vh(s))!Gh.call(a,u)&&u!==o&&pa(a,u,{get:()=>s[u],enumerable:!(c=Kh(s,u))||c.enumerable});return a},Ke=a=>Yh(pa({},"__esModule",{value:!0}),a),pe=mt(()=>{}),We={};tn(We,{_debugEnd:()=>Lo,_debugProcess:()=>jo,_events:()=>Jo,_eventsCount:()=>Zo,_exiting:()=>_o,_fatalExceptions:()=>Ro,_getActiveHandles:()=>eu,_getActiveRequests:()=>Xc,_kill:()=>Ao,_linkedBinding:()=>Jc,_maxListeners:()=>Qo,_preload_modules:()=>Go,_rawDebug:()=>bo,_startProfilerIdleNotifier:()=>Bo,_stopProfilerIdleNotifier:()=>Uo,_tickCallback:()=>No,abort:()=>Wo,addListener:()=>Xo,allowedNodeEnvironmentFlags:()=>Oo,arch:()=>no,argv:()=>so,argv0:()=>Vo,assert:()=>tu,binding:()=>fo,browser:()=>mo,chdir:()=>yo,config:()=>So,cpuUsage:()=>pn,cwd:()=>po,debugPort:()=>Ko,default:()=>ya,dlopen:()=>Zc,domain:()=>wo,emit:()=>is,emitWarning:()=>uo,env:()=>oo,execArgv:()=>ao,execPath:()=>Ho,exit:()=>To,features:()=>Co,hasUncaughtExceptionCaptureCallback:()=>ru,hrtime:()=>qn,kill:()=>Io,listeners:()=>iu,memoryUsage:()=>ko,moduleLoadList:()=>vo,nextTick:()=>Yc,off:()=>ts,on:()=>Ut,once:()=>es,openStdin:()=>Po,pid:()=>$o,platform:()=>io,ppid:()=>zo,prependListener:()=>os,prependOnceListener:()=>ss,reallyExit:()=>Eo,release:()=>go,removeAllListeners:()=>ns,removeListener:()=>rs,resourceUsage:()=>xo,setSourceMapsEnabled:()=>Yo,setUncaughtExceptionCaptureCallback:()=>Mo,stderr:()=>Fo,stdin:()=>qo,stdout:()=>Do,title:()=>ro,umask:()=>ho,uptime:()=>nu,version:()=>lo,versions:()=>co});function da(a){throw new Error("Node.js process "+a+" is not supported by JSPM core outside of Node.js")}function Qh(){!Pr||!Sr||(Pr=!1,Sr.length?Ct=Sr.concat(Ct):vn=-1,Ct.length&&Gc())}function Gc(){if(!Pr){var a=setTimeout(Qh,0);Pr=!0;for(var s=Ct.length;s;){for(Sr=Ct,Ct=[];++vn<s;)Sr&&Sr[vn].run();vn=-1,s=Ct.length}Sr=null,Pr=!1,clearTimeout(a)}}function Yc(a){var s=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)s[o-1]=arguments[o];Ct.push(new Qc(a,s)),Ct.length===1&&!Pr&&setTimeout(Gc,0)}function Qc(a,s){this.fun=a,this.array=s}function lt(){}function Jc(a){da("_linkedBinding")}function Zc(a){da("dlopen")}function Xc(){return[]}function eu(){return[]}function tu(a,s){if(!a)throw new Error(s||"assertion error")}function ru(){return!1}function nu(){return Wt.now()/1e3}function qn(a){var s=Math.floor((Date.now()-Wt.now())*.001),o=Wt.now()*.001,c=Math.floor(o)+s,u=Math.floor(o%1*1e9);return a&&(c=c-a[0],u=u-a[1],u<0&&(c--,u+=Wn)),[c,u]}function Ut(){return ya}function iu(a){return[]}var Ct,Pr,Sr,vn,ro,no,io,oo,so,ao,lo,co,uo,fo,ho,po,yo,go,mo,bo,vo,wo,_o,So,Eo,Ao,pn,xo,ko,Io,To,Po,Oo,Co,Ro,Mo,No,jo,Lo,Bo,Uo,Do,Fo,qo,Wo,$o,zo,Ho,Ko,Vo,Go,Yo,Wt,Ki,Wn,Qo,Jo,Zo,Xo,es,ts,rs,ns,is,os,ss,ya,Jh=mt(()=>{pe(),ye(),de(),Ct=[],Pr=!1,vn=-1,Qc.prototype.run=function(){this.fun.apply(null,this.array)},ro="browser",no="x64",io="browser",oo={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},so=["/usr/bin/node"],ao=[],lo="v16.8.0",co={},uo=function(a,s){console.warn((s?s+": ":"")+a)},fo=function(a){da("binding")},ho=function(a){return 0},po=function(){return"/"},yo=function(a){},go={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},mo=!0,bo=lt,vo=[],wo={},_o=!1,So={},Eo=lt,Ao=lt,pn=function(){return{}},xo=pn,ko=pn,Io=lt,To=lt,Po=lt,Oo={},Co={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Ro=lt,Mo=lt,No=lt,jo=lt,Lo=lt,Bo=lt,Uo=lt,Do=void 0,Fo=void 0,qo=void 0,Wo=lt,$o=2,zo=1,Ho="/bin/usr/node",Ko=9229,Vo="node",Go=[],Yo=lt,Wt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Wt.now===void 0&&(Ki=Date.now(),Wt.timing&&Wt.timing.navigationStart&&(Ki=Wt.timing.navigationStart),Wt.now=()=>Date.now()-Ki),Wn=1e9,qn.bigint=function(a){var s=qn(a);return typeof BigInt>"u"?s[0]*Wn+s[1]:BigInt(s[0]*Wn)+BigInt(s[1])},Qo=10,Jo={},Zo=0,Xo=Ut,es=Ut,ts=Ut,rs=Ut,ns=Ut,is=lt,os=Ut,ss=Ut,ya={version:lo,versions:co,arch:no,platform:io,browser:mo,release:go,_rawDebug:bo,moduleLoadList:vo,binding:fo,_linkedBinding:Jc,_events:Jo,_eventsCount:Zo,_maxListeners:Qo,on:Ut,addListener:Xo,once:es,off:ts,removeListener:rs,removeAllListeners:ns,emit:is,prependListener:os,prependOnceListener:ss,listeners:iu,domain:wo,_exiting:_o,config:So,dlopen:Zc,uptime:nu,_getActiveRequests:Xc,_getActiveHandles:eu,reallyExit:Eo,_kill:Ao,cpuUsage:pn,resourceUsage:xo,memoryUsage:ko,kill:Io,exit:To,openStdin:Po,allowedNodeEnvironmentFlags:Oo,assert:tu,features:Co,_fatalExceptions:Ro,setUncaughtExceptionCaptureCallback:Mo,hasUncaughtExceptionCaptureCallback:ru,emitWarning:uo,nextTick:Yc,_tickCallback:No,_debugProcess:jo,_debugEnd:Lo,_startProfilerIdleNotifier:Bo,_stopProfilerIdleNotifier:Uo,stdout:Do,stdin:qo,stderr:Fo,abort:Wo,umask:ho,chdir:yo,cwd:po,env:oo,title:ro,argv:so,execArgv:ao,pid:$o,ppid:zo,execPath:Ho,debugPort:Ko,hrtime:qn,argv0:Vo,_preload_modules:Go,setSourceMapsEnabled:Yo}}),de=mt(()=>{Jh()});function Zh(){if(as)return qr;as=!0,qr.byteLength=r,qr.toByteArray=l,qr.fromByteArray=p;for(var a=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,e=c.length;u<e;++u)a[u]=c[u],s[c.charCodeAt(u)]=u;s[45]=62,s[95]=63;function t(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=y.indexOf("=");_===-1&&(_=b);var w=_===b?0:4-_%4;return[_,w]}function r(y){var b=t(y),_=b[0],w=b[1];return(_+w)*3/4-w}function n(y,b,_){return(b+_)*3/4-_}function l(y){var b,_=t(y),w=_[0],x=_[1],m=new o(n(y,w,x)),E=0,A=x>0?w-4:w,S;for(S=0;S<A;S+=4)b=s[y.charCodeAt(S)]<<18|s[y.charCodeAt(S+1)]<<12|s[y.charCodeAt(S+2)]<<6|s[y.charCodeAt(S+3)],m[E++]=b>>16&255,m[E++]=b>>8&255,m[E++]=b&255;return x===2&&(b=s[y.charCodeAt(S)]<<2|s[y.charCodeAt(S+1)]>>4,m[E++]=b&255),x===1&&(b=s[y.charCodeAt(S)]<<10|s[y.charCodeAt(S+1)]<<4|s[y.charCodeAt(S+2)]>>2,m[E++]=b>>8&255,m[E++]=b&255),m}function f(y){return a[y>>18&63]+a[y>>12&63]+a[y>>6&63]+a[y&63]}function h(y,b,_){for(var w,x=[],m=b;m<_;m+=3)w=(y[m]<<16&16711680)+(y[m+1]<<8&65280)+(y[m+2]&255),x.push(f(w));return x.join("")}function p(y){for(var b,_=y.length,w=_%3,x=[],m=16383,E=0,A=_-w;E<A;E+=m)x.push(h(y,E,E+m>A?A:E+m));return w===1?(b=y[_-1],x.push(a[b>>2]+a[b<<4&63]+"==")):w===2&&(b=(y[_-2]<<8)+y[_-1],x.push(a[b>>10]+a[b>>4&63]+a[b<<2&63]+"=")),x.join("")}return qr}function Xh(){return ls?dn:(ls=!0,dn.read=function(a,s,o,c,u){var e,t,r=u*8-c-1,n=(1<<r)-1,l=n>>1,f=-7,h=o?u-1:0,p=o?-1:1,y=a[s+h];for(h+=p,e=y&(1<<-f)-1,y>>=-f,f+=r;f>0;e=e*256+a[s+h],h+=p,f-=8);for(t=e&(1<<-f)-1,e>>=-f,f+=c;f>0;t=t*256+a[s+h],h+=p,f-=8);if(e===0)e=1-l;else{if(e===n)return t?NaN:(y?-1:1)*(1/0);t=t+Math.pow(2,c),e=e-l}return(y?-1:1)*t*Math.pow(2,e-c)},dn.write=function(a,s,o,c,u,e){var t,r,n,l=e*8-u-1,f=(1<<l)-1,h=f>>1,p=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=c?0:e-1,b=c?1:-1,_=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(r=isNaN(s)?1:0,t=f):(t=Math.floor(Math.log(s)/Math.LN2),s*(n=Math.pow(2,-t))<1&&(t--,n*=2),t+h>=1?s+=p/n:s+=p*Math.pow(2,1-h),s*n>=2&&(t++,n/=2),t+h>=f?(r=0,t=f):t+h>=1?(r=(s*n-1)*Math.pow(2,u),t=t+h):(r=s*Math.pow(2,h-1)*Math.pow(2,u),t=0));u>=8;a[o+y]=r&255,y+=b,r/=256,u-=8);for(t=t<<u|r,l+=u;l>0;a[o+y]=t&255,y+=b,t/=256,l-=8);a[o+y-b]|=_*128},dn)}function ep(){if(cs)return rr;cs=!0;let a=Zh(),s=Xh(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;rr.Buffer=t,rr.SlowBuffer=x,rr.INSPECT_MAX_BYTES=50;let c=2147483647;rr.kMaxLength=c,t.TYPED_ARRAY_SUPPORT=u(),!t.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let d=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(d,g),d.foo()===42}catch{return!1}}Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});function e(d){if(d>c)throw new RangeError('The value "'+d+'" is invalid for option "size"');let g=new Uint8Array(d);return Object.setPrototypeOf(g,t.prototype),g}function t(d,g,v){if(typeof d=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(d)}return r(d,g,v)}t.poolSize=8192;function r(d,g,v){if(typeof d=="string")return h(d,g);if(ArrayBuffer.isView(d))return y(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(ne(d,ArrayBuffer)||d&&ne(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(d,SharedArrayBuffer)||d&&ne(d.buffer,SharedArrayBuffer)))return b(d,g,v);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let O=d.valueOf&&d.valueOf();if(O!=null&&O!==d)return t.from(O,g,v);let F=_(d);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return t.from(d[Symbol.toPrimitive]("string"),g,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}t.from=function(d,g,v){return r(d,g,v)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array);function n(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function l(d,g,v){return n(d),d<=0?e(d):g!==void 0?typeof v=="string"?e(d).fill(g,v):e(d).fill(g):e(d)}t.alloc=function(d,g,v){return l(d,g,v)};function f(d){return n(d),e(d<0?0:w(d)|0)}t.allocUnsafe=function(d){return f(d)},t.allocUnsafeSlow=function(d){return f(d)};function h(d,g){if((typeof g!="string"||g==="")&&(g="utf8"),!t.isEncoding(g))throw new TypeError("Unknown encoding: "+g);let v=m(d,g)|0,O=e(v),F=O.write(d,g);return F!==v&&(O=O.slice(0,F)),O}function p(d){let g=d.length<0?0:w(d.length)|0,v=e(g);for(let O=0;O<g;O+=1)v[O]=d[O]&255;return v}function y(d){if(ne(d,Uint8Array)){let g=new Uint8Array(d);return b(g.buffer,g.byteOffset,g.byteLength)}return p(d)}function b(d,g,v){if(g<0||d.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<g+(v||0))throw new RangeError('"length" is outside of buffer bounds');let O;return g===void 0&&v===void 0?O=new Uint8Array(d):v===void 0?O=new Uint8Array(d,g):O=new Uint8Array(d,g,v),Object.setPrototypeOf(O,t.prototype),O}function _(d){if(t.isBuffer(d)){let g=w(d.length)|0,v=e(g);return v.length===0||d.copy(v,0,0,g),v}if(d.length!==void 0)return typeof d.length!="number"||we(d.length)?e(0):p(d);if(d.type==="Buffer"&&Array.isArray(d.data))return p(d.data)}function w(d){if(d>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return d|0}function x(d){return+d!=d&&(d=0),t.alloc(+d)}t.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==t.prototype},t.compare=function(d,g){if(ne(d,Uint8Array)&&(d=t.from(d,d.offset,d.byteLength)),ne(g,Uint8Array)&&(g=t.from(g,g.offset,g.byteLength)),!t.isBuffer(d)||!t.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===g)return 0;let v=d.length,O=g.length;for(let F=0,J=Math.min(v,O);F<J;++F)if(d[F]!==g[F]){v=d[F],O=g[F];break}return v<O?-1:O<v?1:0},t.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(d,g){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return t.alloc(0);let v;if(g===void 0)for(g=0,v=0;v<d.length;++v)g+=d[v].length;let O=t.allocUnsafe(g),F=0;for(v=0;v<d.length;++v){let J=d[v];if(ne(J,Uint8Array))F+J.length>O.length?(t.isBuffer(J)||(J=t.from(J)),J.copy(O,F)):Uint8Array.prototype.set.call(O,J,F);else if(t.isBuffer(J))J.copy(O,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=J.length}return O};function m(d,g){if(t.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||ne(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);let v=d.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&v===0)return 0;let F=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return X(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return me(d).length;default:if(F)return O?-1:X(d).length;g=(""+g).toLowerCase(),F=!0}}t.byteLength=m;function E(d,g,v){let O=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,g>>>=0,v<=g))return"";for(d||(d="utf8");;)switch(d){case"hex":return q(this,g,v);case"utf8":case"utf-8":return L(this,g,v);case"ascii":return le(this,g,v);case"latin1":case"binary":return re(this,g,v);case"base64":return k(this,g,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,g,v);default:if(O)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),O=!0}}t.prototype._isBuffer=!0;function A(d,g,v){let O=d[g];d[g]=d[v],d[v]=O}t.prototype.swap16=function(){let d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<d;g+=2)A(this,g,g+1);return this},t.prototype.swap32=function(){let d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<d;g+=4)A(this,g,g+3),A(this,g+1,g+2);return this},t.prototype.swap64=function(){let d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<d;g+=8)A(this,g,g+7),A(this,g+1,g+6),A(this,g+2,g+5),A(this,g+3,g+4);return this},t.prototype.toString=function(){let d=this.length;return d===0?"":arguments.length===0?L(this,0,d):E.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(d){if(!t.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:t.compare(this,d)===0},t.prototype.inspect=function(){let d="",g=rr.INSPECT_MAX_BYTES;return d=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(d+=" ... "),"<Buffer "+d+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(d,g,v,O,F){if(ne(d,Uint8Array)&&(d=t.from(d,d.offset,d.byteLength)),!t.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(g===void 0&&(g=0),v===void 0&&(v=d?d.length:0),O===void 0&&(O=0),F===void 0&&(F=this.length),g<0||v>d.length||O<0||F>this.length)throw new RangeError("out of range index");if(O>=F&&g>=v)return 0;if(O>=F)return-1;if(g>=v)return 1;if(g>>>=0,v>>>=0,O>>>=0,F>>>=0,this===d)return 0;let J=F-O,ae=v-g,V=Math.min(J,ae),te=this.slice(O,F),Ie=d.slice(g,v);for(let Pe=0;Pe<V;++Pe)if(te[Pe]!==Ie[Pe]){J=te[Pe],ae=Ie[Pe];break}return J<ae?-1:ae<J?1:0};function S(d,g,v,O,F){if(d.length===0)return-1;if(typeof v=="string"?(O=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,we(v)&&(v=F?0:d.length-1),v<0&&(v=d.length+v),v>=d.length){if(F)return-1;v=d.length-1}else if(v<0)if(F)v=0;else return-1;if(typeof g=="string"&&(g=t.from(g,O)),t.isBuffer(g))return g.length===0?-1:M(d,g,v,O,F);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(d,g,v):Uint8Array.prototype.lastIndexOf.call(d,g,v):M(d,[g],v,O,F);throw new TypeError("val must be string, number or Buffer")}function M(d,g,v,O,F){let J=1,ae=d.length,V=g.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(d.length<2||g.length<2)return-1;J=2,ae/=2,V/=2,v/=2}function te(Pe,Oe){return J===1?Pe[Oe]:Pe.readUInt16BE(Oe*J)}let Ie;if(F){let Pe=-1;for(Ie=v;Ie<ae;Ie++)if(te(d,Ie)===te(g,Pe===-1?0:Ie-Pe)){if(Pe===-1&&(Pe=Ie),Ie-Pe+1===V)return Pe*J}else Pe!==-1&&(Ie-=Ie-Pe),Pe=-1}else for(v+V>ae&&(v=ae-V),Ie=v;Ie>=0;Ie--){let Pe=!0;for(let Oe=0;Oe<V;Oe++)if(te(d,Ie+Oe)!==te(g,Oe)){Pe=!1;break}if(Pe)return Ie}return-1}t.prototype.includes=function(d,g,v){return this.indexOf(d,g,v)!==-1},t.prototype.indexOf=function(d,g,v){return S(this,d,g,v,!0)},t.prototype.lastIndexOf=function(d,g,v){return S(this,d,g,v,!1)};function C(d,g,v,O){v=Number(v)||0;let F=d.length-v;O?(O=Number(O),O>F&&(O=F)):O=F;let J=g.length;O>J/2&&(O=J/2);let ae;for(ae=0;ae<O;++ae){let V=parseInt(g.substr(ae*2,2),16);if(we(V))return ae;d[v+ae]=V}return ae}function I(d,g,v,O){return _e(X(g,d.length-v),d,v,O)}function R(d,g,v,O){return _e(ue(g),d,v,O)}function T(d,g,v,O){return _e(me(g),d,v,O)}function $(d,g,v,O){return _e(be(g,d.length-v),d,v,O)}t.prototype.write=function(d,g,v,O){if(g===void 0)O="utf8",v=this.length,g=0;else if(v===void 0&&typeof g=="string")O=g,v=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(v)?(v=v>>>0,O===void 0&&(O="utf8")):(O=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let F=this.length-g;if((v===void 0||v>F)&&(v=F),d.length>0&&(v<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let J=!1;for(;;)switch(O){case"hex":return C(this,d,g,v);case"utf8":case"utf-8":return I(this,d,g,v);case"ascii":case"latin1":case"binary":return R(this,d,g,v);case"base64":return T(this,d,g,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,d,g,v);default:if(J)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),J=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(d,g,v){return g===0&&v===d.length?a.fromByteArray(d):a.fromByteArray(d.slice(g,v))}function L(d,g,v){v=Math.min(d.length,v);let O=[],F=g;for(;F<v;){let J=d[F],ae=null,V=J>239?4:J>223?3:J>191?2:1;if(F+V<=v){let te,Ie,Pe,Oe;switch(V){case 1:J<128&&(ae=J);break;case 2:te=d[F+1],(te&192)===128&&(Oe=(J&31)<<6|te&63,Oe>127&&(ae=Oe));break;case 3:te=d[F+1],Ie=d[F+2],(te&192)===128&&(Ie&192)===128&&(Oe=(J&15)<<12|(te&63)<<6|Ie&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ae=Oe));break;case 4:te=d[F+1],Ie=d[F+2],Pe=d[F+3],(te&192)===128&&(Ie&192)===128&&(Pe&192)===128&&(Oe=(J&15)<<18|(te&63)<<12|(Ie&63)<<6|Pe&63,Oe>65535&&Oe<1114112&&(ae=Oe))}}ae===null?(ae=65533,V=1):ae>65535&&(ae-=65536,O.push(ae>>>10&1023|55296),ae=56320|ae&1023),O.push(ae),F+=V}return B(O)}let U=4096;function B(d){let g=d.length;if(g<=U)return String.fromCharCode.apply(String,d);let v="",O=0;for(;O<g;)v+=String.fromCharCode.apply(String,d.slice(O,O+=U));return v}function le(d,g,v){let O="";v=Math.min(d.length,v);for(let F=g;F<v;++F)O+=String.fromCharCode(d[F]&127);return O}function re(d,g,v){let O="";v=Math.min(d.length,v);for(let F=g;F<v;++F)O+=String.fromCharCode(d[F]);return O}function q(d,g,v){let O=d.length;(!g||g<0)&&(g=0),(!v||v<0||v>O)&&(v=O);let F="";for(let J=g;J<v;++J)F+=ke[d[J]];return F}function oe(d,g,v){let O=d.slice(g,v),F="";for(let J=0;J<O.length-1;J+=2)F+=String.fromCharCode(O[J]+O[J+1]*256);return F}t.prototype.slice=function(d,g){let v=this.length;d=~~d,g=g===void 0?v:~~g,d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),g<0?(g+=v,g<0&&(g=0)):g>v&&(g=v),g<d&&(g=d);let O=this.subarray(d,g);return Object.setPrototypeOf(O,t.prototype),O};function K(d,g,v){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+g>v)throw new RangeError("Trying to access beyond buffer length")}t.prototype.readUintLE=t.prototype.readUIntLE=function(d,g,v){d=d>>>0,g=g>>>0,v||K(d,g,this.length);let O=this[d],F=1,J=0;for(;++J<g&&(F*=256);)O+=this[d+J]*F;return O},t.prototype.readUintBE=t.prototype.readUIntBE=function(d,g,v){d=d>>>0,g=g>>>0,v||K(d,g,this.length);let O=this[d+--g],F=1;for(;g>0&&(F*=256);)O+=this[d+--g]*F;return O},t.prototype.readUint8=t.prototype.readUInt8=function(d,g){return d=d>>>0,g||K(d,1,this.length),this[d]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(d,g){return d=d>>>0,g||K(d,2,this.length),this[d]|this[d+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(d,g){return d=d>>>0,g||K(d,2,this.length),this[d]<<8|this[d+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(d,g){return d=d>>>0,g||K(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(d,g){return d=d>>>0,g||K(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},t.prototype.readBigUInt64LE=he(function(d){d=d>>>0,ee(d,"offset");let g=this[d],v=this[d+7];(g===void 0||v===void 0)&&ge(d,this.length-8);let O=g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,F=this[++d]+this[++d]*2**8+this[++d]*2**16+v*2**24;return BigInt(O)+(BigInt(F)<<BigInt(32))}),t.prototype.readBigUInt64BE=he(function(d){d=d>>>0,ee(d,"offset");let g=this[d],v=this[d+7];(g===void 0||v===void 0)&&ge(d,this.length-8);let O=g*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],F=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+v;return(BigInt(O)<<BigInt(32))+BigInt(F)}),t.prototype.readIntLE=function(d,g,v){d=d>>>0,g=g>>>0,v||K(d,g,this.length);let O=this[d],F=1,J=0;for(;++J<g&&(F*=256);)O+=this[d+J]*F;return F*=128,O>=F&&(O-=Math.pow(2,8*g)),O},t.prototype.readIntBE=function(d,g,v){d=d>>>0,g=g>>>0,v||K(d,g,this.length);let O=g,F=1,J=this[d+--O];for(;O>0&&(F*=256);)J+=this[d+--O]*F;return F*=128,J>=F&&(J-=Math.pow(2,8*g)),J},t.prototype.readInt8=function(d,g){return d=d>>>0,g||K(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},t.prototype.readInt16LE=function(d,g){d=d>>>0,g||K(d,2,this.length);let v=this[d]|this[d+1]<<8;return v&32768?v|4294901760:v},t.prototype.readInt16BE=function(d,g){d=d>>>0,g||K(d,2,this.length);let v=this[d+1]|this[d]<<8;return v&32768?v|4294901760:v},t.prototype.readInt32LE=function(d,g){return d=d>>>0,g||K(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},t.prototype.readInt32BE=function(d,g){return d=d>>>0,g||K(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},t.prototype.readBigInt64LE=he(function(d){d=d>>>0,ee(d,"offset");let g=this[d],v=this[d+7];(g===void 0||v===void 0)&&ge(d,this.length-8);let O=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(v<<24);return(BigInt(O)<<BigInt(32))+BigInt(g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),t.prototype.readBigInt64BE=he(function(d){d=d>>>0,ee(d,"offset");let g=this[d],v=this[d+7];(g===void 0||v===void 0)&&ge(d,this.length-8);let O=(g<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(O)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+v)}),t.prototype.readFloatLE=function(d,g){return d=d>>>0,g||K(d,4,this.length),s.read(this,d,!0,23,4)},t.prototype.readFloatBE=function(d,g){return d=d>>>0,g||K(d,4,this.length),s.read(this,d,!1,23,4)},t.prototype.readDoubleLE=function(d,g){return d=d>>>0,g||K(d,8,this.length),s.read(this,d,!0,52,8)},t.prototype.readDoubleBE=function(d,g){return d=d>>>0,g||K(d,8,this.length),s.read(this,d,!1,52,8)};function ie(d,g,v,O,F,J){if(!t.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>F||g<J)throw new RangeError('"value" argument is out of bounds');if(v+O>d.length)throw new RangeError("Index out of range")}t.prototype.writeUintLE=t.prototype.writeUIntLE=function(d,g,v,O){if(d=+d,g=g>>>0,v=v>>>0,!O){let ae=Math.pow(2,8*v)-1;ie(this,d,g,v,ae,0)}let F=1,J=0;for(this[g]=d&255;++J<v&&(F*=256);)this[g+J]=d/F&255;return g+v},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(d,g,v,O){if(d=+d,g=g>>>0,v=v>>>0,!O){let ae=Math.pow(2,8*v)-1;ie(this,d,g,v,ae,0)}let F=v-1,J=1;for(this[g+F]=d&255;--F>=0&&(J*=256);)this[g+F]=d/J&255;return g+v},t.prototype.writeUint8=t.prototype.writeUInt8=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,1,255,0),this[g]=d&255,g+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,2,65535,0),this[g]=d&255,this[g+1]=d>>>8,g+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,2,65535,0),this[g]=d>>>8,this[g+1]=d&255,g+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,4,4294967295,0),this[g+3]=d>>>24,this[g+2]=d>>>16,this[g+1]=d>>>8,this[g]=d&255,g+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,4,4294967295,0),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4};function N(d,g,v,O,F){Q(g,O,F,d,v,7);let J=Number(g&BigInt(4294967295));d[v++]=J,J=J>>8,d[v++]=J,J=J>>8,d[v++]=J,J=J>>8,d[v++]=J;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return d[v++]=ae,ae=ae>>8,d[v++]=ae,ae=ae>>8,d[v++]=ae,ae=ae>>8,d[v++]=ae,v}function G(d,g,v,O,F){Q(g,O,F,d,v,7);let J=Number(g&BigInt(4294967295));d[v+7]=J,J=J>>8,d[v+6]=J,J=J>>8,d[v+5]=J,J=J>>8,d[v+4]=J;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return d[v+3]=ae,ae=ae>>8,d[v+2]=ae,ae=ae>>8,d[v+1]=ae,ae=ae>>8,d[v]=ae,v+8}t.prototype.writeBigUInt64LE=he(function(d,g=0){return N(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=he(function(d,g=0){return G(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(d,g,v,O){if(d=+d,g=g>>>0,!O){let V=Math.pow(2,8*v-1);ie(this,d,g,v,V-1,-V)}let F=0,J=1,ae=0;for(this[g]=d&255;++F<v&&(J*=256);)d<0&&ae===0&&this[g+F-1]!==0&&(ae=1),this[g+F]=(d/J>>0)-ae&255;return g+v},t.prototype.writeIntBE=function(d,g,v,O){if(d=+d,g=g>>>0,!O){let V=Math.pow(2,8*v-1);ie(this,d,g,v,V-1,-V)}let F=v-1,J=1,ae=0;for(this[g+F]=d&255;--F>=0&&(J*=256);)d<0&&ae===0&&this[g+F+1]!==0&&(ae=1),this[g+F]=(d/J>>0)-ae&255;return g+v},t.prototype.writeInt8=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,1,127,-128),d<0&&(d=255+d+1),this[g]=d&255,g+1},t.prototype.writeInt16LE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,2,32767,-32768),this[g]=d&255,this[g+1]=d>>>8,g+2},t.prototype.writeInt16BE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,2,32767,-32768),this[g]=d>>>8,this[g+1]=d&255,g+2},t.prototype.writeInt32LE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,4,2147483647,-2147483648),this[g]=d&255,this[g+1]=d>>>8,this[g+2]=d>>>16,this[g+3]=d>>>24,g+4},t.prototype.writeInt32BE=function(d,g,v){return d=+d,g=g>>>0,v||ie(this,d,g,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4},t.prototype.writeBigInt64LE=he(function(d,g=0){return N(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=he(function(d,g=0){return G(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(d,g,v,O,F,J){if(v+O>d.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function H(d,g,v,O,F){return g=+g,v=v>>>0,F||ce(d,g,v,4),s.write(d,g,v,O,23,4),v+4}t.prototype.writeFloatLE=function(d,g,v){return H(this,d,g,!0,v)},t.prototype.writeFloatBE=function(d,g,v){return H(this,d,g,!1,v)};function Se(d,g,v,O,F){return g=+g,v=v>>>0,F||ce(d,g,v,8),s.write(d,g,v,O,52,8),v+8}t.prototype.writeDoubleLE=function(d,g,v){return Se(this,d,g,!0,v)},t.prototype.writeDoubleBE=function(d,g,v){return Se(this,d,g,!1,v)},t.prototype.copy=function(d,g,v,O){if(!t.isBuffer(d))throw new TypeError("argument should be a Buffer");if(v||(v=0),!O&&O!==0&&(O=this.length),g>=d.length&&(g=d.length),g||(g=0),O>0&&O<v&&(O=v),O===v||d.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),d.length-g<O-v&&(O=d.length-g+v);let F=O-v;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,v,O):Uint8Array.prototype.set.call(d,this.subarray(v,O),g),F},t.prototype.fill=function(d,g,v,O){if(typeof d=="string"){if(typeof g=="string"?(O=g,g=0,v=this.length):typeof v=="string"&&(O=v,v=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!t.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(d.length===1){let J=d.charCodeAt(0);(O==="utf8"&&J<128||O==="latin1")&&(d=J)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(g<0||this.length<g||this.length<v)throw new RangeError("Out of range index");if(v<=g)return this;g=g>>>0,v=v===void 0?this.length:v>>>0,d||(d=0);let F;if(typeof d=="number")for(F=g;F<v;++F)this[F]=d;else{let J=t.isBuffer(d)?d:t.from(d,O),ae=J.length;if(ae===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(F=0;F<v-g;++F)this[F+g]=J[F%ae]}return this};let Z={};function D(d,g,v){Z[d]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(d,g){return`The "${d}" argument must be of type number. Received type ${typeof g}`},TypeError),D("ERR_OUT_OF_RANGE",function(d,g,v){let O=`The value of "${d}" is out of range.`,F=v;return Number.isInteger(v)&&Math.abs(v)>2**32?F=se(String(v)):typeof v=="bigint"&&(F=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(F=se(F)),F+="n"),O+=` It must be ${g}. Received ${F}`,O},RangeError);function se(d){let g="",v=d.length,O=d[0]==="-"?1:0;for(;v>=O+4;v-=3)g=`_${d.slice(v-3,v)}${g}`;return`${d.slice(0,v)}${g}`}function Y(d,g,v){ee(g,"offset"),(d[g]===void 0||d[g+v]===void 0)&&ge(g,d.length-(v+1))}function Q(d,g,v,O,F,J){if(d>v||d<g){let ae=typeof g=="bigint"?"n":"",V;throw g===0||g===BigInt(0)?V=`>= 0${ae} and < 2${ae} ** ${(J+1)*8}${ae}`:V=`>= -(2${ae} ** ${(J+1)*8-1}${ae}) and < 2 ** ${(J+1)*8-1}${ae}`,new Z.ERR_OUT_OF_RANGE("value",V,d)}Y(O,F,J)}function ee(d,g){if(typeof d!="number")throw new Z.ERR_INVALID_ARG_TYPE(g,"number",d)}function ge(d,g,v){throw Math.floor(d)!==d?(ee(d,v),new Z.ERR_OUT_OF_RANGE("offset","an integer",d)):g<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,d)}let fe=/[^+/0-9A-Za-z-_]/g;function W(d){if(d=d.split("=")[0],d=d.trim().replace(fe,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function X(d,g){g=g||1/0;let v,O=d.length,F=null,J=[];for(let ae=0;ae<O;++ae){if(v=d.charCodeAt(ae),v>55295&&v<57344){if(!F){if(v>56319){(g-=3)>-1&&J.push(239,191,189);continue}else if(ae+1===O){(g-=3)>-1&&J.push(239,191,189);continue}F=v;continue}if(v<56320){(g-=3)>-1&&J.push(239,191,189),F=v;continue}v=(F-55296<<10|v-56320)+65536}else F&&(g-=3)>-1&&J.push(239,191,189);if(F=null,v<128){if((g-=1)<0)break;J.push(v)}else if(v<2048){if((g-=2)<0)break;J.push(v>>6|192,v&63|128)}else if(v<65536){if((g-=3)<0)break;J.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((g-=4)<0)break;J.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return J}function ue(d){let g=[];for(let v=0;v<d.length;++v)g.push(d.charCodeAt(v)&255);return g}function be(d,g){let v,O,F,J=[];for(let ae=0;ae<d.length&&!((g-=2)<0);++ae)v=d.charCodeAt(ae),O=v>>8,F=v%256,J.push(F),J.push(O);return J}function me(d){return a.toByteArray(W(d))}function _e(d,g,v,O){let F;for(F=0;F<O&&!(F+v>=g.length||F>=d.length);++F)g[F+v]=d[F];return F}function ne(d,g){return d instanceof g||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===g.name}function we(d){return d!==d}let ke=function(){let d="0123456789abcdef",g=new Array(256);for(let v=0;v<16;++v){let O=v*16;for(let F=0;F<16;++F)g[O+F]=d[v]+d[F]}return g}();function he(d){return typeof BigInt>"u"?je:d}function je(){throw new Error("BigInt not supported")}return rr}var qr,as,dn,ls,rr,cs,tp=mt(()=>{pe(),ye(),de(),qr={},as=!1,dn={},ls=!1,rr={},cs=!1}),st={};tn(st,{Buffer:()=>ki,INSPECT_MAX_BYTES:()=>ou,default:()=>Dt,kMaxLength:()=>su});var Dt,ki,ou,su,at=mt(()=>{pe(),ye(),de(),tp(),Dt=ep(),Dt.Buffer,Dt.SlowBuffer,Dt.INSPECT_MAX_BYTES,Dt.kMaxLength,ki=Dt.Buffer,ou=Dt.INSPECT_MAX_BYTES,su=Dt.kMaxLength}),ye=mt(()=>{at()}),Je=ve((a,s)=>{pe(),ye(),de();var o=class extends Error{constructor(c){if(!Array.isArray(c))throw new TypeError(`Expected input to be an Array, got ${typeof c}`);let u="";for(let e=0;e<c.length;e++)u+=`    ${c[e].stack}
`;super(u),this.name="AggregateError",this.errors=c}};s.exports={AggregateError:o,ArrayIsArray(c){return Array.isArray(c)},ArrayPrototypeIncludes(c,u){return c.includes(u)},ArrayPrototypeIndexOf(c,u){return c.indexOf(u)},ArrayPrototypeJoin(c,u){return c.join(u)},ArrayPrototypeMap(c,u){return c.map(u)},ArrayPrototypePop(c,u){return c.pop(u)},ArrayPrototypePush(c,u){return c.push(u)},ArrayPrototypeSlice(c,u,e){return c.slice(u,e)},Error,FunctionPrototypeCall(c,u,...e){return c.call(u,...e)},FunctionPrototypeSymbolHasInstance(c,u){return Function.prototype[Symbol.hasInstance].call(c,u)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(c,u){return Object.defineProperties(c,u)},ObjectDefineProperty(c,u,e){return Object.defineProperty(c,u,e)},ObjectGetOwnPropertyDescriptor(c,u){return Object.getOwnPropertyDescriptor(c,u)},ObjectKeys(c){return Object.keys(c)},ObjectSetPrototypeOf(c,u){return Object.setPrototypeOf(c,u)},Promise,PromisePrototypeCatch(c,u){return c.catch(u)},PromisePrototypeThen(c,u,e){return c.then(u,e)},PromiseReject(c){return Promise.reject(c)},PromiseResolve(c){return Promise.resolve(c)},ReflectApply:Reflect.apply,RegExpPrototypeTest(c,u){return c.test(u)},SafeSet:Set,String,StringPrototypeSlice(c,u,e){return c.slice(u,e)},StringPrototypeToLowerCase(c){return c.toLowerCase()},StringPrototypeToUpperCase(c){return c.toUpperCase()},StringPrototypeTrim(c){return c.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(c,u,e){return c.set(u,e)},Boolean,Uint8Array}}),au=ve((a,s)=>{pe(),ye(),de(),s.exports={format(o,...c){return o.replace(/%([sdifj])/g,function(...[u,e]){let t=c.shift();return e==="f"?t.toFixed(6):e==="j"?JSON.stringify(t):e==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),yt=ve((a,s)=>{pe(),ye(),de();var{format:o,inspect:c}=au(),{AggregateError:u}=Je(),e=globalThis.AggregateError||u,t=Symbol("kIsNodeError"),r=["string","function","number","object","Function","Object","boolean","bigint","symbol"],n=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",f={};function h(m,E){if(!m)throw new f.ERR_INTERNAL_ASSERTION(E)}function p(m){let E="",A=m.length,S=m[0]==="-"?1:0;for(;A>=S+4;A-=3)E=`_${m.slice(A-3,A)}${E}`;return`${m.slice(0,A)}${E}`}function y(m,E,A){if(typeof E=="function")return h(E.length<=A.length,`Code: ${m}; The provided arguments length (${A.length}) does not match the required ones (${E.length}).`),E(...A);let S=(E.match(/%[dfijoOs]/g)||[]).length;return h(S===A.length,`Code: ${m}; The provided arguments length (${A.length}) does not match the required ones (${S}).`),A.length===0?E:o(E,...A)}function b(m,E,A){A||(A=Error);class S extends A{constructor(...C){super(y(m,E,C))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(S.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),S.prototype.code=m,S.prototype[t]=!0,f[m]=S}function _(m){let E=l+m.name;return Object.defineProperty(m,"name",{value:E}),m}function w(m,E){if(m&&E&&m!==E){if(Array.isArray(E.errors))return E.errors.push(m),E;let A=new e([E,m],E.message);return A.code=E.code,A}return m||E}var x=class extends Error{constructor(m="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new f.ERR_INVALID_ARG_TYPE("options","Object",E);super(m,E),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(m,E,A)=>{h(typeof m=="string","'name' must be a string"),Array.isArray(E)||(E=[E]);let S="The ";m.endsWith(" argument")?S+=`${m} `:S+=`"${m}" ${m.includes(".")?"property":"argument"} `,S+="must be ";let M=[],C=[],I=[];for(let T of E)h(typeof T=="string","All expected entries have to be of type string"),r.includes(T)?M.push(T.toLowerCase()):n.test(T)?C.push(T):(h(T!=="object",'The value "object" should be written as "Object"'),I.push(T));if(C.length>0){let T=M.indexOf("object");T!==-1&&(M.splice(M,T,1),C.push("Object"))}if(M.length>0){switch(M.length){case 1:S+=`of type ${M[0]}`;break;case 2:S+=`one of type ${M[0]} or ${M[1]}`;break;default:{let T=M.pop();S+=`one of type ${M.join(", ")}, or ${T}`}}(C.length>0||I.length>0)&&(S+=" or ")}if(C.length>0){switch(C.length){case 1:S+=`an instance of ${C[0]}`;break;case 2:S+=`an instance of ${C[0]} or ${C[1]}`;break;default:{let T=C.pop();S+=`an instance of ${C.join(", ")}, or ${T}`}}I.length>0&&(S+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(S+="an "),S+=`${I[0]}`;break;case 2:S+=`one of ${I[0]} or ${I[1]}`;break;default:{let T=I.pop();S+=`one of ${I.join(", ")}, or ${T}`}}if(A==null)S+=`. Received ${A}`;else if(typeof A=="function"&&A.name)S+=`. Received function ${A.name}`;else if(typeof A=="object"){var R;if((R=A.constructor)!==null&&R!==void 0&&R.name)S+=`. Received an instance of ${A.constructor.name}`;else{let T=c(A,{depth:-1});S+=`. Received ${T}`}}else{let T=c(A,{colors:!1});T.length>25&&(T=`${T.slice(0,25)}...`),S+=`. Received type ${typeof A} (${T})`}return S},TypeError),b("ERR_INVALID_ARG_VALUE",(m,E,A="is invalid")=>{let S=c(E);return S.length>128&&(S=S.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${A}. Received ${S}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(m,E,A)=>{var S;let M=A!=null&&(S=A.constructor)!==null&&S!==void 0&&S.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${m} to be returned from the "${E}" function but got ${M}.`},TypeError),b("ERR_MISSING_ARGS",(...m)=>{h(m.length>0,"At least one arg needs to be specified");let E,A=m.length;switch(m=(Array.isArray(m)?m:[m]).map(S=>`"${S}"`).join(" or "),A){case 1:E+=`The ${m[0]} argument`;break;case 2:E+=`The ${m[0]} and ${m[1]} arguments`;break;default:{let S=m.pop();E+=`The ${m.join(", ")}, and ${S} arguments`}break}return`${E} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(m,E,A)=>{h(E,'Missing "range" argument');let S;if(Number.isInteger(A)&&Math.abs(A)>2**32)S=p(String(A));else if(typeof A=="bigint"){S=String(A);let M=BigInt(2)**BigInt(32);(A>M||A<-M)&&(S=p(S)),S+="n"}else S=c(A);return`The value of "${m}" is out of range. It must be ${E}. Received ${S}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),s.exports={AbortError:x,aggregateTwoErrors:_(w),hideStackFrames:_,codes:f}}),En=ve((a,s)=>{pe(),ye(),de();var{AbortController:o,AbortSignal:c}=typeof self<"u"?self:typeof window<"u"?window:void 0;s.exports=o,s.exports.AbortSignal=c,s.exports.default=o}),ur={};tn(ur,{EventEmitter:()=>lu,default:()=>Wr,defaultMaxListeners:()=>cu,init:()=>uu,listenerCount:()=>fu,on:()=>hu,once:()=>pu});function rp(){if(us)return yn;us=!0;var a=typeof Reflect=="object"?Reflect:null,s=a&&typeof a.apply=="function"?a.apply:function(A,S,M){return Function.prototype.apply.call(A,S,M)},o;a&&typeof a.ownKeys=="function"?o=a.ownKeys:Object.getOwnPropertySymbols?o=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:o=function(A){return Object.getOwnPropertyNames(A)};function c(A){console&&console.warn&&console.warn(A)}var u=Number.isNaN||function(A){return A!==A};function e(){e.init.call(this)}yn=e,yn.once=x,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var t=10;function r(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(A){if(typeof A!="number"||A<0||u(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");t=A}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||u(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function n(A){return A._maxListeners===void 0?e.defaultMaxListeners:A._maxListeners}e.prototype.getMaxListeners=function(){return n(this)},e.prototype.emit=function(A){for(var S=[],M=1;M<arguments.length;M++)S.push(arguments[M]);var C=A==="error",I=this._events;if(I!==void 0)C=C&&I.error===void 0;else if(!C)return!1;if(C){var R;if(S.length>0&&(R=S[0]),R instanceof Error)throw R;var T=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw T.context=R,T}var $=I[A];if($===void 0)return!1;if(typeof $=="function")s($,this,S);else for(var k=$.length,L=b($,k),M=0;M<k;++M)s(L[M],this,S);return!0};function l(A,S,M,C){var I,R,T;if(r(M),R=A._events,R===void 0?(R=A._events=Object.create(null),A._eventsCount=0):(R.newListener!==void 0&&(A.emit("newListener",S,M.listener?M.listener:M),R=A._events),T=R[S]),T===void 0)T=R[S]=M,++A._eventsCount;else if(typeof T=="function"?T=R[S]=C?[M,T]:[T,M]:C?T.unshift(M):T.push(M),I=n(A),I>0&&T.length>I&&!T.warned){T.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=A,$.type=S,$.count=T.length,c($)}return A}e.prototype.addListener=function(A,S){return l(this,A,S,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(A,S){return l(this,A,S,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,S,M){var C={fired:!1,wrapFn:void 0,target:A,type:S,listener:M},I=f.bind(C);return I.listener=M,C.wrapFn=I,I}e.prototype.once=function(A,S){return r(S),this.on(A,h(this,A,S)),this},e.prototype.prependOnceListener=function(A,S){return r(S),this.prependListener(A,h(this,A,S)),this},e.prototype.removeListener=function(A,S){var M,C,I,R,T;if(r(S),C=this._events,C===void 0)return this;if(M=C[A],M===void 0)return this;if(M===S||M.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete C[A],C.removeListener&&this.emit("removeListener",A,M.listener||S));else if(typeof M!="function"){for(I=-1,R=M.length-1;R>=0;R--)if(M[R]===S||M[R].listener===S){T=M[R].listener,I=R;break}if(I<0)return this;I===0?M.shift():_(M,I),M.length===1&&(C[A]=M[0]),C.removeListener!==void 0&&this.emit("removeListener",A,T||S)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(A){var S,M,C;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[A]),this;if(arguments.length===0){var I=Object.keys(M),R;for(C=0;C<I.length;++C)R=I[C],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=M[A],typeof S=="function")this.removeListener(A,S);else if(S!==void 0)for(C=S.length-1;C>=0;C--)this.removeListener(A,S[C]);return this};function p(A,S,M){var C=A._events;if(C===void 0)return[];var I=C[S];return I===void 0?[]:typeof I=="function"?M?[I.listener||I]:[I]:M?w(I):b(I,I.length)}e.prototype.listeners=function(A){return p(this,A,!0)},e.prototype.rawListeners=function(A){return p(this,A,!1)},e.listenerCount=function(A,S){return typeof A.listenerCount=="function"?A.listenerCount(S):y.call(A,S)},e.prototype.listenerCount=y;function y(A){var S=this._events;if(S!==void 0){var M=S[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function b(A,S){for(var M=new Array(S),C=0;C<S;++C)M[C]=A[C];return M}function _(A,S){for(;S+1<A.length;S++)A[S]=A[S+1];A.pop()}function w(A){for(var S=new Array(A.length),M=0;M<S.length;++M)S[M]=A[M].listener||A[M];return S}function x(A,S){return new Promise(function(M,C){function I(T){A.removeListener(S,R),C(T)}function R(){typeof A.removeListener=="function"&&A.removeListener("error",I),M([].slice.call(arguments))}E(A,S,R,{once:!0}),S!=="error"&&m(A,I,{once:!0})})}function m(A,S,M){typeof A.on=="function"&&E(A,"error",S,M)}function E(A,S,M,C){if(typeof A.on=="function")C.once?A.once(S,M):A.on(S,M);else if(typeof A.addEventListener=="function")A.addEventListener(S,function I(R){C.once&&A.removeEventListener(S,I),M(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return yn}var yn,us,Wr,lu,cu,uu,fu,hu,pu,jr=mt(()=>{pe(),ye(),de(),yn={},us=!1,Wr=rp(),Wr.once,Wr.once=function(a,s){return new Promise((o,c)=>{function u(...t){e!==void 0&&a.removeListener("error",e),o(t)}let e;s!=="error"&&(e=t=>{a.removeListener(name,u),c(t)},a.once("error",e)),a.once(s,u)})},Wr.on=function(a,s){let o=[],c=[],u=null,e=!1,t={async next(){let l=o.shift();if(l)return createIterResult(l,!1);if(u){let f=Promise.reject(u);return u=null,f}return e?createIterResult(void 0,!0):new Promise((f,h)=>c.push({resolve:f,reject:h}))},async return(){a.removeListener(s,r),a.removeListener("error",n),e=!0;for(let l of c)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){u=l,a.removeListener(s,r),a.removeListener("error",n)},[Symbol.asyncIterator](){return this}};return a.on(s,r),a.on("error",n),t;function r(...l){let f=c.shift();f?f.resolve(createIterResult(l,!1)):o.push(l)}function n(l){e=!0;let f=c.shift();f?f.reject(l):u=l,t.return()}},{EventEmitter:lu,defaultMaxListeners:cu,init:uu,listenerCount:fu,on:hu,once:pu}=Wr}),gt=ve((a,s)=>{pe(),ye(),de();var o=(at(),Ke(st)),{format:c,inspect:u}=au(),{codes:{ERR_INVALID_ARG_TYPE:e}}=yt(),{kResistStopPropagation:t,AggregateError:r,SymbolDispose:n}=Je(),l=globalThis.AbortSignal||En().AbortSignal,f=globalThis.AbortController||En().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||o.Blob,y=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},b=(w,x)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new e(x,"AbortSignal",w)},_=(w,x)=>{if(typeof w!="function")throw new e(x,"Function",w)};s.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(w){let x=!1;return function(...m){x||(x=!0,w.apply(this,m))}},createDeferredPromise:function(){let w,x;return{promise:new Promise((m,E)=>{w=m,x=E}),resolve:w,reject:x}},promisify(w){return new Promise((x,m)=>{w((E,...A)=>E?m(E):x(...A))})},debuglog(){return function(){}},format:c,inspect:u,types:{isAsyncFunction(w){return w instanceof h},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:y,deprecate(w,x){return w},addAbortListener:(jr(),Ke(ur)).addAbortListener||function(w,x){if(w===void 0)throw new e("signal","AbortSignal",w);b(w,"signal"),_(x,"listener");let m;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[t]:!0}),m=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[n](){var E;(E=m)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];let x=new f,m=()=>x.abort();return w.forEach(E=>{b(E,"signals"),E.addEventListener("abort",m,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(E=>E.removeEventListener("abort",m))},{once:!0}),x.signal}},s.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),In=ve((a,s)=>{pe(),ye(),de();var{ArrayIsArray:o,ArrayPrototypeIncludes:c,ArrayPrototypeJoin:u,ArrayPrototypeMap:e,NumberIsInteger:t,NumberIsNaN:r,NumberMAX_SAFE_INTEGER:n,NumberMIN_SAFE_INTEGER:l,NumberParseInt:f,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:p,String:y,StringPrototypeToUpperCase:b,StringPrototypeTrim:_}=Je(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:E,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:S}}=yt(),{normalizeEncoding:M}=gt(),{isAsyncFunction:C,isArrayBufferView:I}=gt().types,R={};function T(ne){return ne===(ne|0)}function $(ne){return ne===ne>>>0}var k=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function U(ne,we,ke){if(typeof ne>"u"&&(ne=ke),typeof ne=="string"){if(p(k,ne)===null)throw new E(we,ne,L);ne=f(ne,8)}return re(ne,we),ne}var B=w((ne,we,ke=l,he=n)=>{if(typeof ne!="number")throw new m(we,"number",ne);if(!t(ne))throw new A(we,"an integer",ne);if(ne<ke||ne>he)throw new A(we,`>= ${ke} && <= ${he}`,ne)}),le=w((ne,we,ke=-2147483648,he=2147483647)=>{if(typeof ne!="number")throw new m(we,"number",ne);if(!t(ne))throw new A(we,"an integer",ne);if(ne<ke||ne>he)throw new A(we,`>= ${ke} && <= ${he}`,ne)}),re=w((ne,we,ke=!1)=>{if(typeof ne!="number")throw new m(we,"number",ne);if(!t(ne))throw new A(we,"an integer",ne);let he=ke?1:0,je=4294967295;if(ne<he||ne>je)throw new A(we,`>= ${he} && <= ${je}`,ne)});function q(ne,we){if(typeof ne!="string")throw new m(we,"string",ne)}function oe(ne,we,ke=void 0,he){if(typeof ne!="number")throw new m(we,"number",ne);if(ke!=null&&ne<ke||he!=null&&ne>he||(ke!=null||he!=null)&&r(ne))throw new A(we,`${ke!=null?`>= ${ke}`:""}${ke!=null&&he!=null?" && ":""}${he!=null?`<= ${he}`:""}`,ne)}var K=w((ne,we,ke)=>{if(!c(ke,ne)){let he="must be one of: "+u(e(ke,je=>typeof je=="string"?`'${je}'`:y(je)),", ");throw new E(we,ne,he)}});function ie(ne,we){if(typeof ne!="boolean")throw new m(we,"boolean",ne)}function N(ne,we,ke){return ne==null||!h(ne,we)?ke:ne[we]}var G=w((ne,we,ke=null)=>{let he=N(ke,"allowArray",!1),je=N(ke,"allowFunction",!1);if(!N(ke,"nullable",!1)&&ne===null||!he&&o(ne)||typeof ne!="object"&&(!je||typeof ne!="function"))throw new m(we,"Object",ne)}),ce=w((ne,we)=>{if(ne!=null&&typeof ne!="object"&&typeof ne!="function")throw new m(we,"a dictionary",ne)}),H=w((ne,we,ke=0)=>{if(!o(ne))throw new m(we,"Array",ne);if(ne.length<ke){let he=`must be longer than ${ke}`;throw new E(we,ne,he)}});function Se(ne,we){H(ne,we);for(let ke=0;ke<ne.length;ke++)q(ne[ke],`${we}[${ke}]`)}function Z(ne,we){H(ne,we);for(let ke=0;ke<ne.length;ke++)ie(ne[ke],`${we}[${ke}]`)}function D(ne,we){H(ne,we);for(let ke=0;ke<ne.length;ke++){let he=ne[ke],je=`${we}[${ke}]`;if(he==null)throw new m(je,"AbortSignal",he);ge(he,je)}}function se(ne,we="signal"){if(q(ne,we),R[ne]===void 0)throw R[b(ne)]!==void 0?new S(ne+" (signals must use all capital letters)"):new S(ne)}var Y=w((ne,we="buffer")=>{if(!I(ne))throw new m(we,["Buffer","TypedArray","DataView"],ne)});function Q(ne,we){let ke=M(we),he=ne.length;if(ke==="hex"&&he%2!==0)throw new E("encoding",we,`is invalid for data of length ${he}`)}function ee(ne,we="Port",ke=!0){if(typeof ne!="number"&&typeof ne!="string"||typeof ne=="string"&&_(ne).length===0||+ne!==+ne>>>0||ne>65535||ne===0&&!ke)throw new x(we,ne,ke);return ne|0}var ge=w((ne,we)=>{if(ne!==void 0&&(ne===null||typeof ne!="object"||!("aborted"in ne)))throw new m(we,"AbortSignal",ne)}),fe=w((ne,we)=>{if(typeof ne!="function")throw new m(we,"Function",ne)}),W=w((ne,we)=>{if(typeof ne!="function"||C(ne))throw new m(we,"Function",ne)}),X=w((ne,we)=>{if(ne!==void 0)throw new m(we,"undefined",ne)});function ue(ne,we,ke){if(!c(ke,ne))throw new m(we,`('${u(ke,"|")}')`,ne)}var be=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function me(ne,we){if(typeof ne>"u"||!p(be,ne))throw new E(we,ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function _e(ne){if(typeof ne=="string")return me(ne,"hints"),ne;if(o(ne)){let we=ne.length,ke="";if(we===0)return ke;for(let he=0;he<we;he++){let je=ne[he];me(je,"hints"),ke+=je,he!==we-1&&(ke+=", ")}return ke}throw new E("hints",ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}s.exports={isInt32:T,isUint32:$,parseFileMode:U,validateArray:H,validateStringArray:Se,validateBooleanArray:Z,validateAbortSignalArray:D,validateBoolean:ie,validateBuffer:Y,validateDictionary:ce,validateEncoding:Q,validateFunction:fe,validateInt32:le,validateInteger:B,validateNumber:oe,validateObject:G,validateOneOf:K,validatePlainFunction:W,validatePort:ee,validateSignalName:se,validateString:q,validateUint32:re,validateUndefined:X,validateUnion:ue,validateAbortSignal:ge,validateLinkHeaderValue:_e}}),Lr=ve((a,s)=>{pe(),ye(),de();var o=s.exports={},c,u;function e(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=e}catch{c=e}try{typeof clearTimeout=="function"?u=clearTimeout:u=t}catch{u=t}})();function r(x){if(c===setTimeout)return setTimeout(x,0);if((c===e||!c)&&setTimeout)return c=setTimeout,setTimeout(x,0);try{return c(x,0)}catch{try{return c.call(null,x,0)}catch{return c.call(this,x,0)}}}function n(x){if(u===clearTimeout)return clearTimeout(x);if((u===t||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(x);try{return u(x)}catch{try{return u.call(null,x)}catch{return u.call(this,x)}}}var l=[],f=!1,h,p=-1;function y(){!f||!h||(f=!1,h.length?l=h.concat(l):p=-1,l.length&&b())}function b(){if(!f){var x=r(y);f=!0;for(var m=l.length;m;){for(h=l,l=[];++p<m;)h&&h[p].run();p=-1,m=l.length}h=null,f=!1,n(x)}}o.nextTick=function(x){var m=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)m[E-1]=arguments[E];l.push(new _(x,m)),l.length===1&&!f&&r(b)};function _(x,m){this.fun=x,this.array=m}_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function w(){}o.on=w,o.addListener=w,o.once=w,o.off=w,o.removeListener=w,o.removeAllListeners=w,o.emit=w,o.prependListener=w,o.prependOnceListener=w,o.listeners=function(x){return[]},o.binding=function(x){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(x){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),Jt=ve((a,s)=>{pe(),ye(),de();var{SymbolAsyncIterator:o,SymbolIterator:c,SymbolFor:u}=Je(),e=u("nodejs.stream.destroyed"),t=u("nodejs.stream.errored"),r=u("nodejs.stream.readable"),n=u("nodejs.stream.writable"),l=u("nodejs.stream.disturbed"),f=u("nodejs.webstream.isClosedPromise"),h=u("nodejs.webstream.controllerErrorFunction");function p(N,G=!1){var ce;return!!(N&&typeof N.pipe=="function"&&typeof N.on=="function"&&(!G||typeof N.pause=="function"&&typeof N.resume=="function")&&(!N._writableState||((ce=N._readableState)===null||ce===void 0?void 0:ce.readable)!==!1)&&(!N._writableState||N._readableState))}function y(N){var G;return!!(N&&typeof N.write=="function"&&typeof N.on=="function"&&(!N._readableState||((G=N._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function b(N){return!!(N&&typeof N.pipe=="function"&&N._readableState&&typeof N.on=="function"&&typeof N.write=="function")}function _(N){return N&&(N._readableState||N._writableState||typeof N.write=="function"&&typeof N.on=="function"||typeof N.pipe=="function"&&typeof N.on=="function")}function w(N){return!!(N&&!_(N)&&typeof N.pipeThrough=="function"&&typeof N.getReader=="function"&&typeof N.cancel=="function")}function x(N){return!!(N&&!_(N)&&typeof N.getWriter=="function"&&typeof N.abort=="function")}function m(N){return!!(N&&!_(N)&&typeof N.readable=="object"&&typeof N.writable=="object")}function E(N){return w(N)||x(N)||m(N)}function A(N,G){return N==null?!1:G===!0?typeof N[o]=="function":G===!1?typeof N[c]=="function":typeof N[o]=="function"||typeof N[c]=="function"}function S(N){if(!_(N))return null;let G=N._writableState,ce=N._readableState,H=G||ce;return!!(N.destroyed||N[e]||H!=null&&H.destroyed)}function M(N){if(!y(N))return null;if(N.writableEnded===!0)return!0;let G=N._writableState;return G!=null&&G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function C(N,G){if(!y(N))return null;if(N.writableFinished===!0)return!0;let ce=N._writableState;return ce!=null&&ce.errored?!1:typeof(ce==null?void 0:ce.finished)!="boolean"?null:!!(ce.finished||G===!1&&ce.ended===!0&&ce.length===0)}function I(N){if(!p(N))return null;if(N.readableEnded===!0)return!0;let G=N._readableState;return!G||G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function R(N,G){if(!p(N))return null;let ce=N._readableState;return ce!=null&&ce.errored?!1:typeof(ce==null?void 0:ce.endEmitted)!="boolean"?null:!!(ce.endEmitted||G===!1&&ce.ended===!0&&ce.length===0)}function T(N){return N&&N[r]!=null?N[r]:typeof(N==null?void 0:N.readable)!="boolean"?null:S(N)?!1:p(N)&&N.readable&&!R(N)}function $(N){return N&&N[n]!=null?N[n]:typeof(N==null?void 0:N.writable)!="boolean"?null:S(N)?!1:y(N)&&N.writable&&!M(N)}function k(N,G){return _(N)?S(N)?!0:!((G==null?void 0:G.readable)!==!1&&T(N)||(G==null?void 0:G.writable)!==!1&&$(N)):null}function L(N){var G,ce;return _(N)?N.writableErrored?N.writableErrored:(G=(ce=N._writableState)===null||ce===void 0?void 0:ce.errored)!==null&&G!==void 0?G:null:null}function U(N){var G,ce;return _(N)?N.readableErrored?N.readableErrored:(G=(ce=N._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&G!==void 0?G:null:null}function B(N){if(!_(N))return null;if(typeof N.closed=="boolean")return N.closed;let G=N._writableState,ce=N._readableState;return typeof(G==null?void 0:G.closed)=="boolean"||typeof(ce==null?void 0:ce.closed)=="boolean"?(G==null?void 0:G.closed)||(ce==null?void 0:ce.closed):typeof N._closed=="boolean"&&le(N)?N._closed:null}function le(N){return typeof N._closed=="boolean"&&typeof N._defaultKeepAlive=="boolean"&&typeof N._removedConnection=="boolean"&&typeof N._removedContLen=="boolean"}function re(N){return typeof N._sent100=="boolean"&&le(N)}function q(N){var G;return typeof N._consuming=="boolean"&&typeof N._dumped=="boolean"&&((G=N.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function oe(N){if(!_(N))return null;let G=N._writableState,ce=N._readableState,H=G||ce;return!H&&re(N)||!!(H&&H.autoDestroy&&H.emitClose&&H.closed===!1)}function K(N){var G;return!!(N&&((G=N[l])!==null&&G!==void 0?G:N.readableDidRead||N.readableAborted))}function ie(N){var G,ce,H,Se,Z,D,se,Y,Q,ee;return!!(N&&((G=(ce=(H=(Se=(Z=(D=N[t])!==null&&D!==void 0?D:N.readableErrored)!==null&&Z!==void 0?Z:N.writableErrored)!==null&&Se!==void 0?Se:(se=N._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&H!==void 0?H:(Y=N._writableState)===null||Y===void 0?void 0:Y.errorEmitted)!==null&&ce!==void 0?ce:(Q=N._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&G!==void 0?G:!((ee=N._writableState)===null||ee===void 0)&&ee.errored))}s.exports={isDestroyed:S,kIsDestroyed:e,isDisturbed:K,kIsDisturbed:l,isErrored:ie,kIsErrored:t,isReadable:T,kIsReadable:r,kIsClosedPromise:f,kControllerErrorFunction:h,kIsWritable:n,isClosed:B,isDuplexNodeStream:b,isFinished:k,isIterable:A,isReadableNodeStream:p,isReadableStream:w,isReadableEnded:I,isReadableFinished:R,isReadableErrored:U,isNodeStream:_,isWebStream:E,isWritable:$,isWritableNodeStream:y,isWritableStream:x,isWritableEnded:M,isWritableFinished:C,isWritableErrored:L,isServerRequest:q,isServerResponse:re,willEmitClose:oe,isTransformStream:m}}),fr=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{AbortError:c,codes:u}=yt(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_PREMATURE_CLOSE:t}=u,{kEmptyObject:r,once:n}=gt(),{validateAbortSignal:l,validateFunction:f,validateObject:h,validateBoolean:p}=In(),{Promise:y,PromisePrototypeThen:b,SymbolDispose:_}=Je(),{isClosed:w,isReadable:x,isReadableNodeStream:m,isReadableStream:E,isReadableFinished:A,isReadableErrored:S,isWritable:M,isWritableNodeStream:C,isWritableStream:I,isWritableFinished:R,isWritableErrored:T,isNodeStream:$,willEmitClose:k,kIsClosedPromise:L}=Jt(),U;function B(K){return K.setHeader&&typeof K.abort=="function"}var le=()=>{};function re(K,ie,N){var G,ce;if(arguments.length===2?(N=ie,ie=r):ie==null?ie=r:h(ie,"options"),f(N,"callback"),l(ie.signal,"options.signal"),N=n(N),E(K)||I(K))return q(K,ie,N);if(!$(K))throw new e("stream",["ReadableStream","WritableStream","Stream"],K);let H=(G=ie.readable)!==null&&G!==void 0?G:m(K),Se=(ce=ie.writable)!==null&&ce!==void 0?ce:C(K),Z=K._writableState,D=K._readableState,se=()=>{K.writable||ee()},Y=k(K)&&m(K)===H&&C(K)===Se,Q=R(K,!1),ee=()=>{Q=!0,K.destroyed&&(Y=!1),!(Y&&(!K.readable||H))&&(!H||ge)&&N.call(K)},ge=A(K,!1),fe=()=>{ge=!0,K.destroyed&&(Y=!1),!(Y&&(!K.writable||Se))&&(!Se||Q)&&N.call(K)},W=ne=>{N.call(K,ne)},X=w(K),ue=()=>{X=!0;let ne=T(K)||S(K);if(ne&&typeof ne!="boolean")return N.call(K,ne);if(H&&!ge&&m(K,!0)&&!A(K,!1))return N.call(K,new t);if(Se&&!Q&&!R(K,!1))return N.call(K,new t);N.call(K)},be=()=>{X=!0;let ne=T(K)||S(K);if(ne&&typeof ne!="boolean")return N.call(K,ne);N.call(K)},me=()=>{K.req.on("finish",ee)};B(K)?(K.on("complete",ee),Y||K.on("abort",ue),K.req?me():K.on("request",me)):Se&&!Z&&(K.on("end",se),K.on("close",se)),!Y&&typeof K.aborted=="boolean"&&K.on("aborted",ue),K.on("end",fe),K.on("finish",ee),ie.error!==!1&&K.on("error",W),K.on("close",ue),X?o.nextTick(ue):Z!=null&&Z.errorEmitted||D!=null&&D.errorEmitted?Y||o.nextTick(be):(!H&&(!Y||x(K))&&(Q||M(K)===!1)||!Se&&(!Y||M(K))&&(ge||x(K)===!1)||D&&K.req&&K.aborted)&&o.nextTick(be);let _e=()=>{N=le,K.removeListener("aborted",ue),K.removeListener("complete",ee),K.removeListener("abort",ue),K.removeListener("request",me),K.req&&K.req.removeListener("finish",ee),K.removeListener("end",se),K.removeListener("close",se),K.removeListener("finish",ee),K.removeListener("end",fe),K.removeListener("error",W),K.removeListener("close",ue)};if(ie.signal&&!X){let ne=()=>{let we=N;_e(),we.call(K,new c(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)o.nextTick(ne);else{U=U||gt().addAbortListener;let we=U(ie.signal,ne),ke=N;N=n((...he)=>{we[_](),ke.apply(K,he)})}}return _e}function q(K,ie,N){let G=!1,ce=le;if(ie.signal)if(ce=()=>{G=!0,N.call(K,new c(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)o.nextTick(ce);else{U=U||gt().addAbortListener;let Se=U(ie.signal,ce),Z=N;N=n((...D)=>{Se[_](),Z.apply(K,D)})}let H=(...Se)=>{G||o.nextTick(()=>N.apply(K,Se))};return b(K[L].promise,H,H),le}function oe(K,ie){var N;let G=!1;return ie===null&&(ie=r),(N=ie)!==null&&N!==void 0&&N.cleanup&&(p(ie.cleanup,"cleanup"),G=ie.cleanup),new y((ce,H)=>{let Se=re(K,ie,Z=>{G&&Se(),Z?H(Z):ce()})})}s.exports=re,s.exports.finished=oe}),rn=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{aggregateTwoErrors:c,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:e}=yt(),{Symbol:t}=Je(),{kIsDestroyed:r,isDestroyed:n,isFinished:l,isServerRequest:f}=Jt(),h=t("kDestroy"),p=t("kConstruct");function y(k,L,U){k&&(k.stack,L&&!L.errored&&(L.errored=k),U&&!U.errored&&(U.errored=k))}function b(k,L){let U=this._readableState,B=this._writableState,le=B||U;return B!=null&&B.destroyed||U!=null&&U.destroyed?(typeof L=="function"&&L(),this):(y(k,B,U),B&&(B.destroyed=!0),U&&(U.destroyed=!0),le.constructed?_(this,k,L):this.once(h,function(re){_(this,c(re,k),L)}),this)}function _(k,L,U){let B=!1;function le(re){if(B)return;B=!0;let q=k._readableState,oe=k._writableState;y(re,oe,q),oe&&(oe.closed=!0),q&&(q.closed=!0),typeof U=="function"&&U(re),re?o.nextTick(w,k,re):o.nextTick(x,k)}try{k._destroy(L||null,le)}catch(re){le(re)}}function w(k,L){m(k,L),x(k)}function x(k){let L=k._readableState,U=k._writableState;U&&(U.closeEmitted=!0),L&&(L.closeEmitted=!0),(U!=null&&U.emitClose||L!=null&&L.emitClose)&&k.emit("close")}function m(k,L){let U=k._readableState,B=k._writableState;B!=null&&B.errorEmitted||U!=null&&U.errorEmitted||(B&&(B.errorEmitted=!0),U&&(U.errorEmitted=!0),k.emit("error",L))}function E(){let k=this._readableState,L=this._writableState;k&&(k.constructed=!0,k.closed=!1,k.closeEmitted=!1,k.destroyed=!1,k.errored=null,k.errorEmitted=!1,k.reading=!1,k.ended=k.readable===!1,k.endEmitted=k.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function A(k,L,U){let B=k._readableState,le=k._writableState;if(le!=null&&le.destroyed||B!=null&&B.destroyed)return this;B!=null&&B.autoDestroy||le!=null&&le.autoDestroy?k.destroy(L):L&&(L.stack,le&&!le.errored&&(le.errored=L),B&&!B.errored&&(B.errored=L),U?o.nextTick(m,k,L):m(k,L))}function S(k,L){if(typeof k._construct!="function")return;let U=k._readableState,B=k._writableState;U&&(U.constructed=!1),B&&(B.constructed=!1),k.once(p,L),!(k.listenerCount(p)>1)&&o.nextTick(M,k)}function M(k){let L=!1;function U(B){if(L){A(k,B??new u);return}L=!0;let le=k._readableState,re=k._writableState,q=re||le;le&&(le.constructed=!0),re&&(re.constructed=!0),q.destroyed?k.emit(h,B):B?A(k,B,!0):o.nextTick(C,k)}try{k._construct(B=>{o.nextTick(U,B)})}catch(B){o.nextTick(U,B)}}function C(k){k.emit(p)}function I(k){return(k==null?void 0:k.setHeader)&&typeof k.abort=="function"}function R(k){k.emit("close")}function T(k,L){k.emit("error",L),o.nextTick(R,k)}function $(k,L){!k||n(k)||(!L&&!l(k)&&(L=new e),f(k)?(k.socket=null,k.destroy(L)):I(k)?k.abort():I(k.req)?k.req.abort():typeof k.destroy=="function"?k.destroy(L):typeof k.close=="function"?k.close():L?o.nextTick(T,k,L):o.nextTick(R,k),k.destroyed||(k[r]=!0))}s.exports={construct:S,destroyer:$,destroy:b,undestroy:E,errorOrDestroy:A}}),ga=ve((a,s)=>{pe(),ye(),de();var{ArrayIsArray:o,ObjectSetPrototypeOf:c}=Je(),{EventEmitter:u}=(jr(),Ke(ur));function e(r){u.call(this,r)}c(e.prototype,u.prototype),c(e,u),e.prototype.pipe=function(r,n){let l=this;function f(x){r.writable&&r.write(x)===!1&&l.pause&&l.pause()}l.on("data",f);function h(){l.readable&&l.resume&&l.resume()}r.on("drain",h),!r._isStdio&&(!n||n.end!==!1)&&(l.on("end",y),l.on("close",b));let p=!1;function y(){p||(p=!0,r.end())}function b(){p||(p=!0,typeof r.destroy=="function"&&r.destroy())}function _(x){w(),u.listenerCount(this,"error")===0&&this.emit("error",x)}t(l,"error",_),t(r,"error",_);function w(){l.removeListener("data",f),r.removeListener("drain",h),l.removeListener("end",y),l.removeListener("close",b),l.removeListener("error",_),r.removeListener("error",_),l.removeListener("end",w),l.removeListener("close",w),r.removeListener("close",w)}return l.on("end",w),l.on("close",w),r.on("close",w),r.emit("pipe",l),r};function t(r,n,l){if(typeof r.prependListener=="function")return r.prependListener(n,l);!r._events||!r._events[n]?r.on(n,l):o(r._events[n])?r._events[n].unshift(l):r._events[n]=[l,r._events[n]]}s.exports={Stream:e,prependListener:t}}),Ci=ve((a,s)=>{pe(),ye(),de();var{SymbolDispose:o}=Je(),{AbortError:c,codes:u}=yt(),{isNodeStream:e,isWebStream:t,kControllerErrorFunction:r}=Jt(),n=fr(),{ERR_INVALID_ARG_TYPE:l}=u,f,h=(p,y)=>{if(typeof p!="object"||!("aborted"in p))throw new l(y,"AbortSignal",p)};s.exports.addAbortSignal=function(p,y){if(h(p,"signal"),!e(y)&&!t(y))throw new l("stream",["ReadableStream","WritableStream","Stream"],y);return s.exports.addAbortSignalNoValidate(p,y)},s.exports.addAbortSignalNoValidate=function(p,y){if(typeof p!="object"||!("aborted"in p))return y;let b=e(y)?()=>{y.destroy(new c(void 0,{cause:p.reason}))}:()=>{y[r](new c(void 0,{cause:p.reason}))};if(p.aborted)b();else{f=f||gt().addAbortListener;let _=f(p,b);n(y,_[o])}return y}}),np=ve((a,s)=>{pe(),ye(),de();var{StringPrototypeSlice:o,SymbolIterator:c,TypedArrayPrototypeSet:u,Uint8Array:e}=Je(),{Buffer:t}=(at(),Ke(st)),{inspect:r}=gt();s.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(n){let l={data:n,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(n){let l={data:n,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;let n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}clear(){this.head=this.tail=null,this.length=0}join(n){if(this.length===0)return"";let l=this.head,f=""+l.data;for(;(l=l.next)!==null;)f+=n+l.data;return f}concat(n){if(this.length===0)return t.alloc(0);let l=t.allocUnsafe(n>>>0),f=this.head,h=0;for(;f;)u(l,f.data,h),h+=f.data.length,f=f.next;return l}consume(n,l){let f=this.head.data;if(n<f.length){let h=f.slice(0,n);return this.head.data=f.slice(n),h}return n===f.length?this.shift():l?this._getString(n):this._getBuffer(n)}first(){return this.head.data}*[c](){for(let n=this.head;n;n=n.next)yield n.data}_getString(n){let l="",f=this.head,h=0;do{let p=f.data;if(n>p.length)l+=p,n-=p.length;else{n===p.length?(l+=p,++h,f.next?this.head=f.next:this.head=this.tail=null):(l+=o(p,0,n),this.head=f,f.data=o(p,n));break}++h}while((f=f.next)!==null);return this.length-=h,l}_getBuffer(n){let l=t.allocUnsafe(n),f=n,h=this.head,p=0;do{let y=h.data;if(n>y.length)u(l,y,f-n),n-=y.length;else{n===y.length?(u(l,y,f-n),++p,h.next?this.head=h.next:this.head=this.tail=null):(u(l,new e(y.buffer,y.byteOffset,n),f-n),this.head=h,h.data=y.slice(n));break}++p}while((h=h.next)!==null);return this.length-=p,l}[Symbol.for("nodejs.util.inspect.custom")](n,l){return r(this,{...l,depth:0,customInspect:!1})}}}),Ri=ve((a,s)=>{pe(),ye(),de();var{MathFloor:o,NumberIsInteger:c}=Je(),{validateInteger:u}=In(),{ERR_INVALID_ARG_VALUE:e}=yt().codes,t=16*1024,r=16;function n(p,y,b){return p.highWaterMark!=null?p.highWaterMark:y?p[b]:null}function l(p){return p?r:t}function f(p,y){u(y,"value",0),p?r=y:t=y}function h(p,y,b,_){let w=n(y,_,b);if(w!=null){if(!c(w)||w<0){let x=_?`options.${b}`:"options.highWaterMark";throw new e(x,w)}return o(w)}return l(p.objectMode)}s.exports={getHighWaterMark:h,getDefaultHighWaterMark:l,setDefaultHighWaterMark:f}}),ip=ve((a,s)=>{pe(),ye(),de();var o=(at(),Ke(st)),c=o.Buffer;function u(t,r){for(var n in t)r[n]=t[n]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?s.exports=o:(u(o,a),a.Buffer=e);function e(t,r,n){return c(t,r,n)}e.prototype=Object.create(c.prototype),u(c,e),e.from=function(t,r,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return c(t,r,n)},e.alloc=function(t,r,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var l=c(t);return r!==void 0?typeof n=="string"?l.fill(r,n):l.fill(r):l.fill(0),l},e.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return c(t)},e.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}}),op=ve(a=>{pe(),ye(),de();var s=ip().Buffer,o=s.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(m){if(!m)return"utf8";for(var E;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(E)return;m=(""+m).toLowerCase(),E=!0}}function u(m){var E=c(m);if(typeof E!="string"&&(s.isEncoding===o||!o(m)))throw new Error("Unknown encoding: "+m);return E||m}a.StringDecoder=e;function e(m){this.encoding=u(m);var E;switch(this.encoding){case"utf16le":this.text=p,this.end=y,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=b,this.end=_,E=3;break;default:this.write=w,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(E)}e.prototype.write=function(m){if(m.length===0)return"";var E,A;if(this.lastNeed){if(E=this.fillLast(m),E===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<m.length?E?E+this.text(m,A):this.text(m,A):E||""},e.prototype.end=h,e.prototype.text=f,e.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function t(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function r(m,E,A){var S=E.length-1;if(S<A)return 0;var M=t(E[S]);return M>=0?(M>0&&(m.lastNeed=M-1),M):--S<A||M===-2?0:(M=t(E[S]),M>=0?(M>0&&(m.lastNeed=M-2),M):--S<A||M===-2?0:(M=t(E[S]),M>=0?(M>0&&(M===2?M=0:m.lastNeed=M-3),M):0))}function n(m,E,A){if((E[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var E=this.lastTotal-this.lastNeed,A=n(this,m);if(A!==void 0)return A;if(this.lastNeed<=m.length)return m.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,E,0,m.length),this.lastNeed-=m.length}function f(m,E){var A=r(this,m,E);if(!this.lastNeed)return m.toString("utf8",E);this.lastTotal=A;var S=m.length-(A-this.lastNeed);return m.copy(this.lastChar,0,S),m.toString("utf8",E,S)}function h(m){var E=m&&m.length?this.write(m):"";return this.lastNeed?E+"":E}function p(m,E){if((m.length-E)%2===0){var A=m.toString("utf16le",E);if(A){var S=A.charCodeAt(A.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",E,m.length-1)}function y(m){var E=m&&m.length?this.write(m):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,A)}return E}function b(m,E){var A=(m.length-E)%3;return A===0?m.toString("base64",E):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",E,m.length-A))}function _(m){var E=m&&m.length?this.write(m):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function w(m){return m.toString(this.encoding)}function x(m){return m&&m.length?this.write(m):""}}),du=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{PromisePrototypeThen:c,SymbolAsyncIterator:u,SymbolIterator:e}=Je(),{Buffer:t}=(at(),Ke(st)),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_NULL_VALUES:n}=yt().codes;function l(f,h,p){let y;if(typeof h=="string"||h instanceof t)return new f({objectMode:!0,...p,read(){this.push(h),this.push(null)}});let b;if(h&&h[u])b=!0,y=h[u]();else if(h&&h[e])b=!1,y=h[e]();else throw new r("iterable",["Iterable"],h);let _=new f({objectMode:!0,highWaterMark:1,...p}),w=!1;_._read=function(){w||(w=!0,m())},_._destroy=function(E,A){c(x(E),()=>o.nextTick(A,E),S=>o.nextTick(A,S||E))};async function x(E){let A=E!=null,S=typeof y.throw=="function";if(A&&S){let{value:M,done:C}=await y.throw(E);if(await M,C)return}if(typeof y.return=="function"){let{value:M}=await y.return();await M}}async function m(){for(;;){try{let{value:E,done:A}=b?await y.next():y.next();if(A)_.push(null);else{let S=E&&typeof E.then=="function"?await E:E;if(S===null)throw w=!1,new n;if(_.push(S))continue;w=!1}}catch(E){_.destroy(E)}break}}return _}s.exports=l}),Mi=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{ArrayPrototypeIndexOf:c,NumberIsInteger:u,NumberIsNaN:e,NumberParseInt:t,ObjectDefineProperties:r,ObjectKeys:n,ObjectSetPrototypeOf:l,Promise:f,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:y,Symbol:b}=Je();s.exports=he,he.ReadableState=ke;var{EventEmitter:_}=(jr(),Ke(ur)),{Stream:w,prependListener:x}=ga(),{Buffer:m}=(at(),Ke(st)),{addAbortSignal:E}=Ci(),A=fr(),S=gt().debuglog("stream",j=>{S=j}),M=np(),C=rn(),{getHighWaterMark:I,getDefaultHighWaterMark:R}=Ri(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:$,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:B},AbortError:le}=yt(),{validateObject:re}=In(),q=b("kPaused"),{StringDecoder:oe}=op(),K=du();l(he.prototype,w.prototype),l(he,w);var ie=()=>{},{errorOrDestroy:N}=C,G=1,ce=2,H=4,Se=8,Z=16,D=32,se=64,Y=128,Q=256,ee=512,ge=1024,fe=2048,W=4096,X=8192,ue=16384,be=32768,me=65536,_e=1<<17,ne=1<<18;function we(j){return{enumerable:!1,get(){return(this.state&j)!==0},set(z){z?this.state|=j:this.state&=~j}}}r(ke.prototype,{objectMode:we(G),ended:we(ce),endEmitted:we(H),reading:we(Se),constructed:we(Z),sync:we(D),needReadable:we(se),emittedReadable:we(Y),readableListening:we(Q),resumeScheduled:we(ee),errorEmitted:we(ge),emitClose:we(fe),autoDestroy:we(W),destroyed:we(X),closed:we(ue),closeEmitted:we(be),multiAwaitDrain:we(me),readingMore:we(_e),dataEmitted:we(ne)});function ke(j,z,xe){typeof xe!="boolean"&&(xe=z instanceof Yt()),this.state=fe|W|Z|D,j&&j.objectMode&&(this.state|=G),xe&&j&&j.readableObjectMode&&(this.state|=G),this.highWaterMark=j?I(this,j,"readableHighWaterMark",xe):R(!1),this.buffer=new M,this.length=0,this.pipes=[],this.flowing=null,this[q]=null,j&&j.emitClose===!1&&(this.state&=~fe),j&&j.autoDestroy===!1&&(this.state&=~W),this.errored=null,this.defaultEncoding=j&&j.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,j&&j.encoding&&(this.decoder=new oe(j.encoding),this.encoding=j.encoding)}function he(j){if(!(this instanceof he))return new he(j);let z=this instanceof Yt();this._readableState=new ke(j,this,z),j&&(typeof j.read=="function"&&(this._read=j.read),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.construct=="function"&&(this._construct=j.construct),j.signal&&!z&&E(j.signal,this)),w.call(this,j),C.construct(this,()=>{this._readableState.needReadable&&V(this,this._readableState)})}he.prototype.destroy=C.destroy,he.prototype._undestroy=C.undestroy,he.prototype._destroy=function(j,z){z(j)},he.prototype[_.captureRejectionSymbol]=function(j){this.destroy(j)},he.prototype[p]=function(){let j;return this.destroyed||(j=this.readableEnded?null:new le,this.destroy(j)),new f((z,xe)=>A(this,Te=>Te&&Te!==j?xe(Te):z(null)))},he.prototype.push=function(j,z){return je(this,j,z,!1)},he.prototype.unshift=function(j,z){return je(this,j,z,!0)};function je(j,z,xe,Te){S("readableAddChunk",z);let Ce=j._readableState,nt;if(!(Ce.state&G)&&(typeof z=="string"?(xe=xe||Ce.defaultEncoding,Ce.encoding!==xe&&(Te&&Ce.encoding?z=m.from(z,xe).toString(Ce.encoding):(z=m.from(z,xe),xe=""))):z instanceof m?xe="":w._isUint8Array(z)?(z=w._uint8ArrayToBuffer(z),xe=""):z!=null&&(nt=new $("chunk",["string","Buffer","Uint8Array"],z))),nt)N(j,nt);else if(z===null)Ce.state&=~Se,F(j,Ce);else if(Ce.state&G||z&&z.length>0)if(Te)if(Ce.state&H)N(j,new B);else{if(Ce.destroyed||Ce.errored)return!1;d(j,Ce,z,!0)}else if(Ce.ended)N(j,new U);else{if(Ce.destroyed||Ce.errored)return!1;Ce.state&=~Se,Ce.decoder&&!xe?(z=Ce.decoder.write(z),Ce.objectMode||z.length!==0?d(j,Ce,z,!1):V(j,Ce)):d(j,Ce,z,!1)}else Te||(Ce.state&=~Se,V(j,Ce));return!Ce.ended&&(Ce.length<Ce.highWaterMark||Ce.length===0)}function d(j,z,xe,Te){z.flowing&&z.length===0&&!z.sync&&j.listenerCount("data")>0?(z.state&me?z.awaitDrainWriters.clear():z.awaitDrainWriters=null,z.dataEmitted=!0,j.emit("data",xe)):(z.length+=z.objectMode?1:xe.length,Te?z.buffer.unshift(xe):z.buffer.push(xe),z.state&se&&J(j)),V(j,z)}he.prototype.isPaused=function(){let j=this._readableState;return j[q]===!0||j.flowing===!1},he.prototype.setEncoding=function(j){let z=new oe(j);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;let xe=this._readableState.buffer,Te="";for(let Ce of xe)Te+=z.write(Ce);return xe.clear(),Te!==""&&xe.push(Te),this._readableState.length=Te.length,this};var g=1073741824;function v(j){if(j>g)throw new L("size","<= 1GiB",j);return j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++,j}function O(j,z){return j<=0||z.length===0&&z.ended?0:z.state&G?1:e(j)?z.flowing&&z.length?z.buffer.first().length:z.length:j<=z.length?j:z.ended?z.length:0}he.prototype.read=function(j){S("read",j),j===void 0?j=NaN:u(j)||(j=t(j,10));let z=this._readableState,xe=j;if(j>z.highWaterMark&&(z.highWaterMark=v(j)),j!==0&&(z.state&=~Y),j===0&&z.needReadable&&((z.highWaterMark!==0?z.length>=z.highWaterMark:z.length>0)||z.ended))return S("read: emitReadable",z.length,z.ended),z.length===0&&z.ended?Fe(this):J(this),null;if(j=O(j,z),j===0&&z.ended)return z.length===0&&Fe(this),null;let Te=(z.state&se)!==0;if(S("need readable",Te),(z.length===0||z.length-j<z.highWaterMark)&&(Te=!0,S("length less than watermark",Te)),z.ended||z.reading||z.destroyed||z.errored||!z.constructed)Te=!1,S("reading, ended or constructing",Te);else if(Te){S("do read"),z.state|=Se|D,z.length===0&&(z.state|=se);try{this._read(z.highWaterMark)}catch(nt){N(this,nt)}z.state&=~D,z.reading||(j=O(xe,z))}let Ce;return j>0?Ce=Ne(j,z):Ce=null,Ce===null?(z.needReadable=z.length<=z.highWaterMark,j=0):(z.length-=j,z.multiAwaitDrain?z.awaitDrainWriters.clear():z.awaitDrainWriters=null),z.length===0&&(z.ended||(z.needReadable=!0),xe!==j&&z.ended&&Fe(this)),Ce!==null&&!z.errorEmitted&&!z.closeEmitted&&(z.dataEmitted=!0,this.emit("data",Ce)),Ce};function F(j,z){if(S("onEofChunk"),!z.ended){if(z.decoder){let xe=z.decoder.end();xe&&xe.length&&(z.buffer.push(xe),z.length+=z.objectMode?1:xe.length)}z.ended=!0,z.sync?J(j):(z.needReadable=!1,z.emittedReadable=!0,ae(j))}}function J(j){let z=j._readableState;S("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(S("emitReadable",z.flowing),z.emittedReadable=!0,o.nextTick(ae,j))}function ae(j){let z=j._readableState;S("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&!z.errored&&(z.length||z.ended)&&(j.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,Xe(j)}function V(j,z){!z.readingMore&&z.constructed&&(z.readingMore=!0,o.nextTick(te,j,z))}function te(j,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&z.length===0);){let xe=z.length;if(S("maybeReadMore read 0"),j.read(0),xe===z.length)break}z.readingMore=!1}he.prototype._read=function(j){throw new k("_read()")},he.prototype.pipe=function(j,z){let xe=this,Te=this._readableState;Te.pipes.length===1&&(Te.multiAwaitDrain||(Te.multiAwaitDrain=!0,Te.awaitDrainWriters=new h(Te.awaitDrainWriters?[Te.awaitDrainWriters]:[]))),Te.pipes.push(j),S("pipe count=%d opts=%j",Te.pipes.length,z);let Ce=(!z||z.end!==!1)&&j!==o.stdout&&j!==o.stderr?ht:pr;Te.endEmitted?o.nextTick(Ce):xe.once("end",Ce),j.on("unpipe",nt);function nt(Pt,Lt){S("onunpipe"),Pt===xe&&Lt&&Lt.hasUnpiped===!1&&(Lt.hasUnpiped=!0,an())}function ht(){S("onend"),j.end()}let At,sn=!1;function an(){S("cleanup"),j.removeListener("close",Tt),j.removeListener("finish",er),At&&j.removeListener("drain",At),j.removeListener("error",hr),j.removeListener("unpipe",nt),xe.removeListener("end",ht),xe.removeListener("end",pr),xe.removeListener("data",Pn),sn=!0,At&&Te.awaitDrainWriters&&(!j._writableState||j._writableState.needDrain)&&At()}function ln(){sn||(Te.pipes.length===1&&Te.pipes[0]===j?(S("false write response, pause",0),Te.awaitDrainWriters=j,Te.multiAwaitDrain=!1):Te.pipes.length>1&&Te.pipes.includes(j)&&(S("false write response, pause",Te.awaitDrainWriters.size),Te.awaitDrainWriters.add(j)),xe.pause()),At||(At=Ie(xe,j),j.on("drain",At))}xe.on("data",Pn);function Pn(Pt){S("ondata");let Lt=j.write(Pt);S("dest.write",Lt),Lt===!1&&ln()}function hr(Pt){if(S("onerror",Pt),pr(),j.removeListener("error",hr),j.listenerCount("error")===0){let Lt=j._writableState||j._readableState;Lt&&!Lt.errorEmitted?N(j,Pt):j.emit("error",Pt)}}x(j,"error",hr);function Tt(){j.removeListener("finish",er),pr()}j.once("close",Tt);function er(){S("onfinish"),j.removeListener("close",Tt),pr()}j.once("finish",er);function pr(){S("unpipe"),xe.unpipe(j)}return j.emit("pipe",xe),j.writableNeedDrain===!0?ln():Te.flowing||(S("pipe resume"),xe.resume()),j};function Ie(j,z){return function(){let xe=j._readableState;xe.awaitDrainWriters===z?(S("pipeOnDrain",1),xe.awaitDrainWriters=null):xe.multiAwaitDrain&&(S("pipeOnDrain",xe.awaitDrainWriters.size),xe.awaitDrainWriters.delete(z)),(!xe.awaitDrainWriters||xe.awaitDrainWriters.size===0)&&j.listenerCount("data")&&j.resume()}}he.prototype.unpipe=function(j){let z=this._readableState,xe={hasUnpiped:!1};if(z.pipes.length===0)return this;if(!j){let Ce=z.pipes;z.pipes=[],this.pause();for(let nt=0;nt<Ce.length;nt++)Ce[nt].emit("unpipe",this,{hasUnpiped:!1});return this}let Te=c(z.pipes,j);return Te===-1?this:(z.pipes.splice(Te,1),z.pipes.length===0&&this.pause(),j.emit("unpipe",this,xe),this)},he.prototype.on=function(j,z){let xe=w.prototype.on.call(this,j,z),Te=this._readableState;return j==="data"?(Te.readableListening=this.listenerCount("readable")>0,Te.flowing!==!1&&this.resume()):j==="readable"&&!Te.endEmitted&&!Te.readableListening&&(Te.readableListening=Te.needReadable=!0,Te.flowing=!1,Te.emittedReadable=!1,S("on readable",Te.length,Te.reading),Te.length?J(this):Te.reading||o.nextTick(Oe,this)),xe},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(j,z){let xe=w.prototype.removeListener.call(this,j,z);return j==="readable"&&o.nextTick(Pe,this),xe},he.prototype.off=he.prototype.removeListener,he.prototype.removeAllListeners=function(j){let z=w.prototype.removeAllListeners.apply(this,arguments);return(j==="readable"||j===void 0)&&o.nextTick(Pe,this),z};function Pe(j){let z=j._readableState;z.readableListening=j.listenerCount("readable")>0,z.resumeScheduled&&z[q]===!1?z.flowing=!0:j.listenerCount("data")>0?j.resume():z.readableListening||(z.flowing=null)}function Oe(j){S("readable nexttick read 0"),j.read(0)}he.prototype.resume=function(){let j=this._readableState;return j.flowing||(S("resume"),j.flowing=!j.readableListening,Le(this,j)),j[q]=!1,this};function Le(j,z){z.resumeScheduled||(z.resumeScheduled=!0,o.nextTick(Qe,j,z))}function Qe(j,z){S("resume",z.reading),z.reading||j.read(0),z.resumeScheduled=!1,j.emit("resume"),Xe(j),z.flowing&&!z.reading&&j.read(0)}he.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[q]=!0,this};function Xe(j){let z=j._readableState;for(S("flow",z.flowing);z.flowing&&j.read()!==null;);}he.prototype.wrap=function(j){let z=!1;j.on("data",Te=>{!this.push(Te)&&j.pause&&(z=!0,j.pause())}),j.on("end",()=>{this.push(null)}),j.on("error",Te=>{N(this,Te)}),j.on("close",()=>{this.destroy()}),j.on("destroy",()=>{this.destroy()}),this._read=()=>{z&&j.resume&&(z=!1,j.resume())};let xe=n(j);for(let Te=1;Te<xe.length;Te++){let Ce=xe[Te];this[Ce]===void 0&&typeof j[Ce]=="function"&&(this[Ce]=j[Ce].bind(j))}return this},he.prototype[y]=function(){return De(this)},he.prototype.iterator=function(j){return j!==void 0&&re(j,"options"),De(this,j)};function De(j,z){typeof j.read!="function"&&(j=he.wrap(j,{objectMode:!0}));let xe=Ve(j,z);return xe.stream=j,xe}async function*Ve(j,z){let xe=ie;function Te(ht){this===j?(xe(),xe=ie):xe=ht}j.on("readable",Te);let Ce,nt=A(j,{writable:!1},ht=>{Ce=ht?T(Ce,ht):null,xe(),xe=ie});try{for(;;){let ht=j.destroyed?null:j.read();if(ht!==null)yield ht;else{if(Ce)throw Ce;if(Ce===null)return;await new f(Te)}}}catch(ht){throw Ce=T(Ce,ht),Ce}finally{(Ce||(z==null?void 0:z.destroyOnReturn)!==!1)&&(Ce===void 0||j._readableState.autoDestroy)?C.destroyer(j,null):(j.off("readable",Te),nt())}}r(he.prototype,{readable:{__proto__:null,get(){let j=this._readableState;return!!j&&j.readable!==!1&&!j.destroyed&&!j.errorEmitted&&!j.endEmitted},set(j){this._readableState&&(this._readableState.readable=!!j)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(j){this._readableState&&(this._readableState.destroyed=j)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),r(ke.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[q]!==!1},set(j){this[q]=!!j}}}),he._fromList=Ne;function Ne(j,z){if(z.length===0)return null;let xe;return z.objectMode?xe=z.buffer.shift():!j||j>=z.length?(z.decoder?xe=z.buffer.join(""):z.buffer.length===1?xe=z.buffer.first():xe=z.buffer.concat(z.length),z.buffer.clear()):xe=z.buffer.consume(j,z.decoder),xe}function Fe(j){let z=j._readableState;S("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,o.nextTick(He,z,j))}function He(j,z){if(S("endReadableNT",j.endEmitted,j.length),!j.errored&&!j.closeEmitted&&!j.endEmitted&&j.length===0){if(j.endEmitted=!0,z.emit("end"),z.writable&&z.allowHalfOpen===!1)o.nextTick(Ze,z);else if(j.autoDestroy){let xe=z._writableState;(!xe||xe.autoDestroy&&(xe.finished||xe.writable===!1))&&z.destroy()}}}function Ze(j){j.writable&&!j.writableEnded&&!j.destroyed&&j.end()}he.from=function(j,z){return K(he,j,z)};var ot;function Et(){return ot===void 0&&(ot={}),ot}he.fromWeb=function(j,z){return Et().newStreamReadableFromReadableStream(j,z)},he.toWeb=function(j,z){return Et().newReadableStreamFromStreamReadable(j,z)},he.wrap=function(j,z){var xe,Te;return new he({objectMode:(xe=(Te=j.readableObjectMode)!==null&&Te!==void 0?Te:j.objectMode)!==null&&xe!==void 0?xe:!0,...z,destroy(Ce,nt){C.destroyer(j,Ce),nt(Ce)}}).wrap(j)}}),ma=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{ArrayPrototypeSlice:c,Error:u,FunctionPrototypeSymbolHasInstance:e,ObjectDefineProperty:t,ObjectDefineProperties:r,ObjectSetPrototypeOf:n,StringPrototypeToLowerCase:l,Symbol:f,SymbolHasInstance:h}=Je();s.exports=re,re.WritableState=B;var{EventEmitter:p}=(jr(),Ke(ur)),y=ga().Stream,{Buffer:b}=(at(),Ke(st)),_=rn(),{addAbortSignal:w}=Ci(),{getHighWaterMark:x,getDefaultHighWaterMark:m}=Ri(),{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:M,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:$}=yt().codes,{errorOrDestroy:k}=_;n(re.prototype,y.prototype),n(re,y);function L(){}var U=f("kOnFinished");function B(W,X,ue){typeof ue!="boolean"&&(ue=X instanceof Yt()),this.objectMode=!!(W&&W.objectMode),ue&&(this.objectMode=this.objectMode||!!(W&&W.writableObjectMode)),this.highWaterMark=W?x(this,W,"writableHighWaterMark",ue):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let be=!!(W&&W.decodeStrings===!1);this.decodeStrings=!be,this.defaultEncoding=W&&W.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=N.bind(void 0,X),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,le(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!W||W.emitClose!==!1,this.autoDestroy=!W||W.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function le(W){W.buffered=[],W.bufferedIndex=0,W.allBuffers=!0,W.allNoop=!0}B.prototype.getBuffer=function(){return c(this.buffered,this.bufferedIndex)},t(B.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function re(W){let X=this instanceof Yt();if(!X&&!e(re,this))return new re(W);this._writableState=new B(W,this,X),W&&(typeof W.write=="function"&&(this._write=W.write),typeof W.writev=="function"&&(this._writev=W.writev),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.final=="function"&&(this._final=W.final),typeof W.construct=="function"&&(this._construct=W.construct),W.signal&&w(W.signal,this)),y.call(this,W),_.construct(this,()=>{let ue=this._writableState;ue.writing||Se(this,ue),Y(this,ue)})}t(re,h,{__proto__:null,value:function(W){return e(this,W)?!0:this!==re?!1:W&&W._writableState instanceof B}}),re.prototype.pipe=function(){k(this,new M)};function q(W,X,ue,be){let me=W._writableState;if(typeof ue=="function")be=ue,ue=me.defaultEncoding;else{if(!ue)ue=me.defaultEncoding;else if(ue!=="buffer"&&!b.isEncoding(ue))throw new $(ue);typeof be!="function"&&(be=L)}if(X===null)throw new R;if(!me.objectMode)if(typeof X=="string")me.decodeStrings!==!1&&(X=b.from(X,ue),ue="buffer");else if(X instanceof b)ue="buffer";else if(y._isUint8Array(X))X=y._uint8ArrayToBuffer(X),ue="buffer";else throw new E("chunk",["string","Buffer","Uint8Array"],X);let _e;return me.ending?_e=new T:me.destroyed&&(_e=new C("write")),_e?(o.nextTick(be,_e),k(W,_e,!0),_e):(me.pendingcb++,oe(W,me,X,ue,be))}re.prototype.write=function(W,X,ue){return q(this,W,X,ue)===!0},re.prototype.cork=function(){this._writableState.corked++},re.prototype.uncork=function(){let W=this._writableState;W.corked&&(W.corked--,W.writing||Se(this,W))},re.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=l(W)),!b.isEncoding(W))throw new $(W);return this._writableState.defaultEncoding=W,this};function oe(W,X,ue,be,me){let _e=X.objectMode?1:ue.length;X.length+=_e;let ne=X.length<X.highWaterMark;return ne||(X.needDrain=!0),X.writing||X.corked||X.errored||!X.constructed?(X.buffered.push({chunk:ue,encoding:be,callback:me}),X.allBuffers&&be!=="buffer"&&(X.allBuffers=!1),X.allNoop&&me!==L&&(X.allNoop=!1)):(X.writelen=_e,X.writecb=me,X.writing=!0,X.sync=!0,W._write(ue,be,X.onwrite),X.sync=!1),ne&&!X.errored&&!X.destroyed}function K(W,X,ue,be,me,_e,ne){X.writelen=be,X.writecb=ne,X.writing=!0,X.sync=!0,X.destroyed?X.onwrite(new C("write")):ue?W._writev(me,X.onwrite):W._write(me,_e,X.onwrite),X.sync=!1}function ie(W,X,ue,be){--X.pendingcb,be(ue),H(X),k(W,ue)}function N(W,X){let ue=W._writableState,be=ue.sync,me=ue.writecb;if(typeof me!="function"){k(W,new S);return}ue.writing=!1,ue.writecb=null,ue.length-=ue.writelen,ue.writelen=0,X?(X.stack,ue.errored||(ue.errored=X),W._readableState&&!W._readableState.errored&&(W._readableState.errored=X),be?o.nextTick(ie,W,ue,X,me):ie(W,ue,X,me)):(ue.buffered.length>ue.bufferedIndex&&Se(W,ue),be?ue.afterWriteTickInfo!==null&&ue.afterWriteTickInfo.cb===me?ue.afterWriteTickInfo.count++:(ue.afterWriteTickInfo={count:1,cb:me,stream:W,state:ue},o.nextTick(G,ue.afterWriteTickInfo)):ce(W,ue,1,me))}function G({stream:W,state:X,count:ue,cb:be}){return X.afterWriteTickInfo=null,ce(W,X,ue,be)}function ce(W,X,ue,be){for(!X.ending&&!W.destroyed&&X.length===0&&X.needDrain&&(X.needDrain=!1,W.emit("drain"));ue-- >0;)X.pendingcb--,be();X.destroyed&&H(X),Y(W,X)}function H(W){if(W.writing)return;for(let me=W.bufferedIndex;me<W.buffered.length;++me){var X;let{chunk:_e,callback:ne}=W.buffered[me],we=W.objectMode?1:_e.length;W.length-=we,ne((X=W.errored)!==null&&X!==void 0?X:new C("write"))}let ue=W[U].splice(0);for(let me=0;me<ue.length;me++){var be;ue[me]((be=W.errored)!==null&&be!==void 0?be:new C("end"))}le(W)}function Se(W,X){if(X.corked||X.bufferProcessing||X.destroyed||!X.constructed)return;let{buffered:ue,bufferedIndex:be,objectMode:me}=X,_e=ue.length-be;if(!_e)return;let ne=be;if(X.bufferProcessing=!0,_e>1&&W._writev){X.pendingcb-=_e-1;let we=X.allNoop?L:he=>{for(let je=ne;je<ue.length;++je)ue[je].callback(he)},ke=X.allNoop&&ne===0?ue:c(ue,ne);ke.allBuffers=X.allBuffers,K(W,X,!0,X.length,ke,"",we),le(X)}else{do{let{chunk:we,encoding:ke,callback:he}=ue[ne];ue[ne++]=null;let je=me?1:we.length;K(W,X,!1,je,we,ke,he)}while(ne<ue.length&&!X.writing);ne===ue.length?le(X):ne>256?(ue.splice(0,ne),X.bufferedIndex=0):X.bufferedIndex=ne}X.bufferProcessing=!1}re.prototype._write=function(W,X,ue){if(this._writev)this._writev([{chunk:W,encoding:X}],ue);else throw new A("_write()")},re.prototype._writev=null,re.prototype.end=function(W,X,ue){let be=this._writableState;typeof W=="function"?(ue=W,W=null,X=null):typeof X=="function"&&(ue=X,X=null);let me;if(W!=null){let _e=q(this,W,X);_e instanceof u&&(me=_e)}return be.corked&&(be.corked=1,this.uncork()),me||(!be.errored&&!be.ending?(be.ending=!0,Y(this,be,!0),be.ended=!0):be.finished?me=new I("end"):be.destroyed&&(me=new C("end"))),typeof ue=="function"&&(me||be.finished?o.nextTick(ue,me):be[U].push(ue)),this};function Z(W){return W.ending&&!W.destroyed&&W.constructed&&W.length===0&&!W.errored&&W.buffered.length===0&&!W.finished&&!W.writing&&!W.errorEmitted&&!W.closeEmitted}function D(W,X){let ue=!1;function be(me){if(ue){k(W,me??S());return}if(ue=!0,X.pendingcb--,me){let _e=X[U].splice(0);for(let ne=0;ne<_e.length;ne++)_e[ne](me);k(W,me,X.sync)}else Z(X)&&(X.prefinished=!0,W.emit("prefinish"),X.pendingcb++,o.nextTick(Q,W,X))}X.sync=!0,X.pendingcb++;try{W._final(be)}catch(me){be(me)}X.sync=!1}function se(W,X){!X.prefinished&&!X.finalCalled&&(typeof W._final=="function"&&!X.destroyed?(X.finalCalled=!0,D(W,X)):(X.prefinished=!0,W.emit("prefinish")))}function Y(W,X,ue){Z(X)&&(se(W,X),X.pendingcb===0&&(ue?(X.pendingcb++,o.nextTick((be,me)=>{Z(me)?Q(be,me):me.pendingcb--},W,X)):Z(X)&&(X.pendingcb++,Q(W,X))))}function Q(W,X){X.pendingcb--,X.finished=!0;let ue=X[U].splice(0);for(let be=0;be<ue.length;be++)ue[be]();if(W.emit("finish"),X.autoDestroy){let be=W._readableState;(!be||be.autoDestroy&&(be.endEmitted||be.readable===!1))&&W.destroy()}}r(re.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(W){this._writableState&&(this._writableState.destroyed=W)}},writable:{__proto__:null,get(){let W=this._writableState;return!!W&&W.writable!==!1&&!W.destroyed&&!W.errored&&!W.ending&&!W.ended},set(W){this._writableState&&(this._writableState.writable=!!W)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let W=this._writableState;return W?!W.destroyed&&!W.ending&&W.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ee=_.destroy;re.prototype.destroy=function(W,X){let ue=this._writableState;return!ue.destroyed&&(ue.bufferedIndex<ue.buffered.length||ue[U].length)&&o.nextTick(H,ue),ee.call(this,W,X),this},re.prototype._undestroy=_.undestroy,re.prototype._destroy=function(W,X){X(W)},re.prototype[p.captureRejectionSymbol]=function(W){this.destroy(W)};var ge;function fe(){return ge===void 0&&(ge={}),ge}re.fromWeb=function(W,X){return fe().newStreamWritableFromWritableStream(W,X)},re.toWeb=function(W){return fe().newWritableStreamFromStreamWritable(W)}}),sp=ve((a,s)=>{pe(),ye(),de();var o=Lr(),c=(at(),Ke(st)),{isReadable:u,isWritable:e,isIterable:t,isNodeStream:r,isReadableNodeStream:n,isWritableNodeStream:l,isDuplexNodeStream:f,isReadableStream:h,isWritableStream:p}=Jt(),y=fr(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:_,ERR_INVALID_RETURN_VALUE:w}}=yt(),{destroyer:x}=rn(),m=Yt(),E=Mi(),A=ma(),{createDeferredPromise:S}=gt(),M=du(),C=globalThis.Blob||c.Blob,I=typeof C<"u"?function(U){return U instanceof C}:function(U){return!1},R=globalThis.AbortController||En().AbortController,{FunctionPrototypeCall:T}=Je(),$=class extends m{constructor(U){super(U),(U==null?void 0:U.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(U==null?void 0:U.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};s.exports=function U(B,le){if(f(B))return B;if(n(B))return L({readable:B});if(l(B))return L({writable:B});if(r(B))return L({writable:!1,readable:!1});if(h(B))return L({readable:E.fromWeb(B)});if(p(B))return L({writable:A.fromWeb(B)});if(typeof B=="function"){let{value:q,write:oe,final:K,destroy:ie}=k(B);if(t(q))return M($,q,{objectMode:!0,write:oe,final:K,destroy:ie});let N=q==null?void 0:q.then;if(typeof N=="function"){let G,ce=T(N,q,H=>{if(H!=null)throw new w("nully","body",H)},H=>{x(G,H)});return G=new $({objectMode:!0,readable:!1,write:oe,final(H){K(async()=>{try{await ce,o.nextTick(H,null)}catch(Se){o.nextTick(H,Se)}})},destroy:ie})}throw new w("Iterable, AsyncIterable or AsyncFunction",le,q)}if(I(B))return U(B.arrayBuffer());if(t(B))return M($,B,{objectMode:!0,writable:!1});if(h(B==null?void 0:B.readable)&&p(B==null?void 0:B.writable))return $.fromWeb(B);if(typeof(B==null?void 0:B.writable)=="object"||typeof(B==null?void 0:B.readable)=="object"){let q=B!=null&&B.readable?n(B==null?void 0:B.readable)?B==null?void 0:B.readable:U(B.readable):void 0,oe=B!=null&&B.writable?l(B==null?void 0:B.writable)?B==null?void 0:B.writable:U(B.writable):void 0;return L({readable:q,writable:oe})}let re=B==null?void 0:B.then;if(typeof re=="function"){let q;return T(re,B,oe=>{oe!=null&&q.push(oe),q.push(null)},oe=>{x(q,oe)}),q=new $({objectMode:!0,writable:!1,read(){}})}throw new _(le,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],B)};function k(U){let{promise:B,resolve:le}=S(),re=new R,q=re.signal;return{value:U(async function*(){for(;;){let oe=B;B=null;let{chunk:K,done:ie,cb:N}=await oe;if(o.nextTick(N),ie)return;if(q.aborted)throw new b(void 0,{cause:q.reason});({promise:B,resolve:le}=S()),yield K}}(),{signal:q}),write(oe,K,ie){let N=le;le=null,N({chunk:oe,done:!1,cb:ie})},final(oe){let K=le;le=null,K({done:!0,cb:oe})},destroy(oe,K){re.abort(),K(oe)}}}function L(U){let B=U.readable&&typeof U.readable.read!="function"?E.wrap(U.readable):U.readable,le=U.writable,re=!!u(B),q=!!e(le),oe,K,ie,N,G;function ce(H){let Se=N;N=null,Se?Se(H):H&&G.destroy(H)}return G=new $({readableObjectMode:!!(B!=null&&B.readableObjectMode),writableObjectMode:!!(le!=null&&le.writableObjectMode),readable:re,writable:q}),q&&(y(le,H=>{q=!1,H&&x(B,H),ce(H)}),G._write=function(H,Se,Z){le.write(H,Se)?Z():oe=Z},G._final=function(H){le.end(),K=H},le.on("drain",function(){if(oe){let H=oe;oe=null,H()}}),le.on("finish",function(){if(K){let H=K;K=null,H()}})),re&&(y(B,H=>{re=!1,H&&x(B,H),ce(H)}),B.on("readable",function(){if(ie){let H=ie;ie=null,H()}}),B.on("end",function(){G.push(null)}),G._read=function(){for(;;){let H=B.read();if(H===null){ie=G._read;return}if(!G.push(H))return}}),G._destroy=function(H,Se){!H&&N!==null&&(H=new b),ie=null,oe=null,K=null,N===null?Se(H):(N=Se,x(le,H),x(B,H))},G}}),Yt=ve((a,s)=>{pe(),ye(),de();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:c,ObjectKeys:u,ObjectSetPrototypeOf:e}=Je();s.exports=n;var t=Mi(),r=ma();e(n.prototype,t.prototype),e(n,t);{let p=u(r.prototype);for(let y=0;y<p.length;y++){let b=p[y];n.prototype[b]||(n.prototype[b]=r.prototype[b])}}function n(p){if(!(this instanceof n))return new n(p);t.call(this,p),r.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(n.prototype,{writable:{__proto__:null,...c(r.prototype,"writable")},writableHighWaterMark:{__proto__:null,...c(r.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...c(r.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...c(r.prototype,"writableBuffer")},writableLength:{__proto__:null,...c(r.prototype,"writableLength")},writableFinished:{__proto__:null,...c(r.prototype,"writableFinished")},writableCorked:{__proto__:null,...c(r.prototype,"writableCorked")},writableEnded:{__proto__:null,...c(r.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...c(r.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var l;function f(){return l===void 0&&(l={}),l}n.fromWeb=function(p,y){return f().newStreamDuplexFromReadableWritablePair(p,y)},n.toWeb=function(p){return f().newReadableWritablePairFromDuplex(p)};var h;n.from=function(p){return h||(h=sp()),h(p,"body")}}),yu=ve((a,s)=>{pe(),ye(),de();var{ObjectSetPrototypeOf:o,Symbol:c}=Je();s.exports=n;var{ERR_METHOD_NOT_IMPLEMENTED:u}=yt().codes,e=Yt(),{getHighWaterMark:t}=Ri();o(n.prototype,e.prototype),o(n,e);var r=c("kCallback");function n(h){if(!(this instanceof n))return new n(h);let p=h?t(this,h,"readableHighWaterMark",!0):null;p===0&&(h={...h,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:h.writableHighWaterMark||0}),e.call(this,h),this._readableState.sync=!1,this[r]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",f)}function l(h){typeof this._flush=="function"&&!this.destroyed?this._flush((p,y)=>{if(p){h?h(p):this.destroy(p);return}y!=null&&this.push(y),this.push(null),h&&h()}):(this.push(null),h&&h())}function f(){this._final!==l&&l.call(this)}n.prototype._final=l,n.prototype._transform=function(h,p,y){throw new u("_transform()")},n.prototype._write=function(h,p,y){let b=this._readableState,_=this._writableState,w=b.length;this._transform(h,p,(x,m)=>{if(x){y(x);return}m!=null&&this.push(m),_.ended||w===b.length||b.length<b.highWaterMark?y():this[r]=y})},n.prototype._read=function(){if(this[r]){let h=this[r];this[r]=null,h()}}}),gu=ve((a,s)=>{pe(),ye(),de();var{ObjectSetPrototypeOf:o}=Je();s.exports=u;var c=yu();o(u.prototype,c.prototype),o(u,c);function u(e){if(!(this instanceof u))return new u(e);c.call(this,e)}u.prototype._transform=function(e,t,r){r(null,e)}}),ba=ve((a,s)=>{pe(),ye(),de();var o=Lr(),{ArrayIsArray:c,Promise:u,SymbolAsyncIterator:e,SymbolDispose:t}=Je(),r=fr(),{once:n}=gt(),l=rn(),f=Yt(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:x}=yt(),{validateFunction:m,validateAbortSignal:E}=In(),{isIterable:A,isReadable:S,isReadableNodeStream:M,isNodeStream:C,isTransformStream:I,isWebStream:R,isReadableStream:T,isReadableFinished:$}=Jt(),k=globalThis.AbortController||En().AbortController,L,U,B;function le(H,Se,Z){let D=!1;H.on("close",()=>{D=!0});let se=r(H,{readable:Se,writable:Z},Y=>{D=!Y});return{destroy:Y=>{D||(D=!0,l.destroyer(H,Y||new _("pipe")))},cleanup:se}}function re(H){return m(H[H.length-1],"streams[stream.length - 1]"),H.pop()}function q(H){if(A(H))return H;if(M(H))return oe(H);throw new p("val",["Readable","Iterable","AsyncIterable"],H)}async function*oe(H){U||(U=Mi()),yield*U.prototype[e].call(H)}async function K(H,Se,Z,{end:D}){let se,Y=null,Q=fe=>{if(fe&&(se=fe),Y){let W=Y;Y=null,W()}},ee=()=>new u((fe,W)=>{se?W(se):Y=()=>{se?W(se):fe()}});Se.on("drain",Q);let ge=r(Se,{readable:!1},Q);try{Se.writableNeedDrain&&await ee();for await(let fe of H)Se.write(fe)||await ee();D&&(Se.end(),await ee()),Z()}catch(fe){Z(se!==fe?h(se,fe):fe)}finally{ge(),Se.off("drain",Q)}}async function ie(H,Se,Z,{end:D}){I(Se)&&(Se=Se.writable);let se=Se.getWriter();try{for await(let Y of H)await se.ready,se.write(Y).catch(()=>{});await se.ready,D&&await se.close(),Z()}catch(Y){try{await se.abort(Y),Z(Y)}catch(Q){Z(Q)}}}function N(...H){return G(H,n(re(H)))}function G(H,Se,Z){if(H.length===1&&c(H[0])&&(H=H[0]),H.length<2)throw new b("streams");let D=new k,se=D.signal,Y=Z==null?void 0:Z.signal,Q=[];E(Y,"options.signal");function ee(){me(new x)}B=B||gt().addAbortListener;let ge;Y&&(ge=B(Y,ee));let fe,W,X=[],ue=0;function be(ke){me(ke,--ue===0)}function me(ke,he){var je;if(ke&&(!fe||fe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(fe=ke),!(!fe&&!he)){for(;X.length;)X.shift()(fe);(je=ge)===null||je===void 0||je[t](),D.abort(),he&&(fe||Q.forEach(d=>d()),o.nextTick(Se,fe,W))}}let _e;for(let ke=0;ke<H.length;ke++){let he=H[ke],je=ke<H.length-1,d=ke>0,g=je||(Z==null?void 0:Z.end)!==!1,v=ke===H.length-1;if(C(he)){let O=function(F){F&&F.name!=="AbortError"&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"&&be(F)};if(g){let{destroy:F,cleanup:J}=le(he,je,d);X.push(F),S(he)&&v&&Q.push(J)}he.on("error",O),S(he)&&v&&Q.push(()=>{he.removeListener("error",O)})}if(ke===0)if(typeof he=="function"){if(_e=he({signal:se}),!A(_e))throw new y("Iterable, AsyncIterable or Stream","source",_e)}else A(he)||M(he)||I(he)?_e=he:_e=f.from(he);else if(typeof he=="function"){if(I(_e)){var ne;_e=q((ne=_e)===null||ne===void 0?void 0:ne.readable)}else _e=q(_e);if(_e=he(_e,{signal:se}),je){if(!A(_e,!0))throw new y("AsyncIterable",`transform[${ke-1}]`,_e)}else{var we;L||(L=gu());let O=new L({objectMode:!0}),F=(we=_e)===null||we===void 0?void 0:we.then;if(typeof F=="function")ue++,F.call(_e,V=>{W=V,V!=null&&O.write(V),g&&O.end(),o.nextTick(be)},V=>{O.destroy(V),o.nextTick(be,V)});else if(A(_e,!0))ue++,K(_e,O,be,{end:g});else if(T(_e)||I(_e)){let V=_e.readable||_e;ue++,K(V,O,be,{end:g})}else throw new y("AsyncIterable or Promise","destination",_e);_e=O;let{destroy:J,cleanup:ae}=le(_e,!1,!0);X.push(J),v&&Q.push(ae)}}else if(C(he)){if(M(_e)){ue+=2;let O=ce(_e,he,be,{end:g});S(he)&&v&&Q.push(O)}else if(I(_e)||T(_e)){let O=_e.readable||_e;ue++,K(O,he,be,{end:g})}else if(A(_e))ue++,K(_e,he,be,{end:g});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_e);_e=he}else if(R(he)){if(M(_e))ue++,ie(q(_e),he,be,{end:g});else if(T(_e)||A(_e))ue++,ie(_e,he,be,{end:g});else if(I(_e))ue++,ie(_e.readable,he,be,{end:g});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_e);_e=he}else _e=f.from(he)}return(se!=null&&se.aborted||Y!=null&&Y.aborted)&&o.nextTick(ee),_e}function ce(H,Se,Z,{end:D}){let se=!1;if(Se.on("close",()=>{se||Z(new w)}),H.pipe(Se,{end:!1}),D){let Y=function(){se=!0,Se.end()};$(H)?o.nextTick(Y):H.once("end",Y)}else Z();return r(H,{readable:!0,writable:!1},Y=>{let Q=H._readableState;Y&&Y.code==="ERR_STREAM_PREMATURE_CLOSE"&&Q&&Q.ended&&!Q.errored&&!Q.errorEmitted?H.once("end",Z).once("error",Z):Z(Y)}),r(Se,{readable:!1,writable:!0},Z)}s.exports={pipelineImpl:G,pipeline:N}}),mu=ve((a,s)=>{pe(),ye(),de();var{pipeline:o}=ba(),c=Yt(),{destroyer:u}=rn(),{isNodeStream:e,isReadable:t,isWritable:r,isWebStream:n,isTransformStream:l,isWritableStream:f,isReadableStream:h}=Jt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:y,ERR_MISSING_ARGS:b}}=yt(),_=fr();s.exports=function(...w){if(w.length===0)throw new b("streams");if(w.length===1)return c.from(w[0]);let x=[...w];if(typeof w[0]=="function"&&(w[0]=c.from(w[0])),typeof w[w.length-1]=="function"){let k=w.length-1;w[k]=c.from(w[k])}for(let k=0;k<w.length;++k)if(!(!e(w[k])&&!n(w[k]))){if(k<w.length-1&&!(t(w[k])||h(w[k])||l(w[k])))throw new y(`streams[${k}]`,x[k],"must be readable");if(k>0&&!(r(w[k])||f(w[k])||l(w[k])))throw new y(`streams[${k}]`,x[k],"must be writable")}let m,E,A,S,M;function C(k){let L=S;S=null,L?L(k):k?M.destroy(k):!$&&!T&&M.destroy()}let I=w[0],R=o(w,C),T=!!(r(I)||f(I)||l(I)),$=!!(t(R)||h(R)||l(R));if(M=new c({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(R!=null&&R.readableObjectMode),writable:T,readable:$}),T){if(e(I))M._write=function(L,U,B){I.write(L,U)?B():m=B},M._final=function(L){I.end(),E=L},I.on("drain",function(){if(m){let L=m;m=null,L()}});else if(n(I)){let L=(l(I)?I.writable:I).getWriter();M._write=async function(U,B,le){try{await L.ready,L.write(U).catch(()=>{}),le()}catch(re){le(re)}},M._final=async function(U){try{await L.ready,L.close().catch(()=>{}),E=U}catch(B){U(B)}}}let k=l(R)?R.readable:R;_(k,()=>{if(E){let L=E;E=null,L()}})}if($){if(e(R))R.on("readable",function(){if(A){let k=A;A=null,k()}}),R.on("end",function(){M.push(null)}),M._read=function(){for(;;){let k=R.read();if(k===null){A=M._read;return}if(!M.push(k))return}};else if(n(R)){let k=(l(R)?R.readable:R).getReader();M._read=async function(){for(;;)try{let{value:L,done:U}=await k.read();if(!M.push(L))return;if(U){M.push(null);return}}catch{return}}}}return M._destroy=function(k,L){!k&&S!==null&&(k=new p),A=null,m=null,E=null,S===null?L(k):(S=L,e(R)&&u(R,k))},M}}),ap=ve((a,s)=>{pe(),ye(),de();var o=globalThis.AbortController||En().AbortController,{codes:{ERR_INVALID_ARG_VALUE:c,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:e,ERR_OUT_OF_RANGE:t},AbortError:r}=yt(),{validateAbortSignal:n,validateInteger:l,validateObject:f}=In(),h=Je().Symbol("kWeak"),p=Je().Symbol("kResistStopPropagation"),{finished:y}=fr(),b=mu(),{addAbortSignalNoValidate:_}=Ci(),{isWritable:w,isNodeStream:x}=Jt(),{deprecate:m}=gt(),{ArrayPrototypePush:E,Boolean:A,MathFloor:S,Number:M,NumberIsNaN:C,Promise:I,PromiseReject:R,PromiseResolve:T,PromisePrototypeThen:$,Symbol:k}=Je(),L=k("kEmpty"),U=k("kEof");function B(Y,Q){if(Q!=null&&f(Q,"options"),(Q==null?void 0:Q.signal)!=null&&n(Q.signal,"options.signal"),x(Y)&&!w(Y))throw new c("stream",Y,"must be writable");let ee=b(this,Y);return Q!=null&&Q.signal&&_(Q.signal,ee),ee}function le(Y,Q){if(typeof Y!="function")throw new u("fn",["Function","AsyncFunction"],Y);Q!=null&&f(Q,"options"),(Q==null?void 0:Q.signal)!=null&&n(Q.signal,"options.signal");let ee=1;(Q==null?void 0:Q.concurrency)!=null&&(ee=S(Q.concurrency));let ge=ee-1;return(Q==null?void 0:Q.highWaterMark)!=null&&(ge=S(Q.highWaterMark)),l(ee,"options.concurrency",1),l(ge,"options.highWaterMark",0),ge+=ee,(async function*(){let fe=gt().AbortSignalAny([Q==null?void 0:Q.signal].filter(A)),W=this,X=[],ue={signal:fe},be,me,_e=!1,ne=0;function we(){_e=!0,ke()}function ke(){ne-=1,he()}function he(){me&&!_e&&ne<ee&&X.length<ge&&(me(),me=null)}async function je(){try{for await(let d of W){if(_e)return;if(fe.aborted)throw new r;try{if(d=Y(d,ue),d===L)continue;d=T(d)}catch(g){d=R(g)}ne+=1,$(d,ke,we),X.push(d),be&&(be(),be=null),!_e&&(X.length>=ge||ne>=ee)&&await new I(g=>{me=g})}X.push(U)}catch(d){let g=R(d);$(g,ke,we),X.push(g)}finally{_e=!0,be&&(be(),be=null)}}je();try{for(;;){for(;X.length>0;){let d=await X[0];if(d===U)return;if(fe.aborted)throw new r;d!==L&&(yield d),X.shift(),he()}await new I(d=>{be=d})}}finally{_e=!0,me&&(me(),me=null)}}).call(this)}function re(Y=void 0){return Y!=null&&f(Y,"options"),(Y==null?void 0:Y.signal)!=null&&n(Y.signal,"options.signal"),(async function*(){let Q=0;for await(let ge of this){var ee;if(Y!=null&&(ee=Y.signal)!==null&&ee!==void 0&&ee.aborted)throw new r({cause:Y.signal.reason});yield[Q++,ge]}}).call(this)}async function q(Y,Q=void 0){for await(let ee of N.call(this,Y,Q))return!0;return!1}async function oe(Y,Q=void 0){if(typeof Y!="function")throw new u("fn",["Function","AsyncFunction"],Y);return!await q.call(this,async(...ee)=>!await Y(...ee),Q)}async function K(Y,Q){for await(let ee of N.call(this,Y,Q))return ee}async function ie(Y,Q){if(typeof Y!="function")throw new u("fn",["Function","AsyncFunction"],Y);async function ee(ge,fe){return await Y(ge,fe),L}for await(let ge of le.call(this,ee,Q));}function N(Y,Q){if(typeof Y!="function")throw new u("fn",["Function","AsyncFunction"],Y);async function ee(ge,fe){return await Y(ge,fe)?ge:L}return le.call(this,ee,Q)}var G=class extends e{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ce(Y,Q,ee){var ge;if(typeof Y!="function")throw new u("reducer",["Function","AsyncFunction"],Y);ee!=null&&f(ee,"options"),(ee==null?void 0:ee.signal)!=null&&n(ee.signal,"options.signal");let fe=arguments.length>1;if(ee!=null&&(ge=ee.signal)!==null&&ge!==void 0&&ge.aborted){let me=new r(void 0,{cause:ee.signal.reason});throw this.once("error",()=>{}),await y(this.destroy(me)),me}let W=new o,X=W.signal;if(ee!=null&&ee.signal){let me={once:!0,[h]:this,[p]:!0};ee.signal.addEventListener("abort",()=>W.abort(),me)}let ue=!1;try{for await(let me of this){var be;if(ue=!0,ee!=null&&(be=ee.signal)!==null&&be!==void 0&&be.aborted)throw new r;fe?Q=await Y(Q,me,{signal:X}):(Q=me,fe=!0)}if(!ue&&!fe)throw new G}finally{W.abort()}return Q}async function H(Y){Y!=null&&f(Y,"options"),(Y==null?void 0:Y.signal)!=null&&n(Y.signal,"options.signal");let Q=[];for await(let ge of this){var ee;if(Y!=null&&(ee=Y.signal)!==null&&ee!==void 0&&ee.aborted)throw new r(void 0,{cause:Y.signal.reason});E(Q,ge)}return Q}function Se(Y,Q){let ee=le.call(this,Y,Q);return(async function*(){for await(let ge of ee)yield*ge}).call(this)}function Z(Y){if(Y=M(Y),C(Y))return 0;if(Y<0)throw new t("number",">= 0",Y);return Y}function D(Y,Q=void 0){return Q!=null&&f(Q,"options"),(Q==null?void 0:Q.signal)!=null&&n(Q.signal,"options.signal"),Y=Z(Y),(async function*(){var ee;if(Q!=null&&(ee=Q.signal)!==null&&ee!==void 0&&ee.aborted)throw new r;for await(let fe of this){var ge;if(Q!=null&&(ge=Q.signal)!==null&&ge!==void 0&&ge.aborted)throw new r;Y--<=0&&(yield fe)}}).call(this)}function se(Y,Q=void 0){return Q!=null&&f(Q,"options"),(Q==null?void 0:Q.signal)!=null&&n(Q.signal,"options.signal"),Y=Z(Y),(async function*(){var ee;if(Q!=null&&(ee=Q.signal)!==null&&ee!==void 0&&ee.aborted)throw new r;for await(let fe of this){var ge;if(Q!=null&&(ge=Q.signal)!==null&&ge!==void 0&&ge.aborted)throw new r;if(Y-- >0&&(yield fe),Y<=0)return}}).call(this)}s.exports.streamReturningOperators={asIndexedPairs:m(re,"readable.asIndexedPairs will be removed in a future version."),drop:D,filter:N,flatMap:Se,map:le,take:se,compose:B},s.exports.promiseReturningOperators={every:oe,forEach:ie,reduce:ce,toArray:H,some:q,find:K}}),bu=ve((a,s)=>{pe(),ye(),de();var{ArrayPrototypePop:o,Promise:c}=Je(),{isIterable:u,isNodeStream:e,isWebStream:t}=Jt(),{pipelineImpl:r}=ba(),{finished:n}=fr();vu();function l(...f){return new c((h,p)=>{let y,b,_=f[f.length-1];if(_&&typeof _=="object"&&!e(_)&&!u(_)&&!t(_)){let w=o(f);y=w.signal,b=w.end}r(f,(w,x)=>{w?p(w):h(x)},{signal:y,end:b})})}s.exports={finished:n,pipeline:l}}),vu=ve((a,s)=>{pe(),ye(),de();var{Buffer:o}=(at(),Ke(st)),{ObjectDefineProperty:c,ObjectKeys:u,ReflectApply:e}=Je(),{promisify:{custom:t}}=gt(),{streamReturningOperators:r,promiseReturningOperators:n}=ap(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=yt(),f=mu(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:p}=Ri(),{pipeline:y}=ba(),{destroyer:b}=rn(),_=fr(),w=bu(),x=Jt(),m=s.exports=ga().Stream;m.isDestroyed=x.isDestroyed,m.isDisturbed=x.isDisturbed,m.isErrored=x.isErrored,m.isReadable=x.isReadable,m.isWritable=x.isWritable,m.Readable=Mi();for(let A of u(r)){let S=function(...C){if(new.target)throw l();return m.Readable.from(e(M,this,C))},M=r[A];c(S,"name",{__proto__:null,value:M.name}),c(S,"length",{__proto__:null,value:M.length}),c(m.Readable.prototype,A,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let A of u(n)){let S=function(...C){if(new.target)throw l();return e(M,this,C)},M=n[A];c(S,"name",{__proto__:null,value:M.name}),c(S,"length",{__proto__:null,value:M.length}),c(m.Readable.prototype,A,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}m.Writable=ma(),m.Duplex=Yt(),m.Transform=yu(),m.PassThrough=gu(),m.pipeline=y;var{addAbortSignal:E}=Ci();m.addAbortSignal=E,m.finished=_,m.destroy=b,m.compose=f,m.setDefaultHighWaterMark=h,m.getDefaultHighWaterMark=p,c(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),c(y,t,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),c(_,t,{__proto__:null,enumerable:!0,get(){return w.finished}}),m.Stream=m,m._isUint8Array=function(A){return A instanceof Uint8Array},m._uint8ArrayToBuffer=function(A){return o.from(A.buffer,A.byteOffset,A.byteLength)}}),Br=ve((a,s)=>{pe(),ye(),de();var o=vu(),c=bu(),u=o.Readable.destroy;s.exports=o.Readable,s.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,s.exports._isUint8Array=o._isUint8Array,s.exports.isDisturbed=o.isDisturbed,s.exports.isErrored=o.isErrored,s.exports.isReadable=o.isReadable,s.exports.Readable=o.Readable,s.exports.Writable=o.Writable,s.exports.Duplex=o.Duplex,s.exports.Transform=o.Transform,s.exports.PassThrough=o.PassThrough,s.exports.addAbortSignal=o.addAbortSignal,s.exports.finished=o.finished,s.exports.destroy=o.destroy,s.exports.destroy=u,s.exports.pipeline=o.pipeline,s.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return c}}),s.exports.Stream=o.Stream,s.exports.default=s.exports}),lp=ve((a,s)=>{pe(),ye(),de(),typeof Object.create=="function"?s.exports=function(o,c){c&&(o.super_=c,o.prototype=Object.create(c.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(o,c){if(c){o.super_=c;var u=function(){};u.prototype=c.prototype,o.prototype=new u,o.prototype.constructor=o}}}),cp=ve((a,s)=>{pe(),ye(),de();var{Buffer:o}=(at(),Ke(st)),c=Symbol.for("BufferList");function u(e){if(!(this instanceof u))return new u(e);u._init.call(this,e)}u._init=function(e){Object.defineProperty(this,c,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},u.prototype._new=function(e){return new u(e)},u.prototype._offset=function(e){if(e===0)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},u.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let n=0;n<t;n++)r+=this._bufs[n].length;return r},u.prototype.getBuffers=function(){return this._bufs},u.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},u.prototype.slice=function(e,t){return typeof e=="number"&&e<0&&(e+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,e,t)},u.prototype.copy=function(e,t,r,n){if((typeof r!="number"||r<0)&&(r=0),(typeof n!="number"||n>this.length)&&(n=this.length),r>=this.length||n<=0)return e||o.alloc(0);let l=!!e,f=this._offset(r),h=n-r,p=h,y=l&&t||0,b=f[1];if(r===0&&n===this.length){if(!l)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let _=0;_<this._bufs.length;_++)this._bufs[_].copy(e,y),y+=this._bufs[_].length;return e}if(p<=this._bufs[f[0]].length-b)return l?this._bufs[f[0]].copy(e,t,b,b+p):this._bufs[f[0]].slice(b,b+p);l||(e=o.allocUnsafe(h));for(let _=f[0];_<this._bufs.length;_++){let w=this._bufs[_].length-b;if(p>w)this._bufs[_].copy(e,y,b),y+=w;else{this._bufs[_].copy(e,y,b,b+p),y+=w;break}p-=w,b&&(b=0)}return e.length>y?e.slice(0,y):e},u.prototype.shallowSlice=function(e,t){if(e=e||0,t=typeof t!="number"?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),n=this._offset(t),l=this._bufs.slice(r[0],n[0]+1);return n[1]===0?l.pop():l[l.length-1]=l[l.length-1].slice(0,n[1]),r[1]!==0&&(l[0]=l[0].slice(r[1])),this._new(l)},u.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},u.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this},u.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},u.prototype.append=function(e){return this._attach(e,u.prototype._appendBuffer)},u.prototype.prepend=function(e){return this._attach(e,u.prototype._prependBuffer,!0)},u.prototype._attach=function(e,t,r){if(e==null)return this;if(e.buffer)t.call(this,o.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[n,l]=r?[e.length-1,-1]:[0,1];for(let f=n;f>=0&&f<e.length;f+=l)this._attach(e[f],t,r)}else if(this._isBufferList(e)){let[n,l]=r?[e._bufs.length-1,-1]:[0,1];for(let f=n;f>=0&&f<e._bufs.length;f+=l)this._attach(e._bufs[f],t,r)}else typeof e=="number"&&(e=e.toString()),t.call(this,o.from(e));return this},u.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},u.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},u.prototype.indexOf=function(e,t,r){if(r===void 0&&typeof t=="string"&&(r=t,t=void 0),typeof e=="function"||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof e=="number"?e=o.from([e]):typeof e=="string"?e=o.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=o.from(e.buffer,e.byteOffset,e.byteLength):o.isBuffer(e)||(e=o.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;let n=this._offset(t),l=n[0],f=n[1];for(;l<this._bufs.length;l++){let h=this._bufs[l];for(;f<h.length;)if(h.length-f>=e.length){let p=h.indexOf(e,f);if(p!==-1)return this._reverseOffset([l,p]);f=h.length-e.length+1}else{let p=this._reverseOffset([l,f]);if(this._match(p,e))return p;f++}f=0}return-1},u.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)(function(r){e[r]===null?u.prototype[r]=function(n,l){return this.slice(n,n+l)[r](0,l)}:u.prototype[r]=function(n=0){return this.slice(n,n+e[r])[r](0)}})(t)}(),u.prototype._isBufferList=function(e){return e instanceof u||u.isBufferList(e)},u.isBufferList=function(e){return e!=null&&e[c]},s.exports=u}),up=ve((a,s)=>{pe(),ye(),de();var o=Br().Duplex,c=lp(),u=cp();function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="function"){this._callback=t;let r=(function(n){this._callback&&(this._callback(n),this._callback=null)}).bind(this);this.on("pipe",function(n){n.on("error",r)}),this.on("unpipe",function(n){n.removeListener("error",r)}),t=null}u._init.call(this,t),o.call(this)}c(e,o),Object.assign(e.prototype,u.prototype),e.prototype._new=function(t){return new e(t)},e.prototype._write=function(t,r,n){this._appendBuffer(t),typeof n=="function"&&n()},e.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},e.prototype.end=function(t){o.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},e.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},e.prototype._isBufferList=function(t){return t instanceof e||t instanceof u||e.isBufferList(t)},e.isBufferList=u.isBufferList,s.exports=e,s.exports.BufferListStream=e,s.exports.BufferList=u}),fp=ve((a,s)=>{pe(),ye(),de();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};s.exports=o}),wu=ve((a,s)=>{pe(),ye(),de();var o=s.exports,{Buffer:c}=(at(),Ke(st));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let e in o.requiredHeaderFlags){let t=o.requiredHeaderFlags[e];o.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+o.types[e]+" packet"}o.codes={};for(let e in o.types){let t=o.types[e];o.codes[t]=e}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=c.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=c.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=c.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let e in o.properties){let t=o.properties[e];o.propertiesCodes[t]=e}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function u(e){return[0,1,2].map(t=>[0,1].map(r=>[0,1].map(n=>{let l=c.alloc(1);return l.writeUInt8(o.codes[e]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|t<<o.QOS_SHIFT|n,0,!0),l})))}o.PUBLISH_HEADER=u("publish"),o.SUBSCRIBE_HEADER=u("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=u("unsubscribe"),o.ACKS={unsuback:u("unsuback"),puback:u("puback"),pubcomp:u("pubcomp"),pubrel:u("pubrel"),pubrec:u("pubrec")},o.SUBACK_HEADER=c.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=c.from([3]),o.VERSION4=c.from([4]),o.VERSION5=c.from([5]),o.VERSION131=c.from([131]),o.VERSION132=c.from([132]),o.QOS=[0,1,2].map(e=>c.from([e])),o.EMPTY={pingreq:c.from([o.codes.pingreq<<4,0]),pingresp:c.from([o.codes.pingresp<<4,0]),disconnect:c.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),hp=ve((a,s)=>{pe(),ye(),de();var o=1e3,c=o*60,u=c*60,e=u*24,t=e*7,r=e*365.25;s.exports=function(p,y){y=y||{};var b=typeof p;if(b==="string"&&p.length>0)return n(p);if(b==="number"&&isFinite(p))return y.long?f(p):l(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function n(p){if(p=String(p),!(p.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(y){var b=parseFloat(y[1]),_=(y[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return b*r;case"weeks":case"week":case"w":return b*t;case"days":case"day":case"d":return b*e;case"hours":case"hour":case"hrs":case"hr":case"h":return b*u;case"minutes":case"minute":case"mins":case"min":case"m":return b*c;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function l(p){var y=Math.abs(p);return y>=e?Math.round(p/e)+"d":y>=u?Math.round(p/u)+"h":y>=c?Math.round(p/c)+"m":y>=o?Math.round(p/o)+"s":p+"ms"}function f(p){var y=Math.abs(p);return y>=e?h(p,y,e,"day"):y>=u?h(p,y,u,"hour"):y>=c?h(p,y,c,"minute"):y>=o?h(p,y,o,"second"):p+" ms"}function h(p,y,b,_){var w=y>=b*1.5;return Math.round(p/b)+" "+_+(w?"s":"")}}),pp=ve((a,s)=>{pe(),ye(),de();function o(c){e.debug=e,e.default=e,e.coerce=h,e.disable=l,e.enable=r,e.enabled=f,e.humanize=hp(),e.destroy=p,Object.keys(c).forEach(y=>{e[y]=c[y]}),e.names=[],e.skips=[],e.formatters={};function u(y){let b=0;for(let _=0;_<y.length;_++)b=(b<<5)-b+y.charCodeAt(_),b|=0;return e.colors[Math.abs(b)%e.colors.length]}e.selectColor=u;function e(y){let b,_=null,w,x;function m(...E){if(!m.enabled)return;let A=m,S=Number(new Date),M=S-(b||S);A.diff=M,A.prev=b,A.curr=S,b=S,E[0]=e.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let C=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(I,R)=>{if(I==="%%")return"%";C++;let T=e.formatters[R];if(typeof T=="function"){let $=E[C];I=T.call(A,$),E.splice(C,1),C--}return I}),e.formatArgs.call(A,E),(A.log||e.log).apply(A,E)}return m.namespace=y,m.useColors=e.useColors(),m.color=e.selectColor(y),m.extend=t,m.destroy=e.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(w!==e.namespaces&&(w=e.namespaces,x=e.enabled(y)),x),set:E=>{_=E}}),typeof e.init=="function"&&e.init(m),m}function t(y,b){let _=e(this.namespace+(typeof b>"u"?":":b)+y);return _.log=this.log,_}function r(y){e.save(y),e.namespaces=y,e.names=[],e.skips=[];let b=(typeof y=="string"?y:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let _ of b)_[0]==="-"?e.skips.push(_.slice(1)):e.names.push(_)}function n(y,b){let _=0,w=0,x=-1,m=0;for(;_<y.length;)if(w<b.length&&(b[w]===y[_]||b[w]==="*"))b[w]==="*"?(x=w,m=_,w++):(_++,w++);else if(x!==-1)w=x+1,m++,_=m;else return!1;for(;w<b.length&&b[w]==="*";)w++;return w===b.length}function l(){let y=[...e.names,...e.skips.map(b=>"-"+b)].join(",");return e.enable(""),y}function f(y){for(let b of e.skips)if(n(y,b))return!1;for(let b of e.names)if(n(y,b))return!0;return!1}function h(y){return y instanceof Error?y.stack||y.message:y}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}s.exports=o}),Qt=ve((a,s)=>{pe(),ye(),de(),a.formatArgs=c,a.save=u,a.load=e,a.useColors=o,a.storage=t(),a.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;n.splice(1,0,l,"color: inherit");let f=0,h=0;n[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(h=f))}),n.splice(h,0,l)}a.log=console.debug||console.log||(()=>{});function u(n){try{n?a.storage.setItem("debug",n):a.storage.removeItem("debug")}catch{}}function e(){let n;try{n=a.storage.getItem("debug")||a.storage.getItem("DEBUG")}catch{}return!n&&typeof We<"u"&&"env"in We&&(n=We.env.DEBUG),n}function t(){try{return localStorage}catch{}}s.exports=pp()(a);var{formatters:r}=s.exports;r.j=function(n){try{return JSON.stringify(n)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),dp=ve((a,s)=>{pe(),ye(),de();var o=up(),{EventEmitter:c}=(jr(),Ke(ur)),u=fp(),e=wu(),t=Qt()("mqtt-packet:parser"),r=class fs extends c{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof fs?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new fs().parser(l)}_resetState(){t("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new u,this.error=null,this._list=o(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),t("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,t("parse: state complete. _stateCounter is now: %d",this._stateCounter),t("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return t("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),f=l>>e.CMD_SHIFT;this.packet.cmd=e.types[f];let h=l&15,p=e.requiredHeaderFlags[f];return p!=null&&h!==p?this._emitError(new Error(e.requiredHeaderFlagsErrors[f])):(this.packet.retain=(l&e.RETAIN_MASK)!==0,this.packet.qos=l>>e.QOS_SHIFT&e.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&e.DUP_MASK)!==0,t("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),t("_parseLength %d",l.value),!!l}_parsePayload(){t("_parsePayload: payload %O",this._list);let l=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}l=!0}return t("_parsePayload complete result: %s",l),l}_parseConnect(){t("_parseConnect");let l,f,h,p,y={},b=this.packet,_=this._parseString();if(_===null)return this._emitError(new Error("Cannot parse protocolId"));if(_!=="MQTT"&&_!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=_,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&e.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&e.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&e.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&e.WILL_RETAIN_MASK),x=(this._list.readUInt8(this._pos)&e.WILL_QOS_MASK)>>e.WILL_QOS_SHIFT;if(y.will)b.will={},b.will.retain=w,b.will.qos=x;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(x)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&e.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(b.properties=E)}let m=this._parseString();if(m===null)return this._emitError(new Error("Packet too short"));if(b.clientId=m,t("_parseConnect: packet.clientId: %s",b.clientId),y.will){if(b.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(b.will.properties=E)}if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=l,t("_parseConnect: packet.will.topic: %s",b.will.topic),f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=f,t("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(y.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,t("_parseConnect: packet.username: %s",b.username)}if(y.password){if(h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse password"));b.password=h}return this.settings=b,t("_parseConnect: complete"),b}_parseConnack(){t("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let f=this._list.readUInt8(this._pos++);if(f>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(f&e.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(l.returnCode===-1||l.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(l.properties=h)}t("_parseConnack: complete")}_parsePublish(){t("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),l.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}l.payload=this._list.slice(this._pos,l.length),t("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){t("_parseSubscribe");let l=this.packet,f,h,p,y,b,_,w;if(l.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(l.properties=x)}if(l.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(f=this._parseString(),f===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(h=this._parseByte(),this.settings.protocolVersion===5){if(h&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(h&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=h&e.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(_=(h>>e.SUBSCRIBE_OPTIONS_NL_SHIFT&e.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(h>>e.SUBSCRIBE_OPTIONS_RAP_SHIFT&e.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=h>>e.SUBSCRIBE_OPTIONS_RH_SHIFT&e.SUBSCRIBE_OPTIONS_RH_MASK,y>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:f,qos:p},this.settings.protocolVersion===5?(w.nl=_,w.rap=b,w.rh=y):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),t("_parseSubscribe: push subscription `%s` to subscription",w),l.subscriptions.push(w)}}}_parseSuback(){t("_parseSuback");let l=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}if(l.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!e.MQTT5_SUBACK_CODES[f])return this._emitError(new Error("Invalid suback code"))}else if(f>2&&f!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(f)}}}_parseUnsubscribe(){t("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}if(l.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse topic"));t("_parseUnsubscribe: push topic `%s` to unsubscriptions",f),l.unsubscriptions.push(f)}}}_parseUnsuback(){t("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&l.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let f=this._parseProperties();for(Object.getOwnPropertyNames(f).length&&(l.properties=f),l.granted=[];this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(!e.MQTT5_UNSUBACK_CODES[h])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(h)}}}_parseConfirmation(){t("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!e.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!e.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}t("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}}return!0}_parseDisconnect(){let l=this.packet;if(t("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(l.reasonCode=this._parseByte(),e.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):l.reasonCode=0;let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(l.properties=f)}return t("_parseDisconnect result: true"),!0}_parseAuth(){t("_parseAuth");let l=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!e.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let f=this._parseProperties();return Object.getOwnPropertyNames(f).length&&(l.properties=f),t("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),l.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(t("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let f=this._parseNum(),h=f+this._pos;if(f===-1||h>this._list.length||h>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,h);return this._pos+=f,t("_parseString: result: %s",p),p}_parseStringPair(){return t("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),f=l+this._pos;if(l===-1||f>this._list.length||f>this.packet.length)return null;let h=this._list.slice(this._pos,f);return this._pos+=l,t("_parseBuffer: result: %o",h),h}_parseNum(){if(this._list.length-this._pos<2)return-1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,t("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,t("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){t("_parseVarByteNum");let f=4,h=0,p=1,y=0,b=!1,_,w=this._pos?this._pos:0;for(;h<f&&w+h<this._list.length;){if(_=this._list.readUInt8(w+h++),y+=p*(_&e.VARBYTEINT_MASK),p*=128,(_&e.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=h)break}return!b&&h===f&&this._list.length>=h&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=h),b?l?b={bytes:h,value:y}:b=y:b=!1,t("_parseVarByteNum: result: %o",b),b}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),t("_parseByte: result: %o",l),l}_parseByType(l){switch(t("_parseByType: type: %s",l),l){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){t("_parseProperties");let l=this._parseVarByteNum(),f=this._pos+l,h={};for(;this._pos<f;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let y=e.propertiesCodes[p];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){h[y]||(h[y]=Object.create(null));let b=this._parseByType(e.propertiesTypes[y]);if(h[y][b.name])if(Array.isArray(h[y][b.name]))h[y][b.name].push(b.value);else{let _=h[y][b.name];h[y][b.name]=[_],h[y][b.name].push(b.value)}else h[y][b.name]=b.value;continue}h[y]?Array.isArray(h[y])?h[y].push(this._parseByType(e.propertiesTypes[y])):(h[y]=[h[y]],h[y].push(this._parseByType(e.propertiesTypes[y]))):h[y]=this._parseByType(e.propertiesTypes[y])}return h}_newPacket(){return t("_newPacket"),this.packet&&(this._list.consume(this.packet.length),t("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),t("_newPacket: new packet"),this.packet=new u,this._pos=0,!0}_emitError(l){t("_emitError",l),this.error=l,this.emit("error",l)}};s.exports=r}),yp=ve((a,s)=>{pe(),ye(),de();var{Buffer:o}=(at(),Ke(st)),c=65536,u={},e=o.isBuffer(o.from([1,2]).subarray(0,1));function t(f){let h=o.allocUnsafe(2);return h.writeUInt8(f>>8,0),h.writeUInt8(f&255,1),h}function r(){for(let f=0;f<c;f++)u[f]=t(f)}function n(f){let h=0,p=0,y=o.allocUnsafe(4);do h=f%128|0,f=f/128|0,f>0&&(h=h|128),y.writeUInt8(h,p++);while(f>0&&p<4);return f>0&&(p=0),e?y.subarray(0,p):y.slice(0,p)}function l(f){let h=o.allocUnsafe(4);return h.writeUInt32BE(f,0),h}s.exports={cache:u,generateCache:r,generateNumber:t,genBufVariableByteInt:n,generate4ByteBuffer:l}}),gp=ve((a,s)=>{pe(),ye(),de(),typeof We>"u"||!We.version||We.version.indexOf("v0.")===0||We.version.indexOf("v1.")===0&&We.version.indexOf("v1.8.")!==0?s.exports={nextTick:o}:s.exports=We;function o(c,u,e,t){if(typeof c!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,n,l;switch(r){case 0:case 1:return We.nextTick(c);case 2:return We.nextTick(function(){c.call(null,u)});case 3:return We.nextTick(function(){c.call(null,u,e)});case 4:return We.nextTick(function(){c.call(null,u,e,t)});default:for(n=new Array(r-1),l=0;l<n.length;)n[l++]=arguments[l];return We.nextTick(function(){c.apply(null,n)})}}}),_u=ve((a,s)=>{pe(),ye(),de();var o=wu(),{Buffer:c}=(at(),Ke(st)),u=c.allocUnsafe(0),e=c.from([0]),t=yp(),r=gp().nextTick,n=Qt()("mqtt-packet:writeToStream"),l=t.cache,f=t.generateNumber,h=t.generateCache,p=t.genBufVariableByteInt,y=t.generate4ByteBuffer,b=re,_=!0;function w(Z,D,se){switch(n("generate called"),D.cork&&(D.cork(),r(x,D)),_&&(_=!1,h()),n("generate: packet.cmd: %s",Z.cmd),Z.cmd){case"connect":return m(Z,D);case"connack":return E(Z,D,se);case"publish":return A(Z,D,se);case"puback":case"pubrec":case"pubrel":case"pubcomp":return S(Z,D,se);case"subscribe":return M(Z,D,se);case"suback":return C(Z,D,se);case"unsubscribe":return I(Z,D,se);case"unsuback":return R(Z,D,se);case"pingreq":case"pingresp":return T(Z,D);case"disconnect":return $(Z,D,se);case"auth":return k(Z,D,se);default:return D.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return b===re},set(Z){Z?((!l||Object.keys(l).length===0)&&(_=!0),b=re):(_=!1,b=q)}});function x(Z){Z.uncork()}function m(Z,D,se){let Y=Z||{},Q=Y.protocolId||"MQTT",ee=Y.protocolVersion||4,ge=Y.will,fe=Y.clean,W=Y.keepalive||0,X=Y.clientId||"",ue=Y.username,be=Y.password,me=Y.properties;fe===void 0&&(fe=!0);let _e=0;if(!Q||typeof Q!="string"&&!c.isBuffer(Q))return D.destroy(new Error("Invalid protocolId")),!1;if(_e+=Q.length+2,ee!==3&&ee!==4&&ee!==5)return D.destroy(new Error("Invalid protocol version")),!1;if(_e+=1,(typeof X=="string"||c.isBuffer(X))&&(X||ee>=4)&&(X||fe))_e+=c.byteLength(X)+2;else{if(ee<4)return D.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(fe*1===0)return D.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof W!="number"||W<0||W>65535||W%1!==0)return D.destroy(new Error("Invalid keepalive")),!1;_e+=2,_e+=1;let ne,we;if(ee===5){if(ne=ie(D,me),!ne)return!1;_e+=ne.length}if(ge){if(typeof ge!="object")return D.destroy(new Error("Invalid will")),!1;if(!ge.topic||typeof ge.topic!="string")return D.destroy(new Error("Invalid will topic")),!1;if(_e+=c.byteLength(ge.topic)+2,_e+=2,ge.payload)if(ge.payload.length>=0)typeof ge.payload=="string"?_e+=c.byteLength(ge.payload):_e+=ge.payload.length;else return D.destroy(new Error("Invalid will payload")),!1;if(we={},ee===5){if(we=ie(D,ge.properties),!we)return!1;_e+=we.length}}let ke=!1;if(ue!=null)if(Se(ue))ke=!0,_e+=c.byteLength(ue)+2;else return D.destroy(new Error("Invalid username")),!1;if(be!=null){if(!ke)return D.destroy(new Error("Username is required to use password")),!1;if(Se(be))_e+=H(be)+2;else return D.destroy(new Error("Invalid password")),!1}D.write(o.CONNECT_HEADER),U(D,_e),K(D,Q),Y.bridgeMode&&(ee+=128),D.write(ee===131?o.VERSION131:ee===132?o.VERSION132:ee===4?o.VERSION4:ee===5?o.VERSION5:o.VERSION3);let he=0;return he|=ue!=null?o.USERNAME_MASK:0,he|=be!=null?o.PASSWORD_MASK:0,he|=ge&&ge.retain?o.WILL_RETAIN_MASK:0,he|=ge&&ge.qos?ge.qos<<o.WILL_QOS_SHIFT:0,he|=ge?o.WILL_FLAG_MASK:0,he|=fe?o.CLEAN_SESSION_MASK:0,D.write(c.from([he])),b(D,W),ee===5&&ne.write(),K(D,X),ge&&(ee===5&&we.write(),B(D,ge.topic),K(D,ge.payload)),ue!=null&&K(D,ue),be!=null&&K(D,be),!0}function E(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Y===5?Q.reasonCode:Q.returnCode,ge=Q.properties,fe=2;if(typeof ee!="number")return D.destroy(new Error("Invalid return code")),!1;let W=null;if(Y===5){if(W=ie(D,ge),!W)return!1;fe+=W.length}return D.write(o.CONNACK_HEADER),U(D,fe),D.write(Q.sessionPresent?o.SESSIONPRESENT_HEADER:e),D.write(c.from([ee])),W==null||W.write(),!0}function A(Z,D,se){n("publish: packet: %o",Z);let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.qos||0,ge=Q.retain?o.RETAIN_MASK:0,fe=Q.topic,W=Q.payload||u,X=Q.messageId,ue=Q.properties,be=0;if(typeof fe=="string")be+=c.byteLength(fe)+2;else if(c.isBuffer(fe))be+=fe.length+2;else return D.destroy(new Error("Invalid topic")),!1;if(c.isBuffer(W)?be+=W.length:be+=c.byteLength(W),ee&&typeof X!="number")return D.destroy(new Error("Invalid messageId")),!1;ee&&(be+=2);let me=null;if(Y===5){if(me=ie(D,ue),!me)return!1;be+=me.length}return D.write(o.PUBLISH_HEADER[ee][Q.dup?1:0][ge?1:0]),U(D,be),b(D,H(fe)),D.write(fe),ee>0&&b(D,X),me==null||me.write(),n("publish: payload: %o",W),D.write(W)}function S(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.cmd||"puback",ge=Q.messageId,fe=Q.dup&&ee==="pubrel"?o.DUP_MASK:0,W=0,X=Q.reasonCode,ue=Q.properties,be=Y===5?3:2;if(ee==="pubrel"&&(W=1),typeof ge!="number")return D.destroy(new Error("Invalid messageId")),!1;let me=null;if(Y===5&&typeof ue=="object"){if(me=N(D,ue,se,be),!me)return!1;be+=me.length}return D.write(o.ACKS[ee][W][fe][0]),be===3&&(be+=X!==0?1:-1),U(D,be),b(D,ge),Y===5&&be!==2&&D.write(c.from([X])),me!==null?me.write():be===4&&D.write(c.from([0])),!0}function M(Z,D,se){n("subscribe: packet: ");let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.dup?o.DUP_MASK:0,ge=Q.messageId,fe=Q.subscriptions,W=Q.properties,X=0;if(typeof ge!="number")return D.destroy(new Error("Invalid messageId")),!1;X+=2;let ue=null;if(Y===5){if(ue=ie(D,W),!ue)return!1;X+=ue.length}if(typeof fe=="object"&&fe.length)for(let me=0;me<fe.length;me+=1){let _e=fe[me].topic,ne=fe[me].qos;if(typeof _e!="string")return D.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof ne!="number")return D.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(Y===5){if(typeof(fe[me].nl||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(fe[me].rap||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let we=fe[me].rh||0;if(typeof we!="number"||we>2)return D.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}X+=c.byteLength(_e)+2+1}else return D.destroy(new Error("Invalid subscriptions")),!1;n("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),D.write(o.SUBSCRIBE_HEADER[1][ee?1:0][0]),U(D,X),b(D,ge),ue!==null&&ue.write();let be=!0;for(let me of fe){let _e=me.topic,ne=me.qos,we=+me.nl,ke=+me.rap,he=me.rh,je;B(D,_e),je=o.SUBSCRIBE_OPTIONS_QOS[ne],Y===5&&(je|=we?o.SUBSCRIBE_OPTIONS_NL:0,je|=ke?o.SUBSCRIBE_OPTIONS_RAP:0,je|=he?o.SUBSCRIBE_OPTIONS_RH[he]:0),be=D.write(c.from([je]))}return be}function C(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.messageId,ge=Q.granted,fe=Q.properties,W=0;if(typeof ee!="number")return D.destroy(new Error("Invalid messageId")),!1;if(W+=2,typeof ge=="object"&&ge.length)for(let ue=0;ue<ge.length;ue+=1){if(typeof ge[ue]!="number")return D.destroy(new Error("Invalid qos vector")),!1;W+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let X=null;if(Y===5){if(X=N(D,fe,se,W),!X)return!1;W+=X.length}return D.write(o.SUBACK_HEADER),U(D,W),b(D,ee),X!==null&&X.write(),D.write(c.from(ge))}function I(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.messageId,ge=Q.dup?o.DUP_MASK:0,fe=Q.unsubscriptions,W=Q.properties,X=0;if(typeof ee!="number")return D.destroy(new Error("Invalid messageId")),!1;if(X+=2,typeof fe=="object"&&fe.length)for(let me=0;me<fe.length;me+=1){if(typeof fe[me]!="string")return D.destroy(new Error("Invalid unsubscriptions")),!1;X+=c.byteLength(fe[me])+2}else return D.destroy(new Error("Invalid unsubscriptions")),!1;let ue=null;if(Y===5){if(ue=ie(D,W),!ue)return!1;X+=ue.length}D.write(o.UNSUBSCRIBE_HEADER[1][ge?1:0][0]),U(D,X),b(D,ee),ue!==null&&ue.write();let be=!0;for(let me=0;me<fe.length;me++)be=B(D,fe[me]);return be}function R(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.messageId,ge=Q.dup?o.DUP_MASK:0,fe=Q.granted,W=Q.properties,X=Q.cmd,ue=0,be=2;if(typeof ee!="number")return D.destroy(new Error("Invalid messageId")),!1;if(Y===5)if(typeof fe=="object"&&fe.length)for(let _e=0;_e<fe.length;_e+=1){if(typeof fe[_e]!="number")return D.destroy(new Error("Invalid qos vector")),!1;be+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let me=null;if(Y===5){if(me=N(D,W,se,be),!me)return!1;be+=me.length}return D.write(o.ACKS[X][ue][ge][0]),U(D,be),b(D,ee),me!==null&&me.write(),Y===5&&D.write(c.from(fe)),!0}function T(Z,D,se){return D.write(o.EMPTY[Z.cmd])}function $(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.reasonCode,ge=Q.properties,fe=Y===5?1:0,W=null;if(Y===5){if(W=N(D,ge,se,fe),!W)return!1;fe+=W.length}return D.write(c.from([o.codes.disconnect<<4])),U(D,fe),Y===5&&D.write(c.from([ee])),W!==null&&W.write(),!0}function k(Z,D,se){let Y=se?se.protocolVersion:4,Q=Z||{},ee=Q.reasonCode,ge=Q.properties,fe=Y===5?1:0;Y!==5&&D.destroy(new Error("Invalid mqtt version for auth packet"));let W=N(D,ge,se,fe);return W?(fe+=W.length,D.write(c.from([o.codes.auth<<4])),U(D,fe),D.write(c.from([ee])),W!==null&&W.write(),!0):!1}var L={};function U(Z,D){if(D>o.VARBYTEINT_MAX)return Z.destroy(new Error(`Invalid variable byte integer: ${D}`)),!1;let se=L[D];return se||(se=p(D),D<16384&&(L[D]=se)),n("writeVarByteInt: writing to stream: %o",se),Z.write(se)}function B(Z,D){let se=c.byteLength(D);return b(Z,se),n("writeString: %s",D),Z.write(D,"utf8")}function le(Z,D,se){B(Z,D),B(Z,se)}function re(Z,D){return n("writeNumberCached: number: %d",D),n("writeNumberCached: %o",l[D]),Z.write(l[D])}function q(Z,D){let se=f(D);return n("writeNumberGenerated: %o",se),Z.write(se)}function oe(Z,D){let se=y(D);return n("write4ByteNumber: %o",se),Z.write(se)}function K(Z,D){typeof D=="string"?B(Z,D):D?(b(Z,D.length),Z.write(D)):b(Z,0)}function ie(Z,D){if(typeof D!="object"||D.length!=null)return{length:1,write(){ce(Z,{},0)}};let se=0;function Y(Q,ee){let ge=o.propertiesTypes[Q],fe=0;switch(ge){case"byte":{if(typeof ee!="boolean")return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=2;break}case"int8":{if(typeof ee!="number"||ee<0||ee>255)return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=2;break}case"binary":{if(ee&&ee===null)return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=1+c.byteLength(ee)+2;break}case"int16":{if(typeof ee!="number"||ee<0||ee>65535)return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=3;break}case"int32":{if(typeof ee!="number"||ee<0||ee>4294967295)return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=5;break}case"var":{if(typeof ee!="number"||ee<0||ee>268435455)return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=1+c.byteLength(p(ee));break}case"string":{if(typeof ee!="string")return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=3+c.byteLength(ee.toString());break}case"pair":{if(typeof ee!="object")return Z.destroy(new Error(`Invalid ${Q}: ${ee}`)),!1;fe+=Object.getOwnPropertyNames(ee).reduce((W,X)=>{let ue=ee[X];return Array.isArray(ue)?W+=ue.reduce((be,me)=>(be+=3+c.byteLength(X.toString())+2+c.byteLength(me.toString()),be),0):W+=3+c.byteLength(X.toString())+2+c.byteLength(ee[X].toString()),W},0);break}default:return Z.destroy(new Error(`Invalid property ${Q}: ${ee}`)),!1}return fe}if(D)for(let Q in D){let ee=0,ge=0,fe=D[Q];if(fe!==void 0){if(Array.isArray(fe))for(let W=0;W<fe.length;W++){if(ge=Y(Q,fe[W]),!ge)return!1;ee+=ge}else{if(ge=Y(Q,fe),!ge)return!1;ee=ge}if(!ee)return!1;se+=ee}}return{length:c.byteLength(p(se))+se,write(){ce(Z,D,se)}}}function N(Z,D,se,Y){let Q=["reasonString","userProperties"],ee=se&&se.properties&&se.properties.maximumPacketSize?se.properties.maximumPacketSize:0,ge=ie(Z,D);if(ee)for(;Y+ge.length>ee;){let fe=Q.shift();if(fe&&D[fe])delete D[fe],ge=ie(Z,D);else return!1}return ge}function G(Z,D,se){switch(o.propertiesTypes[D]){case"byte":{Z.write(c.from([o.properties[D]])),Z.write(c.from([+se]));break}case"int8":{Z.write(c.from([o.properties[D]])),Z.write(c.from([se]));break}case"binary":{Z.write(c.from([o.properties[D]])),K(Z,se);break}case"int16":{Z.write(c.from([o.properties[D]])),b(Z,se);break}case"int32":{Z.write(c.from([o.properties[D]])),oe(Z,se);break}case"var":{Z.write(c.from([o.properties[D]])),U(Z,se);break}case"string":{Z.write(c.from([o.properties[D]])),B(Z,se);break}case"pair":{Object.getOwnPropertyNames(se).forEach(Y=>{let Q=se[Y];Array.isArray(Q)?Q.forEach(ee=>{Z.write(c.from([o.properties[D]])),le(Z,Y.toString(),ee.toString())}):(Z.write(c.from([o.properties[D]])),le(Z,Y.toString(),Q.toString()))});break}default:return Z.destroy(new Error(`Invalid property ${D} value: ${se}`)),!1}}function ce(Z,D,se){U(Z,se);for(let Y in D)if(Object.prototype.hasOwnProperty.call(D,Y)&&D[Y]!=null){let Q=D[Y];if(Array.isArray(Q))for(let ee=0;ee<Q.length;ee++)G(Z,Y,Q[ee]);else G(Z,Y,Q)}}function H(Z){return Z?Z instanceof c?Z.length:c.byteLength(Z):0}function Se(Z){return typeof Z=="string"||Z instanceof c}s.exports=w}),mp=ve((a,s)=>{pe(),ye(),de();var o=_u(),{EventEmitter:c}=(jr(),Ke(ur)),{Buffer:u}=(at(),Ke(st));function e(r,n){let l=new t;return o(r,l,n),l.concat()}var t=class extends c{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0,n=new Array(this._array.length),l=this._array,f=0,h;for(h=0;h<l.length&&l[h]!==void 0;h++)typeof l[h]!="string"?n[h]=l[h].length:n[h]=u.byteLength(l[h]),r+=n[h];let p=u.allocUnsafe(r);for(h=0;h<l.length&&l[h]!==void 0;h++)typeof l[h]!="string"?(l[h].copy(p,f),f+=n[h]):(p.write(l[h],f),f+=n[h]);return p}destroy(r){r&&this.emit("error",r)}};s.exports=e}),bp=ve(a=>{pe(),ye(),de(),a.parser=dp().parser,a.generate=mp(),a.writeToStream=_u()}),vp=ve((a,s)=>{pe(),ye(),de(),s.exports=c;function o(e){return e instanceof ki?ki.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function c(e){if(e=e||{},e.circles)return u(e);let t=new Map;if(t.set(Date,h=>new Date(h)),t.set(Map,(h,p)=>new Map(n(Array.from(h),p))),t.set(Set,(h,p)=>new Set(n(Array.from(h),p))),e.constructorHandlers)for(let h of e.constructorHandlers)t.set(h[0],h[1]);let r=null;return e.proto?f:l;function n(h,p){let y=Object.keys(h),b=new Array(y.length);for(let _=0;_<y.length;_++){let w=y[_],x=h[w];typeof x!="object"||x===null?b[w]=x:x.constructor!==Object&&(r=t.get(x.constructor))?b[w]=r(x,p):ArrayBuffer.isView(x)?b[w]=o(x):b[w]=p(x)}return b}function l(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return n(h,l);if(h.constructor!==Object&&(r=t.get(h.constructor)))return r(h,l);let p={};for(let y in h){if(Object.hasOwnProperty.call(h,y)===!1)continue;let b=h[y];typeof b!="object"||b===null?p[y]=b:b.constructor!==Object&&(r=t.get(b.constructor))?p[y]=r(b,l):ArrayBuffer.isView(b)?p[y]=o(b):p[y]=l(b)}return p}function f(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return n(h,f);if(h.constructor!==Object&&(r=t.get(h.constructor)))return r(h,f);let p={};for(let y in h){let b=h[y];typeof b!="object"||b===null?p[y]=b:b.constructor!==Object&&(r=t.get(b.constructor))?p[y]=r(b,f):ArrayBuffer.isView(b)?p[y]=o(b):p[y]=f(b)}return p}}function u(e){let t=[],r=[],n=new Map;if(n.set(Date,y=>new Date(y)),n.set(Map,(y,b)=>new Map(f(Array.from(y),b))),n.set(Set,(y,b)=>new Set(f(Array.from(y),b))),e.constructorHandlers)for(let y of e.constructorHandlers)n.set(y[0],y[1]);let l=null;return e.proto?p:h;function f(y,b){let _=Object.keys(y),w=new Array(_.length);for(let x=0;x<_.length;x++){let m=_[x],E=y[m];if(typeof E!="object"||E===null)w[m]=E;else if(E.constructor!==Object&&(l=n.get(E.constructor)))w[m]=l(E,b);else if(ArrayBuffer.isView(E))w[m]=o(E);else{let A=t.indexOf(E);A!==-1?w[m]=r[A]:w[m]=b(E)}}return w}function h(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return f(y,h);if(y.constructor!==Object&&(l=n.get(y.constructor)))return l(y,h);let b={};t.push(y),r.push(b);for(let _ in y){if(Object.hasOwnProperty.call(y,_)===!1)continue;let w=y[_];if(typeof w!="object"||w===null)b[_]=w;else if(w.constructor!==Object&&(l=n.get(w.constructor)))b[_]=l(w,h);else if(ArrayBuffer.isView(w))b[_]=o(w);else{let x=t.indexOf(w);x!==-1?b[_]=r[x]:b[_]=h(w)}}return t.pop(),r.pop(),b}function p(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return f(y,p);if(y.constructor!==Object&&(l=n.get(y.constructor)))return l(y,p);let b={};t.push(y),r.push(b);for(let _ in y){let w=y[_];if(typeof w!="object"||w===null)b[_]=w;else if(w.constructor!==Object&&(l=n.get(w.constructor)))b[_]=l(w,p);else if(ArrayBuffer.isView(w))b[_]=o(w);else{let x=t.indexOf(w);x!==-1?b[_]=r[x]:b[_]=p(w)}}return t.pop(),r.pop(),b}}}),wp=ve((a,s)=>{pe(),ye(),de(),s.exports=vp()()}),_p=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.validateTopic=s,a.validateTopics=o;function s(c){let u=c.split("/");for(let e=0;e<u.length;e++)if(u[e]!=="+"){if(u[e]==="#")return e===u.length-1;if(u[e].indexOf("+")!==-1||u[e].indexOf("#")!==-1)return!1}return!0}function o(c){if(c.length===0)return"empty_topic_list";for(let u=0;u<c.length;u++)if(!s(c[u]))return c[u];return null}}),Su=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=Br(),o={objectMode:!0},c={clean:!0},u=class{constructor(e){Ae(this,"options");Ae(this,"_inflights");this.options=e||{},this.options={...c,...e},this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){let e=new s.Readable(o),t=[],r=!1,n=0;return this._inflights.forEach((l,f)=>{t.push(l)}),e._read=()=>{!r&&n<t.length?e.push(t[n++]):e.push(null)},e.destroy=l=>{if(!r)return r=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,t){let r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){let r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}};a.default=u}),Sp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=[0,16,128,131,135,144,145,151,153],o=(c,u,e)=>{c.log("handlePublish: packet %o",u),e=typeof e<"u"?e:c.noop;let t=u.topic.toString(),r=u.payload,{qos:n}=u,{messageId:l}=u,{options:f}=c;if(c.options.protocolVersion===5){let h;if(u.properties&&(h=u.properties.topicAlias),typeof h<"u")if(t.length===0)if(h>0&&h<=65535){let p=c.topicAliasRecv.getTopicByAlias(h);if(p)t=p,c.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",t,h);else{c.log("handlePublish :: unregistered topic alias. alias: %d",h),c.emit("error",new Error("Received unregistered Topic Alias"));return}}else{c.log("handlePublish :: topic alias out of range. alias: %d",h),c.emit("error",new Error("Received Topic Alias is out of range"));return}else if(c.topicAliasRecv.put(t,h))c.log("handlePublish :: registered topic: %s - alias: %d",t,h);else{c.log("handlePublish :: topic alias out of range. alias: %d",h),c.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(c.log("handlePublish: qos %d",n),n){case 2:{f.customHandleAcks(t,r,u,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return c.emit("error",h);if(s.indexOf(p)===-1)return c.emit("error",new Error("Wrong reason code for pubrec"));p?c._sendPacket({cmd:"pubrec",messageId:l,reasonCode:p},e):c.incomingStore.put(u,()=>{c._sendPacket({cmd:"pubrec",messageId:l},e)})});break}case 1:{f.customHandleAcks(t,r,u,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return c.emit("error",h);if(s.indexOf(p)===-1)return c.emit("error",new Error("Wrong reason code for puback"));p||c.emit("message",t,r,u),c.handleMessage(u,y=>{if(y)return e&&e(y);c._sendPacket({cmd:"puback",messageId:l,reasonCode:p},e)})});break}case 0:c.emit("message",t,r,u),c.handleMessage(u,e);break;default:c.log("handlePublish: unknown QoS. Doing nothing.");break}};a.default=o}),Ep=ve((a,s)=>{s.exports={version:"5.14.1"}}),nn=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.MQTTJS_VERSION=a.nextTick=a.ErrorWithSubackPacket=a.ErrorWithReasonCode=void 0,a.applyMixin=c;var s=class Eu extends Error{constructor(t,r){super(t);Ae(this,"code");this.code=r,Object.setPrototypeOf(this,Eu.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};a.ErrorWithReasonCode=s;var o=class Au extends Error{constructor(t,r){super(t);Ae(this,"packet");this.packet=r,Object.setPrototypeOf(this,Au.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};a.ErrorWithSubackPacket=o;function c(u,e,t=!1){let r=[e];for(;;){let n=r[0],l=Object.getPrototypeOf(n);if(l!=null&&l.prototype)r.unshift(l);else break}for(let n of r)for(let l of Object.getOwnPropertyNames(n.prototype))(t||l!=="constructor")&&Object.defineProperty(u.prototype,l,Object.getOwnPropertyDescriptor(n.prototype,l)??Object.create(null))}a.nextTick=typeof(We==null?void 0:We.nextTick)=="function"?We.nextTick:u=>{setTimeout(u,0)},a.MQTTJS_VERSION=Ep().version}),Ni=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.ReasonCodes=void 0;var s=nn();a.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(c,u)=>{let{messageId:e}=u,t=u.cmd,r=null,n=c.outgoing[e]?c.outgoing[e].cb:null,l=null;if(!n){c.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(c.log("_handleAck :: packet type",t),t){case"pubcomp":case"puback":{let f=u.reasonCode;f&&f>0&&f!==16?(l=new s.ErrorWithReasonCode(`Publish error: ${a.ReasonCodes[f]}`,f),c._removeOutgoingAndStoreMessage(e,()=>{n(l,u)})):c._removeOutgoingAndStoreMessage(e,n);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:e};let f=u.reasonCode;f&&f>0&&f!==16?(l=new s.ErrorWithReasonCode(`Publish error: ${a.ReasonCodes[f]}`,f),c._removeOutgoingAndStoreMessage(e,()=>{n(l,u)})):c._sendPacket(r);break}case"suback":{delete c.outgoing[e],c.messageIdProvider.deallocate(e);let f=u.granted;for(let h=0;h<f.length;h++){let p=f[h];if(p&128){l=new Error(`Subscribe error: ${a.ReasonCodes[p]}`),l.code=p;let y=c.messageIdToTopic[e];y&&y.forEach(b=>{delete c._resubscribeTopics[b]})}}delete c.messageIdToTopic[e],c._invokeStoreProcessingQueue(),n(l,u);break}case"unsuback":{delete c.outgoing[e],c.messageIdProvider.deallocate(e),c._invokeStoreProcessingQueue(),n(null,u);break}default:c.emit("error",new Error("unrecognized packet type"))}c.disconnecting&&Object.keys(c.outgoing).length===0&&c.emit("outgoingEmpty")};a.default=o}),Ap=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=nn(),o=Ni(),c=(u,e)=>{let{options:t}=u,r=t.protocolVersion,n=r===5?e.reasonCode:e.returnCode;if(r!==5){let l=new s.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,n);u.emit("error",l);return}u.handleAuth(e,(l,f)=>{if(l){u.emit("error",l);return}if(n===24)u.reconnecting=!1,u._sendPacket(f);else{let h=new s.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[n]}`,n);u.emit("error",h)}})};a.default=c}),xp=ve(a=>{var y,b,_,w,x,m,E,A,S,M,C,I,R,T,$,k,L,U,B,le,re,q,oe,K,ie,N,G,ce,H,hs,Z,D,se,Y,xu,ee,ge,fe,nr,ir,ps,$n,zn,Ge,ds,gn,or,ys,je;pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.LRUCache=void 0;var s=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,c=typeof We=="object"&&We?We:{},u=(d,g,v,O)=>{typeof c.emitWarning=="function"?c.emitWarning(d,g,v,O):console.error(`[${v}] ${g}: ${d}`)},e=globalThis.AbortController,t=globalThis.AbortSignal;if(typeof e>"u"){t=class{constructor(){Ae(this,"onabort");Ae(this,"_onabort",[]);Ae(this,"reason");Ae(this,"aborted",!1)}addEventListener(v,O){this._onabort.push(O)}},e=class{constructor(){Ae(this,"signal",new t);g()}abort(v){var O,F;if(!this.signal.aborted){this.signal.reason=v,this.signal.aborted=!0;for(let J of this.signal._onabort)J(v);(F=(O=this.signal).onabort)==null||F.call(O,v)}}};let d=((y=c.env)==null?void 0:y.LRU_CACHE_IGNORE_AC_WARNING)!=="1",g=()=>{d&&(d=!1,u("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",g))}}var r=d=>!o.has(d),n=d=>d&&d===Math.floor(d)&&d>0&&isFinite(d),l=d=>n(d)?d<=Math.pow(2,8)?Uint8Array:d<=Math.pow(2,16)?Uint16Array:d<=Math.pow(2,32)?Uint32Array:d<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(d){super(d),this.fill(0)}},h=(b=class{constructor(g,v){Ae(this,"heap");Ae(this,"length");if(!P(b,_))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new v(g),this.length=0}static create(g){let v=l(g);if(!v)return[];Re(b,_,!0);let O=new b(g,v);return Re(b,_,!1),O}push(g){this.heap[this.length++]=g}pop(){return this.heap[--this.length]}},_=new WeakMap,Be(b,_,!1),b),p=(je=class{constructor(g){Be(this,H);Be(this,m);Be(this,E);Be(this,A);Be(this,S);Be(this,M);Be(this,C);Ae(this,"ttl");Ae(this,"ttlResolution");Ae(this,"ttlAutopurge");Ae(this,"updateAgeOnGet");Ae(this,"updateAgeOnHas");Ae(this,"allowStale");Ae(this,"noDisposeOnSet");Ae(this,"noUpdateTTL");Ae(this,"maxEntrySize");Ae(this,"sizeCalculation");Ae(this,"noDeleteOnFetchRejection");Ae(this,"noDeleteOnStaleGet");Ae(this,"allowStaleOnFetchAbort");Ae(this,"allowStaleOnFetchRejection");Ae(this,"ignoreFetchAbort");Be(this,I);Be(this,R);Be(this,T);Be(this,$);Be(this,k);Be(this,L);Be(this,U);Be(this,B);Be(this,le);Be(this,re);Be(this,q);Be(this,oe);Be(this,K);Be(this,ie);Be(this,N);Be(this,G);Be(this,ce);Be(this,Z,()=>{});Be(this,D,()=>{});Be(this,se,()=>{});Be(this,Y,()=>!1);Be(this,ee,g=>{});Be(this,ge,(g,v,O)=>{});Be(this,fe,(g,v,O,F)=>{if(O||F)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ae(this,w,"LRUCache");let{max:v=0,ttl:O,ttlResolution:F=1,ttlAutopurge:J,updateAgeOnGet:ae,updateAgeOnHas:V,allowStale:te,dispose:Ie,disposeAfter:Pe,noDisposeOnSet:Oe,noUpdateTTL:Le,maxSize:Qe=0,maxEntrySize:Xe=0,sizeCalculation:De,fetchMethod:Ve,memoMethod:Ne,noDeleteOnFetchRejection:Fe,noDeleteOnStaleGet:He,allowStaleOnFetchRejection:Ze,allowStaleOnFetchAbort:ot,ignoreFetchAbort:Et}=g;if(v!==0&&!n(v))throw new TypeError("max option must be a nonnegative integer");let j=v?l(v):Array;if(!j)throw new Error("invalid max value: "+v);if(Re(this,m,v),Re(this,E,Qe),this.maxEntrySize=Xe||P(this,E),this.sizeCalculation=De,this.sizeCalculation){if(!P(this,E)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ne!==void 0&&typeof Ne!="function")throw new TypeError("memoMethod must be a function if defined");if(Re(this,C,Ne),Ve!==void 0&&typeof Ve!="function")throw new TypeError("fetchMethod must be a function if specified");if(Re(this,M,Ve),Re(this,G,!!Ve),Re(this,T,new Map),Re(this,$,new Array(v).fill(void 0)),Re(this,k,new Array(v).fill(void 0)),Re(this,L,new j(v)),Re(this,U,new j(v)),Re(this,B,0),Re(this,le,0),Re(this,re,h.create(v)),Re(this,I,0),Re(this,R,0),typeof Ie=="function"&&Re(this,A,Ie),typeof Pe=="function"?(Re(this,S,Pe),Re(this,q,[])):(Re(this,S,void 0),Re(this,q,void 0)),Re(this,N,!!P(this,A)),Re(this,ce,!!P(this,S)),this.noDisposeOnSet=!!Oe,this.noUpdateTTL=!!Le,this.noDeleteOnFetchRejection=!!Fe,this.allowStaleOnFetchRejection=!!Ze,this.allowStaleOnFetchAbort=!!ot,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(P(this,E)!==0&&!n(P(this,E)))throw new TypeError("maxSize must be a positive integer if specified");if(!n(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ee(this,H,xu).call(this)}if(this.allowStale=!!te,this.noDeleteOnStaleGet=!!He,this.updateAgeOnGet=!!ae,this.updateAgeOnHas=!!V,this.ttlResolution=n(F)||F===0?F:1,this.ttlAutopurge=!!J,this.ttl=O||0,this.ttl){if(!n(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ee(this,H,hs).call(this)}if(P(this,m)===0&&this.ttl===0&&P(this,E)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!P(this,m)&&!P(this,E)){let z="LRU_CACHE_UNBOUNDED";r(z)&&(o.add(z),u("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",z,je))}}static unsafeExposeInternals(g){return{starts:P(g,K),ttls:P(g,ie),sizes:P(g,oe),keyMap:P(g,T),keyList:P(g,$),valList:P(g,k),next:P(g,L),prev:P(g,U),get head(){return P(g,B)},get tail(){return P(g,le)},free:P(g,re),isBackgroundFetch:v=>{var O;return Ee(O=g,H,Ge).call(O,v)},backgroundFetch:(v,O,F,J)=>{var ae;return Ee(ae=g,H,zn).call(ae,v,O,F,J)},moveToTail:v=>{var O;return Ee(O=g,H,gn).call(O,v)},indexes:v=>{var O;return Ee(O=g,H,nr).call(O,v)},rindexes:v=>{var O;return Ee(O=g,H,ir).call(O,v)},isStale:v=>{var O;return P(O=g,Y).call(O,v)}}}get max(){return P(this,m)}get maxSize(){return P(this,E)}get calculatedSize(){return P(this,R)}get size(){return P(this,I)}get fetchMethod(){return P(this,M)}get memoMethod(){return P(this,C)}get dispose(){return P(this,A)}get disposeAfter(){return P(this,S)}getRemainingTTL(g){return P(this,T).has(g)?1/0:0}*entries(){for(let g of Ee(this,H,nr).call(this))P(this,k)[g]!==void 0&&P(this,$)[g]!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield[P(this,$)[g],P(this,k)[g]])}*rentries(){for(let g of Ee(this,H,ir).call(this))P(this,k)[g]!==void 0&&P(this,$)[g]!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield[P(this,$)[g],P(this,k)[g]])}*keys(){for(let g of Ee(this,H,nr).call(this)){let v=P(this,$)[g];v!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield v)}}*rkeys(){for(let g of Ee(this,H,ir).call(this)){let v=P(this,$)[g];v!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield v)}}*values(){for(let g of Ee(this,H,nr).call(this))P(this,k)[g]!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield P(this,k)[g])}*rvalues(){for(let g of Ee(this,H,ir).call(this))P(this,k)[g]!==void 0&&!Ee(this,H,Ge).call(this,P(this,k)[g])&&(yield P(this,k)[g])}[(x=Symbol.iterator,w=Symbol.toStringTag,x)](){return this.entries()}find(g,v={}){for(let O of Ee(this,H,nr).call(this)){let F=P(this,k)[O],J=Ee(this,H,Ge).call(this,F)?F.__staleWhileFetching:F;if(J!==void 0&&g(J,P(this,$)[O],this))return this.get(P(this,$)[O],v)}}forEach(g,v=this){for(let O of Ee(this,H,nr).call(this)){let F=P(this,k)[O],J=Ee(this,H,Ge).call(this,F)?F.__staleWhileFetching:F;J!==void 0&&g.call(v,J,P(this,$)[O],this)}}rforEach(g,v=this){for(let O of Ee(this,H,ir).call(this)){let F=P(this,k)[O],J=Ee(this,H,Ge).call(this,F)?F.__staleWhileFetching:F;J!==void 0&&g.call(v,J,P(this,$)[O],this)}}purgeStale(){let g=!1;for(let v of Ee(this,H,ir).call(this,{allowStale:!0}))P(this,Y).call(this,v)&&(Ee(this,H,or).call(this,P(this,$)[v],"expire"),g=!0);return g}info(g){let v=P(this,T).get(g);if(v===void 0)return;let O=P(this,k)[v],F=Ee(this,H,Ge).call(this,O)?O.__staleWhileFetching:O;if(F===void 0)return;let J={value:F};if(P(this,ie)&&P(this,K)){let ae=P(this,ie)[v],V=P(this,K)[v];if(ae&&V){let te=ae-(s.now()-V);J.ttl=te,J.start=Date.now()}}return P(this,oe)&&(J.size=P(this,oe)[v]),J}dump(){let g=[];for(let v of Ee(this,H,nr).call(this,{allowStale:!0})){let O=P(this,$)[v],F=P(this,k)[v],J=Ee(this,H,Ge).call(this,F)?F.__staleWhileFetching:F;if(J===void 0||O===void 0)continue;let ae={value:J};if(P(this,ie)&&P(this,K)){ae.ttl=P(this,ie)[v];let V=s.now()-P(this,K)[v];ae.start=Math.floor(Date.now()-V)}P(this,oe)&&(ae.size=P(this,oe)[v]),g.unshift([O,ae])}return g}load(g){this.clear();for(let[v,O]of g){if(O.start){let F=Date.now()-O.start;O.start=s.now()-F}this.set(v,O.value,O)}}set(g,v,O={}){var Le,Qe,Xe,De,Ve;if(v===void 0)return this.delete(g),this;let{ttl:F=this.ttl,start:J,noDisposeOnSet:ae=this.noDisposeOnSet,sizeCalculation:V=this.sizeCalculation,status:te}=O,{noUpdateTTL:Ie=this.noUpdateTTL}=O,Pe=P(this,fe).call(this,g,v,O.size||0,V);if(this.maxEntrySize&&Pe>this.maxEntrySize)return te&&(te.set="miss",te.maxEntrySizeExceeded=!0),Ee(this,H,or).call(this,g,"set"),this;let Oe=P(this,I)===0?void 0:P(this,T).get(g);if(Oe===void 0)Oe=P(this,I)===0?P(this,le):P(this,re).length!==0?P(this,re).pop():P(this,I)===P(this,m)?Ee(this,H,$n).call(this,!1):P(this,I),P(this,$)[Oe]=g,P(this,k)[Oe]=v,P(this,T).set(g,Oe),P(this,L)[P(this,le)]=Oe,P(this,U)[Oe]=P(this,le),Re(this,le,Oe),On(this,I)._++,P(this,ge).call(this,Oe,Pe,te),te&&(te.set="add"),Ie=!1;else{Ee(this,H,gn).call(this,Oe);let Ne=P(this,k)[Oe];if(v!==Ne){if(P(this,G)&&Ee(this,H,Ge).call(this,Ne)){Ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Fe}=Ne;Fe!==void 0&&!ae&&(P(this,N)&&((Le=P(this,A))==null||Le.call(this,Fe,g,"set")),P(this,ce)&&((Qe=P(this,q))==null||Qe.push([Fe,g,"set"])))}else ae||(P(this,N)&&((Xe=P(this,A))==null||Xe.call(this,Ne,g,"set")),P(this,ce)&&((De=P(this,q))==null||De.push([Ne,g,"set"])));if(P(this,ee).call(this,Oe),P(this,ge).call(this,Oe,Pe,te),P(this,k)[Oe]=v,te){te.set="replace";let Fe=Ne&&Ee(this,H,Ge).call(this,Ne)?Ne.__staleWhileFetching:Ne;Fe!==void 0&&(te.oldValue=Fe)}}else te&&(te.set="update")}if(F!==0&&!P(this,ie)&&Ee(this,H,hs).call(this),P(this,ie)&&(Ie||P(this,se).call(this,Oe,F,J),te&&P(this,D).call(this,te,Oe)),!ae&&P(this,ce)&&P(this,q)){let Ne=P(this,q),Fe;for(;Fe=Ne==null?void 0:Ne.shift();)(Ve=P(this,S))==null||Ve.call(this,...Fe)}return this}pop(){var g;try{for(;P(this,I);){let v=P(this,k)[P(this,B)];if(Ee(this,H,$n).call(this,!0),Ee(this,H,Ge).call(this,v)){if(v.__staleWhileFetching)return v.__staleWhileFetching}else if(v!==void 0)return v}}finally{if(P(this,ce)&&P(this,q)){let v=P(this,q),O;for(;O=v==null?void 0:v.shift();)(g=P(this,S))==null||g.call(this,...O)}}}has(g,v={}){let{updateAgeOnHas:O=this.updateAgeOnHas,status:F}=v,J=P(this,T).get(g);if(J!==void 0){let ae=P(this,k)[J];if(Ee(this,H,Ge).call(this,ae)&&ae.__staleWhileFetching===void 0)return!1;if(P(this,Y).call(this,J))F&&(F.has="stale",P(this,D).call(this,F,J));else return O&&P(this,Z).call(this,J),F&&(F.has="hit",P(this,D).call(this,F,J)),!0}else F&&(F.has="miss");return!1}peek(g,v={}){let{allowStale:O=this.allowStale}=v,F=P(this,T).get(g);if(F===void 0||!O&&P(this,Y).call(this,F))return;let J=P(this,k)[F];return Ee(this,H,Ge).call(this,J)?J.__staleWhileFetching:J}async fetch(g,v={}){let{allowStale:O=this.allowStale,updateAgeOnGet:F=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,ttl:ae=this.ttl,noDisposeOnSet:V=this.noDisposeOnSet,size:te=0,sizeCalculation:Ie=this.sizeCalculation,noUpdateTTL:Pe=this.noUpdateTTL,noDeleteOnFetchRejection:Oe=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Le=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:De,forceRefresh:Ve=!1,status:Ne,signal:Fe}=v;if(!P(this,G))return Ne&&(Ne.fetch="get"),this.get(g,{allowStale:O,updateAgeOnGet:F,noDeleteOnStaleGet:J,status:Ne});let He={allowStale:O,updateAgeOnGet:F,noDeleteOnStaleGet:J,ttl:ae,noDisposeOnSet:V,size:te,sizeCalculation:Ie,noUpdateTTL:Pe,noDeleteOnFetchRejection:Oe,allowStaleOnFetchRejection:Le,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ne,signal:Fe},Ze=P(this,T).get(g);if(Ze===void 0){Ne&&(Ne.fetch="miss");let ot=Ee(this,H,zn).call(this,g,Ze,He,De);return ot.__returned=ot}else{let ot=P(this,k)[Ze];if(Ee(this,H,Ge).call(this,ot)){let xe=O&&ot.__staleWhileFetching!==void 0;return Ne&&(Ne.fetch="inflight",xe&&(Ne.returnedStale=!0)),xe?ot.__staleWhileFetching:ot.__returned=ot}let Et=P(this,Y).call(this,Ze);if(!Ve&&!Et)return Ne&&(Ne.fetch="hit"),Ee(this,H,gn).call(this,Ze),F&&P(this,Z).call(this,Ze),Ne&&P(this,D).call(this,Ne,Ze),ot;let j=Ee(this,H,zn).call(this,g,Ze,He,De),z=j.__staleWhileFetching!==void 0&&O;return Ne&&(Ne.fetch=Et?"stale":"refresh",z&&Et&&(Ne.returnedStale=!0)),z?j.__staleWhileFetching:j.__returned=j}}async forceFetch(g,v={}){let O=await this.fetch(g,v);if(O===void 0)throw new Error("fetch() returned undefined");return O}memo(g,v={}){let O=P(this,C);if(!O)throw new Error("no memoMethod provided to constructor");let{context:F,forceRefresh:J,...ae}=v,V=this.get(g,ae);if(!J&&V!==void 0)return V;let te=O(g,V,{options:ae,context:F});return this.set(g,te,ae),te}get(g,v={}){let{allowStale:O=this.allowStale,updateAgeOnGet:F=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,status:ae}=v,V=P(this,T).get(g);if(V!==void 0){let te=P(this,k)[V],Ie=Ee(this,H,Ge).call(this,te);return ae&&P(this,D).call(this,ae,V),P(this,Y).call(this,V)?(ae&&(ae.get="stale"),Ie?(ae&&O&&te.__staleWhileFetching!==void 0&&(ae.returnedStale=!0),O?te.__staleWhileFetching:void 0):(J||Ee(this,H,or).call(this,g,"expire"),ae&&O&&(ae.returnedStale=!0),O?te:void 0)):(ae&&(ae.get="hit"),Ie?te.__staleWhileFetching:(Ee(this,H,gn).call(this,V),F&&P(this,Z).call(this,V),te))}else ae&&(ae.get="miss")}delete(g){return Ee(this,H,or).call(this,g,"delete")}clear(){return Ee(this,H,ys).call(this,"delete")}},m=new WeakMap,E=new WeakMap,A=new WeakMap,S=new WeakMap,M=new WeakMap,C=new WeakMap,I=new WeakMap,R=new WeakMap,T=new WeakMap,$=new WeakMap,k=new WeakMap,L=new WeakMap,U=new WeakMap,B=new WeakMap,le=new WeakMap,re=new WeakMap,q=new WeakMap,oe=new WeakMap,K=new WeakMap,ie=new WeakMap,N=new WeakMap,G=new WeakMap,ce=new WeakMap,H=new WeakSet,hs=function(){let g=new f(P(this,m)),v=new f(P(this,m));Re(this,ie,g),Re(this,K,v),Re(this,se,(J,ae,V=s.now())=>{if(v[J]=ae!==0?V:0,g[J]=ae,ae!==0&&this.ttlAutopurge){let te=setTimeout(()=>{P(this,Y).call(this,J)&&Ee(this,H,or).call(this,P(this,$)[J],"expire")},ae+1);te.unref&&te.unref()}}),Re(this,Z,J=>{v[J]=g[J]!==0?s.now():0}),Re(this,D,(J,ae)=>{if(g[ae]){let V=g[ae],te=v[ae];if(!V||!te)return;J.ttl=V,J.start=te,J.now=O||F();let Ie=J.now-te;J.remainingTTL=V-Ie}});let O=0,F=()=>{let J=s.now();if(this.ttlResolution>0){O=J;let ae=setTimeout(()=>O=0,this.ttlResolution);ae.unref&&ae.unref()}return J};this.getRemainingTTL=J=>{let ae=P(this,T).get(J);if(ae===void 0)return 0;let V=g[ae],te=v[ae];if(!V||!te)return 1/0;let Ie=(O||F())-te;return V-Ie},Re(this,Y,J=>{let ae=v[J],V=g[J];return!!V&&!!ae&&(O||F())-ae>V})},Z=new WeakMap,D=new WeakMap,se=new WeakMap,Y=new WeakMap,xu=function(){let g=new f(P(this,m));Re(this,R,0),Re(this,oe,g),Re(this,ee,v=>{Re(this,R,P(this,R)-g[v]),g[v]=0}),Re(this,fe,(v,O,F,J)=>{if(Ee(this,H,Ge).call(this,O))return 0;if(!n(F))if(J){if(typeof J!="function")throw new TypeError("sizeCalculation must be a function");if(F=J(O,v),!n(F))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return F}),Re(this,ge,(v,O,F)=>{if(g[v]=O,P(this,E)){let J=P(this,E)-g[v];for(;P(this,R)>J;)Ee(this,H,$n).call(this,!0)}Re(this,R,P(this,R)+g[v]),F&&(F.entrySize=O,F.totalCalculatedSize=P(this,R))})},ee=new WeakMap,ge=new WeakMap,fe=new WeakMap,nr=function*({allowStale:g=this.allowStale}={}){if(P(this,I))for(let v=P(this,le);!(!Ee(this,H,ps).call(this,v)||((g||!P(this,Y).call(this,v))&&(yield v),v===P(this,B)));)v=P(this,U)[v]},ir=function*({allowStale:g=this.allowStale}={}){if(P(this,I))for(let v=P(this,B);!(!Ee(this,H,ps).call(this,v)||((g||!P(this,Y).call(this,v))&&(yield v),v===P(this,le)));)v=P(this,L)[v]},ps=function(g){return g!==void 0&&P(this,T).get(P(this,$)[g])===g},$n=function(g){var J,ae;let v=P(this,B),O=P(this,$)[v],F=P(this,k)[v];return P(this,G)&&Ee(this,H,Ge).call(this,F)?F.__abortController.abort(new Error("evicted")):(P(this,N)||P(this,ce))&&(P(this,N)&&((J=P(this,A))==null||J.call(this,F,O,"evict")),P(this,ce)&&((ae=P(this,q))==null||ae.push([F,O,"evict"]))),P(this,ee).call(this,v),g&&(P(this,$)[v]=void 0,P(this,k)[v]=void 0,P(this,re).push(v)),P(this,I)===1?(Re(this,B,Re(this,le,0)),P(this,re).length=0):Re(this,B,P(this,L)[v]),P(this,T).delete(O),On(this,I)._--,v},zn=function(g,v,O,F){let J=v===void 0?void 0:P(this,k)[v];if(Ee(this,H,Ge).call(this,J))return J;let ae=new e,{signal:V}=O;V==null||V.addEventListener("abort",()=>ae.abort(V.reason),{signal:ae.signal});let te={signal:ae.signal,options:O,context:F},Ie=(De,Ve=!1)=>{let{aborted:Ne}=ae.signal,Fe=O.ignoreFetchAbort&&De!==void 0;if(O.status&&(Ne&&!Ve?(O.status.fetchAborted=!0,O.status.fetchError=ae.signal.reason,Fe&&(O.status.fetchAbortIgnored=!0)):O.status.fetchResolved=!0),Ne&&!Fe&&!Ve)return Oe(ae.signal.reason);let He=Qe;return P(this,k)[v]===Qe&&(De===void 0?He.__staleWhileFetching?P(this,k)[v]=He.__staleWhileFetching:Ee(this,H,or).call(this,g,"fetch"):(O.status&&(O.status.fetchUpdated=!0),this.set(g,De,te.options))),De},Pe=De=>(O.status&&(O.status.fetchRejected=!0,O.status.fetchError=De),Oe(De)),Oe=De=>{let{aborted:Ve}=ae.signal,Ne=Ve&&O.allowStaleOnFetchAbort,Fe=Ne||O.allowStaleOnFetchRejection,He=Fe||O.noDeleteOnFetchRejection,Ze=Qe;if(P(this,k)[v]===Qe&&(!He||Ze.__staleWhileFetching===void 0?Ee(this,H,or).call(this,g,"fetch"):Ne||(P(this,k)[v]=Ze.__staleWhileFetching)),Fe)return O.status&&Ze.__staleWhileFetching!==void 0&&(O.status.returnedStale=!0),Ze.__staleWhileFetching;if(Ze.__returned===Ze)throw De},Le=(De,Ve)=>{var Fe;let Ne=(Fe=P(this,M))==null?void 0:Fe.call(this,g,J,te);Ne&&Ne instanceof Promise&&Ne.then(He=>De(He===void 0?void 0:He),Ve),ae.signal.addEventListener("abort",()=>{(!O.ignoreFetchAbort||O.allowStaleOnFetchAbort)&&(De(void 0),O.allowStaleOnFetchAbort&&(De=He=>Ie(He,!0)))})};O.status&&(O.status.fetchDispatched=!0);let Qe=new Promise(Le).then(Ie,Pe),Xe=Object.assign(Qe,{__abortController:ae,__staleWhileFetching:J,__returned:void 0});return v===void 0?(this.set(g,Xe,{...te.options,status:void 0}),v=P(this,T).get(g)):P(this,k)[v]=Xe,Xe},Ge=function(g){if(!P(this,G))return!1;let v=g;return!!v&&v instanceof Promise&&v.hasOwnProperty("__staleWhileFetching")&&v.__abortController instanceof e},ds=function(g,v){P(this,U)[v]=g,P(this,L)[g]=v},gn=function(g){g!==P(this,le)&&(g===P(this,B)?Re(this,B,P(this,L)[g]):Ee(this,H,ds).call(this,P(this,U)[g],P(this,L)[g]),Ee(this,H,ds).call(this,P(this,le),g),Re(this,le,g))},or=function(g,v){var F,J,ae,V;let O=!1;if(P(this,I)!==0){let te=P(this,T).get(g);if(te!==void 0)if(O=!0,P(this,I)===1)Ee(this,H,ys).call(this,v);else{P(this,ee).call(this,te);let Ie=P(this,k)[te];if(Ee(this,H,Ge).call(this,Ie)?Ie.__abortController.abort(new Error("deleted")):(P(this,N)||P(this,ce))&&(P(this,N)&&((F=P(this,A))==null||F.call(this,Ie,g,v)),P(this,ce)&&((J=P(this,q))==null||J.push([Ie,g,v]))),P(this,T).delete(g),P(this,$)[te]=void 0,P(this,k)[te]=void 0,te===P(this,le))Re(this,le,P(this,U)[te]);else if(te===P(this,B))Re(this,B,P(this,L)[te]);else{let Pe=P(this,U)[te];P(this,L)[Pe]=P(this,L)[te];let Oe=P(this,L)[te];P(this,U)[Oe]=P(this,U)[te]}On(this,I)._--,P(this,re).push(te)}}if(P(this,ce)&&((ae=P(this,q))!=null&&ae.length)){let te=P(this,q),Ie;for(;Ie=te==null?void 0:te.shift();)(V=P(this,S))==null||V.call(this,...Ie)}return O},ys=function(g){var v,O,F;for(let J of Ee(this,H,ir).call(this,{allowStale:!0})){let ae=P(this,k)[J];if(Ee(this,H,Ge).call(this,ae))ae.__abortController.abort(new Error("deleted"));else{let V=P(this,$)[J];P(this,N)&&((v=P(this,A))==null||v.call(this,ae,V,g)),P(this,ce)&&((O=P(this,q))==null||O.push([ae,V,g]))}}if(P(this,T).clear(),P(this,k).fill(void 0),P(this,$).fill(void 0),P(this,ie)&&P(this,K)&&(P(this,ie).fill(0),P(this,K).fill(0)),P(this,oe)&&P(this,oe).fill(0),Re(this,B,0),Re(this,le,0),P(this,re).length=0,Re(this,R,0),Re(this,I,0),P(this,ce)&&P(this,q)){let J=P(this,q),ae;for(;ae=J==null?void 0:J.shift();)(F=P(this,S))==null||F.call(this,...ae)}},je);a.LRUCache=p}),Zt=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.ContainerIterator=a.Container=a.Base=void 0;var s=class{constructor(u=0){this.iteratorType=u}equals(u){return this.o===u.o}};a.ContainerIterator=s;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};a.Base=o;var c=class extends o{};a.Container=c}),kp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Zt(),o=class extends s.Base{constructor(u=[]){super(),this.S=[];let e=this;u.forEach(function(t){e.push(t)})}clear(){this.i=0,this.S=[]}push(u){return this.S.push(u),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},c=o;a.default=c}),Ip=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Zt(),o=class extends s.Base{constructor(u=[]){super(),this.j=0,this.q=[];let e=this;u.forEach(function(t){e.push(t)})}clear(){this.q=[],this.i=this.j=0}push(u){let e=this.q.length;if(this.j/e>.5&&this.j+this.i>=e&&e>4096){let t=this.i;for(let r=0;r<t;++r)this.q[r]=this.q[this.j+r];this.j=0,this.q[this.i]=u}else this.q[this.j+this.i]=u;return++this.i}pop(){if(this.i===0)return;let u=this.q[this.j++];return this.i-=1,u}front(){if(this.i!==0)return this.q[this.j]}},c=o;a.default=c}),Tp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Zt(),o=class extends s.Base{constructor(u=[],e=function(r,n){return r>n?-1:r<n?1:0},t=!0){if(super(),this.v=e,Array.isArray(u))this.C=t?[...u]:u;else{this.C=[];let n=this;u.forEach(function(l){n.C.push(l)})}this.i=this.C.length;let r=this.i>>1;for(let n=this.i-1>>1;n>=0;--n)this.k(n,r)}m(u){let e=this.C[u];for(;u>0;){let t=u-1>>1,r=this.C[t];if(this.v(r,e)<=0)break;this.C[u]=r,u=t}this.C[u]=e}k(u,e){let t=this.C[u];for(;u<e;){let r=u<<1|1,n=r+1,l=this.C[r];if(n<this.i&&this.v(l,this.C[n])>0&&(r=n,l=this.C[n]),this.v(l,t)>=0)break;this.C[u]=l,u=r}this.C[u]=t}clear(){this.i=0,this.C.length=0}push(u){this.C.push(u),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let u=this.C[0],e=this.C.pop();return this.i-=1,this.i&&(this.C[0]=e,this.k(0,this.i>>1)),u}top(){return this.C[0]}find(u){return this.C.indexOf(u)>=0}remove(u){let e=this.C.indexOf(u);return e<0?!1:(e===0?this.pop():e===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(e,1,this.C.pop()),this.i-=1,this.m(e),this.k(e,this.i>>1)),!0)}updateItem(u){let e=this.C.indexOf(u);return e<0?!1:(this.m(e),this.k(e,this.i>>1),!0)}toArray(){return[...this.C]}},c=o;a.default=c}),va=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Zt(),o=class extends s.Container{},c=o;a.default=c}),Xt=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.throwIteratorAccessError=s;function s(){throw new RangeError("Iterator access denied!")}}),ku=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.RandomIterator=void 0;var s=Zt(),o=Xt(),c=class extends s.ContainerIterator{constructor(u,e){super(e),this.o=u,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(u){this.container.setElementByPos(this.o,u)}};a.RandomIterator=c}),Pp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=c(va()),o=ku();function c(r){return r&&r.t?r:{default:r}}var u=class Iu extends o.RandomIterator{constructor(n,l,f){super(n,f),this.container=l}copy(){return new Iu(this.o,this.container,this.iteratorType)}},e=class extends s.default{constructor(r=[],n=!0){if(super(),Array.isArray(r))this.J=n?[...r]:r,this.i=r.length;else{this.J=[];let l=this;r.forEach(function(f){l.pushBack(f)})}}clear(){this.i=0,this.J.length=0}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J[r]}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J.splice(r,1),this.i-=1,this.i}eraseElementByValue(r){let n=0;for(let l=0;l<this.i;++l)this.J[l]!==r&&(this.J[n++]=this.J[l]);return this.i=this.J.length=n,this.i}eraseElementByIterator(r){let n=r.o;return r=r.next(),this.eraseElementByPos(n),r}pushBack(r){return this.J.push(r),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(r,n){if(r<0||r>this.i-1)throw new RangeError;this.J[r]=n}insert(r,n,l=1){if(r<0||r>this.i)throw new RangeError;return this.J.splice(r,0,...new Array(l).fill(n)),this.i+=l,this.i}find(r){for(let n=0;n<this.i;++n)if(this.J[n]===r)return new u(n,this);return this.end()}reverse(){this.J.reverse()}unique(){let r=1;for(let n=1;n<this.i;++n)this.J[n]!==this.J[n-1]&&(this.J[r++]=this.J[n]);return this.i=this.J.length=r,this.i}sort(r){this.J.sort(r)}forEach(r){for(let n=0;n<this.i;++n)r(this.J[n],n,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},t=e;a.default=t}),Op=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=u(va()),o=Zt(),c=Xt();function u(n){return n&&n.t?n:{default:n}}var e=class Tu extends o.ContainerIterator{constructor(l,f,h,p){super(p),this.o=l,this.h=f,this.container=h,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o.l=l}copy(){return new Tu(this.o,this.h,this.container,this.iteratorType)}},t=class extends s.default{constructor(n=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let l=this;n.forEach(function(f){l.pushBack(f)})}V(n){let{L:l,B:f}=n;l.B=f,f.L=l,n===this.p&&(this.p=f),n===this._&&(this._=l),this.i-=1}G(n,l){let f=l.B,h={l:n,L:l,B:f};l.B=h,f.L=h,l===this.h&&(this.p=h),f===this.h&&(this._=h),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new e(this.p,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this._,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l=this.p;for(;n--;)l=l.B;return l.l}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l=this.p;for(;n--;)l=l.B;return this.V(l),this.i}eraseElementByValue(n){let l=this.p;for(;l!==this.h;)l.l===n&&this.V(l),l=l.B;return this.i}eraseElementByIterator(n){let l=n.o;return l===this.h&&(0,c.throwIteratorAccessError)(),n=n.next(),this.V(l),n}pushBack(n){return this.G(n,this._),this.i}popBack(){if(this.i===0)return;let n=this._.l;return this.V(this._),n}pushFront(n){return this.G(n,this.h),this.i}popFront(){if(this.i===0)return;let n=this.p.l;return this.V(this.p),n}setElementByPos(n,l){if(n<0||n>this.i-1)throw new RangeError;let f=this.p;for(;n--;)f=f.B;f.l=l}insert(n,l,f=1){if(n<0||n>this.i)throw new RangeError;if(f<=0)return this.i;if(n===0)for(;f--;)this.pushFront(l);else if(n===this.i)for(;f--;)this.pushBack(l);else{let h=this.p;for(let y=1;y<n;++y)h=h.B;let p=h.B;for(this.i+=f;f--;)h.B={l,L:h},h.B.L=h,h=h.B;h.B=p,p.L=h}return this.i}find(n){let l=this.p;for(;l!==this.h;){if(l.l===n)return new e(l,this.h,this);l=l.B}return this.end()}reverse(){if(this.i<=1)return;let n=this.p,l=this._,f=0;for(;f<<1<this.i;){let h=n.l;n.l=l.l,l.l=h,n=n.B,l=l.L,f+=1}}unique(){if(this.i<=1)return this.i;let n=this.p;for(;n!==this.h;){let l=n;for(;l.B!==this.h&&l.l===l.B.l;)l=l.B,this.i-=1;n.B=l.B,n.B.L=n,n=n.B}return this.i}sort(n){if(this.i<=1)return;let l=[];this.forEach(function(h){l.push(h)}),l.sort(n);let f=this.p;l.forEach(function(h){f.l=h,f=f.B})}merge(n){let l=this;if(this.i===0)n.forEach(function(f){l.pushBack(f)});else{let f=this.p;n.forEach(function(h){for(;f!==l.h&&f.l<=h;)f=f.B;l.G(h,f.L)})}return this.i}forEach(n){let l=this.p,f=0;for(;l!==this.h;)n(l.l,f++,this),l=l.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let n=this.p;for(;n!==this.h;)yield n.l,n=n.B}).bind(this)()}},r=t;a.default=r}),Cp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=c(va()),o=ku();function c(r){return r&&r.t?r:{default:r}}var u=class Pu extends o.RandomIterator{constructor(n,l,f){super(n,f),this.container=l}copy(){return new Pu(this.o,this.container,this.iteratorType)}},e=class extends s.default{constructor(r=[],n=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let l=(()=>{if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size;if(typeof r.size=="function")return r.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=n,this.P=Math.max(Math.ceil(l/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let f=Math.ceil(l/this.F);this.j=this.R=(this.P>>1)-(f>>1),this.D=this.N=this.F-l%this.F>>1;let h=this;r.forEach(function(p){h.pushBack(p)})}T(){let r=[],n=Math.max(this.P>>1,1);for(let l=0;l<n;++l)r[l]=new Array(this.F);for(let l=this.j;l<this.P;++l)r[r.length]=this.A[l];for(let l=0;l<this.R;++l)r[r.length]=this.A[l];r[r.length]=[...this.A[this.R]],this.j=n,this.R=r.length-1;for(let l=0;l<n;++l)r[r.length]=new Array(this.F);this.A=r,this.P=r.length}O(r){let n=this.D+r+1,l=n%this.F,f=l-1,h=this.j+(n-l)/this.F;return l===0&&(h-=1),h%=this.P,f<0&&(f+=this.F),{curNodeBucketIndex:h,curNodePointerIndex:f}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(r){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=r,this.i}popBack(){if(this.i===0)return;let r=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,r}pushFront(r){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=r,this.i}popFront(){if(this.i===0)return;let r=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,r}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:l}=this.O(r);return this.A[n][l]}setElementByPos(r,n){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:f}=this.O(r);this.A[l][f]=n}insert(r,n,l=1){if(r<0||r>this.i)throw new RangeError;if(r===0)for(;l--;)this.pushFront(n);else if(r===this.i)for(;l--;)this.pushBack(n);else{let f=[];for(let h=r;h<this.i;++h)f.push(this.getElementByPos(h));this.cut(r-1);for(let h=0;h<l;++h)this.pushBack(n);for(let h=0;h<f.length;++h)this.pushBack(f[h])}return this.i}cut(r){if(r<0)return this.clear(),0;let{curNodeBucketIndex:n,curNodePointerIndex:l}=this.O(r);return this.R=n,this.N=l,this.i=r+1,this.i}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;if(r===0)this.popFront();else if(r===this.i-1)this.popBack();else{let n=[];for(let f=r+1;f<this.i;++f)n.push(this.getElementByPos(f));this.cut(r),this.popBack();let l=this;n.forEach(function(f){l.pushBack(f)})}return this.i}eraseElementByValue(r){if(this.i===0)return 0;let n=[];for(let f=0;f<this.i;++f){let h=this.getElementByPos(f);h!==r&&n.push(h)}let l=n.length;for(let f=0;f<l;++f)this.setElementByPos(f,n[f]);return this.cut(l-1)}eraseElementByIterator(r){let n=r.o;return this.eraseElementByPos(n),r=r.next(),r}find(r){for(let n=0;n<this.i;++n)if(this.getElementByPos(n)===r)return new u(n,this);return this.end()}reverse(){let r=0,n=this.i-1;for(;r<n;){let l=this.getElementByPos(r);this.setElementByPos(r,this.getElementByPos(n)),this.setElementByPos(n,l),r+=1,n-=1}}unique(){if(this.i<=1)return this.i;let r=1,n=this.getElementByPos(0);for(let l=1;l<this.i;++l){let f=this.getElementByPos(l);f!==n&&(n=f,this.setElementByPos(r++,f))}for(;this.i>r;)this.popBack();return this.i}sort(r){let n=[];for(let l=0;l<this.i;++l)n.push(this.getElementByPos(l));n.sort(r);for(let l=0;l<this.i;++l)this.setElementByPos(l,n[l])}shrinkToFit(){if(this.i===0)return;let r=[];this.forEach(function(n){r.push(n)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let n=0;n<this.P;++n)this.A.push(new Array(this.F));for(let n=0;n<r.length;++n)this.pushBack(r[n])}forEach(r){for(let n=0;n<this.i;++n)r(this.getElementByPos(n),n,this)}[Symbol.iterator](){return(function*(){for(let r=0;r<this.i;++r)yield this.getElementByPos(r)}).bind(this)()}},t=e;a.default=t}),Rp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.TreeNodeEnableIndex=a.TreeNode=void 0;var s=class{constructor(c,u){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=c,this.l=u}L(){let c=this;if(c.ee===1&&c.tt.tt===c)c=c.W;else if(c.U)for(c=c.U;c.W;)c=c.W;else{let u=c.tt;for(;u.U===c;)c=u,u=c.tt;c=u}return c}B(){let c=this;if(c.W){for(c=c.W;c.U;)c=c.U;return c}else{let u=c.tt;for(;u.W===c;)c=u,u=c.tt;return c.W!==u?u:c}}te(){let c=this.tt,u=this.W,e=u.U;return c.tt===this?c.tt=u:c.U===this?c.U=u:c.W=u,u.tt=c,u.U=this,this.tt=u,this.W=e,e&&(e.tt=this),u}se(){let c=this.tt,u=this.U,e=u.W;return c.tt===this?c.tt=u:c.U===this?c.U=u:c.W=u,u.tt=c,u.W=this,this.tt=u,this.U=e,e&&(e.tt=this),u}};a.TreeNode=s;var o=class extends s{constructor(){super(...arguments),this.rt=1}te(){let c=super.te();return this.ie(),c.ie(),c}se(){let c=super.se();return this.ie(),c.ie(),c}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};a.TreeNodeEnableIndex=o}),Ou=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Rp(),o=Zt(),c=Xt(),u=class extends o.Container{constructor(t=function(n,l){return n<l?-1:n>l?1:0},r=!1){super(),this.Y=void 0,this.v=t,r?(this.re=s.TreeNodeEnableIndex,this.M=function(n,l,f){let h=this.ne(n,l,f);if(h){let p=h.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let y=this.he(h);if(y){let{parentNode:b,grandParent:_,curNode:w}=y;b.ie(),_.ie(),w.ie()}}return this.i},this.V=function(n){let l=this.fe(n);for(;l!==this.h;)l.rt-=1,l=l.tt}):(this.re=s.TreeNode,this.M=function(n,l,f){let h=this.ne(n,l,f);return h&&this.he(h),this.i},this.V=this.fe),this.h=new this.re}X(t,r){let n=this.h;for(;t;){let l=this.v(t.u,r);if(l<0)t=t.W;else if(l>0)n=t,t=t.U;else return t}return n}Z(t,r){let n=this.h;for(;t;)this.v(t.u,r)<=0?t=t.W:(n=t,t=t.U);return n}$(t,r){let n=this.h;for(;t;){let l=this.v(t.u,r);if(l<0)n=t,t=t.W;else if(l>0)t=t.U;else return t}return n}rr(t,r){let n=this.h;for(;t;)this.v(t.u,r)<0?(n=t,t=t.W):t=t.U;return n}ue(t){for(;;){let r=t.tt;if(r===this.h)return;if(t.ee===1){t.ee=0;return}if(t===r.U){let n=r.W;if(n.ee===1)n.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(n.W&&n.W.ee===1){n.ee=r.ee,r.ee=0,n.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else n.U&&n.U.ee===1?(n.ee=1,n.U.ee=0,n.se()):(n.ee=1,t=r)}else{let n=r.U;if(n.ee===1)n.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(n.U&&n.U.ee===1){n.ee=r.ee,r.ee=0,n.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else n.W&&n.W.ee===1?(n.ee=1,n.W.ee=0,n.te()):(n.ee=1,t=r)}}}fe(t){if(this.i===1)return this.clear(),this.h;let r=t;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[t.u,r.u]=[r.u,t.u],[t.l,r.l]=[r.l,t.l],t=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let n=r.tt;return r===n.U?n.U=void 0:n.W=void 0,this.i-=1,this.Y.ee=0,n}oe(t,r){return t===void 0?!1:this.oe(t.U,r)||r(t)?!0:this.oe(t.W,r)}he(t){for(;;){let r=t.tt;if(r.ee===0)return;let n=r.tt;if(r===n.U){let l=n.W;if(l&&l.ee===1){if(l.ee=r.ee=0,n===this.Y)return;n.ee=1,t=n;continue}else if(t===r.W){if(t.ee=0,t.U&&(t.U.tt=r),t.W&&(t.W.tt=n),r.W=t.U,n.U=t.W,t.U=r,t.W=n,n===this.Y)this.Y=t,this.h.tt=t;else{let f=n.tt;f.U===n?f.U=t:f.W=t}return t.tt=n.tt,r.tt=t,n.tt=t,n.ee=1,{parentNode:r,grandParent:n,curNode:t}}else r.ee=0,n===this.Y?this.Y=n.se():n.se(),n.ee=1}else{let l=n.U;if(l&&l.ee===1){if(l.ee=r.ee=0,n===this.Y)return;n.ee=1,t=n;continue}else if(t===r.U){if(t.ee=0,t.U&&(t.U.tt=n),t.W&&(t.W.tt=r),n.W=t.U,r.U=t.W,t.U=n,t.W=r,n===this.Y)this.Y=t,this.h.tt=t;else{let f=n.tt;f.U===n?f.U=t:f.W=t}return t.tt=n.tt,r.tt=t,n.tt=t,n.ee=1,{parentNode:r,grandParent:n,curNode:t}}else r.ee=0,n===this.Y?this.Y=n.te():n.te(),n.ee=1}return}}ne(t,r,n){if(this.Y===void 0){this.i+=1,this.Y=new this.re(t,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let l,f=this.h.U,h=this.v(f.u,t);if(h===0){f.l=r;return}else if(h>0)f.U=new this.re(t,r),f.U.tt=f,l=f.U,this.h.U=l;else{let p=this.h.W,y=this.v(p.u,t);if(y===0){p.l=r;return}else if(y<0)p.W=new this.re(t,r),p.W.tt=p,l=p.W,this.h.W=l;else{if(n!==void 0){let b=n.o;if(b!==this.h){let _=this.v(b.u,t);if(_===0){b.l=r;return}else if(_>0){let w=b.L(),x=this.v(w.u,t);if(x===0){w.l=r;return}else x<0&&(l=new this.re(t,r),w.W===void 0?(w.W=l,l.tt=w):(b.U=l,l.tt=b))}}}if(l===void 0)for(l=this.Y;;){let b=this.v(l.u,t);if(b>0){if(l.U===void 0){l.U=new this.re(t,r),l.U.tt=l,l=l.U;break}l=l.U}else if(b<0){if(l.W===void 0){l.W=new this.re(t,r),l.W.tt=l,l=l.W;break}l=l.W}else{l.l=r;return}}}}return this.i+=1,l}I(t,r){for(;t;){let n=this.v(t.u,r);if(n<0)t=t.W;else if(n>0)t=t.U;else return t}return t||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(t,r){let n=t.o;if(n===this.h&&(0,c.throwIteratorAccessError)(),this.i===1)return n.u=r,!0;if(n===this.h.U)return this.v(n.B().u,r)>0?(n.u=r,!0):!1;if(n===this.h.W)return this.v(n.L().u,r)<0?(n.u=r,!0):!1;let l=n.L().u;if(this.v(l,r)>=0)return!1;let f=n.B().u;return this.v(f,r)<=0?!1:(n.u=r,!0)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=0,n=this;return this.oe(this.Y,function(l){return t===r?(n.V(l),!0):(r+=1,!1)}),this.i}eraseElementByKey(t){if(this.i===0)return!1;let r=this.I(this.Y,t);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(t){let r=t.o;r===this.h&&(0,c.throwIteratorAccessError)();let n=r.W===void 0;return t.iteratorType===0?n&&t.next():(!n||r.U===void 0)&&t.next(),this.V(r),t}forEach(t){let r=0;for(let n of this)t(n,r++,this)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r,n=0;for(let l of this){if(n===t){r=l;break}n+=1}return r}getHeight(){if(this.i===0)return 0;let t=function(r){return r?Math.max(t(r.U),t(r.W))+1:0};return t(this.Y)}},e=u;a.default=e}),Cu=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=Zt(),o=Xt(),c=class extends s.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){let n=e.tt;e===n.W&&(r+=1,n.U&&(r+=n.U.rt)),e=n}return r}},u=c;a.default=u}),Mp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=u(Ou()),o=u(Cu()),c=Xt();function u(n){return n&&n.t?n:{default:n}}var e=class Ru extends o.default{constructor(l,f,h,p){super(l,f,p),this.container=h}get pointer(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o.u}copy(){return new Ru(this.o,this.h,this.container,this.iteratorType)}},t=class extends s.default{constructor(n=[],l,f){super(l,f);let h=this;n.forEach(function(p){h.insert(p)})}*K(n){n!==void 0&&(yield*this.K(n.U),yield n.u,yield*this.K(n.W))}begin(){return new e(this.h.U||this.h,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this.h.W||this.h,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(n,l){return this.M(n,void 0,l)}find(n){let l=this.I(this.Y,n);return new e(l,this.h,this)}lowerBound(n){let l=this.X(this.Y,n);return new e(l,this.h,this)}upperBound(n){let l=this.Z(this.Y,n);return new e(l,this.h,this)}reverseLowerBound(n){let l=this.$(this.Y,n);return new e(l,this.h,this)}reverseUpperBound(n){let l=this.rr(this.Y,n);return new e(l,this.h,this)}union(n){let l=this;return n.forEach(function(f){l.insert(f)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=t;a.default=r}),Np=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=u(Ou()),o=u(Cu()),c=Xt();function u(n){return n&&n.t?n:{default:n}}var e=class Mu extends o.default{constructor(l,f,h,p){super(l,f,p),this.container=h}get pointer(){this.o===this.h&&(0,c.throwIteratorAccessError)();let l=this;return new Proxy([],{get(f,h){if(h==="0")return l.o.u;if(h==="1")return l.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return l.o.l=p,!0}})}copy(){return new Mu(this.o,this.h,this.container,this.iteratorType)}},t=class extends s.default{constructor(n=[],l,f){super(l,f);let h=this;n.forEach(function(p){h.setElement(p[0],p[1])})}*K(n){n!==void 0&&(yield*this.K(n.U),yield[n.u,n.l],yield*this.K(n.W))}begin(){return new e(this.h.U||this.h,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this.h.W||this.h,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){if(this.i===0)return;let n=this.h.U;return[n.u,n.l]}back(){if(this.i===0)return;let n=this.h.W;return[n.u,n.l]}lowerBound(n){let l=this.X(this.Y,n);return new e(l,this.h,this)}upperBound(n){let l=this.Z(this.Y,n);return new e(l,this.h,this)}reverseLowerBound(n){let l=this.$(this.Y,n);return new e(l,this.h,this)}reverseUpperBound(n){let l=this.rr(this.Y,n);return new e(l,this.h,this)}setElement(n,l,f){return this.M(n,l,f)}find(n){let l=this.I(this.Y,n);return new e(l,this.h,this)}getElementByKey(n){return this.I(this.Y,n).l}union(n){let l=this;return n.forEach(function(f){l.setElement(f[0],f[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=t;a.default=r}),Nu=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=s;function s(o){let c=typeof o;return c==="object"&&o!==null||c==="function"}}),ju=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.HashContainerIterator=a.HashContainer=void 0;var s=Zt(),o=u(Nu()),c=Xt();function u(r){return r&&r.t?r:{default:r}}var e=class extends s.ContainerIterator{constructor(r,n,l){super(l),this.o=r,this.h=n,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,c.throwIteratorAccessError)(),this.o=this.o.L,this})}};a.HashContainerIterator=e;var t=class extends s.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(r){let{L:n,B:l}=r;n.B=l,l.L=n,r===this.p&&(this.p=l),r===this._&&(this._=n),this.i-=1}M(r,n,l){l===void 0&&(l=(0,o.default)(r));let f;if(l){let h=r[this.HASH_TAG];if(h!==void 0)return this.H[h].l=n,this.i;Object.defineProperty(r,this.HASH_TAG,{value:this.H.length,configurable:!0}),f={u:r,l:n,L:this._,B:this.h},this.H.push(f)}else{let h=this.g[r];if(h)return h.l=n,this.i;f={u:r,l:n,L:this._,B:this.h},this.g[r]=f}return this.i===0?(this.p=f,this.h.B=f):this._.B=f,this._=f,this.h.L=f,++this.i}I(r,n){if(n===void 0&&(n=(0,o.default)(r)),n){let l=r[this.HASH_TAG];return l===void 0?this.h:this.H[l]}else return this.g[r]||this.h}clear(){let r=this.HASH_TAG;this.H.forEach(function(n){delete n.u[r]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(r,n){let l;if(n===void 0&&(n=(0,o.default)(r)),n){let f=r[this.HASH_TAG];if(f===void 0)return!1;delete r[this.HASH_TAG],l=this.H[f],delete this.H[f]}else{if(l=this.g[r],l===void 0)return!1;delete this.g[r]}return this.V(l),!0}eraseElementByIterator(r){let n=r.o;return n===this.h&&(0,c.throwIteratorAccessError)(),this.V(n),r.next()}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return this.V(n),this.i}};a.HashContainer=t}),jp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=ju(),o=Xt(),c=class Lu extends s.HashContainerIterator{constructor(r,n,l,f){super(r,n,f),this.container=l}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Lu(this.o,this.h,this.container,this.iteratorType)}},u=class extends s.HashContainer{constructor(t=[]){super();let r=this;t.forEach(function(n){r.insert(n)})}begin(){return new c(this.p,this.h,this)}end(){return new c(this.h,this.h,this)}rBegin(){return new c(this._,this.h,this,1)}rEnd(){return new c(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(t,r){return this.M(t,void 0,r)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=this.p;for(;t--;)r=r.B;return r.u}find(t,r){let n=this.I(t,r);return new c(n,this.h,this)}forEach(t){let r=0,n=this.p;for(;n!==this.h;)t(n.u,r++,this),n=n.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield t.u,t=t.B}).bind(this)()}},e=u;a.default=e}),Lp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),a.default=void 0;var s=ju(),o=u(Nu()),c=Xt();function u(n){return n&&n.t?n:{default:n}}var e=class Bu extends s.HashContainerIterator{constructor(l,f,h,p){super(l,f,p),this.container=h}get pointer(){this.o===this.h&&(0,c.throwIteratorAccessError)();let l=this;return new Proxy([],{get(f,h){if(h==="0")return l.o.u;if(h==="1")return l.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return l.o.l=p,!0}})}copy(){return new Bu(this.o,this.h,this.container,this.iteratorType)}},t=class extends s.HashContainer{constructor(n=[]){super();let l=this;n.forEach(function(f){l.setElement(f[0],f[1])})}begin(){return new e(this.p,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this._,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(n,l,f){return this.M(n,l,f)}getElementByKey(n,l){if(l===void 0&&(l=(0,o.default)(n)),l){let h=n[this.HASH_TAG];return h!==void 0?this.H[h].l:void 0}let f=this.g[n];return f?f.l:void 0}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let l=this.p;for(;n--;)l=l.B;return[l.u,l.l]}find(n,l){let f=this.I(n,l);return new e(f,this.h,this)}forEach(n){let l=0,f=this.p;for(;f!==this.h;)n([f.u,f.l],l++,this),f=f.B}[Symbol.iterator](){return(function*(){let n=this.p;for(;n!==this.h;)yield[n.u,n.l],n=n.B}).bind(this)()}},r=t;a.default=r}),Bp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"t",{value:!0}),Object.defineProperty(a,"Deque",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(a,"HashMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(a,"HashSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(a,"LinkList",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(a,"OrderedMap",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(a,"OrderedSet",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(a,"PriorityQueue",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(a,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(a,"Stack",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(a,"Vector",{enumerable:!0,get:function(){return u.default}});var s=h(kp()),o=h(Ip()),c=h(Tp()),u=h(Pp()),e=h(Op()),t=h(Cp()),r=h(Mp()),n=h(Np()),l=h(jp()),f=h(Lp());function h(p){return p&&p.t?p:{default:p}}}),Up=ve((a,s)=>{pe(),ye(),de();var o=Bp().OrderedSet,c=Qt()("number-allocator:trace"),u=Qt()("number-allocator:error");function e(r,n){this.low=r,this.high=n}e.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},e.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0};function t(r,n){if(!(this instanceof t))return new t(r,n);this.min=r,this.max=n,this.ss=new o([],(l,f)=>l.compare(f)),c("Create"),this.clear()}t.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},t.prototype.alloc=function(){if(this.ss.size()===0)return c("alloc():empty"),null;let r=this.ss.begin(),n=r.pointer.low,l=r.pointer.high,f=n;return f+1<=l?this.ss.updateKeyByIterator(r,new e(n+1,l)):this.ss.eraseElementByPos(0),c("alloc():"+f),f},t.prototype.use=function(r){let n=new e(r,r),l=this.ss.lowerBound(n);if(!l.equals(this.ss.end())){let f=l.pointer.low,h=l.pointer.high;return l.pointer.equals(n)?(this.ss.eraseElementByIterator(l),c("use():"+r),!0):f>r?!1:f===r?(this.ss.updateKeyByIterator(l,new e(f+1,h)),c("use():"+r),!0):h===r?(this.ss.updateKeyByIterator(l,new e(f,h-1)),c("use():"+r),!0):(this.ss.updateKeyByIterator(l,new e(r+1,h)),this.ss.insert(new e(f,r-1)),c("use():"+r),!0)}return c("use():failed"),!1},t.prototype.free=function(r){if(r<this.min||r>this.max){u("free():"+r+" is out of range");return}let n=new e(r,r),l=this.ss.upperBound(n);if(l.equals(this.ss.end())){if(l.equals(this.ss.begin())){this.ss.insert(n);return}l.pre();let f=l.pointer.high;l.pointer.high+1===r?this.ss.updateKeyByIterator(l,new e(f,r)):this.ss.insert(n)}else if(l.equals(this.ss.begin()))if(r+1===l.pointer.low){let f=l.pointer.high;this.ss.updateKeyByIterator(l,new e(r,f))}else this.ss.insert(n);else{let f=l.pointer.low,h=l.pointer.high;l.pre();let p=l.pointer.low;l.pointer.high+1===r?r+1===f?(this.ss.eraseElementByIterator(l),this.ss.updateKeyByIterator(l,new e(p,h))):this.ss.updateKeyByIterator(l,new e(p,r)):r+1===f?(this.ss.eraseElementByIterator(l.next()),this.ss.insert(new e(r,h))):this.ss.insert(n)}c("free():"+r)},t.prototype.clear=function(){c("clear()"),this.ss.clear(),this.ss.insert(new e(this.min,this.max))},t.prototype.intervalCount=function(){return this.ss.size()},t.prototype.dump=function(){console.log("length:"+this.ss.size());for(let r of this.ss)console.log(r)},s.exports=t}),Uu=ve((a,s)=>{pe(),ye(),de();var o=Up();s.exports.NumberAllocator=o}),Dp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=xp(),o=Uu(),c=class{constructor(u){Ae(this,"aliasToTopic");Ae(this,"topicToAlias");Ae(this,"max");Ae(this,"numberAllocator");Ae(this,"length");u>0&&(this.aliasToTopic=new s.LRUCache({max:u}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,u),this.max=u,this.length=0)}put(u,e){if(e===0||e>this.max)return!1;let t=this.aliasToTopic.get(e);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(e,u),this.topicToAlias[u]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.size,!0}getTopicByAlias(u){return this.aliasToTopic.get(u)}getAliasByTopic(u){let e=this.topicToAlias[u];return typeof e<"u"&&this.aliasToTopic.get(e),e}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};a.default=c}),Fp=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});var o=Ni(),c=s(Dp()),u=nn(),e=(t,r)=>{t.log("_handleConnack");let{options:n}=t,l=n.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}r.properties.topicAliasMaximum>0&&(t.topicAliasSend=new c.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&n.keepalive&&(n.keepalive=r.properties.serverKeepAlive),r.properties.maximumPacketSize&&(n.properties||(n.properties={}),n.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(l===0)t.reconnecting=!1,t._onConnect(r);else if(l>0){let f=new u.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[l]}`,l);t.emit("error",f),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};a.default=e}),qp=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=(o,c,u)=>{o.log("handling pubrel packet");let e=typeof u<"u"?u:o.noop,{messageId:t}=c,r={cmd:"pubcomp",messageId:t};o.incomingStore.get(c,(n,l)=>{n?o._sendPacket(r,e):(o.emit("message",l.topic,l.payload,l),o.handleMessage(l,f=>{if(f)return e(f);o.incomingStore.del(l,o.noop),o._sendPacket(r,e)}))})};a.default=s}),Wp=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});var o=s(Sp()),c=s(Ap()),u=s(Fp()),e=s(Ni()),t=s(qp()),r=(n,l,f)=>{let{options:h}=n;if(h.protocolVersion===5&&h.properties&&h.properties.maximumPacketSize&&h.properties.maximumPacketSize<l.length)return n.emit("error",new Error(`exceeding packets size ${l.cmd}`)),n.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),n;switch(n.log("_handlePacket :: emitting packetreceive"),n.emit("packetreceive",l),l.cmd){case"publish":(0,o.default)(n,l,f);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":n.reschedulePing(),(0,e.default)(n,l),f();break;case"pubrel":n.reschedulePing(),(0,t.default)(n,l,f);break;case"connack":(0,u.default)(n,l),f();break;case"auth":n.reschedulePing(),(0,c.default)(n,l),f();break;case"pingresp":n.log("_handlePacket :: received pingresp"),n.reschedulePing(!0),f();break;case"disconnect":n.emit("disconnect",l),f();break;default:n.log("_handlePacket :: unknown command"),f();break}};a.default=r}),Du=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=class{constructor(){Ae(this,"nextId");this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};a.default=s}),$p=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=class{constructor(o){Ae(this,"aliasToTopic");Ae(this,"max");Ae(this,"length");this.aliasToTopic={},this.max=o}put(o,c){return c===0||c>this.max?!1:(this.aliasToTopic[c]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};a.default=s}),zp=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.TypedEventEmitter=void 0;var o=s((jr(),Ke(ur))),c=nn(),u=class{};a.TypedEventEmitter=u,(0,c.applyMixin)(u,o.default)}),ji=ve((a,s)=>{pe(),ye(),de();function o(c){"@babel/helpers - typeof";return s.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},s.exports.__esModule=!0,s.exports.default=s.exports,o(c)}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Hp=ve((a,s)=>{pe(),ye(),de();var o=ji().default;function c(u,e){if(o(u)!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(o(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),Kp=ve((a,s)=>{pe(),ye(),de();var o=ji().default,c=Hp();function u(e){var t=c(e,"string");return o(t)=="symbol"?t:t+""}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports}),Vp=ve((a,s)=>{pe(),ye(),de();var o=Kp();function c(u,e,t){return(e=o(e))in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),Gp=ve((a,s)=>{pe(),ye(),de();function o(c){if(Array.isArray(c))return c}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Yp=ve((a,s)=>{pe(),ye(),de();function o(c,u){var e=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(e!=null){var t,r,n,l,f=[],h=!0,p=!1;try{if(n=(e=e.call(c)).next,u===0){if(Object(e)!==e)return;h=!1}else for(;!(h=(t=n.call(e)).done)&&(f.push(t.value),f.length!==u);h=!0);}catch(y){p=!0,r=y}finally{try{if(!h&&e.return!=null&&(l=e.return(),Object(l)!==l))return}finally{if(p)throw r}}return f}}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Qp=ve((a,s)=>{pe(),ye(),de();function o(c,u){(u==null||u>c.length)&&(u=c.length);for(var e=0,t=Array(u);e<u;e++)t[e]=c[e];return t}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Jp=ve((a,s)=>{pe(),ye(),de();var o=Qp();function c(u,e){if(u){if(typeof u=="string")return o(u,e);var t={}.toString.call(u).slice(8,-1);return t==="Object"&&u.constructor&&(t=u.constructor.name),t==="Map"||t==="Set"?Array.from(u):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(u,e):void 0}}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),Zp=ve((a,s)=>{pe(),ye(),de();function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Xp=ve((a,s)=>{pe(),ye(),de();var o=Gp(),c=Yp(),u=Jp(),e=Zp();function t(r,n){return o(r)||c(r,n)||u(r,n)||e()}s.exports=t,s.exports.__esModule=!0,s.exports.default=s.exports}),Fu=ve((a,s)=>{pe(),ye(),de(),function(o,c){typeof a=="object"&&typeof s<"u"?c(a):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.fastUniqueNumbers={}))}(a,function(o){var c=function(y){return function(b){var _=y(b);return b.add(_),_}},u=function(y){return function(b,_){return y.set(b,_),_}},e=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,t=536870912,r=t*2,n=function(y,b){return function(_){var w=b.get(_),x=w===void 0?_.size:w<r?w+1:0;if(!_.has(x))return y(_,x);if(_.size<t){for(;_.has(x);)x=Math.floor(Math.random()*r);return y(_,x)}if(_.size>e)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;_.has(x);)x=Math.floor(Math.random()*e);return y(_,x)}},l=new WeakMap,f=u(l),h=n(f,l),p=c(h);o.addUniqueNumber=p,o.generateUniqueNumber=h})}),ed=ve((a,s)=>{pe(),ye(),de();function o(u,e,t,r,n,l,f){try{var h=u[l](f),p=h.value}catch(y){return void t(y)}h.done?e(p):Promise.resolve(p).then(r,n)}function c(u){return function(){var e=this,t=arguments;return new Promise(function(r,n){var l=u.apply(e,t);function f(p){o(l,r,n,f,h,"next",p)}function h(p){o(l,r,n,f,h,"throw",p)}f(void 0)})}}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),qu=ve((a,s)=>{pe(),ye(),de();function o(c,u){this.v=c,this.k=u}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),Wu=ve((a,s)=>{pe(),ye(),de();function o(c,u,e,t){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}s.exports=o=function(n,l,f,h){function p(y,b){o(n,y,function(_){return this._invoke(y,b,_)})}l?r?r(n,l,{value:f,enumerable:!h,configurable:!h,writable:!h}):n[l]=f:(p("next",0),p("throw",1),p("return",2))},s.exports.__esModule=!0,s.exports.default=s.exports,o(c,u,e,t)}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),$u=ve((a,s)=>{pe(),ye(),de();var o=Wu();function c(){var u,e,t=typeof Symbol=="function"?Symbol:{},r=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function l(x,m,E,A){var S=m&&m.prototype instanceof h?m:h,M=Object.create(S.prototype);return o(M,"_invoke",function(C,I,R){var T,$,k,L=0,U=R||[],B=!1,le={p:0,n:0,v:u,a:re,f:re.bind(u,4),d:function(q,oe){return T=q,$=0,k=u,le.n=oe,f}};function re(q,oe){for($=q,k=oe,e=0;!B&&L&&!K&&e<U.length;e++){var K,ie=U[e],N=le.p,G=ie[2];q>3?(K=G===oe)&&(k=ie[($=ie[4])?5:($=3,3)],ie[4]=ie[5]=u):ie[0]<=N&&((K=q<2&&N<ie[1])?($=0,le.v=oe,le.n=ie[1]):N<G&&(K=q<3||ie[0]>oe||oe>G)&&(ie[4]=q,ie[5]=oe,le.n=G,$=0))}if(K||q>1)return f;throw B=!0,oe}return function(q,oe,K){if(L>1)throw TypeError("Generator is already running");for(B&&oe===1&&re(oe,K),$=oe,k=K;(e=$<2?u:k)||!B;){T||($?$<3?($>1&&(le.n=-1),re($,k)):le.n=k:le.v=k);try{if(L=2,T){if($||(q="next"),e=T[q]){if(!(e=e.call(T,k)))throw TypeError("iterator result is not an object");if(!e.done)return e;k=e.value,$<2&&($=0)}else $===1&&(e=T.return)&&e.call(T),$<2&&(k=TypeError("The iterator does not provide a '"+q+"' method"),$=1);T=u}else if((e=(B=le.n<0)?k:C.call(I,le))!==f)break}catch(ie){T=u,$=1,k=ie}finally{L=1}}return{value:e,done:B}}}(x,E,A),!0),M}var f={};function h(){}function p(){}function y(){}e=Object.getPrototypeOf;var b=[][r]?e(e([][r]())):(o(e={},r,function(){return this}),e),_=y.prototype=h.prototype=Object.create(b);function w(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,y):(x.__proto__=y,o(x,n,"GeneratorFunction")),x.prototype=Object.create(_),x}return p.prototype=y,o(_,"constructor",y),o(y,"constructor",p),p.displayName="GeneratorFunction",o(y,n,"GeneratorFunction"),o(_),o(_,n,"Generator"),o(_,r,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),(s.exports=c=function(){return{w:l,m:w}},s.exports.__esModule=!0,s.exports.default=s.exports)()}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),zu=ve((a,s)=>{pe(),ye(),de();var o=qu(),c=Wu();function u(e,t){function r(l,f,h,p){try{var y=e[l](f),b=y.value;return b instanceof o?t.resolve(b.v).then(function(_){r("next",_,h,p)},function(_){r("throw",_,h,p)}):t.resolve(b).then(function(_){y.value=_,h(y)},function(_){return r("throw",_,h,p)})}catch(_){p(_)}}var n;this.next||(c(u.prototype),c(u.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),c(this,"_invoke",function(l,f,h){function p(){return new t(function(y,b){r(l,h,y,b)})}return n=n?n.then(p,p):p()},!0)}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports}),Hu=ve((a,s)=>{pe(),ye(),de();var o=$u(),c=zu();function u(e,t,r,n,l){return new c(o().w(e,t,r,n),l||Promise)}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports}),td=ve((a,s)=>{pe(),ye(),de();var o=Hu();function c(u,e,t,r,n){var l=o(u,e,t,r,n);return l.next().then(function(f){return f.done?f.value:l.next()})}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),rd=ve((a,s)=>{pe(),ye(),de();function o(c){var u=Object(c),e=[];for(var t in u)e.unshift(t);return function r(){for(;e.length;)if((t=e.pop())in u)return r.value=t,r.done=!1,r;return r.done=!0,r}}s.exports=o,s.exports.__esModule=!0,s.exports.default=s.exports}),nd=ve((a,s)=>{pe(),ye(),de();var o=ji().default;function c(u){if(u!=null){var e=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(e)return e.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&t>=u.length&&(u=void 0),{value:u&&u[t++],done:!u}}}}throw new TypeError(o(u)+" is not iterable")}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}),id=ve((a,s)=>{pe(),ye(),de();var o=qu(),c=$u(),u=td(),e=Hu(),t=zu(),r=rd(),n=nd();function l(){var f=c(),h=f.m(l),p=(Object.getPrototypeOf?Object.getPrototypeOf(h):h.__proto__).constructor;function y(w){var x=typeof w=="function"&&w.constructor;return!!x&&(x===p||(x.displayName||x.name)==="GeneratorFunction")}var b={throw:1,return:2,break:3,continue:3};function _(w){var x,m;return function(E){x||(x={stop:function(){return m(E.a,2)},catch:function(){return E.v},abrupt:function(A,S){return m(E.a,b[A],S)},delegateYield:function(A,S,M){return x.resultName=S,m(E.d,n(A),M)},finish:function(A){return m(E.f,A)}},m=function(A,S,M){E.p=x.prev,E.n=x.next;try{return A(S,M)}finally{x.next=E.n}}),x.resultName&&(x[x.resultName]=E.v,x.resultName=void 0),x.sent=E.v,x.next=E.n;try{return w.call(this,x)}finally{E.p=x.prev,E.n=x.next}}}return(s.exports=l=function(){return{wrap:function(w,x,m,E){return f.w(_(w),x,m,E&&E.reverse())},isGeneratorFunction:y,mark:f.m,awrap:function(w,x){return new o(w,x)},AsyncIterator:t,async:function(w,x,m,E,A){return(y(x)?e:u)(_(w),x,m,E,A)},keys:r,values:n}},s.exports.__esModule=!0,s.exports.default=s.exports)()}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports}),od=ve((a,s)=>{pe(),ye(),de();var o=id()();s.exports=o;try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}),sd=ve((a,s)=>{pe(),ye(),de(),function(o,c){typeof a=="object"&&typeof s<"u"?c(a,Vp(),Xp(),Fu(),ed(),od()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.brokerFactory={},o._defineProperty,o._slicedToArray,o.fastUniqueNumbers,o._asyncToGenerator,o._regeneratorRuntime))}(a,function(o,c,u,e,t,r){var n=function(m){return typeof m.start=="function"},l=new WeakMap;function f(m,E){var A=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);E&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(m,M).enumerable})),A.push.apply(A,S)}return A}function h(m){for(var E=1;E<arguments.length;E++){var A=arguments[E]!=null?arguments[E]:{};E%2?f(Object(A),!0).forEach(function(S){c(m,S,A[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(A,S))})}return m}var p=function(m){return h(h({},m),{},{connect:function(E){var A=E.call;return t(r.mark(function S(){var M,C,I,R;return r.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return M=new MessageChannel,C=M.port1,I=M.port2,T.next=1,A("connect",{port:C},[C]);case 1:return R=T.sent,l.set(I,R),T.abrupt("return",I);case 2:case"end":return T.stop()}},S)}))},disconnect:function(E){var A=E.call;return function(){var S=t(r.mark(function M(C){var I;return r.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(I=l.get(C),I!==void 0){R.next=1;break}throw new Error("The given port is not connected.");case 1:return R.next=2,A("disconnect",{portId:I});case 2:case"end":return R.stop()}},M)}));return function(M){return S.apply(this,arguments)}}()},isSupported:function(E){var A=E.call;return function(){return A("isSupported")}}})};function y(m,E){var A=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);E&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(m,M).enumerable})),A.push.apply(A,S)}return A}function b(m){for(var E=1;E<arguments.length;E++){var A=arguments[E]!=null?arguments[E]:{};E%2?y(Object(A),!0).forEach(function(S){c(m,S,A[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(A)):y(Object(A)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(A,S))})}return m}var _=new WeakMap,w=function(m){if(_.has(m))return _.get(m);var E=new Map;return _.set(m,E),E},x=function(m){var E=p(m);return function(A){var S=w(A);A.addEventListener("message",function(U){var B=U.data,le=B.id;if(le!==null&&S.has(le)){var re=S.get(le),q=re.reject,oe=re.resolve;S.delete(le),B.error===void 0?oe(B.result):q(new Error(B.error.message))}}),n(A)&&A.start();for(var M=function(U){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(re,q){var oe=e.generateUniqueNumber(S);S.set(oe,{reject:q,resolve:re}),B===null?A.postMessage({id:oe,method:U},le):A.postMessage({id:oe,method:U,params:B},le)})},C=function(U,B){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];A.postMessage({id:null,method:U,params:B},le)},I={},R=0,T=Object.entries(E);R<T.length;R++){var $=u(T[R],2),k=$[0],L=$[1];I=b(b({},I),{},c({},k,L({call:M,notify:C})))}return b({},I)}};o.createBroker=x})}),ad=ve((a,s)=>{pe(),ye(),de(),function(o,c){typeof a=="object"&&typeof s<"u"?c(a,ji(),sd(),Fu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.workerTimersBroker={},o._typeof,o.brokerFactory,o.fastUniqueNumbers))}(a,function(o,c,u,e){var t=new Map([[0,null]]),r=new Map([[0,null]]),n=u.createBroker({clearInterval:function(f){var h=f.call;return function(p){c(t.get(p))==="symbol"&&(t.set(p,null),h("clear",{timerId:p,timerType:"interval"}).then(function(){t.delete(p)}))}},clearTimeout:function(f){var h=f.call;return function(p){c(r.get(p))==="symbol"&&(r.set(p,null),h("clear",{timerId:p,timerType:"timeout"}).then(function(){r.delete(p)}))}},setInterval:function(f){var h=f.call;return function(p){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,_=new Array(b>2?b-2:0),w=2;w<b;w++)_[w-2]=arguments[w];var x=Symbol(),m=e.generateUniqueNumber(t);t.set(m,x);var E=function(){return h("set",{delay:y,now:performance.timeOrigin+performance.now(),timerId:m,timerType:"interval"}).then(function(){var A=t.get(m);if(A===void 0)throw new Error("The timer is in an undefined state.");A===x&&(p.apply(void 0,_),t.get(m)===x&&E())})};return E(),m}},setTimeout:function(f){var h=f.call;return function(p){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,_=new Array(b>2?b-2:0),w=2;w<b;w++)_[w-2]=arguments[w];var x=Symbol(),m=e.generateUniqueNumber(r);return r.set(m,x),h("set",{delay:y,now:performance.timeOrigin+performance.now(),timerId:m,timerType:"timeout"}).then(function(){var E=r.get(m);if(E===void 0)throw new Error("The timer is in an undefined state.");E===x&&(r.delete(m),p.apply(void 0,_))}),m}}}),l=function(f){var h=new Worker(f);return n(h)};o.load=l,o.wrap=n})}),ld=ve((a,s)=>{pe(),ye(),de(),function(o,c){typeof a=="object"&&typeof s<"u"?c(a,ad()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.workerTimers={},o.workerTimersBroker))}(a,function(o,c){var u=function(h,p){var y=null;return function(){if(y!==null)return y;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),_=URL.createObjectURL(b);return y=h(_),setTimeout(function(){return URL.revokeObjectURL(_)}),y}},e=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,t=u(c.load,e),r=function(h){return t().clearInterval(h)},n=function(h){return t().clearTimeout(h)},l=function(){var h;return(h=t()).setInterval.apply(h,arguments)},f=function(){var h;return(h=t()).setTimeout.apply(h,arguments)};o.clearInterval=r,o.clearTimeout=n,o.setInterval=l,o.setTimeout=f})}),Li=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.isReactNativeBrowser=a.isWebWorker=void 0;var s=()=>{var e;return typeof window<"u"?typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().indexOf(" electron/"))>-1&&(We!=null&&We.versions)?!Object.prototype.hasOwnProperty.call(We.versions,"electron"):typeof window.document<"u":!1},o=()=>{var e,t;return!!(typeof self=="object"&&((t=(e=self==null?void 0:self.constructor)==null?void 0:e.name)!=null&&t.includes("WorkerGlobalScope"))&&typeof Deno>"u")},c=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u=s()||o()||c();a.isWebWorker=o(),a.isReactNativeBrowser=c(),a.default=u}),cd=ve(a=>{pe(),ye(),de();var s=a&&a.__createBinding||(Object.create?function(l,f,h,p){p===void 0&&(p=h);var y=Object.getOwnPropertyDescriptor(f,h);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(l,p,y)}:function(l,f,h,p){p===void 0&&(p=h),l[p]=f[h]}),o=a&&a.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),c=a&&a.__importStar||function(){var l=function(f){return l=Object.getOwnPropertyNames||function(h){var p=[];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(p[p.length]=y);return p},l(f)};return function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p=l(f),y=0;y<p.length;y++)p[y]!=="default"&&s(h,f,p[y]);return o(h,f),h}}();Object.defineProperty(a,"__esModule",{value:!0});var u=ld(),e=c(Li()),t={set:u.setInterval,clear:u.clearInterval},r={set:(l,f)=>setInterval(l,f),clear:l=>clearInterval(l)},n=l=>{switch(l){case"native":return r;case"worker":return t;case"auto":default:return e.default&&!e.isWebWorker&&!e.isReactNativeBrowser?t:r}};a.default=n}),Ku=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});var o=s(cd()),c=class{constructor(u,e){Ae(this,"_keepalive");Ae(this,"timerId");Ae(this,"timer");Ae(this,"destroyed",!1);Ae(this,"counter");Ae(this,"client");Ae(this,"_keepaliveTimeoutTimestamp");Ae(this,"_intervalEvery");this.client=u,this.timer=typeof e=="object"&&"set"in e&&"clear"in e?e:(0,o.default)(e),this.setKeepalive(u.options.keepalive)}get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(u){if(u*=1e3,isNaN(u)||u<=0||u>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${u}`);this._keepalive=u,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${u}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let u=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+u,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};a.default=c}),gs=ve(a=>{var S;pe(),ye(),de();var s=a&&a.__createBinding||(Object.create?function(M,C,I,R){R===void 0&&(R=I);var T=Object.getOwnPropertyDescriptor(C,I);(!T||("get"in T?!C.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return C[I]}}),Object.defineProperty(M,R,T)}:function(M,C,I,R){R===void 0&&(R=I),M[R]=C[I]}),o=a&&a.__setModuleDefault||(Object.create?function(M,C){Object.defineProperty(M,"default",{enumerable:!0,value:C})}:function(M,C){M.default=C}),c=a&&a.__importStar||function(){var M=function(C){return M=Object.getOwnPropertyNames||function(I){var R=[];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(R[R.length]=T);return R},M(C)};return function(C){if(C&&C.__esModule)return C;var I={};if(C!=null)for(var R=M(C),T=0;T<R.length;T++)R[T]!=="default"&&s(I,C,R[T]);return o(I,C),I}}(),u=a&&a.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(a,"__esModule",{value:!0});var e=u(bp()),t=Br(),r=u(wp()),n=u(Qt()),l=c(_p()),f=u(Su()),h=u(Wp()),p=u(Du()),y=u($p()),b=nn(),_=zp(),w=u(Ku()),x=c(Li()),m=globalThis.setImmediate||((...M)=>{let C=M.shift();(0,b.nextTick)(()=>{C(...M)})}),E={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},A=(S=class extends _.TypedEventEmitter{constructor(I,R){super();Ae(this,"connected");Ae(this,"disconnecting");Ae(this,"disconnected");Ae(this,"reconnecting");Ae(this,"incomingStore");Ae(this,"outgoingStore");Ae(this,"options");Ae(this,"queueQoSZero");Ae(this,"_reconnectCount");Ae(this,"log");Ae(this,"messageIdProvider");Ae(this,"outgoing");Ae(this,"messageIdToTopic");Ae(this,"noop");Ae(this,"keepaliveManager");Ae(this,"stream");Ae(this,"queue");Ae(this,"streamBuilder");Ae(this,"_resubscribeTopics");Ae(this,"connackTimer");Ae(this,"reconnectTimer");Ae(this,"_storeProcessing");Ae(this,"_packetIdsDuringStoreProcessing");Ae(this,"_storeProcessingQueue");Ae(this,"_firstConnection");Ae(this,"topicAliasRecv");Ae(this,"topicAliasSend");Ae(this,"_deferredReconnect");Ae(this,"connackPacket");this.options=R||{};for(let T in E)typeof this.options[T]>"u"?this.options[T]=E[T]:this.options[T]=R[T];this.log=this.options.log||(0,n.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",S.VERSION),x.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",x.default?"browser":"node"),this.log("MqttClient :: options.protocol",R.protocol),this.log("MqttClient :: options.protocolVersion",R.protocolVersion),this.log("MqttClient :: options.username",R.username),this.log("MqttClient :: options.keepalive",R.keepalive),this.log("MqttClient :: options.reconnectPeriod",R.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",R.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",R.properties?R.properties.topicAliasMaximum:void 0),this.options.clientId=typeof R.clientId=="string"?R.clientId:S.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=R.protocolVersion===5&&R.customHandleAcks?R.customHandleAcks:(...T)=>{T[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=R.outgoingStore||new f.default,this.incomingStore=R.incomingStore||new f.default,this.queueQoSZero=R.queueQoSZero===void 0?!0:R.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,R.properties&&R.properties.topicAliasMaximum>0&&(R.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new y.default(R.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:T}=this,$=()=>{let k=T.shift();this.log("deliver :: entry %o",k);let L=null;if(!k){this._resubscribe();return}L=k.packet,this.log("deliver :: call _sendPacket for %o",L);let U=!0;L.messageId&&L.messageId!==0&&(this.messageIdProvider.register(L.messageId)||(U=!1)),U?this._sendPacket(L,B=>{k.cb&&k.cb(B),$()}):(this.log("messageId: %d has already used. The message is skipped and removed.",L.messageId),$())};this.log("connect :: sending queued packets"),$()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}handleAuth(I,R){R()}handleMessage(I,R){R()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var le;let I=new t.Writable,R=e.default.parser(this.options),T=null,$=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),R.on("packet",re=>{this.log("parser :: on packet push to packets array."),$.push(re)});let k=()=>{this.log("work :: getting next packet in queue");let re=$.shift();if(re)this.log("work :: packet pulled from queue"),(0,h.default)(this,re,L);else{this.log("work :: no packets in queue");let q=T;T=null,this.log("work :: done flag is %s",!!q),q&&q()}},L=()=>{if($.length)(0,b.nextTick)(k);else{let re=T;T=null,re()}};I._write=(re,q,oe)=>{T=oe,this.log("writable stream :: parsing buffer"),R.parse(re),k()};let U=re=>{this.log("streamErrorHandler :: error",re.message),re.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",re)):this.noop(re)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",U),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let B={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(B.will={...this.options.will,payload:(le=this.options.will)==null?void 0:le.payload}),this.topicAliasRecv&&(B.properties||(B.properties={}),this.topicAliasRecv&&(B.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(B),R.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let re={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(re)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,R,T,$){this.log("publish :: message `%s` to topic `%s`",R,I);let{options:k}=this;typeof T=="function"&&($=T,T=null),T=T||{},T={qos:0,retain:!1,dup:!1,...T};let{qos:L,retain:U,dup:B,properties:le,cbStorePut:re}=T;if(this._checkDisconnecting($))return this;let q=()=>{let oe=0;if((L===1||L===2)&&(oe=this._nextId(),oe===null))return this.log("No messageId left"),!1;let K={cmd:"publish",topic:I,payload:R,qos:L,retain:U,messageId:oe,dup:B};switch(k.protocolVersion===5&&(K.properties=le),this.log("publish :: qos",L),L){case 1:case 2:this.outgoing[K.messageId]={volatile:!1,cb:$||this.noop},this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,void 0,re);break;default:this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,$,re);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!q())&&this._storeProcessingQueue.push({invoke:q,cbStorePut:T.cbStorePut,callback:$}),this}publishAsync(I,R,T){return new Promise(($,k)=>{this.publish(I,R,T,(L,U)=>{L?k(L):$(U)})})}subscribe(I,R,T){let $=this.options.protocolVersion;typeof R=="function"&&(T=R),T=T||this.noop;let k=!1,L=[];typeof I=="string"?(I=[I],L=I):Array.isArray(I)?L=I:typeof I=="object"&&(k=I.resubscribe,delete I.resubscribe,L=Object.keys(I));let U=l.validateTopics(L);if(U!==null)return m(T,new Error(`Invalid topic ${U}`)),this;if(this._checkDisconnecting(T))return this.log("subscribe: discconecting true"),this;let B={qos:0};$===5&&(B.nl=!1,B.rap=!1,B.rh=0),R={...B,...R};let{properties:le}=R,re=[],q=(ie,N)=>{if(N=N||R,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ie)||this._resubscribeTopics[ie].qos<N.qos||k){let G={topic:ie,qos:N.qos};$===5&&(G.nl=N.nl,G.rap=N.rap,G.rh=N.rh,G.properties=le),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",G.topic,G.qos),re.push(G)}};if(Array.isArray(I)?I.forEach(ie=>{this.log("subscribe: array topic %s",ie),q(ie)}):Object.keys(I).forEach(ie=>{this.log("subscribe: object topic %s, %o",ie,I[ie]),q(ie,I[ie])}),!re.length)return T(null,[]),this;let oe=(ie,N)=>{let G={cmd:"subscribe",subscriptions:ie,messageId:N};if(le&&(G.properties=le),this.options.resubscribe){this.log("subscribe :: resubscribe true");let H=[];ie.forEach(Se=>{if(this.options.reconnectPeriod>0){let Z={qos:Se.qos};$===5&&(Z.nl=Se.nl||!1,Z.rap=Se.rap||!1,Z.rh=Se.rh||0,Z.properties=Se.properties),this._resubscribeTopics[Se.topic]=Z,H.push(Se.topic)}}),this.messageIdToTopic[G.messageId]=H}let ce=new Promise((H,Se)=>{this.outgoing[G.messageId]={volatile:!0,cb(Z,D){if(!Z){let{granted:se}=D;for(let Y=0;Y<se.length;Y+=1)ie[Y].qos=se[Y]}Z?Se(new b.ErrorWithSubackPacket(Z.message,D)):H(D)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(G),ce},K=()=>{let ie=this.options.subscribeBatchSize??re.length,N=[];for(let G=0;G<re.length;G+=ie){let ce=re.slice(G,G+ie),H=this._nextId();if(H===null)return this.log("No messageId left"),!1;N.push(oe(ce,H))}return Promise.all(N).then(G=>{T(null,re,G.at(-1))}).catch(G=>{T(G,re,G.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:T}),this}subscribeAsync(I,R){return new Promise((T,$)=>{this.subscribe(I,R,(k,L)=>{k?$(k):T(L)})})}unsubscribe(I,R,T){typeof I=="string"&&(I=[I]),typeof R=="function"&&(T=R),T=T||this.noop;let $=l.validateTopics(I);if($!==null)return m(T,new Error(`Invalid topic ${$}`)),this;if(this._checkDisconnecting(T))return this;let k=()=>{let L=this._nextId();if(L===null)return this.log("No messageId left"),!1;let U={cmd:"unsubscribe",messageId:L,unsubscriptions:[]};return typeof I=="string"?U.unsubscriptions=[I]:Array.isArray(I)&&(U.unsubscriptions=I),this.options.resubscribe&&U.unsubscriptions.forEach(B=>{delete this._resubscribeTopics[B]}),typeof R=="object"&&R.properties&&(U.properties=R.properties),this.outgoing[U.messageId]={volatile:!0,cb:T},this.log("unsubscribe: call _sendPacket"),this._sendPacket(U),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!k())&&this._storeProcessingQueue.push({invoke:k,callback:T}),this}unsubscribeAsync(I,R){return new Promise((T,$)=>{this.unsubscribe(I,R,(k,L)=>{k?$(k):T(L)})})}end(I,R,T){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(T=T||R,R=I,I=!1),typeof R!="object"&&(T=T||R,R=null),this.log("end :: cb? %s",!!T),(!T||typeof T!="function")&&(T=this.noop);let $=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(L=>{this.outgoingStore.close(U=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),T){let B=L||U;this.log("end :: closeStores: invoking callback with args"),T(B)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},k=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)($)},R)};return this.disconnecting?(T(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,k,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),k()),this)}endAsync(I,R){return new Promise((T,$)=>{this.end(I,R,k=>{k?$(k):T()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:R}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{R(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let R=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=R:R(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let R;I.properties&&(R=I.properties.topicAlias);let T=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",R,T),T.length===0){if(typeof R>"u")return new Error("Unregistered Topic Alias");if(T=this.topicAliasSend.getTopicByAlias(R),typeof T>"u")return new Error("Unregistered Topic Alias");I.topic=T}R&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,R,T={}){if(R&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",R)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let $={cmd:"disconnect",...T};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket($,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),m(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),R&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",R),R())}_storeAndSend(I,R,T){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let $=I,k;if($.cmd==="publish"&&($=(0,r.default)(I),k=this._removeTopicAliasAndRecoverTopicName($),k))return R&&R(k);this.outgoingStore.put($,L=>{if(L)return R&&R(L);T(),this._writePacket(I,R)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let R;I.properties&&(R=I.properties.topicAlias);let T=I.topic.toString();if(this.topicAliasSend)if(R){if(T.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",T,R),!this.topicAliasSend.put(T,R)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,R),new Error("Sending Topic Alias out of range")}else T.length!==0&&(this.options.autoAssignTopicAlias?(R=this.topicAliasSend.getAliasByTopic(T),R?(I.topic="",I.properties={...I.properties,topicAlias:R},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",T,R)):(R=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(T,R),I.properties={...I.properties,topicAlias:R},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",T,R))):this.options.autoUseTopicAlias&&(R=this.topicAliasSend.getAliasByTopic(T),R&&(I.topic="",I.properties={...I.properties,topicAlias:R},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",T,R))));else if(R)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,R),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,R){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let T=e.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",T),!T&&R&&R!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",R)):R&&(this.log("_writePacket :: invoking cb"),R())}_sendPacket(I,R,T,$){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),T=T||this.noop,R=R||this.noop;let k=this._applyTopicAlias(I);if(k){R(k);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,R);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,R,T);return}if($){this._writePacket(I,R);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,R,T);return;default:this._writePacket(I,R);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,R,T);break;case 0:default:this._writePacket(I,R);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,R,T){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!R),T=T||this.noop;let $=I;if($.cmd==="publish"){$=(0,r.default)(I);let L=this._removeTopicAliasAndRecoverTopicName($);if(L)return R&&R(L)}let k=$.qos||0;k===0&&this.queueQoSZero||$.cmd!=="publish"?this.queue.push({packet:$,cb:R}):k>0?(R=this.outgoing[$.messageId]?this.outgoing[$.messageId].cb:null,this.outgoingStore.put($,L=>{if(L)return R&&R(L);T()})):R&&R(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let R=0;R<I.length;R++){let T={};T[I[R]]=this._resubscribeTopics[I[R]],T.resubscribe=!0,this.subscribe(T,{properties:T[I[R]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let R=()=>{let T=this.outgoingStore.createStream(),$=()=>{T.destroy(),T=null,this._flushStoreProcessingQueue(),k()},k=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",$),T.on("error",U=>{k(),this._flushStoreProcessingQueue(),this.removeListener("close",$),this.emit("error",U)});let L=()=>{if(!T)return;let U=T.read(1),B;if(!U){T.once("readable",L);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[U.messageId]){L();return}!this.disconnecting&&!this.reconnectTimer?(B=this.outgoing[U.messageId]?this.outgoing[U.messageId].cb:null,this.outgoing[U.messageId]={volatile:!1,cb(le,re){B&&B(le,re),L()}},this._packetIdsDuringStoreProcessing[U.messageId]=!0,this.messageIdProvider.register(U.messageId)?this._sendPacket(U,void 0,void 0,!0):this.log("messageId: %d has already used.",U.messageId)):T.destroy&&T.destroy()};T.on("end",()=>{let U=!0;for(let B in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[B]){U=!1;break}this.removeListener("close",$),U?(k(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):R()}),L()};R()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,R){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(T,$)=>{R(T,$),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}},Ae(S,"VERSION",b.MQTTJS_VERSION),S);a.default=A}),ud=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=Uu(),o=class{constructor(){Ae(this,"numberAllocator");Ae(this,"lastId");this.numberAllocator=new s.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(c){return this.numberAllocator.use(c)}deallocate(c){this.numberAllocator.free(c)}clear(){this.numberAllocator.clear()}};a.default=o});function fd(){if(ms)return Hn;ms=!0;let a=2147483647,s=36,o=1,c=26,u=38,e=700,t=72,r=128,n="-",l=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=s-o,b=Math.floor,_=String.fromCharCode;function w(T){throw new RangeError(p[T])}function x(T,$){let k=[],L=T.length;for(;L--;)k[L]=$(T[L]);return k}function m(T,$){let k=T.split("@"),L="";k.length>1&&(L=k[0]+"@",T=k[1]),T=T.replace(h,".");let U=T.split("."),B=x(U,$).join(".");return L+B}function E(T){let $=[],k=0,L=T.length;for(;k<L;){let U=T.charCodeAt(k++);if(U>=55296&&U<=56319&&k<L){let B=T.charCodeAt(k++);(B&64512)==56320?$.push(((U&1023)<<10)+(B&1023)+65536):($.push(U),k--)}else $.push(U)}return $}let A=T=>String.fromCodePoint(...T),S=function(T){return T>=48&&T<58?26+(T-48):T>=65&&T<91?T-65:T>=97&&T<123?T-97:s},M=function(T,$){return T+22+75*(T<26)-(($!=0)<<5)},C=function(T,$,k){let L=0;for(T=k?b(T/e):T>>1,T+=b(T/$);T>y*c>>1;L+=s)T=b(T/y);return b(L+(y+1)*T/(T+u))},I=function(T){let $=[],k=T.length,L=0,U=r,B=t,le=T.lastIndexOf(n);le<0&&(le=0);for(let re=0;re<le;++re)T.charCodeAt(re)>=128&&w("not-basic"),$.push(T.charCodeAt(re));for(let re=le>0?le+1:0;re<k;){let q=L;for(let K=1,ie=s;;ie+=s){re>=k&&w("invalid-input");let N=S(T.charCodeAt(re++));N>=s&&w("invalid-input"),N>b((a-L)/K)&&w("overflow"),L+=N*K;let G=ie<=B?o:ie>=B+c?c:ie-B;if(N<G)break;let ce=s-G;K>b(a/ce)&&w("overflow"),K*=ce}let oe=$.length+1;B=C(L-q,oe,q==0),b(L/oe)>a-U&&w("overflow"),U+=b(L/oe),L%=oe,$.splice(L++,0,U)}return String.fromCodePoint(...$)},R=function(T){let $=[];T=E(T);let k=T.length,L=r,U=0,B=t;for(let q of T)q<128&&$.push(_(q));let le=$.length,re=le;for(le&&$.push(n);re<k;){let q=a;for(let K of T)K>=L&&K<q&&(q=K);let oe=re+1;q-L>b((a-U)/oe)&&w("overflow"),U+=(q-L)*oe,L=q;for(let K of T)if(K<L&&++U>a&&w("overflow"),K===L){let ie=U;for(let N=s;;N+=s){let G=N<=B?o:N>=B+c?c:N-B;if(ie<G)break;let ce=ie-G,H=s-G;$.push(_(M(G+ce%H,0))),ie=b(ce/H)}$.push(_(M(ie,0))),B=C(U,oe,re===le),U=0,++re}++U,++L}return $.join("")};return Hn={version:"2.3.1",ucs2:{decode:E,encode:A},decode:I,encode:R,toASCII:function(T){return m(T,function($){return f.test($)?"xn--"+R($):$})},toUnicode:function(T){return m(T,function($){return l.test($)?I($.slice(4).toLowerCase()):$})}},Hn}var Hn,ms,sr,hd=mt(()=>{pe(),ye(),de(),Hn={},ms=!1,sr=fd(),sr.decode,sr.encode,sr.toASCII,sr.toUnicode,sr.ucs2,sr.version});function pd(){return vs||(vs=!0,bs=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var a={},s=Symbol("test"),o=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var c=42;a[s]=c;for(s in a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var u=Object.getOwnPropertySymbols(a);if(u.length!==1||u[0]!==s||!Object.prototype.propertyIsEnumerable.call(a,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var e=Object.getOwnPropertyDescriptor(a,s);if(e.value!==c||e.enumerable!==!0)return!1}return!0}),bs}function dd(){return _s||(_s=!0,ws=Error),ws}function yd(){return Es||(Es=!0,Ss=EvalError),Ss}function gd(){return xs||(xs=!0,As=RangeError),As}function md(){return Is||(Is=!0,ks=ReferenceError),ks}function Vu(){return Ps||(Ps=!0,Ts=SyntaxError),Ts}function Tn(){return Cs||(Cs=!0,Os=TypeError),Os}function bd(){return Ms||(Ms=!0,Rs=URIError),Rs}function vd(){if(Ns)return Kn;Ns=!0;var a=typeof Symbol<"u"&&Symbol,s=pd();return Kn=function(){return typeof a!="function"||typeof Symbol!="function"||typeof a("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:s()},Kn}function wd(){if(js)return Vn;js=!0;var a={__proto__:null,foo:{}},s=Object;return Vn=function(){return{__proto__:a}.foo===a.foo&&!(a instanceof s)},Vn}function _d(){if(Ls)return Gn;Ls=!0;var a="Function.prototype.bind called on incompatible ",s=Object.prototype.toString,o=Math.max,c="[object Function]",u=function(r,n){for(var l=[],f=0;f<r.length;f+=1)l[f]=r[f];for(var h=0;h<n.length;h+=1)l[h+r.length]=n[h];return l},e=function(r,n){for(var l=[],f=n,h=0;f<r.length;f+=1,h+=1)l[h]=r[f];return l},t=function(r,n){for(var l="",f=0;f<r.length;f+=1)l+=r[f],f+1<r.length&&(l+=n);return l};return Gn=function(r){var n=this;if(typeof n!="function"||s.apply(n)!==c)throw new TypeError(a+n);for(var l=e(arguments,1),f,h=function(){if(this instanceof f){var w=n.apply(this,u(l,arguments));return Object(w)===w?w:this}return n.apply(r,u(l,arguments))},p=o(0,n.length-l.length),y=[],b=0;b<p;b++)y[b]="$"+b;if(f=Function("binder","return function ("+t(y,",")+"){ return binder.apply(this,arguments); }")(h),n.prototype){var _=function(){};_.prototype=n.prototype,f.prototype=new _,_.prototype=null}return f},Gn}function wa(){if(Bs)return Yn;Bs=!0;var a=_d();return Yn=Function.prototype.bind||a,Yn}function Sd(){if(Us)return Qn;Us=!0;var a=Function.prototype.call,s=Object.prototype.hasOwnProperty,o=wa();return Qn=o.call(a,s),Qn}function on(){if(Ds)return Jn;Ds=!0;var a,s=dd(),o=yd(),c=gd(),u=md(),e=Vu(),t=Tn(),r=bd(),n=Function,l=function(re){try{return n('"use strict"; return ('+re+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new t},p=f?function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}}():h,y=vd()(),b=wd()(),_=Object.getPrototypeOf||(b?function(re){return re.__proto__}:null),w={},x=typeof Uint8Array>"u"||!_?a:_(Uint8Array),m={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?a:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?a:ArrayBuffer,"%ArrayIteratorPrototype%":y&&_?_([][Symbol.iterator]()):a,"%AsyncFromSyncIteratorPrototype%":a,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?a:Atomics,"%BigInt%":typeof BigInt>"u"?a:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?a:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?a:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?a:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float32Array%":typeof Float32Array>"u"?a:Float32Array,"%Float64Array%":typeof Float64Array>"u"?a:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?a:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?a:Int8Array,"%Int16Array%":typeof Int16Array>"u"?a:Int16Array,"%Int32Array%":typeof Int32Array>"u"?a:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&_?_(_([][Symbol.iterator]())):a,"%JSON%":typeof JSON=="object"?JSON:a,"%Map%":typeof Map>"u"?a:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y||!_?a:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?a:Promise,"%Proxy%":typeof Proxy>"u"?a:Proxy,"%RangeError%":c,"%ReferenceError%":u,"%Reflect%":typeof Reflect>"u"?a:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?a:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y||!_?a:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?a:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&_?_(""[Symbol.iterator]()):a,"%Symbol%":y?Symbol:a,"%SyntaxError%":e,"%ThrowTypeError%":p,"%TypedArray%":x,"%TypeError%":t,"%Uint8Array%":typeof Uint8Array>"u"?a:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?a:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?a:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?a:Uint32Array,"%URIError%":r,"%WeakMap%":typeof WeakMap>"u"?a:WeakMap,"%WeakRef%":typeof WeakRef>"u"?a:WeakRef,"%WeakSet%":typeof WeakSet>"u"?a:WeakSet};if(_)try{null.error}catch(re){var E=_(_(re));m["%Error.prototype%"]=E}var A=function re(q){var oe;if(q==="%AsyncFunction%")oe=l("async function () {}");else if(q==="%GeneratorFunction%")oe=l("function* () {}");else if(q==="%AsyncGeneratorFunction%")oe=l("async function* () {}");else if(q==="%AsyncGenerator%"){var K=re("%AsyncGeneratorFunction%");K&&(oe=K.prototype)}else if(q==="%AsyncIteratorPrototype%"){var ie=re("%AsyncGenerator%");ie&&_&&(oe=_(ie.prototype))}return m[q]=oe,oe},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=wa(),C=Sd(),I=M.call(Function.call,Array.prototype.concat),R=M.call(Function.apply,Array.prototype.splice),T=M.call(Function.call,String.prototype.replace),$=M.call(Function.call,String.prototype.slice),k=M.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,B=function(re){var q=$(re,0,1),oe=$(re,-1);if(q==="%"&&oe!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(oe==="%"&&q!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var K=[];return T(re,L,function(ie,N,G,ce){K[K.length]=G?T(ce,U,"$1"):N||ie}),K},le=function(re,q){var oe=re,K;if(C(S,oe)&&(K=S[oe],oe="%"+K[0]+"%"),C(m,oe)){var ie=m[oe];if(ie===w&&(ie=A(oe)),typeof ie>"u"&&!q)throw new t("intrinsic "+re+" exists, but is not available. Please file an issue!");return{alias:K,name:oe,value:ie}}throw new e("intrinsic "+re+" does not exist!")};return Jn=function(re,q){if(typeof re!="string"||re.length===0)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new t('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,re)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var oe=B(re),K=oe.length>0?oe[0]:"",ie=le("%"+K+"%",q),N=ie.name,G=ie.value,ce=!1,H=ie.alias;H&&(K=H[0],R(oe,I([0,1],H)));for(var Se=1,Z=!0;Se<oe.length;Se+=1){var D=oe[Se],se=$(D,0,1),Y=$(D,-1);if((se==='"'||se==="'"||se==="`"||Y==='"'||Y==="'"||Y==="`")&&se!==Y)throw new e("property names with quotes must have matching quotes");if((D==="constructor"||!Z)&&(ce=!0),K+="."+D,N="%"+K+"%",C(m,N))G=m[N];else if(G!=null){if(!(D in G)){if(!q)throw new t("base intrinsic for "+re+" exists, but the property is not available.");return}if(f&&Se+1>=oe.length){var Q=f(G,D);Z=!!Q,Z&&"get"in Q&&!("originalValue"in Q.get)?G=Q.get:G=G[D]}else Z=C(G,D),G=G[D];Z&&!ce&&(m[N]=G)}}return G},Jn}function _a(){if(Fs)return Zn;Fs=!0;var a=on(),s=a("%Object.defineProperty%",!0)||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return Zn=s,Zn}function Gu(){if(qs)return Xn;qs=!0;var a=on(),s=a("%Object.getOwnPropertyDescriptor%",!0);if(s)try{s([],"length")}catch{s=null}return Xn=s,Xn}function Ed(){if(Ws)return ei;Ws=!0;var a=_a(),s=Vu(),o=Tn(),c=Gu();return ei=function(u,e,t){if(!u||typeof u!="object"&&typeof u!="function")throw new o("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new o("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,h=!!c&&c(u,e);if(a)a(u,e,{configurable:l===null&&h?h.configurable:!l,enumerable:r===null&&h?h.enumerable:!r,value:t,writable:n===null&&h?h.writable:!n});else if(f||!r&&!n&&!l)u[e]=t;else throw new s("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ei}function Ad(){if($s)return ti;$s=!0;var a=_a(),s=function(){return!!a};return s.hasArrayLengthDefineBug=function(){if(!a)return null;try{return a([],"length",{value:1}).length!==1}catch{return!0}},ti=s,ti}function xd(){if(zs)return ri;zs=!0;var a=on(),s=Ed(),o=Ad()(),c=Gu(),u=Tn(),e=a("%Math.floor%");return ri=function(t,r){if(typeof t!="function")throw new u("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||e(r)!==r)throw new u("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],l=!0,f=!0;if("length"in t&&c){var h=c(t,"length");h&&!h.configurable&&(l=!1),h&&!h.writable&&(f=!1)}return(l||f||!n)&&(o?s(t,"length",r,!0,!0):s(t,"length",r)),t},ri}function kd(){if(Hs)return $r;Hs=!0;var a=wa(),s=on(),o=xd(),c=Tn(),u=s("%Function.prototype.apply%"),e=s("%Function.prototype.call%"),t=s("%Reflect.apply%",!0)||a.call(e,u),r=_a(),n=s("%Math.max%");$r=function(f){if(typeof f!="function")throw new c("a function is required");var h=t(a,e,arguments);return o(h,1+n(0,f.length-(arguments.length-1)),!0)};var l=function(){return t(a,u,arguments)};return r?r($r,"apply",{value:l}):$r.apply=l,$r}function Id(){if(Ks)return ni;Ks=!0;var a=on(),s=kd(),o=s(a("String.prototype.indexOf"));return ni=function(c,u){var e=a(c,!!u);return typeof e=="function"&&o(c,".prototype.")>-1?s(e):e},ni}var bs,vs,ws,_s,Ss,Es,As,xs,ks,Is,Ts,Ps,Os,Cs,Rs,Ms,Kn,Ns,Vn,js,Gn,Ls,Yn,Bs,Qn,Us,Jn,Ds,Zn,Fs,Xn,qs,ei,Ws,ti,$s,ri,zs,$r,Hs,ni,Ks,Td=mt(()=>{pe(),ye(),de(),bs={},vs=!1,ws={},_s=!1,Ss={},Es=!1,As={},xs=!1,ks={},Is=!1,Ts={},Ps=!1,Os={},Cs=!1,Rs={},Ms=!1,Kn={},Ns=!1,Vn={},js=!1,Gn={},Ls=!1,Yn={},Bs=!1,Qn={},Us=!1,Jn={},Ds=!1,Zn={},Fs=!1,Xn={},qs=!1,ei={},Ws=!1,ti={},$s=!1,ri={},zs=!1,$r={},Hs=!1,ni={},Ks=!1});function Sa(a){throw new Error("Node.js process "+a+" is not supported by JSPM core outside of Node.js")}function Pd(){!Or||!Er||(Or=!1,Er.length?Rt=Er.concat(Rt):wn=-1,Rt.length&&Yu())}function Yu(){if(!Or){var a=setTimeout(Pd,0);Or=!0;for(var s=Rt.length;s;){for(Er=Rt,Rt=[];++wn<s;)Er&&Er[wn].run();wn=-1,s=Rt.length}Er=null,Or=!1,clearTimeout(a)}}function Od(a){var s=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)s[o-1]=arguments[o];Rt.push(new Qu(a,s)),Rt.length===1&&!Or&&setTimeout(Yu,0)}function Qu(a,s){this.fun=a,this.array=s}function ct(){}function Cd(a){Sa("_linkedBinding")}function Rd(a){Sa("dlopen")}function Md(){return[]}function Nd(){return[]}function jd(a,s){if(!a)throw new Error(s||"assertion error")}function Ld(){return!1}function Bd(){return $t.now()/1e3}function Vi(a){var s=Math.floor((Date.now()-$t.now())*.001),o=$t.now()*.001,c=Math.floor(o)+s,u=Math.floor(o%1*1e9);return a&&(c=c-a[0],u=u-a[1],u<0&&(c--,u+=ii)),[c,u]}function tr(){return Ea}function Ud(a){return[]}var Rt,Or,Er,wn,Qa,Ja,Za,Xa,el,tl,rl,nl,il,ol,sl,al,ll,cl,ul,fl,hl,pl,dl,yl,gl,Nn,ml,bl,vl,wl,_l,Sl,El,Al,xl,kl,Il,Tl,Pl,Ol,Cl,Rl,Ml,Nl,jl,Ll,Bl,Ul,Dl,Fl,ql,$t,Gi,ii,Wl,$l,zl,Hl,Kl,Vl,Gl,Yl,Ql,Jl,Zl,Ea,Ju=mt(()=>{pe(),ye(),de(),Rt=[],Or=!1,wn=-1,Qu.prototype.run=function(){this.fun.apply(null,this.array)},Qa="browser",Ja="x64",Za="browser",Xa={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},el=["/usr/bin/node"],tl=[],rl="v16.8.0",nl={},il=function(a,s){console.warn((s?s+": ":"")+a)},ol=function(a){Sa("binding")},sl=function(a){return 0},al=function(){return"/"},ll=function(a){},cl={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ul=ct,fl=[],hl={},pl=!1,dl={},yl=ct,gl=ct,Nn=function(){return{}},ml=Nn,bl=Nn,vl=ct,wl=ct,_l=ct,Sl={},El={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Al=ct,xl=ct,kl=ct,Il=ct,Tl=ct,Pl=ct,Ol=ct,Cl=void 0,Rl=void 0,Ml=void 0,Nl=ct,jl=2,Ll=1,Bl="/bin/usr/node",Ul=9229,Dl="node",Fl=[],ql=ct,$t={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},$t.now===void 0&&(Gi=Date.now(),$t.timing&&$t.timing.navigationStart&&(Gi=$t.timing.navigationStart),$t.now=()=>Date.now()-Gi),ii=1e9,Vi.bigint=function(a){var s=Vi(a);return typeof BigInt>"u"?s[0]*ii+s[1]:BigInt(s[0]*ii)+BigInt(s[1])},Wl=10,$l={},zl=0,Hl=tr,Kl=tr,Vl=tr,Gl=tr,Yl=tr,Ql=ct,Jl=tr,Zl=tr,Ea={version:rl,versions:nl,arch:Ja,platform:Za,release:cl,_rawDebug:ul,moduleLoadList:fl,binding:ol,_linkedBinding:Cd,_events:$l,_eventsCount:zl,_maxListeners:Wl,on:tr,addListener:Hl,once:Kl,off:Vl,removeListener:Gl,removeAllListeners:Yl,emit:Ql,prependListener:Jl,prependOnceListener:Zl,listeners:Ud,domain:hl,_exiting:pl,config:dl,dlopen:Rd,uptime:Bd,_getActiveRequests:Md,_getActiveHandles:Nd,reallyExit:yl,_kill:gl,cpuUsage:Nn,resourceUsage:ml,memoryUsage:bl,kill:vl,exit:wl,openStdin:_l,allowedNodeEnvironmentFlags:Sl,assert:jd,features:El,_fatalExceptions:Al,setUncaughtExceptionCaptureCallback:xl,hasUncaughtExceptionCaptureCallback:Ld,emitWarning:il,nextTick:Od,_tickCallback:kl,_debugProcess:Il,_debugEnd:Tl,_startProfilerIdleNotifier:Pl,_stopProfilerIdleNotifier:Ol,stdout:Cl,stdin:Ml,stderr:Rl,abort:Nl,umask:sl,chdir:ll,cwd:al,env:Xa,title:Qa,argv:el,execArgv:tl,pid:jl,ppid:Ll,execPath:Bl,debugPort:Ul,hrtime:Vi,argv0:Dl,_preload_modules:Fl,setSourceMapsEnabled:ql}});function Dd(){if(Vs)return oi;Vs=!0;var a=Ea;function s(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var r="",n=0,l=-1,f=0,h,p=0;p<=e.length;++p){if(p<e.length)h=e.charCodeAt(p);else{if(h===47)break;h=47}if(h===47){if(!(l===p-1||f===1))if(l!==p-1&&f===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var y=r.lastIndexOf("/");if(y!==r.length-1){y===-1?(r="",n=0):(r=r.slice(0,y),n=r.length-1-r.lastIndexOf("/")),l=p,f=0;continue}}else if(r.length===2||r.length===1){r="",n=0,l=p,f=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(l+1,p):r=e.slice(l+1,p),n=p-l-1;l=p,f=0}else h===46&&f!==-1?++f:f=-1}return r}function c(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}var u={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var l;n>=0?l=arguments[n]:(r===void 0&&(r=a.cwd()),l=r),s(l),l.length!==0&&(e=l+"/"+e,t=l.charCodeAt(0)===47)}return e=o(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(s(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=o(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return s(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];s(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":u.normalize(e)},relative:function(e,t){if(s(e),s(t),e===t||(e=u.resolve(e),t=u.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,l=n-r,f=1;f<t.length&&t.charCodeAt(f)===47;++f);for(var h=t.length,p=h-f,y=l<p?l:p,b=-1,_=0;_<=y;++_){if(_===y){if(p>y){if(t.charCodeAt(f+_)===47)return t.slice(f+_+1);if(_===0)return t.slice(f+_)}else l>y&&(e.charCodeAt(r+_)===47?b=_:_===0&&(b=0));break}var w=e.charCodeAt(r+_),x=t.charCodeAt(f+_);if(w!==x)break;w===47&&(b=_)}var m="";for(_=r+b+1;_<=n;++_)(_===n||e.charCodeAt(_)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+t.slice(f+b):(f+=b,t.charCodeAt(f)===47&&++f,t.slice(f))},_makeLong:function(e){return e},dirname:function(e){if(s(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,l=!0,f=e.length-1;f>=1;--f)if(t=e.charCodeAt(f),t===47){if(!l){n=f;break}}else l=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');s(e);var r=0,n=-1,l=!0,f;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var h=t.length-1,p=-1;for(f=e.length-1;f>=0;--f){var y=e.charCodeAt(f);if(y===47){if(!l){r=f+1;break}}else p===-1&&(l=!1,p=f+1),h>=0&&(y===t.charCodeAt(h)?--h===-1&&(n=f):(h=-1,n=p))}return r===n?n=p:n===-1&&(n=e.length),e.slice(r,n)}else{for(f=e.length-1;f>=0;--f)if(e.charCodeAt(f)===47){if(!l){r=f+1;break}}else n===-1&&(l=!1,n=f+1);return n===-1?"":e.slice(r,n)}},extname:function(e){s(e);for(var t=-1,r=0,n=-1,l=!0,f=0,h=e.length-1;h>=0;--h){var p=e.charCodeAt(h);if(p===47){if(!l){r=h+1;break}continue}n===-1&&(l=!1,n=h+1),p===46?t===-1?t=h:f!==1&&(f=1):t!==-1&&(f=-1)}return t===-1||n===-1||f===0||f===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return c("/",e)},parse:function(e){s(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,l;n?(t.root="/",l=1):l=0;for(var f=-1,h=0,p=-1,y=!0,b=e.length-1,_=0;b>=l;--b){if(r=e.charCodeAt(b),r===47){if(!y){h=b+1;break}continue}p===-1&&(y=!1,p=b+1),r===46?f===-1?f=b:_!==1&&(_=1):f!==-1&&(_=-1)}return f===-1||p===-1||_===0||_===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&n?t.base=t.name=e.slice(1,p):t.base=t.name=e.slice(h,p)):(h===0&&n?(t.name=e.slice(1,f),t.base=e.slice(1,p)):(t.name=e.slice(h,f),t.base=e.slice(h,p)),t.ext=e.slice(f,p)),h>0?t.dir=e.slice(0,h-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return u.posix=u,oi=u,oi}var oi,Vs,Gs,Fd=mt(()=>{pe(),ye(),de(),Ju(),oi={},Vs=!1,Gs=Dd()}),Zu={};tn(Zu,{URL:()=>cf,Url:()=>nf,default:()=>ut,fileURLToPath:()=>ef,format:()=>of,parse:()=>lf,pathToFileURL:()=>tf,resolve:()=>sf,resolveObject:()=>af});function qd(){if(Ys)return si;Ys=!0;var a=typeof Map=="function"&&Map.prototype,s=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=a&&s&&typeof s.get=="function"?s.get:null,c=a&&Map.prototype.forEach,u=typeof Set=="function"&&Set.prototype,e=Object.getOwnPropertyDescriptor&&u?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,t=u&&e&&typeof e.get=="function"?e.get:null,r=u&&Set.prototype.forEach,n=typeof WeakMap=="function"&&WeakMap.prototype,l=n?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,y=p?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,_=Object.prototype.toString,w=Function.prototype.toString,x=String.prototype.match,m=String.prototype.slice,E=String.prototype.replace,A=String.prototype.toUpperCase,S=String.prototype.toLowerCase,M=RegExp.prototype.test,C=Array.prototype.concat,I=Array.prototype.join,R=Array.prototype.slice,T=Math.floor,$=typeof BigInt=="function"?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,U=typeof Symbol=="function"&&typeof Symbol.iterator=="object",B=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===U||!0)?Symbol.toStringTag:null,le=Object.prototype.propertyIsEnumerable,re=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(V){return V.__proto__}:null);function q(V,te){if(V===1/0||V===-1/0||V!==V||V&&V>-1e3&&V<1e3||M.call(/e/,te))return te;var Ie=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof V=="number"){var Pe=V<0?-T(-V):T(V);if(Pe!==V){var Oe=String(Pe),Le=m.call(te,Oe.length+1);return E.call(Oe,Ie,"$&_")+"."+E.call(E.call(Le,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(te,Ie,"$&_")}var oe=rf,K=oe.custom,ie=Q(K)?K:null;si=function V(te,Ie,Pe,Oe){var Le=Ie||{};if(fe(Le,"quoteStyle")&&Le.quoteStyle!=="single"&&Le.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(fe(Le,"maxStringLength")&&(typeof Le.maxStringLength=="number"?Le.maxStringLength<0&&Le.maxStringLength!==1/0:Le.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Qe=fe(Le,"customInspect")?Le.customInspect:!0;if(typeof Qe!="boolean"&&Qe!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(fe(Le,"indent")&&Le.indent!==null&&Le.indent!=="	"&&!(parseInt(Le.indent,10)===Le.indent&&Le.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(fe(Le,"numericSeparator")&&typeof Le.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Xe=Le.numericSeparator;if(typeof te>"u")return"undefined";if(te===null)return"null";if(typeof te=="boolean")return te?"true":"false";if(typeof te=="string")return he(te,Le);if(typeof te=="number"){if(te===0)return 1/0/te>0?"0":"-0";var De=String(te);return Xe?q(te,De):De}if(typeof te=="bigint"){var Ve=String(te)+"n";return Xe?q(te,Ve):Ve}var Ne=typeof Le.depth>"u"?5:Le.depth;if(typeof Pe>"u"&&(Pe=0),Pe>=Ne&&Ne>0&&typeof te=="object")return ce(te)?"[Array]":"[Object]";var Fe=F(Le,Pe);if(typeof Oe>"u")Oe=[];else if(ue(Oe,te)>=0)return"[Circular]";function He(Tt,er,pr){if(er&&(Oe=R.call(Oe),Oe.push(er)),pr){var Pt={depth:Le.depth};return fe(Le,"quoteStyle")&&(Pt.quoteStyle=Le.quoteStyle),V(Tt,Pt,Pe+1,Oe)}return V(Tt,Le,Pe+1,Oe)}if(typeof te=="function"&&!Se(te)){var Ze=X(te),ot=ae(te,He);return"[Function"+(Ze?": "+Ze:" (anonymous)")+"]"+(ot.length>0?" { "+I.call(ot,", ")+" }":"")}if(Q(te)){var Et=U?E.call(String(te),/^(Symbol\(.*\))_[^)]*$/,"$1"):L.call(te);return typeof te=="object"&&!U?d(Et):Et}if(ke(te)){for(var j="<"+S.call(String(te.nodeName)),z=te.attributes||[],xe=0;xe<z.length;xe++)j+=" "+z[xe].name+"="+N(G(z[xe].value),"double",Le);return j+=">",te.childNodes&&te.childNodes.length&&(j+="..."),j+="</"+S.call(String(te.nodeName))+">",j}if(ce(te)){if(te.length===0)return"[]";var Te=ae(te,He);return Fe&&!O(Te)?"["+J(Te,Fe)+"]":"[ "+I.call(Te,", ")+" ]"}if(Z(te)){var Ce=ae(te,He);return!("cause"in Error.prototype)&&"cause"in te&&!le.call(te,"cause")?"{ ["+String(te)+"] "+I.call(C.call("[cause]: "+He(te.cause),Ce),", ")+" }":Ce.length===0?"["+String(te)+"]":"{ ["+String(te)+"] "+I.call(Ce,", ")+" }"}if(typeof te=="object"&&Qe){if(ie&&typeof te[ie]=="function"&&oe)return oe(te,{depth:Ne-Pe});if(Qe!=="symbol"&&typeof te.inspect=="function")return te.inspect()}if(be(te)){var nt=[];return c&&c.call(te,function(Tt,er){nt.push(He(er,te,!0)+" => "+He(Tt,te))}),v("Map",o.call(te),nt,Fe)}if(ne(te)){var ht=[];return r&&r.call(te,function(Tt){ht.push(He(Tt,te))}),v("Set",t.call(te),ht,Fe)}if(me(te))return g("WeakMap");if(we(te))return g("WeakSet");if(_e(te))return g("WeakRef");if(se(te))return d(He(Number(te)));if(ee(te))return d(He($.call(te)));if(Y(te))return d(b.call(te));if(D(te))return d(He(String(te)));if(typeof window<"u"&&te===window)return"{ [object Window] }";if(typeof globalThis<"u"&&te===globalThis||typeof ai<"u"&&te===ai)return"{ [object globalThis] }";if(!H(te)&&!Se(te)){var At=ae(te,He),sn=re?re(te)===Object.prototype:te instanceof Object||te.constructor===Object,an=te instanceof Object?"":"null prototype",ln=!sn&&B&&Object(te)===te&&B in te?m.call(W(te),8,-1):an?"Object":"",Pn=sn||typeof te.constructor!="function"?"":te.constructor.name?te.constructor.name+" ":"",hr=Pn+(ln||an?"["+I.call(C.call([],ln||[],an||[]),": ")+"] ":"");return At.length===0?hr+"{}":Fe?hr+"{"+J(At,Fe)+"}":hr+"{ "+I.call(At,", ")+" }"}return String(te)};function N(V,te,Ie){var Pe=(Ie.quoteStyle||te)==="double"?'"':"'";return Pe+V+Pe}function G(V){return E.call(String(V),/"/g,"&quot;")}function ce(V){return W(V)==="[object Array]"&&(!B||!(typeof V=="object"&&B in V))}function H(V){return W(V)==="[object Date]"&&(!B||!(typeof V=="object"&&B in V))}function Se(V){return W(V)==="[object RegExp]"&&(!B||!(typeof V=="object"&&B in V))}function Z(V){return W(V)==="[object Error]"&&(!B||!(typeof V=="object"&&B in V))}function D(V){return W(V)==="[object String]"&&(!B||!(typeof V=="object"&&B in V))}function se(V){return W(V)==="[object Number]"&&(!B||!(typeof V=="object"&&B in V))}function Y(V){return W(V)==="[object Boolean]"&&(!B||!(typeof V=="object"&&B in V))}function Q(V){if(U)return V&&typeof V=="object"&&V instanceof Symbol;if(typeof V=="symbol")return!0;if(!V||typeof V!="object"||!L)return!1;try{return L.call(V),!0}catch{}return!1}function ee(V){if(!V||typeof V!="object"||!$)return!1;try{return $.call(V),!0}catch{}return!1}var ge=Object.prototype.hasOwnProperty||function(V){return V in(this||ai)};function fe(V,te){return ge.call(V,te)}function W(V){return _.call(V)}function X(V){if(V.name)return V.name;var te=x.call(w.call(V),/^function\s*([\w$]+)/);return te?te[1]:null}function ue(V,te){if(V.indexOf)return V.indexOf(te);for(var Ie=0,Pe=V.length;Ie<Pe;Ie++)if(V[Ie]===te)return Ie;return-1}function be(V){if(!o||!V||typeof V!="object")return!1;try{o.call(V);try{t.call(V)}catch{return!0}return V instanceof Map}catch{}return!1}function me(V){if(!l||!V||typeof V!="object")return!1;try{l.call(V,l);try{h.call(V,h)}catch{return!0}return V instanceof WeakMap}catch{}return!1}function _e(V){if(!y||!V||typeof V!="object")return!1;try{return y.call(V),!0}catch{}return!1}function ne(V){if(!t||!V||typeof V!="object")return!1;try{t.call(V);try{o.call(V)}catch{return!0}return V instanceof Set}catch{}return!1}function we(V){if(!h||!V||typeof V!="object")return!1;try{h.call(V,h);try{l.call(V,l)}catch{return!0}return V instanceof WeakSet}catch{}return!1}function ke(V){return!V||typeof V!="object"?!1:typeof HTMLElement<"u"&&V instanceof HTMLElement?!0:typeof V.nodeName=="string"&&typeof V.getAttribute=="function"}function he(V,te){if(V.length>te.maxStringLength){var Ie=V.length-te.maxStringLength,Pe="... "+Ie+" more character"+(Ie>1?"s":"");return he(m.call(V,0,te.maxStringLength),te)+Pe}var Oe=E.call(E.call(V,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,je);return N(Oe,"single",te)}function je(V){var te=V.charCodeAt(0),Ie={8:"b",9:"t",10:"n",12:"f",13:"r"}[te];return Ie?"\\"+Ie:"\\x"+(te<16?"0":"")+A.call(te.toString(16))}function d(V){return"Object("+V+")"}function g(V){return V+" { ? }"}function v(V,te,Ie,Pe){var Oe=Pe?J(Ie,Pe):I.call(Ie,", ");return V+" ("+te+") {"+Oe+"}"}function O(V){for(var te=0;te<V.length;te++)if(ue(V[te],`
`)>=0)return!1;return!0}function F(V,te){var Ie;if(V.indent==="	")Ie="	";else if(typeof V.indent=="number"&&V.indent>0)Ie=I.call(Array(V.indent+1)," ");else return null;return{base:Ie,prev:I.call(Array(te+1),Ie)}}function J(V,te){if(V.length===0)return"";var Ie=`
`+te.prev+te.base;return Ie+I.call(V,","+Ie)+`
`+te.prev}function ae(V,te){var Ie=ce(V),Pe=[];if(Ie){Pe.length=V.length;for(var Oe=0;Oe<V.length;Oe++)Pe[Oe]=fe(V,Oe)?te(V[Oe],V):""}var Le=typeof k=="function"?k(V):[],Qe;if(U){Qe={};for(var Xe=0;Xe<Le.length;Xe++)Qe["$"+Le[Xe]]=Le[Xe]}for(var De in V)fe(V,De)&&(Ie&&String(Number(De))===De&&De<V.length||U&&Qe["$"+De]instanceof Symbol||(M.call(/[^\w$]/,De)?Pe.push(te(De,V)+": "+te(V[De],V)):Pe.push(De+": "+te(V[De],V))));if(typeof k=="function")for(var Ve=0;Ve<Le.length;Ve++)le.call(V,Le[Ve])&&Pe.push("["+te(Le[Ve])+"]: "+te(V[Le[Ve]],V));return Pe}return si}function Wd(){if(Qs)return li;Qs=!0;var a=on(),s=Id(),o=qd(),c=Tn(),u=a("%WeakMap%",!0),e=a("%Map%",!0),t=s("WeakMap.prototype.get",!0),r=s("WeakMap.prototype.set",!0),n=s("WeakMap.prototype.has",!0),l=s("Map.prototype.get",!0),f=s("Map.prototype.set",!0),h=s("Map.prototype.has",!0),p=function(w,x){for(var m=w,E;(E=m.next)!==null;m=E)if(E.key===x)return m.next=E.next,E.next=w.next,w.next=E,E},y=function(w,x){var m=p(w,x);return m&&m.value},b=function(w,x,m){var E=p(w,x);E?E.value=m:w.next={key:x,next:w.next,value:m}},_=function(w,x){return!!p(w,x)};return li=function(){var w,x,m,E={assert:function(A){if(!E.has(A))throw new c("Side channel does not contain "+o(A))},get:function(A){if(u&&A&&(typeof A=="object"||typeof A=="function")){if(w)return t(w,A)}else if(e){if(x)return l(x,A)}else if(m)return y(m,A)},has:function(A){if(u&&A&&(typeof A=="object"||typeof A=="function")){if(w)return n(w,A)}else if(e){if(x)return h(x,A)}else if(m)return _(m,A);return!1},set:function(A,S){u&&A&&(typeof A=="object"||typeof A=="function")?(w||(w=new u),r(w,A,S)):e?(x||(x=new e),f(x,A,S)):(m||(m={key:{},next:null}),b(m,A,S))}};return E},li}function Aa(){if(Js)return ci;Js=!0;var a=String.prototype.replace,s=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};return ci={default:o.RFC3986,formatters:{RFC1738:function(c){return a.call(c,s,"+")},RFC3986:function(c){return String(c)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986},ci}function Xu(){if(Zs)return ui;Zs=!0;var a=Aa(),s=Object.prototype.hasOwnProperty,o=Array.isArray,c=function(){for(var w=[],x=0;x<256;++x)w.push("%"+((x<16?"0":"")+x.toString(16)).toUpperCase());return w}(),u=function(w){for(;w.length>1;){var x=w.pop(),m=x.obj[x.prop];if(o(m)){for(var E=[],A=0;A<m.length;++A)typeof m[A]<"u"&&E.push(m[A]);x.obj[x.prop]=E}}},e=function(w,x){for(var m=x&&x.plainObjects?Object.create(null):{},E=0;E<w.length;++E)typeof w[E]<"u"&&(m[E]=w[E]);return m},t=function w(x,m,E){if(!m)return x;if(typeof m!="object"){if(o(x))x.push(m);else if(x&&typeof x=="object")(E&&(E.plainObjects||E.allowPrototypes)||!s.call(Object.prototype,m))&&(x[m]=!0);else return[x,m];return x}if(!x||typeof x!="object")return[x].concat(m);var A=x;return o(x)&&!o(m)&&(A=e(x,E)),o(x)&&o(m)?(m.forEach(function(S,M){if(s.call(x,M)){var C=x[M];C&&typeof C=="object"&&S&&typeof S=="object"?x[M]=w(C,S,E):x.push(S)}else x[M]=S}),x):Object.keys(m).reduce(function(S,M){var C=m[M];return s.call(S,M)?S[M]=w(S[M],C,E):S[M]=C,S},A)},r=function(w,x){return Object.keys(x).reduce(function(m,E){return m[E]=x[E],m},w)},n=function(w,x,m){var E=w.replace(/\+/g," ");if(m==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},l=1024,f=function(w,x,m,E,A){if(w.length===0)return w;var S=w;if(typeof w=="symbol"?S=Symbol.prototype.toString.call(w):typeof w!="string"&&(S=String(w)),m==="iso-8859-1")return escape(S).replace(/%u[0-9a-f]{4}/gi,function(k){return"%26%23"+parseInt(k.slice(2),16)+"%3B"});for(var M="",C=0;C<S.length;C+=l){for(var I=S.length>=l?S.slice(C,C+l):S,R=[],T=0;T<I.length;++T){var $=I.charCodeAt(T);if($===45||$===46||$===95||$===126||$>=48&&$<=57||$>=65&&$<=90||$>=97&&$<=122||A===a.RFC1738&&($===40||$===41)){R[R.length]=I.charAt(T);continue}if($<128){R[R.length]=c[$];continue}if($<2048){R[R.length]=c[192|$>>6]+c[128|$&63];continue}if($<55296||$>=57344){R[R.length]=c[224|$>>12]+c[128|$>>6&63]+c[128|$&63];continue}T+=1,$=65536+(($&1023)<<10|I.charCodeAt(T)&1023),R[R.length]=c[240|$>>18]+c[128|$>>12&63]+c[128|$>>6&63]+c[128|$&63]}M+=R.join("")}return M},h=function(w){for(var x=[{obj:{o:w},prop:"o"}],m=[],E=0;E<x.length;++E)for(var A=x[E],S=A.obj[A.prop],M=Object.keys(S),C=0;C<M.length;++C){var I=M[C],R=S[I];typeof R=="object"&&R!==null&&m.indexOf(R)===-1&&(x.push({obj:S,prop:I}),m.push(R))}return u(x),w},p=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},y=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},b=function(w,x){return[].concat(w,x)},_=function(w,x){if(o(w)){for(var m=[],E=0;E<w.length;E+=1)m.push(x(w[E]));return m}return x(w)};return ui={arrayToObject:e,assign:r,combine:b,compact:h,decode:n,encode:f,isBuffer:y,isRegExp:p,maybeMap:_,merge:t},ui}function $d(){if(Xs)return fi;Xs=!0;var a=Wd(),s=Xu(),o=Aa(),c=Object.prototype.hasOwnProperty,u={brackets:function(_){return _+"[]"},comma:"comma",indices:function(_,w){return _+"["+w+"]"},repeat:function(_){return _}},e=Array.isArray,t=Array.prototype.push,r=function(_,w){t.apply(_,e(w)?w:[w])},n=Date.prototype.toISOString,l=o.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:s.encode,encodeValuesOnly:!1,format:l,formatter:o.formatters[l],indices:!1,serializeDate:function(_){return n.call(_)},skipNulls:!1,strictNullHandling:!1},h=function(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},p={},y=function _(w,x,m,E,A,S,M,C,I,R,T,$,k,L,U,B,le,re){for(var q=w,oe=re,K=0,ie=!1;(oe=oe.get(p))!==void 0&&!ie;){var N=oe.get(w);if(K+=1,typeof N<"u"){if(N===K)throw new RangeError("Cyclic object value");ie=!0}typeof oe.get(p)>"u"&&(K=0)}if(typeof R=="function"?q=R(x,q):q instanceof Date?q=k(q):m==="comma"&&e(q)&&(q=s.maybeMap(q,function(W){return W instanceof Date?k(W):W})),q===null){if(S)return I&&!B?I(x,f.encoder,le,"key",L):x;q=""}if(h(q)||s.isBuffer(q)){if(I){var G=B?x:I(x,f.encoder,le,"key",L);return[U(G)+"="+U(I(q,f.encoder,le,"value",L))]}return[U(x)+"="+U(String(q))]}var ce=[];if(typeof q>"u")return ce;var H;if(m==="comma"&&e(q))B&&I&&(q=s.maybeMap(q,I)),H=[{value:q.length>0?q.join(",")||null:void 0}];else if(e(R))H=R;else{var Se=Object.keys(q);H=T?Se.sort(T):Se}var Z=C?x.replace(/\./g,"%2E"):x,D=E&&e(q)&&q.length===1?Z+"[]":Z;if(A&&e(q)&&q.length===0)return D+"[]";for(var se=0;se<H.length;++se){var Y=H[se],Q=typeof Y=="object"&&typeof Y.value<"u"?Y.value:q[Y];if(!(M&&Q===null)){var ee=$&&C?Y.replace(/\./g,"%2E"):Y,ge=e(q)?typeof m=="function"?m(D,ee):D:D+($?"."+ee:"["+ee+"]");re.set(w,K);var fe=a();fe.set(p,re),r(ce,_(Q,ge,m,E,A,S,M,C,m==="comma"&&B&&e(q)?null:I,R,T,$,k,L,U,B,le,fe))}}return ce},b=function(_){if(!_)return f;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.encodeDotInKeys<"u"&&typeof _.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=_.charset||f.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=o.default;if(typeof _.format<"u"){if(!c.call(o.formatters,_.format))throw new TypeError("Unknown format option provided.");x=_.format}var m=o.formatters[x],E=f.filter;(typeof _.filter=="function"||e(_.filter))&&(E=_.filter);var A;if(_.arrayFormat in u?A=_.arrayFormat:"indices"in _?A=_.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var S=typeof _.allowDots>"u"?_.encodeDotInKeys===!0?!0:f.allowDots:!!_.allowDots;return{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:f.addQueryPrefix,allowDots:S,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:w,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:f.charsetSentinel,commaRoundTrip:_.commaRoundTrip,delimiter:typeof _.delimiter>"u"?f.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:f.encode,encodeDotInKeys:typeof _.encodeDotInKeys=="boolean"?_.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof _.encoder=="function"?_.encoder:f.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:f.encodeValuesOnly,filter:E,format:x,formatter:m,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:f.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:f.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:f.strictNullHandling}};return fi=function(_,w){var x=_,m=b(w),E,A;typeof m.filter=="function"?(A=m.filter,x=A("",x)):e(m.filter)&&(A=m.filter,E=A);var S=[];if(typeof x!="object"||x===null)return"";var M=u[m.arrayFormat],C=M==="comma"&&m.commaRoundTrip;E||(E=Object.keys(x)),m.sort&&E.sort(m.sort);for(var I=a(),R=0;R<E.length;++R){var T=E[R];m.skipNulls&&x[T]===null||r(S,y(x[T],T,M,C,m.allowEmptyArrays,m.strictNullHandling,m.skipNulls,m.encodeDotInKeys,m.encode?m.encoder:null,m.filter,m.sort,m.allowDots,m.serializeDate,m.format,m.formatter,m.encodeValuesOnly,m.charset,I))}var $=S.join(m.delimiter),k=m.addQueryPrefix===!0?"?":"";return m.charsetSentinel&&(m.charset==="iso-8859-1"?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),$.length>0?k+$:""},fi}function zd(){if(ea)return hi;ea=!0;var a=Xu(),s=Object.prototype.hasOwnProperty,o=Array.isArray,c={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:a.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},u=function(p){return p.replace(/&#(\d+);/g,function(y,b){return String.fromCharCode(parseInt(b,10))})},e=function(p,y){return p&&typeof p=="string"&&y.comma&&p.indexOf(",")>-1?p.split(","):p},t="utf8=%26%2310003%3B",r="utf8=%E2%9C%93",n=function(p,y){var b={__proto__:null},_=y.ignoreQueryPrefix?p.replace(/^\?/,""):p;_=_.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=y.parameterLimit===1/0?void 0:y.parameterLimit,x=_.split(y.delimiter,w),m=-1,E,A=y.charset;if(y.charsetSentinel)for(E=0;E<x.length;++E)x[E].indexOf("utf8=")===0&&(x[E]===r?A="utf-8":x[E]===t&&(A="iso-8859-1"),m=E,E=x.length);for(E=0;E<x.length;++E)if(E!==m){var S=x[E],M=S.indexOf("]="),C=M===-1?S.indexOf("="):M+1,I,R;C===-1?(I=y.decoder(S,c.decoder,A,"key"),R=y.strictNullHandling?null:""):(I=y.decoder(S.slice(0,C),c.decoder,A,"key"),R=a.maybeMap(e(S.slice(C+1),y),function($){return y.decoder($,c.decoder,A,"value")})),R&&y.interpretNumericEntities&&A==="iso-8859-1"&&(R=u(R)),S.indexOf("[]=")>-1&&(R=o(R)?[R]:R);var T=s.call(b,I);T&&y.duplicates==="combine"?b[I]=a.combine(b[I],R):(!T||y.duplicates==="last")&&(b[I]=R)}return b},l=function(p,y,b,_){for(var w=_?y:e(y,b),x=p.length-1;x>=0;--x){var m,E=p[x];if(E==="[]"&&b.parseArrays)m=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{m=b.plainObjects?Object.create(null):{};var A=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,S=b.decodeDotInKeys?A.replace(/%2E/g,"."):A,M=parseInt(S,10);!b.parseArrays&&S===""?m={0:w}:!isNaN(M)&&E!==S&&String(M)===S&&M>=0&&b.parseArrays&&M<=b.arrayLimit?(m=[],m[M]=w):S!=="__proto__"&&(m[S]=w)}w=m}return w},f=function(p,y,b,_){if(p){var w=b.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,x=/(\[[^[\]]*])/,m=/(\[[^[\]]*])/g,E=b.depth>0&&x.exec(w),A=E?w.slice(0,E.index):w,S=[];if(A){if(!b.plainObjects&&s.call(Object.prototype,A)&&!b.allowPrototypes)return;S.push(A)}for(var M=0;b.depth>0&&(E=m.exec(w))!==null&&M<b.depth;){if(M+=1,!b.plainObjects&&s.call(Object.prototype,E[1].slice(1,-1))&&!b.allowPrototypes)return;S.push(E[1])}if(E){if(b.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");S.push("["+w.slice(E.index)+"]")}return l(S,y,b,_)}},h=function(p){if(!p)return c;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=typeof p.charset>"u"?c.charset:p.charset,b=typeof p.duplicates>"u"?c.duplicates:p.duplicates;if(b!=="combine"&&b!=="first"&&b!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var _=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:c.allowDots:!!p.allowDots;return{allowDots:_,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:c.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:c.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:c.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:c.arrayLimit,charset:y,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:c.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:c.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:c.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:c.decoder,delimiter:typeof p.delimiter=="string"||a.isRegExp(p.delimiter)?p.delimiter:c.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:c.depth,duplicates:b,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:c.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:c.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:c.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:c.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:c.strictNullHandling}};return hi=function(p,y){var b=h(y);if(p===""||p===null||typeof p>"u")return b.plainObjects?Object.create(null):{};for(var _=typeof p=="string"?n(p,b):p,w=b.plainObjects?Object.create(null):{},x=Object.keys(_),m=0;m<x.length;++m){var E=x[m],A=f(E,_[E],b,typeof p=="string");w=a.merge(w,A,b)}return b.allowSparse===!0?w:a.compact(w)},hi}function Hd(){if(ta)return pi;ta=!0;var a=$d(),s=zd(),o=Aa();return pi={formats:o,parse:s,stringify:a},pi}function Kd(){if(ra)return ar;ra=!0;var a=sr;function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,e=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(e),r=["'"].concat(t),n=["%","/","?",";","#"].concat(r),l=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=Hd();function x(S,M,C){if(S&&typeof S=="object"&&S instanceof s)return S;var I=new s;return I.parse(S,M,C),I}s.prototype.parse=function(S,M,C){if(typeof S!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof S);var I=S.indexOf("?"),R=I!==-1&&I<S.indexOf("#")?"?":"#",T=S.split(R),$=/\\/g;T[0]=T[0].replace($,"/"),S=T.join(R);var k=S;if(k=k.trim(),!C&&S.split("#").length===1){var L=u.exec(k);if(L)return this.path=k,this.href=k,this.pathname=L[1],L[2]?(this.search=L[2],M?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):M&&(this.search="",this.query={}),this}var U=o.exec(k);if(U){U=U[0];var B=U.toLowerCase();this.protocol=B,k=k.substr(U.length)}if(C||U||k.match(/^\/\/[^@/]+@[^@/]+/)){var le=k.substr(0,2)==="//";le&&!(U&&b[U])&&(k=k.substr(2),this.slashes=!0)}if(!b[U]&&(le||U&&!_[U])){for(var re=-1,q=0;q<l.length;q++){var oe=k.indexOf(l[q]);oe!==-1&&(re===-1||oe<re)&&(re=oe)}var K,ie;re===-1?ie=k.lastIndexOf("@"):ie=k.lastIndexOf("@",re),ie!==-1&&(K=k.slice(0,ie),k=k.slice(ie+1),this.auth=decodeURIComponent(K)),re=-1;for(var q=0;q<n.length;q++){var oe=k.indexOf(n[q]);oe!==-1&&(re===-1||oe<re)&&(re=oe)}re===-1&&(re=k.length),this.host=k.slice(0,re),k=k.slice(re),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var G=this.hostname.split(/\./),q=0,ce=G.length;q<ce;q++){var H=G[q];if(H&&!H.match(h)){for(var Se="",Z=0,D=H.length;Z<D;Z++)H.charCodeAt(Z)>127?Se+="x":Se+=H[Z];if(!Se.match(h)){var se=G.slice(0,q),Y=G.slice(q+1),Q=H.match(p);Q&&(se.push(Q[1]),Y.unshift(Q[2])),Y.length&&(k="/"+Y.join(".")+k),this.hostname=se.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=a.toASCII(this.hostname));var ee=this.port?":"+this.port:"",ge=this.hostname||"";this.host=ge+ee,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!y[B])for(var q=0,ce=r.length;q<ce;q++){var fe=r[q];if(k.indexOf(fe)!==-1){var W=encodeURIComponent(fe);W===fe&&(W=escape(fe)),k=k.split(fe).join(W)}}var X=k.indexOf("#");X!==-1&&(this.hash=k.substr(X),k=k.slice(0,X));var ue=k.indexOf("?");if(ue!==-1?(this.search=k.substr(ue),this.query=k.substr(ue+1),M&&(this.query=w.parse(this.query)),k=k.slice(0,ue)):M&&(this.search="",this.query={}),k&&(this.pathname=k),_[B]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ee=this.pathname||"",be=this.search||"";this.path=ee+be}return this.href=this.format(),this};function m(S){return typeof S=="string"&&(S=x(S)),S instanceof s?S.format():s.prototype.format.call(S)}s.prototype.format=function(){var S=this.auth||"";S&&(S=encodeURIComponent(S),S=S.replace(/%3A/i,":"),S+="@");var M=this.protocol||"",C=this.pathname||"",I=this.hash||"",R=!1,T="";this.host?R=S+this.host:this.hostname&&(R=S+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(R+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(T=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var $=this.search||T&&"?"+T||"";return M&&M.substr(-1)!==":"&&(M+=":"),this.slashes||(!M||_[M])&&R!==!1?(R="//"+(R||""),C&&C.charAt(0)!=="/"&&(C="/"+C)):R||(R=""),I&&I.charAt(0)!=="#"&&(I="#"+I),$&&$.charAt(0)!=="?"&&($="?"+$),C=C.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),$=$.replace("#","%23"),M+R+C+$+I};function E(S,M){return x(S,!1,!0).resolve(M)}s.prototype.resolve=function(S){return this.resolveObject(x(S,!1,!0)).format()};function A(S,M){return S?x(S,!1,!0).resolveObject(M):M}return s.prototype.resolveObject=function(S){if(typeof S=="string"){var M=new s;M.parse(S,!1,!0),S=M}for(var C=new s,I=Object.keys(this),R=0;R<I.length;R++){var T=I[R];C[T]=this[T]}if(C.hash=S.hash,S.href==="")return C.href=C.format(),C;if(S.slashes&&!S.protocol){for(var $=Object.keys(S),k=0;k<$.length;k++){var L=$[k];L!=="protocol"&&(C[L]=S[L])}return _[C.protocol]&&C.hostname&&!C.pathname&&(C.pathname="/",C.path=C.pathname),C.href=C.format(),C}if(S.protocol&&S.protocol!==C.protocol){if(!_[S.protocol]){for(var U=Object.keys(S),B=0;B<U.length;B++){var le=U[B];C[le]=S[le]}return C.href=C.format(),C}if(C.protocol=S.protocol,!S.host&&!b[S.protocol]){for(var ce=(S.pathname||"").split("/");ce.length&&!(S.host=ce.shift()););S.host||(S.host=""),S.hostname||(S.hostname=""),ce[0]!==""&&ce.unshift(""),ce.length<2&&ce.unshift(""),C.pathname=ce.join("/")}else C.pathname=S.pathname;if(C.search=S.search,C.query=S.query,C.host=S.host||"",C.auth=S.auth,C.hostname=S.hostname||S.host,C.port=S.port,C.pathname||C.search){var re=C.pathname||"",q=C.search||"";C.path=re+q}return C.slashes=C.slashes||S.slashes,C.href=C.format(),C}var oe=C.pathname&&C.pathname.charAt(0)==="/",K=S.host||S.pathname&&S.pathname.charAt(0)==="/",ie=K||oe||C.host&&S.pathname,N=ie,G=C.pathname&&C.pathname.split("/")||[],ce=S.pathname&&S.pathname.split("/")||[],H=C.protocol&&!_[C.protocol];if(H&&(C.hostname="",C.port=null,C.host&&(G[0]===""?G[0]=C.host:G.unshift(C.host)),C.host="",S.protocol&&(S.hostname=null,S.port=null,S.host&&(ce[0]===""?ce[0]=S.host:ce.unshift(S.host)),S.host=null),ie=ie&&(ce[0]===""||G[0]==="")),K)C.host=S.host||S.host===""?S.host:C.host,C.hostname=S.hostname||S.hostname===""?S.hostname:C.hostname,C.search=S.search,C.query=S.query,G=ce;else if(ce.length)G||(G=[]),G.pop(),G=G.concat(ce),C.search=S.search,C.query=S.query;else if(S.search!=null){if(H){C.host=G.shift(),C.hostname=C.host;var Se=C.host&&C.host.indexOf("@")>0?C.host.split("@"):!1;Se&&(C.auth=Se.shift(),C.hostname=Se.shift(),C.host=C.hostname)}return C.search=S.search,C.query=S.query,(C.pathname!==null||C.search!==null)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.href=C.format(),C}if(!G.length)return C.pathname=null,C.search?C.path="/"+C.search:C.path=null,C.href=C.format(),C;for(var Z=G.slice(-1)[0],D=(C.host||S.host||G.length>1)&&(Z==="."||Z==="..")||Z==="",se=0,Y=G.length;Y>=0;Y--)Z=G[Y],Z==="."?G.splice(Y,1):Z===".."?(G.splice(Y,1),se++):se&&(G.splice(Y,1),se--);if(!ie&&!N)for(;se--;se)G.unshift("..");ie&&G[0]!==""&&(!G[0]||G[0].charAt(0)!=="/")&&G.unshift(""),D&&G.join("/").substr(-1)!=="/"&&G.push("");var Q=G[0]===""||G[0]&&G[0].charAt(0)==="/";if(H){C.hostname=Q?"":G.length?G.shift():"",C.host=C.hostname;var Se=C.host&&C.host.indexOf("@")>0?C.host.split("@"):!1;Se&&(C.auth=Se.shift(),C.hostname=Se.shift(),C.host=C.hostname)}return ie=ie||C.host&&G.length,ie&&!Q&&G.unshift(""),G.length>0?C.pathname=G.join("/"):(C.pathname=null,C.path=null),(C.pathname!==null||C.search!==null)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.auth=S.auth||C.auth,C.slashes=C.slashes||S.slashes,C.href=C.format(),C},s.prototype.parseHost=function(){var S=this.host,M=c.exec(S);M&&(M=M[0],M!==":"&&(this.port=M.substr(1)),S=S.substr(0,S.length-M.length)),S&&(this.hostname=S)},ar.parse=x,ar.resolve=E,ar.resolveObject=A,ar.format=m,ar.Url=s,ar}function ef(a){if(typeof a=="string")a=new URL(a);else if(!(a instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(a.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Ii?Vd(a):Gd(a)}function Vd(a){let s=a.hostname,o=a.pathname;for(let c=0;c<o.length;c++)if(o[c]==="%"){let u=o.codePointAt(c+2)||32;if(o[c+1]==="2"&&u===102||o[c+1]==="5"&&u===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(df,"\\"),o=decodeURIComponent(o),s!=="")return`\\\\${s}${o}`;{let c=o.codePointAt(1)|32,u=o[2];if(c<hf||c>pf||u!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Gd(a){if(a.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let s=a.pathname;for(let o=0;o<s.length;o++)if(s[o]==="%"){let c=s.codePointAt(o+2)||32;if(s[o+1]==="2"&&c===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(s)}function tf(a){let s=Gs.resolve(a),o=a.charCodeAt(a.length-1);(o===ff||Ii&&o===uf)&&s[s.length-1]!==Gs.sep&&(s+="/");let c=new URL("file://");return s.includes("%")&&(s=s.replace(yf,"%25")),!Ii&&s.includes("\\")&&(s=s.replace(gf,"%5C")),s.includes(`
`)&&(s=s.replace(mf,"%0A")),s.includes("\r")&&(s=s.replace(bf,"%0D")),s.includes("	")&&(s=s.replace(vf,"%09")),c.pathname=s,c}var rf,si,Ys,ai,li,Qs,ci,Js,ui,Zs,fi,Xs,hi,ea,pi,ta,ar,ra,ut,Xl,nf,of,sf,af,lf,cf,uf,ff,hf,pf,Ii,df,yf,gf,mf,bf,vf,Yd=mt(()=>{pe(),ye(),de(),hd(),Td(),Fd(),Ju(),rf=Object.freeze(Object.create(null)),si={},Ys=!1,ai=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,li={},Qs=!1,ci={},Js=!1,ui={},Zs=!1,fi={},Xs=!1,hi={},ea=!1,pi={},ta=!1,ar={},ra=!1,ut=Kd(),ut.parse,ut.resolve,ut.resolveObject,ut.format,ut.Url,Xl=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,ut.URL=typeof URL<"u"?URL:null,ut.pathToFileURL=tf,ut.fileURLToPath=ef,nf=ut.Url,of=ut.format,sf=ut.resolve,af=ut.resolveObject,lf=ut.parse,cf=ut.URL,uf=92,ff=47,hf=97,pf=122,Ii=Xl==="win32",df=/\//g,yf=/%/g,gf=/\\/g,mf=/\n/g,bf=/\r/g,vf=/\t/g}),Qd=ve((a,s)=>{pe(),ye(),de(),s.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),xa=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0}),a.BufferedDuplex=void 0,a.writev=c;var s=Br(),o=(at(),Ke(st));function c(e,t){let r=new Array(e.length);for(let n=0;n<e.length;n++)typeof e[n].chunk=="string"?r[n]=o.Buffer.from(e[n].chunk,"utf8"):r[n]=e[n].chunk;this._write(o.Buffer.concat(r),"binary",t)}var u=class extends s.Duplex{constructor(t,r,n){super({objectMode:!0});Ae(this,"socket");Ae(this,"proxy");Ae(this,"isSocketOpen");Ae(this,"writeQueue");this.proxy=r,this.socket=n,this.writeQueue=[],t.objectMode||(this._writev=c.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{!this.destroyed&&this.readable&&this.push(l)})}_read(t){this.proxy.read(t)}_write(t,r,n){this.isSocketOpen?this.writeToProxy(t,r,n):this.writeQueue.push({chunk:t,encoding:r,cb:n})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,r){this.writeQueue=[],this.proxy.destroy(),r(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,r,n){this.proxy.write(t,r)===!1?this.proxy.once("drain",n):n()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:r,cb:n}=this.writeQueue.shift();this.writeToProxy(t,r,n)}}};a.BufferedDuplex=u}),jn=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(a,"__esModule",{value:!0}),a.streamBuilder=a.browserStreamBuilder=void 0;var o=(at(),Ke(st)),c=s(Qd()),u=s(Qt()),e=Br(),t=s(Li()),r=xa(),n=(0,u.default)("mqttjs:ws"),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function f(x,m){let E=`${x.protocol}://${x.hostname}:${x.port}${x.path}`;return typeof x.transformWsUrl=="function"&&(E=x.transformWsUrl(E,x,m)),E}function h(x){let m=x;return x.port||(x.protocol==="wss"?m.port=443:m.port=80),x.path||(m.path="/"),x.wsOptions||(m.wsOptions={}),!t.default&&!x.forceNativeWebSocket&&x.protocol==="wss"&&l.forEach(E=>{Object.prototype.hasOwnProperty.call(x,E)&&!Object.prototype.hasOwnProperty.call(x.wsOptions,E)&&(m.wsOptions[E]=x[E])}),m}function p(x){let m=h(x);if(m.hostname||(m.hostname=m.host),!m.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let E=new URL(document.URL);m.hostname=E.hostname,m.port||(m.port=Number(E.port))}return m.objectMode===void 0&&(m.objectMode=!(m.binary===!0||m.binary===void 0)),m}function y(x,m,E){n("createWebSocket"),n(`protocol: ${E.protocolId} ${E.protocolVersion}`);let A=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";n(`creating new Websocket for url: ${m} and protocol: ${A}`);let S;return E.createWebsocket?S=E.createWebsocket(m,[A],E):S=new c.default(m,[A],E.wsOptions),S}function b(x,m){let E=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt",A=f(m,x),S;return m.createWebsocket?S=m.createWebsocket(A,[E],m):S=new WebSocket(A,[E]),S.binaryType="arraybuffer",S}var _=(x,m)=>{n("streamBuilder");let E=h(m);E.hostname=E.hostname||E.host||"localhost";let A=f(E,x),S=y(x,A,E),M=c.default.createWebSocketStream(S,E.wsOptions);return M.url=A,S.on("close",()=>{M.destroy()}),M};a.streamBuilder=_;var w=(x,m)=>{n("browserStreamBuilder");let E,A=p(m).browserBufferSize||1024*512,S=m.browserBufferTimeout||1e3,M=!m.objectMode,C=b(x,m),I=T(m,B,le);m.objectMode||(I._writev=r.writev.bind(I)),I.on("close",()=>{C.close()});let R=typeof C.addEventListener<"u";C.readyState===C.OPEN?(E=I,E.socket=C):(E=new r.BufferedDuplex(m,I,C),R?C.addEventListener("open",$):C.onopen=$),R?(C.addEventListener("close",k),C.addEventListener("error",L),C.addEventListener("message",U)):(C.onclose=k,C.onerror=L,C.onmessage=U);function T(re,q,oe){let K=new e.Transform({objectMode:re.objectMode});return K._write=q,K._flush=oe,K}function $(){n("WebSocket onOpen"),E instanceof r.BufferedDuplex&&E.socketReady()}function k(re){n("WebSocket onClose",re),E.end(),E.destroy()}function L(re){n("WebSocket onError",re);let q=new Error("WebSocket error");q.event=re,E.destroy(q)}async function U(re){if(!I||!I.readable||!I.writable)return;let{data:q}=re;q instanceof ArrayBuffer?q=o.Buffer.from(q):q instanceof Blob?q=o.Buffer.from(await new Response(q).arrayBuffer()):q=o.Buffer.from(q,"utf8"),I.push(q)}function B(re,q,oe){if(C.bufferedAmount>A){setTimeout(B,S,re,q,oe);return}M&&typeof re=="string"&&(re=o.Buffer.from(re,"utf8"));try{C.send(re)}catch(K){return oe(K)}oe()}function le(re){C.close(),re()}return E};a.browserStreamBuilder=w}),ka={};tn(ka,{Server:()=>Ye,Socket:()=>Ye,Stream:()=>Ye,_createServerHandle:()=>Ye,_normalizeArgs:()=>Ye,_setSimultaneousAccepts:()=>Ye,connect:()=>Ye,createConnection:()=>Ye,createServer:()=>Ye,default:()=>wf,isIP:()=>Ye,isIPv4:()=>Ye,isIPv6:()=>Ye});function Ye(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var wf,_f=mt(()=>{pe(),ye(),de(),wf={_createServerHandle:Ye,_normalizeArgs:Ye,_setSimultaneousAccepts:Ye,connect:Ye,createConnection:Ye,createServer:Ye,isIP:Ye,isIPv4:Ye,isIPv6:Ye,Server:Ye,Socket:Ye,Stream:Ye}}),Sf=ve((a,s)=>{pe(),ye(),de(),s.exports={}}),ec=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});var o=s((_f(),Ke(ka))),c=s(Qt()),u=s(Sf()),e=(0,c.default)("mqttjs:tcp"),t=(r,n)=>{if(n.port=n.port||1883,n.hostname=n.hostname||n.host||"localhost",n.socksProxy)return(0,u.default)(n.hostname,n.port,n.socksProxy,{timeout:n.socksTimeout});let{port:l,path:f}=n,h=n.hostname;return e("port %d and host %s",l,h),o.default.createConnection({port:l,host:h,path:f})};a.default=t}),Ef={};tn(Ef,{default:()=>Af});var Af,Jd=mt(()=>{pe(),ye(),de(),Af={}}),tc=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});var o=(Jd(),Ke(Ef)),c=s((_f(),Ke(ka))),u=s(Qt()),e=s(Sf()),t=(0,u.default)("mqttjs:tls");function r(l){let{host:f,port:h,socksProxy:p,...y}=l;if(p!==void 0){let b=(0,e.default)(f,h,p,{timeout:l.socksTimeout});return(0,o.connect)({...y,socket:b})}return(0,o.connect)(l)}var n=(l,f)=>{f.port=f.port||8883,f.host=f.hostname||f.host||"localhost",c.default.isIP(f.host)===0&&(f.servername=f.host),f.rejectUnauthorized=f.rejectUnauthorized!==!1,delete f.path,t("port %d host %s rejectUnauthorized %b",f.port,f.host,f.rejectUnauthorized);let h=r(f);h.on("secureConnect",()=>{f.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",p)});function p(y){f.rejectUnauthorized&&l.emit("error",y),h.end()}return h.on("error",p),h};a.default=n}),rc=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=(at(),Ke(st)),o=Br(),c=xa(),u,e,t;function r(){let p=new o.Transform;return p._write=(y,b,_)=>{u.send({data:y.buffer,success(){_()},fail(w){_(new Error(w))}})},p._flush=y=>{u.close({success(){y()}})},p}function n(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function l(p,y){let b=p.protocol==="wxs"?"wss":"ws",_=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(_=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(_=p.transformWsUrl(_,p,y)),_}function f(){u.onOpen(()=>{t.socketReady()}),u.onMessage(p=>{let{data:y}=p;y instanceof ArrayBuffer?y=s.Buffer.from(y):y=s.Buffer.from(y,"utf8"),e.push(y)}),u.onClose(()=>{t.emit("close"),t.end(),t.destroy()}),u.onError(p=>{let y=new Error(p.errMsg);t.destroy(y)})}var h=(p,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let b=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";n(y);let _=l(y,p);u=wx.connectSocket({url:_,protocols:[b]}),e=r(),t=new c.BufferedDuplex(y,e,u),t._destroy=(x,m)=>{u.close({success(){m&&m(x)}})};let w=t.destroy;return t.destroy=(x,m)=>(t.destroy=w,setTimeout(()=>{u.close({fail(){t._destroy(x,m)}})},0),t),f(),t};a.default=h}),nc=ve(a=>{pe(),ye(),de(),Object.defineProperty(a,"__esModule",{value:!0});var s=(at(),Ke(st)),o=Br(),c=xa(),u,e,t,r=!1;function n(){let y=new o.Transform;return y._write=(b,_,w)=>{u.sendSocketMessage({data:b.buffer,success(){w()},fail(){w(new Error)}})},y._flush=b=>{u.closeSocket({success(){b()}})},y}function l(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function f(y,b){let _=y.protocol==="alis"?"wss":"ws",w=`${_}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(w=`${_}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(w=y.transformWsUrl(w,y,b)),w}function h(){r||(r=!0,u.onSocketOpen(()=>{t.socketReady()}),u.onSocketMessage(y=>{if(typeof y.data=="string"){let b=s.Buffer.from(y.data,"base64");e.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{if(b.result instanceof ArrayBuffer){e.push(s.Buffer.from(b.result));return}e.push(s.Buffer.from(b.result,"utf-8"))}),b.readAsArrayBuffer(y.data)}}),u.onSocketClose(()=>{t.end(),t.destroy()}),u.onSocketError(y=>{t.destroy(y)}))}var p=(y,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let _=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";l(b);let w=f(b,y);return u=b.my,u.connectSocket({url:w,protocols:_}),e=n(),t=new c.BufferedDuplex(b,e,u),h(),t};a.default=p}),Zd=ve(a=>{pe(),ye(),de();var s=a&&a.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0}),a.connectAsync=f;var o=s(Qt()),c=s((Yd(),Ke(Zu))),u=s(gs()),e=s(Li());typeof(We==null?void 0:We.nextTick)!="function"&&(We.nextTick=setImmediate);var t=(0,o.default)("mqttjs"),r=null;function n(h){let p;if(h.auth)if(p=h.auth.match(/^(.+):(.+)$/),p){let[,y,b]=p;h.username=y,h.password=b}else h.username=h.auth}function l(h,p){var _,w,x;if(t("connecting to an MQTT broker..."),typeof h=="object"&&!p&&(p=h,h=""),p=p||{},h&&typeof h=="string"){let m=c.default.parse(h,!0),E={};if(m.port!=null&&(E.port=Number(m.port)),E.host=m.hostname,E.query=m.query,E.auth=m.auth,E.protocol=m.protocol,E.path=m.path,p={...E,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((_=p.protocol)==null?void 0:_.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!((w=p.protocol)!=null&&w.startsWith("ws"))&&!((x=p.protocol)!=null&&x.startsWith("wx"))&&delete p.path,n(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),e.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof We<"u"&&(p.socksProxy=We.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(r||(r={},!e.default&&!p.forceNativeWebSocket?(r.ws=jn().streamBuilder,r.wss=jn().streamBuilder,r.mqtt=ec().default,r.tcp=ec().default,r.ssl=tc().default,r.tls=r.ssl,r.mqtts=tc().default):(r.ws=jn().browserStreamBuilder,r.wss=jn().browserStreamBuilder,r.wx=rc().default,r.wxs=rc().default,r.ali=nc().default,r.alis=nc().default)),!r[p.protocol]){let m=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((E,A)=>m&&A%2===0?!1:typeof r[E]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function y(m){return p.servers&&((!m._reconnectCount||m._reconnectCount===p.servers.length)&&(m._reconnectCount=0),p.host=p.servers[m._reconnectCount].host,p.port=p.servers[m._reconnectCount].port,p.protocol=p.servers[m._reconnectCount].protocol?p.servers[m._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,m._reconnectCount++),t("calling streambuilder for",p.protocol),r[p.protocol](m,p)}let b=new u.default(y,p);return b.on("error",()=>{}),b}function f(h,p,y=!0){return new Promise((b,_)=>{let w=l(h,p),x={connect:E=>{m(),b(w)},end:()=>{m(),b(w)},error:E=>{m(),w.end(),_(E)}};y===!1&&(x.close=()=>{x.error(new Error("Couldn't connect to server"))});function m(){Object.keys(x).forEach(E=>{w.off(E,x[E])})}Object.keys(x).forEach(E=>{w.on(E,x[E])})})}a.default=l}),ic=ve(a=>{pe(),ye(),de();var s=a&&a.__createBinding||(Object.create?function(y,b,_,w){w===void 0&&(w=_);var x=Object.getOwnPropertyDescriptor(b,_);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(y,w,x)}:function(y,b,_,w){w===void 0&&(w=_),y[w]=b[_]}),o=a&&a.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),c=a&&a.__importStar||function(){var y=function(b){return y=Object.getOwnPropertyNames||function(_){var w=[];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(w[w.length]=x);return w},y(b)};return function(b){if(b&&b.__esModule)return b;var _={};if(b!=null)for(var w=y(b),x=0;x<w.length;x++)w[x]!=="default"&&s(_,b,w[x]);return o(_,b),_}}(),u=a&&a.__exportStar||function(y,b){for(var _ in y)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&s(b,y,_)},e=a&&a.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(a,"__esModule",{value:!0}),a.ReasonCodes=a.KeepaliveManager=a.UniqueMessageIdProvider=a.DefaultMessageIdProvider=a.Store=a.MqttClient=a.connectAsync=a.connect=a.Client=void 0;var t=e(gs());a.MqttClient=t.default;var r=e(Du());a.DefaultMessageIdProvider=r.default;var n=e(ud());a.UniqueMessageIdProvider=n.default;var l=e(Su());a.Store=l.default;var f=c(Zd());a.connect=f.default,Object.defineProperty(a,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});var h=e(Ku());a.KeepaliveManager=h.default,a.Client=t.default,u(gs(),a),u(nn(),a);var p=Ni();Object.defineProperty(a,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),Xd=ve(a=>{pe(),ye(),de();var s=a&&a.__createBinding||(Object.create?function(t,r,n,l){l===void 0&&(l=n);var f=Object.getOwnPropertyDescriptor(r,n);(!f||("get"in f?!r.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(t,l,f)}:function(t,r,n,l){l===void 0&&(l=n),t[l]=r[n]}),o=a&&a.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),c=a&&a.__importStar||function(){var t=function(r){return t=Object.getOwnPropertyNames||function(n){var l=[];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(l[l.length]=f);return l},t(r)};return function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var l=t(r),f=0;f<l.length;f++)l[f]!=="default"&&s(n,r,l[f]);return o(n,r),n}}(),u=a&&a.__exportStar||function(t,r){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&s(r,t,n)};Object.defineProperty(a,"__esModule",{value:!0});var e=c(ic());a.default=e,u(ic(),a)}),e0=Xd();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/const t0=4,Fr={},oc=({options:a})=>a.host+a.path,r0=la({init:a=>sa(a,n0,t0).map(s=>{const o=e0.connect(s),c=oc(o);return o.stream.socket,Fr[c]={},o.on("message",(u,e)=>{var t,r;return(r=(t=Fr[c])[u])==null?void 0:r.call(t,u,e.toString())}).on("error",u=>console.error(u)),new Promise(u=>o.on("connect",()=>u(o)))}),subscribe:(a,s,o,c)=>{const u=oc(a);return Fr[u][s]=Fr[u][o]=(e,t)=>c(e,t,a.publish.bind(a)),a.subscribe(s),a.subscribe(o),()=>{a.unsubscribe(s),a.unsubscribe(o),delete Fr[u][s],delete Fr[u][o]}},announce:(a,s)=>a.publish(s,It({peerId:kt}))}),n0=["test.mosquitto.org:8081/mqtt","broker.emqx.io:8084/mqtt","broker.hivemq.com:8884/mqtt"].map(a=>"wss://"+a);//! Copyright Nuzulul Zulkarnain. Released under The MIT License.
//! webConnect.js -- https://github.com/nuzulul/webConnect.js
var qe,Pi,wt,_t,St,Ht,Kt,Vt,xn,Ue,di,yi,gi,mi,ft,bi,vi,xf,kf,o0,Ar,xr,kr,it,Ir,Tr;class i0{constructor(s){Be(this,Ue);Be(this,qe);Be(this,Pi);Be(this,wt);Be(this,_t);Be(this,St);Be(this,Ht);Be(this,Kt);Be(this,Vt);Be(this,xn);Be(this,Ar,()=>{});Ae(this,"onConnect",s=>Re(this,Ar,s));Be(this,xr,()=>{});Ae(this,"onDisconnect",s=>Re(this,xr,s));Be(this,kr,()=>{});Ae(this,"onReceive",s=>Re(this,kr,s));Be(this,it,()=>{});Ae(this,"onSendProgress",s=>Re(this,it,s));Be(this,Ir,()=>{});Ae(this,"onReceiveProgress",s=>Re(this,Ir,s));Be(this,Tr,()=>{});Ae(this,"onStreaming",s=>Re(this,Tr,s));Re(this,qe,[]);const o=s.db,c=s.room.roomTORRENT,u=s.room.roomNOSTR,e=s.room.roomMQTT,t=s.MyId;Re(this,Pi,o),Re(this,wt,c),Re(this,_t,e),Re(this,St,u),Re(this,xn,t),c.onPeerJoin(w=>{Ee(this,Ue,di).call(this,w,"torrent",P(this,Ar))}),u.onPeerJoin(w=>{Ee(this,Ue,di).call(this,w,"nostr",P(this,Ar))}),e.onPeerJoin(w=>{Ee(this,Ue,di).call(this,w,"mqtt",P(this,Ar))}),c.onPeerLeave(w=>{Ee(this,Ue,yi).call(this,w,"torrent",P(this,xr))}),u.onPeerLeave(w=>{Ee(this,Ue,yi).call(this,w,"nostr",P(this,xr))}),e.onPeerLeave(w=>{Ee(this,Ue,yi).call(this,w,"mqtt",P(this,xr))}),c.onPeerStream((w,x,m)=>{Ee(this,Ue,gi).call(this,w,x,m,"torrent",P(this,Tr))}),u.onPeerStream((w,x,m)=>{Ee(this,Ue,gi).call(this,w,x,m,"nostr",P(this,Tr))}),e.onPeerStream((w,x,m)=>{Ee(this,Ue,gi).call(this,setream,x,m,"mqtt",P(this,Tr))});const[r,n,l]=c.makeAction("data");Re(this,Ht,r),n((w,x,m)=>Ee(this,Ue,vi).call(this,w,x,m,"torrent",P(this,kr))),l((w,x,m)=>{Ee(this,Ue,bi).call(this,w,x,m,"torrent",P(this,Ir))});const[f,h,p]=u.makeAction("data");Re(this,Kt,f),h((w,x,m)=>Ee(this,Ue,vi).call(this,w,x,m,"nostr",P(this,kr))),p((w,x,m)=>{Ee(this,Ue,bi).call(this,w,x,m,"mqtt",P(this,Ir))});const[y,b,_]=e.makeAction("data");Re(this,Vt,y),b((w,x,m)=>Ee(this,Ue,vi).call(this,w,x,m,"mqtt",P(this,kr))),_((w,x,m)=>{Ee(this,Ue,bi).call(this,w,x,m,"nostr",P(this,Ir))})}Send(s,o){Ee(this,Ue,mi).call(this,"",s,o.connectId,o.metadata)}openStreaming(s,o){let c=o.connectId,u=o.metadata;if(c==null)P(this,qe).forEach((e,t)=>{let r=e.engine;r.includes("torrent")?P(this,wt).addStream(s,e.id,u):r.includes("mqtt")?P(this,_t).addStream(s,e.id,u):r.includes("nostr")&&P(this,St).addStream(s,e.id,u)});else{const e=P(this,qe).findIndex(t=>t.id==c);if(e>-1){let t=P(this,qe)[e].engine;t.includes("torrent")?P(this,wt).addStream(s,c,u):t.includes("mqtt")?P(this,_t).addStream(s,c,u):t.includes("nostr")&&P(this,St).addStream(s,c,u)}}}closeStreaming(s,o){let c=o.connectId;if(c==null)P(this,qe).forEach((u,e)=>{u.engine.forEach((r,n)=>{r=="torrent"&&P(this,wt).removeStream(s,u.id),r=="mqtt"&&P(this,_t).removeStream(s,u.id),r=="nostr"&&P(this,St).removeStream(s,u.id)})});else if(typeof c=="string"){const u=P(this,qe).findIndex(e=>e.id==c);if(u>-1){let e=P(this,qe)[u].engine;e.includes("torrent")?P(this,wt).addStream(s,c):e.includes("mqtt")?P(this,_t).addStream(s,c):e.includes("nostr")&&P(this,St).addStream(s,c)}}}async Ping(s){let o=s.connectId;if(o==null)return null;if(typeof o=="string"){const c=P(this,qe).findIndex(u=>u.id==o);if(c>-1){let u=P(this,qe)[c].engine;if(u.includes("torrent"))return await P(this,wt).ping(o);if(u.includes("mqtt"))return await P(this,_t).ping(o);if(u.includes("nostr"))return await P(this,St).ping(o)}}else return[]}Disconnect(){Object.keys(P(this,wt).getPeers()).length!==0&&P(this,wt).leave(),Object.keys(P(this,_t).getPeers()).length!==0&&P(this,_t).leave(),Object.keys(P(this,St).getPeers()).length!==0&&P(this,St).leave()}getConnection(s){let o=[];P(this,qe).forEach((e,t)=>{o.push(e.id)});const c=P(this,wt).getPeers()||P(this,_t).getPeers()||P(this,St).getPeers();s({connection:o,connections:c})}getMyId(s){let o={connectId:P(this,xn)};s(o)}}qe=new WeakMap,Pi=new WeakMap,wt=new WeakMap,_t=new WeakMap,St=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,Vt=new WeakMap,xn=new WeakMap,Ue=new WeakSet,di=function(s,o,c){let u={id:s,engine:[o],online:{}};const e=P(this,qe).findIndex(t=>t.id==s);e==-1?(P(this,qe).push(u),c({connectId:s})):P(this,qe)[e].engine.includes(o)||P(this,qe)[e].engine.push(o)},yi=function(s,o,c){const u=P(this,qe).findIndex(e=>e.id==s);if(u>-1){const t=P(this,qe)[u].engine.findIndex(r=>r==o);t>-1&&(P(this,qe)[u].engine.splice(t,1),P(this,qe)[u].engine.length==0&&(P(this,qe).splice(u,1),c({connectId:s})))}},gi=function(s,o,c,u,e){e(s,{connectId:o,metadata:c})},mi=function(s,o,c,u){if(s!==""&&s!=null)s=="torrent"?P(this,Ht).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"torrent",P(this,it))}):s=="mqtt"?P(this,Vt).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"mqtt",P(this,it))}):s=="nostr"&&P(this,Kt).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"nostr",P(this,it))});else if(c!=null&&Array.isArray(c))for(const e of c){const t=P(this,qe).findIndex(r=>r.id==e);if(t>-1){let r=P(this,qe)[t].engine;r.includes("torrent")?P(this,Ht).call(this,o,e,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"torrent",P(this,it))}):r.includes("mqtt")?P(this,Vt).call(this,o,e,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"mqtt",P(this,it))}):r.includes("nostr")&&P(this,Kt).call(this,o,e,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"nostr",P(this,it))})}}else if(c!=null&&typeof c=="string"){const e=P(this,qe).findIndex(t=>t.id==c);if(e>-1){let t=P(this,qe)[e].engine;t.includes("torrent")?P(this,Ht).call(this,o,c,u,(r,n)=>{Ee(this,Ue,ft).call(this,r,n,u,"torrent",P(this,it))}):t.includes("mqtt")?P(this,Vt).call(this,o,c,u,(r,n)=>{Ee(this,Ue,ft).call(this,r,n,u,"mqtt",P(this,it))}):t.includes("nostr")&&P(this,Kt).call(this,o,c,u,(r,n)=>{Ee(this,Ue,ft).call(this,r,n,u,"nostr",P(this,it))})}}else o=="webconnectping"?(P(this,Ht).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"torrent",P(this,it))}),P(this,Vt).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"mqtt",P(this,it))}),P(this,Kt).call(this,o,c,u,(e,t)=>{Ee(this,Ue,ft).call(this,e,t,u,"nostr",P(this,it))})):P(this,qe).forEach((e,t)=>{let r=e.engine;r.includes("torrent")?P(this,Ht).call(this,o,e.id,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"torrent",P(this,it))}):r.includes("mqtt")?P(this,Vt).call(this,o,e.id,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"mqtt",P(this,it))}):r.includes("nostr")&&P(this,Kt).call(this,o,e.id,u,(n,l)=>{Ee(this,Ue,ft).call(this,n,l,u,"nostr",P(this,it))})})},ft=function(s,o,c,u,e){e({percent:s,connectId:o,metadata:c})},bi=function(s,o,c,u,e){e({percent:s,connectId:o,metadata:c})},vi=function(s,o,c,u,e){if(typeof s=="string"&&s=="webconnectping")Ee(this,Ue,kf).call(this,o,u);else if(typeof s=="string"&&s=="webconnectpong"){const t=P(this,qe).findIndex(r=>r.id==o);if(t>-1){let n=new Date().getTime();u=="torrent"?P(this,qe)[t].online.torrent=n:u=="mqtt"?P(this,qe)[t].online.mqtt=n:u=="nostr"&&(P(this,qe)[t].online.nostr=n)}}else e(s,{connectId:o,metadata:c})},xf=function(s,o){Ee(this,Ue,mi).call(this,o,"webconnectping",s)},kf=function(s,o){Ee(this,Ue,mi).call(this,o,"webconnectpong",s)},o0=function(){setInterval(()=>{Ee(this,Ue,xf).call(this,null);let o=new Date().getTime();P(this,qe).forEach((c,u)=>{c.engine.forEach((e,t)=>{o-c.online[e]>3e4&&P(this,qe)[u].engine.splice(t,1)})})},1e4)},Ar=new WeakMap,xr=new WeakMap,kr=new WeakMap,it=new WeakMap,Ir=new WeakMap,Tr=new WeakMap;function s0(a){let s="webConnect",o="webConnectChannel",c="Browser to browser connection without server",u={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]},e,t,r;typeof a=="object"&&(a.appName&&(s=a.appName),a.channelName&&(o=a.channelName),a.connectPassword&&(c=a.connectPassword),a.iceConfiguration&&(u=a.iceConfiguration),a.relayTORRENT&&(e=a.relayTORRENT),a.relayNOSTR&&(t=a.relayNOSTR),a.relayMQTT&&(r=a.relayMQTT));const n={appId:s,password:c,rtcConfig:u};let l=JSON.parse(JSON.stringify(n));e&&(l.relayUrls=e);let f=JSON.parse(JSON.stringify(n));t&&(f.relayUrls=t);let h=JSON.parse(JSON.stringify(n));r&&(h.relayUrls=r);const p=gh(l,o),y=zh(f,o),b=r0(h,o),x={db:!1,room:{roomTORRENT:p,roomNOSTR:y,roomMQTT:b},MyId:kt||kt||kt};return new i0(x)}//! https://github.com/nuzulul/wifidrop
const a0="stun:stun.l.google.com:19302",l0="stun:global.stun.twilio.com:3478",c0="dHVybjp0dXJuMDEuYnJpZS5maTo1MzQ5",u0="YnJpZQ==",f0="Zmk=",h0="dHVybjpyZWxheTEuZXhwcmVzc3R1cm4uY29tOjM0Nzg=",p0="ZWZJSllZNjdDNElRMzFZQUlP",d0="Vk01SmdhODlkYjJaWU9aSA==",y0=100*1024*1024,g0=!1;//! Copyright Nuzulul Zulkarnain. Released under The MIT License.
//! WIFIDrop -- https://github.com/nuzulul/wifidrop
let $e={},rt=new Map,Bi=new Map,Xr=new Map,If="",sc=[],wi=new Map,pt,Ui,Nt,bt,xt=new Map,dt=new Map,An=new Map,zr=new Map,zt=new Map,Mr=new Map,Gt=!1;const m0=g0,Ia=y0;$f();typeof showOpenFilePicker==typeof Function&&typeof showSaveFilePicker==typeof Function&&(Gt=!0);document.querySelector("#app").innerHTML=`
  <span id="loader" style="display:block;"><div class="loading">Loading&#8230;</div></span>
  <div>
    <a href="/">
      <img src="${jf}" class="logo vanilla" alt="WIFIDrop logo" /><h1 class="logo-text">WIFIDrop</h1>
    </a>
    
    <div class="frame">
      <button id="drop" type="button">Drop a file or click to select a file</button>
    </div>
	
	<div class="peers">
		<div class="peer me">
			<div class="device"></div>
			<div class="device-name">DEVICE</div>
			<div class="radar">

				<svg id="radar-circle">
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="0.75s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="0.75s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="1.5s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="1.5s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="5" fill="#C1D82F" stroke="#979797"></circle>
				</svg>

			</div>
		</div>	
	</div>
	<div class="attribution">
		<p>WIFIDrop - Local peer-to-peer file transfer via WIFI</p>
		<p><a target="_blank" href="https://github.com/nuzulul/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"> <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/> </svg> GitHub</a></p>
	</div>
  </div>
`;const Tf=(a,s)=>{const o=If+new Date().getTime().toString()+Math.floor(Math.random()*1e6);Bi.set(o,a),s&&(Gt=!1),setTimeout(()=>{P0(o)},500)};Bf(document.querySelector("#drop"),Gt,Tf);navigator.serviceWorker.addEventListener("message",function(a){if(console.log("message",a),new URL(window.location.href).searchParams.has("receiving-file-share")){const o=a.data.files;Tf(o,!0)}});(async function(){if(pt=await qi({runtime:"browser",storageName:"wifidropdbMe"}),Ui=await qi({runtime:"browser",storageName:"wifidropdbBio"}),Nt=await qi({runtime:"browser",storageName:"wifidropdbHistory"}),(await pt.list()).keys.length==0){const{publicKey:r,privateKey:n}=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),l=await window.crypto.subtle.exportKey("jwk",r),f=await window.crypto.subtle.exportKey("jwk",n);$e.jwkpublicKey=l,$e.jwkprivateKey=f;const h=JSON.stringify(l);$e.publicKey=h,await pt.put("publicKey",h),await pt.put("privateKey",JSON.stringify(f));const p=Ff();$e.name=p,await pt.put("name",p);const y=btoa(h);$e.id=y;var o=Math.floor(Math.random()*16777215).toString(16);o.length<6&&(o="000000"),await pt.put("color",o),$e.color=o,await pt.put("skipconfirmation",!1);const w=Vr(h);$e.key=w}else{const r=await pt.get("publicKey"),n=JSON.parse(r),l=await pt.get("privateKey"),f=JSON.parse(l);$e.jwkpublicKey=n,$e.jwkprivateKey=f,$e.publicKey=r;const h=await pt.get("name");$e.name=h;const p=btoa(r);$e.id=p;const y=await pt.get("color");$e.color=y;const b=Vr(r);$e.key=b}var o=Math.floor(Math.random()*16777215).toString(16);o.length<6&&(o="000000"),$e.varian=o,na(),b0();const c=a0,u=l0;atob(h0),atob(p0),atob(d0),atob(c0),atob(u0),atob(f0);let e={iceServers:[{urls:c},{urls:u}]};await new Promise(r=>{const n=[{urls:c}],l=new RTCPeerConnection({iceServers:n});l.onicecandidate=f=>{f.candidate&&f.candidate.type=="srflx"&&($e.address=f.candidate.address,$e.priority=f.candidate.priority,r())},l.onicecandidateerror=f=>{console.debug(f)},l.createDataChannel("wifidrop"),l.createOffer().then(f=>l.setLocalDescription(f))});let t="Tb5xazDnJy9GryD7mQnjSOmT8EL4bAkzG5WR84B7jPTX2S52J64UbtU7JRj8XBCn-"+$e.address;bt=s0({appName:"WIFIDrop",channelName:"WIFIDropRoom",connectPassword:t,iceConfiguration:e}),bt.getMyId(r=>{If=r.connectId,na()}),bt.onConnect(async r=>{bt.getConnection(n=>{}),Pf(r.connectId)}),bt.onDisconnect(r=>{I0(r.connectId),T0(r.connectId)}),bt.onReceive((r,n)=>{n.metadata==null?_0(r,n):L0(r,n)}),bt.onReceiveProgress(r=>{r.metadata!=null&&j0(r)}),bt.onSendProgress(r=>{r.metadata!=null&&B0(r)})})();async function b0(){const a=await Nt.list();let s=[];for(const o of a.keys){const c=await Nt.get(o);s.push(c)}s.sort((o,c)=>o.time-c.time);for(const o of s){const c=await Ui.get(o.author),u=o.fileid,e=o.time,t=o.send,r=o.complete,n={size:o.size,name:o.name};_r(c,n,u,e,t,r)}}function Di(a,s){return`https://blobcdn.com/blob.svg?seed=${et(a)}&fill=${et(s)}&extraPoints=9`}function na(){const a=Di($e.id,$e.varian);document.querySelector(".peer.me .device-name").innerHTML=`<span class="varian" style="border:2px solid #${et($e.varian)};background:#${$e.varian};"></span>`+$e.name,document.querySelector(".peer.me .device").innerHTML=`
		<img class="device-avatar" src="${a}">
	`}function Pf(a){const s={command:"announce",data:{name:$e.name,color:$e.color,varian:$e.varian}};en(s,a)}async function v0(a){return await window.crypto.subtle.importKey("jwk",a,{name:"ECDSA",namedCurve:"P-384"},!0,["sign"])}async function w0(a){return await window.crypto.subtle.importKey("jwk",a,{name:"ECDSA",namedCurve:"P-384"},!0,["verify"])}async function en(a,s){a.data.jwkpublicKey=$e.jwkpublicKey;const o=await v0($e.jwkprivateKey);let c=new TextEncoder,u=c.encode(JSON.stringify(a.data));const e=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-384"}},o,u),t=Array.from(new Uint8Array(e));a.sign=t;let r=c.encode(JSON.stringify(a));bt.Send(r,{connectId:s})}async function _0(a,s){typeof a=="object"&&(a=new TextDecoder().decode(a));const o=JSON.parse(a),c=o.data.jwkpublicKey,u=await w0(c),e=new Uint8Array(o.sign).buffer;let r=new TextEncoder().encode(JSON.stringify(o.data));if(!await window.crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-384"}},u,e,r))return;const l=s.connectId;if(s.metadata,o.command=="announce")rt.has(l)?x0(l,o.data):S0(l,o.data);else if(o.command=="offer")o.data,O0(s.connectId,o.data);else if(o.command=="answer")o.data.value?C0(s.connectId,o.data):R0(s.connectId,o.data);else if(o.command=="clipboard"){const f=o.data.clip;wi.set(l,f),document.querySelector(".clipboard.clipboard-"+l)&&(document.querySelector(".clipboard .message .content #clipboard").value=f)}else o.command=="state"&&N0(s.connectId,o.data)}async function S0(a,s){let o=s;const c=JSON.stringify(s.jwkpublicKey),u=btoa(c);o.id=u,o.connectId=a,rt.set(a,o);const e=setInterval(()=>{bt.getConnection(async f=>{const h=f.connections[a];if(h){const y=await p();let b=rt.get(a);b.type=y,rt.set(a,b),E0(a),clearInterval(e)}async function p(){const y=await h.getStats();if(y){let b=null;for(const[w,x]of y)if(x.type=="transport"){b=x.selectedCandidatePairId;break}let _=y.get(b);if(!_){for(const[w,x]of y)if(x.type=="candidate-pair"&&x.selected){_=x;break}}if(_){for(const[w,x]of y)if(w==_.remoteCandidateId)return x.candidateType}}}})},1e3),t=Vr(c);await Ui.put(t,o);const r=Di(o.id,o.varian),n=o.type?o.type:"none",l=`
		<div class="peer peer-${a}">
			<div class="device"><img class="device-avatar" src="${r}"></div>
			<div class="device-name"><span class="varian ${n}" style="border:2px solid #${et(o.varian)};"></span>${et(o.name)}</div>
		</div>
	`;document.querySelector(".peers .peer.me").insertAdjacentHTML("afterend",l),document.querySelector(".sendto-list")!=null&&Cf(o,window.currentfilesid),document.querySelector(".peers .peer-"+a).addEventListener("click",()=>{A0(a)})}function E0(a){const o=rt.get(a).type,c=document.querySelectorAll(".peer.peer-"+a+" .varian");for(const u of c)u.classList.remove("none"),u.classList.add(o)}function A0(a){const s=document.createElement("div");s.innerHTML=`
			<div class="dialog clipboard clipboard-${et(a)}">
				<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div class="device-name" style="padding:10px 10px;">title</div></div>
					<div class="content" >
						<textarea id="clipboard" name="clipboard" rows="10" cols="30"></textarea>
					</div>
					<div class="footer">
						<button class="save">SAVE</button>
						<button class="copy">COPY</button>
					</div>
				</div>
		</div>`,document.body.appendChild(s),document.querySelector(".clipboard #parax").addEventListener("click",()=>{s.remove()});const o=rt.get(a),c=o.type?o.type:"none";document.querySelector(".clipboard .message .title div").innerHTML=`<span class="varian ${c}" style="border:2px solid #${et(o.varian)};"></span>${et(o.name)}'s clipboard`,document.querySelector(".clipboard .message .content #clipboard").value=wi.has(a)?wi.get(a):"",document.querySelector(".clipboard .message .footer .save").addEventListener("click",()=>{const u=document.querySelector(".clipboard .message .content #clipboard").value,e={command:"clipboard",data:{clip:u}};wi.set(a,u),en(e,a);const t=`
				<span class="check">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
					  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
					</svg>		
				</span>`,r=".clipboard .message .footer .save";document.querySelector(r).insertAdjacentHTML("afterbegin",t),setTimeout(()=>{document.querySelector(r+" .check")&&document.querySelector(r+" .check").remove()},3e3)}),document.querySelector(".clipboard .message .footer .copy").addEventListener("click",()=>{const u=document.querySelector(".clipboard .message .content #clipboard").value;navigator.clipboard.writeText(u).then(()=>{const e=`
						<span class="check">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
							  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
							</svg>		
						</span>`,t=".clipboard .message .footer .copy";document.querySelector(t).insertAdjacentHTML("afterbegin",e),setTimeout(()=>{document.querySelector(t+" .check")&&document.querySelector(t+" .check").remove()},3e3)},()=>{})})}async function x0(a,s){let o=rt.get(a);o.name=s.name,rt.set(a,o);const c=document.querySelectorAll(".peer.peer-"+a+" .device-name");for(const u of c)u.innerText=o.name}function k0(a){let s={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};return a.replace(/[&"'<>]/g,o=>s[o])}function et(a){a=String(a);var s=k0(a);return s}function I0(a){rt.delete(a),document.querySelector(".peers .peer.peer-"+a)&&document.querySelector(".peers .peer.peer-"+a).remove(),document.querySelector(".sendto-list")!=null&&(document.querySelector(".sendto-list .peer.peer-"+a).remove(),rt.size==0&&Of())}function T0(a){const s=document.querySelectorAll(".file.connect-"+a);for(const o of s)o.dataset.complete!=="100"&&(o.style.backgroundColor="#b81127",o.children[2].children[1].children[0].innerHTML="Failed");document.querySelector(".clipboard.clipboard-"+a)&&document.querySelector(".clipboard.clipboard-"+a).remove()}async function P0(a){let s=Bi.get(a);const o=s.length;let c=0;for(const e of s){const t=Gt?await e.getFile():e;c+=t.size}const u=document.createElement("div");u.innerHTML=`<div class="dialog sendto"><div id="parax"><span style="font-size:30px;color:#fff;">X</span></div><div class="popup"><div class="title"><div style="padding:10px 10px;">Send ${et(o)} file(s) of ${ze(et(c))} to ...</div></div><div class="scroller sendto-list" ></div></div></div>`,document.body.appendChild(u),document.querySelector(".sendto #parax").addEventListener("click",()=>{u.remove()}),window.currentfilesid=a,rt.size>0?rt.forEach(e=>{Cf(e,a)}):Of()}function Of(){document.querySelector(".sendto-list").innerHTML='<div class="infonopeers" style="padding:15px 15px;">Waiting for other devices connected to WIFIDrop on the same network ...</div>'}function Cf(a,s){document.querySelector(".infonopeers")!=null&&document.querySelector(".infonopeers").remove();const o=Di(a.id,a.varian),c=a.type?a.type:"none",u=`
		<div class="peer peer-${a.connectId}" data-peer="${a.connectId}">
			<div class="device"><img class="device-avatar" src="${o}"></div>
			<div class="device-name"><span class="varian ${c}" style="border:2px solid #${et(a.varian)};"></span>${et(a.name)}</div>
		</div>
	`;document.querySelector(".sendto-list").innerHTML+=u,document.querySelector(".sendto-list .peer.peer-"+a.connectId).style.display="none",setTimeout(()=>{document.querySelector(".sendto-list .peer.peer-"+a.connectId).addEventListener("click",()=>{Ti(a,s)}),document.querySelector(".sendto-list .peer.peer-"+a.connectId).style.display="block";const e=document.querySelector(".scroller");e.scrollTop=e.scrollHeight},1e3)}async function Ti(a,s,o){let c=Bi.get(s);const u=c.length;let e=!1,t=0;for(const h of c){const p=Gt?await h.getFile():h;t+=p.size}t>Ia&&(e=!0),document.querySelector(".sendto")&&document.querySelector(".sendto").remove();const r=document.createElement("div");if(r.innerHTML=`<div class="dialog offer offer-${s}"><div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div><div class="message"><div class="title"><div style="padding:10px 10px;">Waiting confirmation</div></div><div class="content" >You want to send  ${et(u)} file(s) of ${ze(et(t))} to ${et(a.name)} ...</div></div></div>`,document.body.appendChild(r),document.querySelector(".offer.offer-"+s+" #parax").addEventListener("click",()=>{r.remove()}),!Gt&&e&&o==null){document.querySelector(".offer.offer-"+s)&&document.querySelector(".offer.offer-"+s).remove(),o=!0,Ti(a,s,o);return}let n=[];for(const h of c){const p=Gt?await h.getFile():h,y=p.name,b=p.size,_=p.type,w=new Date().getTime(),x=p.size.toString()+w.toString()+Math.floor(Math.random()*1e6),m={name:y,size:b,type:_,fileid:x};n.push(m)}en({command:"offer",data:{length:u,size:t,filesid:s,namefiles:n,large:e,force:!!o}},a.connectId)}async function O0(a,s){if(rt.has(a)){const o=rt.get(a),u=!!s.force;if(!Gt&&s.size>Ia&&!u){const p={command:"answer",data:{value:!1,filesid:s.filesid,largelimit:!0}};en(p,a);return}if(await pt.get("skipconfirmation")){ac(s,a);return}let t="<ul>";for(const h of s.namefiles){const p=`<li>${et(h.name)}</li>`;t+=p}t+="</ul>";const r=document.createElement("div");r.innerHTML=`
			<div class="dialog answer answer-${s.filesid}">
				<div id="parax" style="display:none;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div style="padding:10px 10px;">Confirmation</div></div>
					<div class="content" style="width:100%;">
						<div class="profile" style="display:flex;justify-content: center;align-items: center;margin-bottom:10px;"></div>
						<div style="padding:10px 10px;">${o.name} wants to send you ${et(s.length)} file(s) of ${ze(et(s.size))}</div>
						<div style="max-height:125px;max-width:90%;overflow:scroll;">${t}</div>
					</div>
					<div class="footer">
						<button class="decline">DECLINE</button>
						<button class="accept">ACCEPT</button>
					</div>
				</div>
		</div>`,document.body.appendChild(r);const n=Di(o.id,o.varian),l=o.type?o.type:"none",f=`
			<div class="peer peer-${o.connectId}" data-peer="${o.connectId}">
				<div class="device"><img class="device-avatar" src="${n}"></div>
				<div class="device-name"><span class="varian ${l}" style="border:2px solid #${et(o.varian)};"></span>${et(o.name)}</div>
			</div>
		`;document.querySelector(".answer.answer-"+s.filesid+" .message .content .profile").innerHTML=f,document.querySelector(".answer.answer-"+s.filesid+" #parax").addEventListener("click",()=>{r.remove()}),document.querySelector(".answer.answer-"+s.filesid+" .decline").addEventListener("click",()=>{r.remove();const p={command:"answer",data:{value:!1,filesid:s.filesid}};en(p,a)}),document.querySelector(".answer.answer-"+s.filesid+" .accept").addEventListener("click",()=>{r.remove(),ac(s,a)})}}async function ac(a,s){let o=[];for(const n of a.namefiles){const l=new Date().getTime();let f=btoa(n.name+n.size+n.size.toString()+l.toString()+Math.floor(Math.random()*1e6));o.push(f);const h={nonceid:f,connectId:s,...n};Xr.set(f,h)}const c=a.filesid,u=a.namefiles,e=a.large,t=a.force;if(e&&!t)for(const n of u){const l=n.fileid;zr.set(l,0);let f=await showSaveFilePicker({suggestedName:n.name});try{const h=await f.createWritable();Mr.set(l,h)}catch(h){console.error(h);return}}if(e&&t)for(const n of u){const l=n.fileid,f=n.name,h=n.size;zr.set(l,0),await new Promise(async p=>{const[y,b]=await promptSave(f,h);Mr.set(l,b),setTimeout(()=>{p()},1e3)})}en({command:"answer",data:{value:!0,filesid:c,namefiles:u,large:e,nonce:o,force:t}},s)}function C0(a,s){document.querySelector(".offer.offer-"+s.filesid)&&document.querySelector(".offer.offer-"+s.filesid).remove(),M0(a,s)}function R0(a,s){const o=s.filesid;if(s.largelimit&&!m0){document.querySelector(".offer.offer-"+s.filesid).remove();let c=rt.get(a);c.force=!0,Ti(c,o,!0)}else if(document.querySelector(".offer.offer-"+s.filesid)){let c="Destination device decline";s.largelimit&&(c=`Destination device doesn't support large transfer (${ze(et(Ia))})`);const u=`
				<span class="check" style="padding:10px 10px;color:red;display:inline-block">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-x-fill" viewBox="0 0 16 16">
					  <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M6.854 6.146 8 7.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 8l1.147 1.146a.5.5 0 0 1-.708.708L8 8.707 6.854 9.854a.5.5 0 0 1-.708-.708L7.293 8 6.146 6.854a.5.5 0 1 1 .708-.708"/>
					</svg>
					<span class="msg">${c}</span>
					<div class="footer" style="display:none">
						<p>Caution ! Legacy FORCE large transfer!</p>
						<button class="force" >TRY FORCE TRANSFER</button>
					</div>
				</span>`,e=".offer .message .content";document.querySelector(e).insertAdjacentHTML("beforeend",u),document.querySelector(e+" .check .footer .force").addEventListener("click",()=>{let t=rt.get(a);t.force=!0,document.querySelector(".offer.offer-"+o)&&document.querySelector(".offer.offer-"+o).remove(),Ti(t,o,!0)}),setTimeout(()=>{document.querySelector(e+" .check .footer").style.display="block",s.largelimit||(document.querySelector(".offer.offer-"+s.filesid).remove(),document.querySelector(e+" .check")&&document.querySelector(e+" .check").remove())},2e3)}}async function M0(a,s){wr();const o=s.filesid,c=s.large,u=s.nonce,e=s.force,t=s.namefiles,r=rt.get(a),n=JSON.stringify(r.jwkpublicKey);Vr(n);const l=!0,f="start";let h=Bi.get(o);for(const p of h){const y=Gt?await p.getFile():p,b=y.name,_=t.find(m=>m.name==b).fileid,w=u.shift(),x=new Date().getTime();setTimeout(async()=>{if(_r(r,y,_,x,l,f),!c){xt.set(_,0),An.set(_,0),dt.set(_,new Date().getTime());let m=new FileReader;m.onload=function(){let E=this.result;const A={connectId:a,metadata:{fileid:_,name:y.name,type:y.type,size:y.size,nonceid:w,large:c}};bt.Send(E,A)},m.readAsArrayBuffer(y)}if(c&&!e&&(xt.set(_,0),dt.set(_,new Date().getTime()),zt.set(_,!1),y.stream().pipeTo(new WritableStream({async write(E,A){return new Promise((S,M)=>{const C=E.byteLength,I={connectId:a,metadata:{fileid:_,name:y.name,type:y.type,size:y.size,nonceid:w,large:c,chuncksize:C}};bt.Send(E,I);let R=setInterval(()=>{zt.get(_)||(zt.set(_,!0),clearInterval(R),S())},10)})},close(){}}))),c&&e){xt.set(_,0),dt.set(_,new Date().getTime()),zt.set(_,!1);const m=1*1024*1024,E=Math.ceil(y.size/m);let A=0;for(let S=1;S<=E;S++){const M=Math.min(A+m,y.size),C=y.slice(A,M);await new Promise((I,R)=>{let T=new FileReader;T.onload=function(){zt.set(_,!0);const k=this.result.byteLength,L={connectId:a,metadata:{fileid:_,name:y.name,type:y.type,size:y.size,nonceid:w,large:c,force:e,chuncksize:k,i:S}};bt.Send(C,L);let U=setInterval(()=>{zt.get(_)||(clearInterval(U),I())},10)},T.readAsArrayBuffer(C)}),A=M}}},500)}}async function N0(a,s){const o=s.fileid,c=s.state;c==="finished"?await Mr.close():c==="next"&&zt.set(o,!1)}async function j0(a){const s=a.connectId,o=rt.get(s),c=JSON.stringify(o.jwkpublicKey),u=Vr(c),e=a.percent,t=a.metadata,r=t.fileid,n=t.name,l=t.size,f=t.type,h=t.large,p=t.force,y=t.nonceid;if(!Xr.has(y))return;const b=Xr.get(y),_=new Date().getTime(),w=!1,x=Math.floor(e*100),m={name:n,size:l};if(!h){const E=An.get(r);if(e==E)return;An.set(r,e);let A=e*l;const S=Math.floor(A-xt.get(r));xt.set(r,A);const M=Math.floor(1/((_-dt.get(r))/1e3)*S);dt.set(r,_);const C=Math.floor((l-A)/M*1e3);if(document.querySelector(".file.file-"+r))document.querySelector(".file.file-"+r+" .progress").innerHTML=x+"%",document.querySelector(".file.file-"+r+" .size").innerHTML=`${Kr(C)} - ${ze(M)}/s - ${ze(A)}/${ze(l)}`;else{if(s!=b.connectId||n!=b.name||l!=b.size||f!=b.type)return;wr(),_r(o,m,r,_,w,x)}if(e==1){const I={author:u,fileid:r,time:_,name:n,size:l,send:w,complete:x};await Nt.put(r,I),document.querySelector(".file.file-"+r+" .size").innerHTML=`${ze(l)}`,document.querySelector(".file.file-"+r).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+r).dataset.complete=x,_i(y)}}if(h&&!p){if(e<.1&&!document.querySelector(".file.file-"+r)){if(s!=b.connectId||n!=b.name||l!=b.size||f!=b.type)return;wr(),_r(o,m,r,_,w,x)}const E=t.chuncksize;if(e==1){let A=zr.get(r)+E;zr.set(r,A);const S=A/l*100,M=Math.floor(S),C=Math.floor(1/((_-dt.get(r))/1e3)*E);dt.set(r,_);const I=Math.floor((l-A)/C*1e3);if(document.querySelector(".file.file-"+r))document.querySelector(".file.file-"+r+" .progress").innerHTML=M+"%",document.querySelector(".file.file-"+r+" .size").innerHTML=`${Kr(I)} - ${ze(C)}/s - ${ze(A)}/${ze(l)}`;else{if(s!=b.connectId||n!=b.name||l!=b.size||f!=b.type)return;wr(),_r(o,m,r,_,w,M)}if(S==100){const R={author:u,fileid:r,time:_,name:n,size:l,send:w,complete:M};await Nt.put(r,R),document.querySelector(".file.file-"+r+" .size").innerHTML=`${ze(l)}`,document.querySelector(".file.file-"+r).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+r).dataset.complete=M,_i(y),await Mr.get(r).close()}}}if(h&&p){if(e<.1&&!document.querySelector(".file.file-"+r)){if(s!=b.connectId||n!=b.name||l!=b.size||f!=b.type)return;wr(),_r(o,m,r,_,w,x)}const E=t.chuncksize;if(e==1){let A=zr.get(r)+E;zr.set(r,A);const S=A/l*100,M=Math.floor(S),C=Math.floor(1/((_-dt.get(r))/1e3)*E);dt.set(r,_);const I=Math.floor((l-A)/C*1e3);if(document.querySelector(".file.file-"+r))document.querySelector(".file.file-"+r+" .progress").innerHTML=M+"%",document.querySelector(".file.file-"+r+" .size").innerHTML=`${Kr(I)} - ${ze(C)}/s - ${ze(A)}/${ze(l)}`;else{if(s!=b.connectId||n!=b.name||l!=b.size||f!=b.type)return;wr(),_r(o,m,r,_,w,M)}if(S==100){const R={author:u,fileid:r,time:_,name:n,size:l,send:w,complete:M};await Nt.put(r,R),document.querySelector(".file.file-"+r+" .size").innerHTML=`${ze(l)}`,document.querySelector(".file.file-"+r).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+r).dataset.complete=M,_i(y),await Mr.get(r).close()}}}}async function L0(a,s){const o=s.connectId,c=s.metadata,u=c.name,e=c.size,t=c.type,r=c.large,n=c.force,l=c.fileid,f=c.nonceid;if(!Xr.has(f))return;const h=Xr.get(f);if(!(o!=h.connectId||u!=h.name||e!=h.size||t!=h.type)){if(!r){let p=new Blob([new Uint8Array(a)],{type:s.metadata.type});const y=document.createElement("a");y.setAttribute("download",s.metadata.name);const b=URL.createObjectURL(p);y.setAttribute("href",b),y.setAttribute("target","_blank"),y.click(),URL.revokeObjectURL(b),_i(f)}r&&!n&&(a.byteLength||a.size)&&await Mr.get(l).write(a),r&&n&&(a.byteLength||a.size)&&await Mr.get(l).write(a)}}function _i(a){sc.includes(a)?setTimeout(()=>{Xr.delete(a)},100):sc.push(a)}async function B0(a){const s=a.connectId,o=rt.get(s),c=JSON.stringify(o.jwkpublicKey),u=Vr(c),e=a.metadata,t=e.fileid,r=e.name,n=e.size,l=e.large,f=e.force,h=new Date().getTime(),p=a.percent,y=Math.floor(p*100),b=!0;if(!l){const _=An.get(t);if(y==_)return;const w=dt.get(t);if(h==w&&y!=100)return;An.set(t,y);let x=Math.floor(p*n),m=xt.get(t);const E=x-m;xt.set(t,x);const A=Math.floor(1/((h-w)/1e3)*E);dt.set(t,h);const S=Math.floor((n-x)/A*1e3);if(document.querySelector(".file.file-"+t+" .progress").innerHTML=y+"%",document.querySelector(".file.file-"+t+" .size").innerHTML=`${Kr(S)} - ${ze(A)}/s - ${ze(x)}/${ze(n)}`,p==1){const M={author:u,fileid:t,time:h,name:r,size:n,send:b,complete:y};await Nt.put(t,M),document.querySelector(".file.file-"+t+" .size").innerHTML=`${ze(n)}`,document.querySelector(".file.file-"+t).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+t).dataset.complete=y}}if(l&&!f){const _=e.chuncksize;if(p==1){zt.set(t,!1);let w=xt.get(t)+_;xt.set(t,w);const x=w/n*100,m=Math.floor(x),E=Math.floor(1/((h-dt.get(t))/1e3)*_);dt.set(t,h);const A=Math.floor((n-w)/E*1e3);if(document.querySelector(".file.file-"+t+" .progress").innerHTML=m+"%",document.querySelector(".file.file-"+t+" .size").innerHTML=`${Kr(A)} - ${ze(E)}/s - ${ze(w)}/${ze(n)}`,x==100){const S={author:u,fileid:t,time:h,name:r,size:n,send:b,complete:m};await Nt.put(t,S),document.querySelector(".file.file-"+t+" .size").innerHTML=`${ze(n)}`,document.querySelector(".file.file-"+t).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+t).dataset.complete=m}}}if(l&&f){const _=e.chuncksize;if(p==1){zt.set(t,!1);let w=xt.get(t)+_;xt.set(t,w);const x=w/n*100,m=Math.floor(x),E=Math.floor(1/((h-dt.get(t))/1e3)*_);dt.set(t,h);const A=Math.floor((n-w)/E*1e3);if(document.querySelector(".file.file-"+t+" .progress").innerHTML=m+"%",document.querySelector(".file.file-"+t+" .size").innerHTML=`${Kr(A)} - ${ze(E)}/s - ${ze(w)}/${ze(n)}`,x==100){const S={author:u,fileid:t,time:h,name:r,size:n,send:b,complete:m};await Nt.put(t,S),document.querySelector(".file.file-"+t+" .size").innerHTML=`${ze(n)}`,document.querySelector(".file.file-"+t).style.backgroundColor="#9a9fa6",document.querySelector(".file.file-"+t).dataset.complete=m}}}}function Kr(a){var s=6e4,o=s*60,c=o*24,u=c*30,e=c*365;return a<s?Math.round(a/1e3)+" s left":a<o?Math.round(a/s)+" m left":a<c?Math.round(a/o)+" h left":a<u?"approximately "+Math.round(a/c)+" d left":a<e?"approximately "+Math.round(a/u)+" mo left":"approximately "+Math.round(a/e)+" y left"}const Rf=document.createElement("div");Rf.innerHTML=`
	<div class="dialog explorer">
		<div id="explorerx"><span style="font-size:30px;color:#fff;">X</span></div>
		<div  class="popup">
			<div class="title">
				<div style="padding:10px 10px;">
					Files 
					<span class="options" style="float:right;cursor:pointer;">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
						  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
						</svg>
					</span>
				</div>
			</div>
			<div class="scroller files" ></div>
		</div>
	</div>`;document.body.appendChild(Rf);document.querySelector("#explorerx").addEventListener("click",()=>{document.querySelector(".explorer").style.display="none"});document.querySelector(".peers .peer.me").addEventListener("click",()=>{wr()});window.location.href.indexOf("localhost")==-1;document.querySelector(".explorer .popup .title .options").addEventListener("click",()=>{U0()});async function U0(){const a=await pt.get("skipconfirmation");let s="";a&&(s="checked");const o=document.createElement("div");o.innerHTML=`
	<div class="dialog options">
		<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
		<div class="message">
			<div class="title">
				<div style="padding:10px 10px;">WIFIDrop Settings</div>
			</div>
			<div class="content" >
				<div class="item cache" style="cursor:pointer;">
					<span>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
					  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
					  <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
					</svg>
					</span>
					<span>Clear cache </span>
				</div>
				<div class="item skipconfirmation">
					<input type="checkbox" id="skipconfirmation" name="skipconfirmation" value="skipconfirmation" ${s}>
					<label for="skipconfirmation"> Auto accept download</label>
				</div>
				<div class="item alias">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-laptop" viewBox="0 0 16 16">
					  <path d="M13.5 3a.5.5 0 0 1 .5.5V11H2V3.5a.5.5 0 0 1 .5-.5zm-11-1A1.5 1.5 0 0 0 1 3.5V12h14V3.5A1.5 1.5 0 0 0 13.5 2zM0 12.5h16a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5"/>
					</svg>					
					<label for="alias">Change alias:</label>
					<input style="border:none" type="text" id="alias" name="alias" value="${$e.name}">
				</div>
				<div class="item downloads" >
					<p>Platforms :</p>
					<a target="_blank" href="https://wifidrop.js.org"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-browser-chrome" viewBox="0 0 16 16">   <path fill-rule="evenodd" d="M16 8a8 8 0 0 1-7.022 7.94l1.902-7.098a3 3 0 0 0 .05-1.492A3 3 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8M0 8a8 8 0 0 0 7.927 8l1.426-5.321a3 3 0 0 1-.723.255 3 3 0 0 1-1.743-.147 3 3 0 0 1-1.043-.7L.633 4.876A8 8 0 0 0 0 8m5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a3 3 0 0 0-1.252.243 2.99 2.99 0 0 0-1.81 2.59M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/> </svg> Online</a></br> 
					<a target="_blank" href="https://play.google.com/store/apps/details?id=org.js.wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-android" viewBox="0 0 16 16">   <path d="M2.76 3.061a.5.5 0 0 1 .679.2l1.283 2.352A8.9 8.9 0 0 1 8 5a8.9 8.9 0 0 1 3.278.613l1.283-2.352a.5.5 0 1 1 .878.478l-1.252 2.295C14.475 7.266 16 9.477 16 12H0c0-2.523 1.525-4.734 3.813-5.966L2.56 3.74a.5.5 0 0 1 .2-.678ZM5 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/> </svg> Android</a> </br>
					<a target="_blank" href="https://apps.microsoft.com/detail/9MVN98K4BBWC"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-windows" viewBox="0 0 16 16">   <path d="M6.555 1.375 0 2.237v5.45h6.555zM0 13.795l6.555.933V8.313H0zm7.278-5.4.026 6.378L16 16V8.395zM16 0 7.33 1.244v6.414H16z"/> </svg> Windows</a> </br>
					<a target="_blank" href="https://snapcraft.io/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tux" viewBox="0 0 16 16">   <path d="M8.996 4.497c.104-.076.1-.168.186-.158s.022.102-.098.207c-.12.104-.308.243-.46.323-.291.152-.631.336-.993.336s-.647-.167-.853-.33c-.102-.082-.186-.162-.248-.221-.11-.086-.096-.207-.052-.204.075.01.087.109.134.153.064.06.144.137.241.214.195.154.454.304.778.304s.702-.19.932-.32c.13-.073.297-.204.433-.304M7.34 3.781c.055-.02.123-.031.174-.003.011.006.024.021.02.034-.012.038-.074.032-.11.05-.032.017-.057.052-.093.054-.034 0-.086-.012-.09-.046-.007-.044.058-.072.1-.089m.581-.003c.05-.028.119-.018.173.003.041.017.106.045.1.09-.004.033-.057.046-.09.045-.036-.002-.062-.037-.093-.053-.036-.019-.098-.013-.11-.051-.004-.013.008-.028.02-.034"/>   <path fill-rule="evenodd" d="M8.446.019c2.521.003 2.38 2.66 2.364 4.093-.01.939.509 1.574 1.04 2.244.474.56 1.095 1.38 1.45 2.32.29.765.402 1.613.115 2.465a.8.8 0 0 1 .254.152l.001.002c.207.175.271.447.329.698.058.252.112.488.224.615.344.382.494.667.48.922-.015.254-.203.43-.435.57-.465.28-1.164.491-1.586 1.002-.443.527-.99.83-1.505.871a1.25 1.25 0 0 1-1.256-.716v-.001a1 1 0 0 1-.078-.21c-.67.038-1.252-.165-1.718-.128-.687.038-1.116.204-1.506.206-.151.331-.445.547-.808.63-.5.114-1.126 0-1.743-.324-.577-.306-1.31-.278-1.85-.39-.27-.057-.51-.157-.626-.384-.116-.226-.095-.538.07-.988.051-.16.012-.398-.026-.648a2.5 2.5 0 0 1-.037-.369c0-.133.022-.265.087-.386v-.002c.14-.266.368-.377.577-.451s.397-.125.53-.258c.143-.15.27-.374.443-.56q.036-.037.073-.07c-.081-.538.007-1.105.192-1.662.393-1.18 1.223-2.314 1.811-3.014.502-.713.65-1.287.701-2.016.042-.997-.705-3.974 2.112-4.2q.168-.015.321-.013m2.596 10.866-.03.016c-.223.121-.348.337-.427.656-.08.32-.107.733-.13 1.206v.001c-.023.37-.192.824-.31 1.267s-.176.862-.036 1.128v.002c.226.452.608.636 1.051.601s.947-.304 1.36-.795c.474-.576 1.218-.796 1.638-1.05.21-.126.324-.242.333-.4.009-.157-.097-.403-.425-.767-.17-.192-.217-.462-.274-.71-.056-.247-.122-.468-.26-.585l-.001-.001c-.18-.157-.356-.17-.565-.164q-.069.001-.14.005c-.239.275-.805.612-1.197.508-.359-.09-.562-.508-.587-.918m-7.204.03H3.83c-.189.002-.314.09-.44.225-.149.158-.276.382-.445.56v.002h-.002c-.183.184-.414.239-.61.31-.195.069-.353.143-.46.35v.002c-.085.155-.066.378-.029.624.038.245.096.507.018.746v.002l-.001.002c-.157.427-.155.678-.082.822.074.143.235.22.48.272.493.103 1.26.069 1.906.41.583.305 1.168.404 1.598.305.431-.098.712-.369.75-.867v-.002c.029-.292-.195-.673-.485-1.052-.29-.38-.633-.752-.795-1.09v-.002l-.61-1.11c-.21-.286-.43-.462-.68-.5a1 1 0 0 0-.106-.008M9.584 4.85c-.14.2-.386.37-.695.467-.147.048-.302.17-.495.28a1.3 1.3 0 0 1-.74.19.97.97 0 0 1-.582-.227c-.14-.113-.25-.237-.394-.322a3 3 0 0 1-.192-.126c-.063 1.179-.85 2.658-1.226 3.511a5.4 5.4 0 0 0-.43 1.917c-.68-.906-.184-2.066.081-2.568.297-.55.343-.701.27-.649-.266.436-.685 1.13-.848 1.844-.085.372-.1.749.01 1.097.11.349.345.67.766.931.573.351.963.703 1.193 1.015s.302.584.23.777a.4.4 0 0 1-.212.22.7.7 0 0 1-.307.056l.184.235c.094.124.186.249.266.375 1.179.805 2.567.496 3.568-.218.1-.342.197-.664.212-.903.024-.474.05-.896.136-1.245s.244-.634.53-.791a1 1 0 0 1 .138-.061q.005-.045.013-.087c.082-.546.569-.572 1.18-.303.588.266.81.499.71.814h.13c.122-.398-.133-.69-.822-1.025l-.137-.06a2.35 2.35 0 0 0-.012-1.113c-.188-.79-.704-1.49-1.098-1.838-.072-.003-.065.06.081.203.363.333 1.156 1.532.727 2.644a1.2 1.2 0 0 0-.342-.043c-.164-.907-.543-1.66-.735-2.014-.359-.668-.918-2.036-1.158-2.983M7.72 3.503a1 1 0 0 0-.312.053c-.268.093-.447.286-.559.391-.022.021-.05.04-.119.091s-.172.126-.321.238q-.198.151-.13.38c.046.15.192.325.459.476.166.098.28.23.41.334a1 1 0 0 0 .215.133.9.9 0 0 0 .298.066c.282.017.49-.068.673-.173s.34-.233.518-.29c.365-.115.627-.345.709-.564a.37.37 0 0 0-.01-.309c-.048-.096-.148-.187-.318-.257h-.001c-.354-.151-.507-.162-.705-.29-.321-.207-.587-.28-.807-.279m-.89-1.122h-.025a.4.4 0 0 0-.278.135.76.76 0 0 0-.191.334 1.2 1.2 0 0 0-.051.445v.001c.01.162.041.299.102.436.05.116.109.204.183.274l.089-.065.117-.09-.023-.018a.4.4 0 0 1-.11-.161.7.7 0 0 1-.054-.22v-.01a.7.7 0 0 1 .014-.234.4.4 0 0 1 .08-.179q.056-.069.126-.073h.013a.18.18 0 0 1 .123.05c.045.04.08.09.11.162a.7.7 0 0 1 .054.22v.01a.7.7 0 0 1-.002.17 1.1 1.1 0 0 1 .317-.143 1.3 1.3 0 0 0 .002-.194V3.23a1.2 1.2 0 0 0-.102-.437.8.8 0 0 0-.227-.31.4.4 0 0 0-.268-.102m1.95-.155a.63.63 0 0 0-.394.14.9.9 0 0 0-.287.376 1.2 1.2 0 0 0-.1.51v.015q0 .079.01.152c.114.027.278.074.406.138a1 1 0 0 1-.011-.172.8.8 0 0 1 .058-.278.5.5 0 0 1 .139-.2.26.26 0 0 1 .182-.069.26.26 0 0 1 .178.081c.055.054.094.12.124.21.029.086.042.17.04.27l-.002.012a.8.8 0 0 1-.057.277c-.024.059-.089.106-.122.145.046.016.09.03.146.052a5 5 0 0 1 .248.102 1.2 1.2 0 0 0 .244-.763 1.2 1.2 0 0 0-.11-.495.9.9 0 0 0-.294-.37.64.64 0 0 0-.39-.133z"/> </svg> Linux</a> </br>
					<a target="_blank" href="https://www.npmjs.com/package/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-fill" viewBox="0 0 16 16">   <path fill-rule="evenodd" d="M15.528 2.973a.75.75 0 0 1 .472.696v8.662a.75.75 0 0 1-.472.696l-7.25 2.9a.75.75 0 0 1-.557 0l-7.25-2.9A.75.75 0 0 1 0 12.331V3.669a.75.75 0 0 1 .471-.696L7.443.184l.004-.001.274-.11a.75.75 0 0 1 .558 0l.274.11.004.001zm-1.374.527L8 5.962 1.846 3.5 1 3.839v.4l6.5 2.6v7.922l.5.2.5-.2V6.84l6.5-2.6v-.4l-.846-.339Z"/> </svg> NPM</a> </br>
					<a target="_blank" href="https://github.com/nuzulul/wifidrop"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-square" viewBox="0 0 16 16">   <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>   <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0m2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0"/> </svg> Self-hosted</a> 					
				</div>
				<div class="item about">
					<p>About :</p>
					WIFIDrop &copy; 2024 - <a href="https://narojil.my.id" target="_blank">Narojil Studio</a></br>
					Developed by <a href="https://github.com/nuzulul" target="_blank">Nuzulul Zulkarnain</a></br>
					Made in Indonesia
				</div>
			</div>
		</div>
	</div>`,document.body.appendChild(o),document.querySelector(".options #parax").addEventListener("click",()=>{o.remove()}),document.querySelector(".options .content .cache").addEventListener("click",async()=>{await Ui.clear(),await Nt.clear();const u=document.querySelectorAll(".explorer .files .file");for(const t of u)t.remove();document.querySelector(".options .content .cache span").insertAdjacentHTML("afterend",`
			<span class="cachecheck">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
				  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
				</svg>		
			</span>
		`),setTimeout(()=>{document.querySelector(".options .content .cache .cachecheck")&&document.querySelector(".options .content .cache .cachecheck").remove()},3e3)}),document.querySelector(".options .content .skipconfirmation").addEventListener("click",async()=>{const u=document.querySelector(".options .content .skipconfirmation #skipconfirmation");await pt.put("skipconfirmation",u.checked)});var c=document.getElementById("alias");c.addEventListener("keypress",async function(u){if(u.key==="Enter"){u.preventDefault();const e=`
				<span class="check">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
					  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
					</svg>		
				</span>
			`;document.querySelector(".options .content .alias #alias").blur(),document.querySelector(".options .content .alias svg").insertAdjacentHTML("afterend",e),setTimeout(()=>{document.querySelector(".options .content .alias .check")&&document.querySelector(".options .content .alias .check").remove()},3e3);const t=document.querySelector(".options .content .alias #alias").value;$e.name=t,await pt.put("name",t),na();for(const r of rt){const n=r[0];Pf(n)}}})}function wr(){setTimeout(()=>{document.querySelector(".explorer").style.display="flex";const a=document.querySelector(".scroller");a.scrollTop=a.scrollHeight},200)}function _r(a,s,o,c,u,e){const t=ze(s.size),r=u?"You sent to ":"Sent by ";let n="0%";e==="start"||e==="finish"||(n=e+"%");let l="";(e==="finish"||e==100)&&(l="background:#bec4cf;");let f=`
		<div class="file file-${o} connect-${a.connectId}" data-complete="${e}" style="${l}">
			<div class="icon"><div style="width:50px;height:50px"><img src="${Lf}"></div></div>
			<div class="loader"><div style="width:50px;height:50px"><div class="progress">${n}</div></div></div>
			<div class="body">
				<div class="name">${s.name}</div>
				<div class="meta"><span class="size">${t}</span> | <span class="note">${r}</span> <span class="to">${a.name}</span></div> 
			</div>
			
		</div>
	`;document.querySelector(".explorer .files").innerHTML+=f;const h=document.querySelector(".scroller");h.scrollTop=h.scrollHeight}window.location.href.indexOf("localhost")==-1&&(window.addEventListener("error",a=>{a.preventDefault()}),window.addEventListener("unhandledrejection",a=>{a.preventDefault()}));Wf();document.getElementById("loader").style.display="none";typeof navigator.serviceWorker<"u"&&navigator.serviceWorker.register("sw.js");
