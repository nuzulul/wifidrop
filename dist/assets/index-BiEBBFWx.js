var Of=Object.defineProperty;var Ga=e=>{throw TypeError(e)};var Pf=(e,r,t)=>r in e?Of(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ue=(e,r,t)=>Pf(e,typeof r!="symbol"?r+"":r,t),Gi=(e,r,t)=>r.has(e)||Ga("Cannot "+t);var x=(e,r,t)=>(Gi(e,r,"read from private field"),t?t.call(e):r.get(e)),xe=(e,r,t)=>r.has(e)?Ga("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),Ie=(e,r,t,o)=>(Gi(e,r,"write to private field"),o?o.call(e,t):r.set(e,t),t),Ae=(e,r,t)=>(Gi(e,r,"access private method"),t);var zn=(e,r,t,o)=>({set _(u){Ie(e,r,u,t)},get _(){return x(e,r,o)}});(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const n of u)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(u){const n={};return u.integrity&&(n.integrity=u.integrity),u.referrerPolicy&&(n.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?n.credentials="include":u.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(u){if(u.ep)return;u.ep=!0;const n=t(u);fetch(u.href,n)}})();const Bf="/icon-512.png",Nf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='currentColor'%20class='bi%20bi-file-earmark-fill'%20viewBox='0%200%2016%2016'%3e%3cpath%20d='M4%200h5.293A1%201%200%200%201%2010%20.293L13.707%204a1%201%200%200%201%20.293.707V14a2%202%200%200%201-2%202H4a2%202%200%200%201-2-2V2a2%202%200%200%201%202-2m5.5%201.5v2a1%201%200%200%200%201%201h2z'/%3e%3c/svg%3e";function Lf(e,r){e.addEventListener("click",()=>{Mf(r)});let t;t=document.querySelector("body"),t.addEventListener("drag",o,!1),t.addEventListener("dragstart",u,!1),t.addEventListener("dragenter",n,!1),t.addEventListener("dragover",s,!1),t.addEventListener("dragleave",l,!1),t.addEventListener("dragend",a,!1),t.addEventListener("drop",c,!1);function o(g){g.stopPropagation(),g.preventDefault()}function u(g){g.stopPropagation(),g.preventDefault()}function n(g){g.stopPropagation(),g.preventDefault(),h()}function s(g){g.stopPropagation(),g.preventDefault(),h()}function l(g){g.stopPropagation(),g.preventDefault(),f()}function a(g){g.stopPropagation(),g.preventDefault(),f()}function c(g){g.stopPropagation(),g.preventDefault(),f();const b=g.dataTransfer.files;r(b)}function h(){document.querySelector(".frame").style.borderColor="#646cff"}function f(){document.querySelector(".frame").style.borderColor="#d7d8da"}}function Mf(e){let r=document.createElement("input");r.type="file",r.multiple=!0,r.onchange=t=>{let o=Array.from(r.files);e(o)},r.click()}async function Qi({runtime:e="node",databaseName:r="kvstorage",storageName:t="storage",databaseBinding:o}){function u(s){return/^[a-zA-Z0-9]+$/.test(s)}function n(s="Error"){throw new Error(s)}switch(u(e)||n("Runtime must be Alphanumeric"),u(r)||n("storageName must be Alphanumeric"),u(t)||n("storageName must be Alphanumeric"),e.toLowerCase()){case"node":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let s;try{s=await import("./kv-storage-module")}catch{s=await import("./kv-storage-module.js")}return await s.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"deno":if(typeof caches<"u"&&typeof global<"u"&&typeof window>"u"||typeof caches<"u"&&typeof global>"u"&&typeof window<"u"){let s;try{s=await import("./kv-storage-module.ts")}catch{s=await import("./kv-storage-module.js")}return await s.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"bun":if(typeof caches>"u"&&typeof global<"u"&&typeof window>"u"){let s;try{s=await import("./kv-storage-module")}catch{s=await import("./kv-storage-module.js")}return await s.KVStorageModule.init({dataDirName:r,storageName:t})}break;case"browser":if(typeof window<"u"&&typeof window.document<"u")return r==="kvstorage"&&(r=t),ha.init({databaseName:r,storageName:t});break;case"cloudflare":if(typeof caches<"u"&&typeof global>"u"&&typeof window>"u")return await ca.init({databaseBinding:o,storageName:t});break;default:n("Runtime unknown")}}class ca{constructor({databaseBinding:r,storageName:t}){Ue(this,"_storageName");Ue(this,"_databaseBinding");this._databaseBinding=r,this._storageName=t}isAlphanumeric(r){return/^[a-zA-Z0-9]+$/.test(r)}showError(r="Error"){throw new Error(r)}static async init({databaseBinding:r,storageName:t}){function o(s){return/^[a-zA-Z0-9]+$/.test(s)}function u(s="Error"){throw new Error(s)}return o(t)||u("storageName must be Alphanumeric"),await r.prepare("CREATE TABLE IF NOT EXISTS "+t+" (key text NOT NULL PRIMARY KEY,value text NOT NULL)").run(),new ca({databaseBinding:r,storageName:t})}async put(r,t){return this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric"),await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).first()==null?(await this._databaseBinding.prepare("INSERT INTO "+this._storageName+" (key,value) VALUES (?1,?2)").bind(r,t).run()).success:(await this._databaseBinding.prepare("UPDATE "+this._storageName+" SET value = ?2 WHERE key = ?1").bind(r,t).run()).success}async get(r){this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");const o=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).first();let u;return o==null?u=!1:u=o.value,u}async delete(r){return this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric"),(await this._databaseBinding.prepare("DELETE FROM "+this._storageName+" WHERE key = ?1").bind(r).run()).success}async has(r){this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");const o=await this._databaseBinding.prepare("SELECT value FROM "+this._storageName+" WHERE key = ?1").bind(r).run();let u;return o.results==0?u=!1:u=!0,u}async list(){const t=await this._databaseBinding.prepare("SELECT key FROM "+this._storageName).bind().all();let o;if(t.success){let u=[];t.results.forEach(s=>{u.push(s.key)}),o={keys:u,complete:!0}}else o=!1;return o}async clear(){return(await this._databaseBinding.prepare("DELETE FROM "+this._storageName).run()).success}}class ha{constructor({databaseName:r,storageName:t,dbVersion:o,iDB:u}){Ue(this,"_databaseName");Ue(this,"_storageName");Ue(this,"_dbVersion");Ue(this,"_iDB");this._databaseName=r,this._storageName=t,this._dbVersion=1,this._iDB=u}isAlphanumeric(r){return/^[a-zA-Z0-9]+$/.test(r)}showError(r="Error"){throw new Error(r)}static async init({databaseName:r="data",storageName:t}){function o(c){return/^[a-zA-Z0-9]+$/.test(c)}function u(c="Error"){throw new Error(c)}function n(){if(!("indexedDB"in window)){u("This browser doesn't support IndexedDB");return}}n();const s=1;o(r)||u("dataDirName must be Alphanumeric"),o(t)||u("storageName must be Alphanumeric");const a=await new Promise(c=>{let h=window.indexedDB.open(r,s);h.onerror=function(){console.error("Error",h.error)},h.onsuccess=function(){let f=h.result;c(f)},h.onupgradeneeded=function(f){let g=h.result;g.objectStoreNames.contains(t)||g.createObjectStore(t,{keyPath:"key"})},h.onblocked=function(){console.error("Error, conflict")}});return new ha({databaseName:r,storageName:t,dbVersion:s,iDB:a})}async put(r,t){return new Promise(o=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let n=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).put({key:r,value:t});n.onsuccess=function(){o(!0)},n.onerror=function(){o(!1)}})}async get(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(r);u.onsuccess=function(n){u.result!=null?t(u.result.value):t(!1)},u.onerror=function(){t(!1)}})}async delete(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).delete(r);u.onsuccess=function(n){t(!0)},u.onerror=function(){t(!1)}})}async has(r){return new Promise(t=>{this.isAlphanumeric(r)||this.showError("Key must be Alphanumeric");let u=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).get(r);u.onsuccess=function(n){u.result!=null?t(!0):t(!1)},u.onerror=function(){t(!1)}})}async list(){return new Promise(r=>{let o=this._iDB.transaction(this._storageName,"readonly").objectStore(this._storageName).getAllKeys();o.onsuccess=function(u){let n={keys:o.result,complete:!0};r(n)},o.onerror=function(){r(!1)}})}async clear(){return new Promise(r=>{let o=this._iDB.transaction(this._storageName,"readwrite").objectStore(this._storageName).clear();o.onsuccess=function(u){r(!0)},o.onerror=function(){r(!1)}})}}var Qa=["Time","Past","Future","Dev","Fly","Flying","Soar","Soaring","Power","Falling","Fall","Jump","Cliff","Mountain","Rend","Red","Blue","Green","Yellow","Gold","Demon","Demonic","Panda","Cat","Kitty","Kitten","Zero","Memory","Trooper","XX","Bandit","Fear","Light","Glow","Tread","Deep","Deeper","Deepest","Mine","Your","Worst","Enemy","Hostile","Force","Video","Game","Donkey","Mule","Colt","Cult","Cultist","Magnum","Gun","Assault","Recon","Trap","Trapper","Redeem","Code","Script","Writer","Near","Close","Open","Cube","Circle","Geo","Genome","Germ","Spaz","Shot","Echo","Beta","Alpha","Gamma","Omega","Seal","Squid","Money","Cash","Lord","King","Duke","Rest","Fire","Flame","Morrow","Break","Breaker","Numb","Ice","Cold","Rotten","Sick","Sickly","Janitor","Camel","Rooster","Sand","Desert","Dessert","Hurdle","Racer","Eraser","Erase","Big","Small","Short","Tall","Sith","Bounty","Hunter","Cracked","Broken","Sad","Happy","Joy","Joyful","Crimson","Destiny","Deceit","Lies","Lie","Honest","Destined","Bloxxer","Hawk","Eagle","Hawker","Walker","Zombie","Sarge","Capt","Captain","Punch","One","Two","Uno","Slice","Slash","Melt","Melted","Melting","Fell","Wolf","Hound","Legacy","Sharp","Dead","Mew","Chuckle","Bubba","Bubble","Sandwich","Smasher","Extreme","Multi","Universe","Ultimate","Death","Ready","Monkey","Elevator","Wrench","Grease","Head","Theme","Grand","Cool","Kid","Boy","Girl","Vortex","Paradox"];function Uf(){return Qa[Math.floor(Math.random()*Qa.length)]}const Ja={a:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"=",encode:function(e){for(var r=this.a,t=this.pad,o=e.length,u="",n,s,l=0,a=0,c=0;c<o;c+=5)s=e.charCodeAt(c),n=248&s,u+=r.charAt(n>>3),l=7&s,a=2,c+1<o&&(s=e.charCodeAt(c+1),n=192&s,u+=r.charAt((l<<2)+(n>>6)),u+=r.charAt((62&s)>>1),l=s&1,a=4),c+2<o&&(s=e.charCodeAt(c+2),n=240&s,u+=r.charAt((l<<4)+(n>>4)),l=15&s,a=1),c+3<o&&(s=e.charCodeAt(c+3),n=128&s,u+=r.charAt((l<<1)+(n>>7)),u+=r.charAt((124&s)>>2),l=3&s,a=3),c+4<o&&(s=e.charCodeAt(c+4),n=224&s,u+=r.charAt((l<<3)+(n>>5)),u+=r.charAt(31&s),l=0,a=0);l!=0&&(u+=r.charAt(l<<a));var h=8-u.length%8;if(h==8)return u;if(h==1)return u+t;if(h==3)return u+t+t+t;if(h==4)return u+t+t+t+t;if(h==6)return u+t+t+t+t+t+t;console.log("there was some kind of error"),console.log("padlen:"+h+" ,r:"+l+" ,sh:"+a+", w:"+n)},decode:function(e){var r=e.length,t=this.a+this.pad,o,u,n=0,s,l="";for(e=e.toUpperCase(),i=0;i<r;i+=1)o=t.indexOf(e.charAt(i)),o>=0&&o<32&&(u=u<<5|o,n+=5,n>=8&&(s=u>>n-8&255,l=l+String.fromCharCode(s),n-=8));return n>0&&(s=(u<<8-n&255)>>8-n,s!==0&&(l=l+String.fromCharCode(s))),l}},un={a:"0123456789ABCDEFGHIJKLMNOPQRSTUV",pad:"=",encode:Ja.encode,decode:Ja.decode};function Bi(e){let r=e;const t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.min(Math.floor(Math.log(r)/Math.log(1024)),t.length-1),u=r/1024**o;return o===0?`${r} bytes`:`${u.toFixed(1)} ${t[o]}`}var Df={};function Za(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function jf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ni(e,...r){if(!jf(e))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${e.length}`)}function Ff(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Za(e.outputLen),Za(e.blockLen)}function Ei(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function qf(e,r){Ni(e);const t=r.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Zr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ji=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Lt=(e,r)=>e<<32-r|e>>>r;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Wf(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function fa(e){return typeof e=="string"&&(e=Wf(e)),Ni(e),e}function $f(...e){let r=0;for(let o=0;o<e.length;o++){const u=e[o];Ni(u),r+=u.length}const t=new Uint8Array(r);for(let o=0,u=0;o<e.length;o++){const n=e[o];t.set(n,u),u+=n.length}return t}class Cu{clone(){return this._cloneInto()}}function Hf(e){const r=o=>e().update(fa(o)).digest(),t=e();return r.outputLen=t.outputLen,r.blockLen=t.blockLen,r.create=()=>e(),r}function Ru(e=32){if(Zr&&typeof Zr.getRandomValues=="function")return Zr.getRandomValues(new Uint8Array(e));if(Zr&&typeof Zr.randomBytes=="function")return Zr.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function zf(e,r,t,o){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,t,o);const u=BigInt(32),n=BigInt(4294967295),s=Number(t>>u&n),l=Number(t&n),a=o?4:0,c=o?0:4;e.setUint32(r+a,s,o),e.setUint32(r+c,l,o)}const Vf=(e,r,t)=>e&r^~e&t,Kf=(e,r,t)=>e&r^e&t^r&t;class Yf extends Cu{constructor(r,t,o,u){super(),this.blockLen=r,this.outputLen=t,this.padOffset=o,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=Ji(this.buffer)}update(r){Ei(this);const{view:t,buffer:o,blockLen:u}=this;r=fa(r);const n=r.length;for(let s=0;s<n;){const l=Math.min(u-this.pos,n-s);if(l===u){const a=Ji(r);for(;u<=n-s;s+=u)this.process(a,s);continue}o.set(r.subarray(s,s+l),this.pos),this.pos+=l,s+=l,this.pos===u&&(this.process(t,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Ei(this),qf(r,this),this.finished=!0;const{buffer:t,view:o,blockLen:u,isLE:n}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>u-s&&(this.process(o,0),s=0);for(let f=s;f<u;f++)t[f]=0;zf(o,u-8,BigInt(this.length*8),n),this.process(o,0);const l=Ji(r),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)l.setUint32(4*f,h[f],n)}digest(){const{buffer:r,outputLen:t}=this;this.digestInto(r);const o=r.slice(0,t);return this.destroy(),o}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:t,buffer:o,length:u,finished:n,destroyed:s,pos:l}=this;return r.length=u,r.pos=l,r.finished=n,r.destroyed=s,u%t&&r.buffer.set(o),r}}const Gf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pr=new Uint32Array(64);class Qf extends Yf{constructor(){super(64,32,8,!1),this.A=dr[0]|0,this.B=dr[1]|0,this.C=dr[2]|0,this.D=dr[3]|0,this.E=dr[4]|0,this.F=dr[5]|0,this.G=dr[6]|0,this.H=dr[7]|0}get(){const{A:r,B:t,C:o,D:u,E:n,F:s,G:l,H:a}=this;return[r,t,o,u,n,s,l,a]}set(r,t,o,u,n,s,l,a){this.A=r|0,this.B=t|0,this.C=o|0,this.D=u|0,this.E=n|0,this.F=s|0,this.G=l|0,this.H=a|0}process(r,t){for(let f=0;f<16;f++,t+=4)pr[f]=r.getUint32(t,!1);for(let f=16;f<64;f++){const g=pr[f-15],y=pr[f-2],b=Lt(g,7)^Lt(g,18)^g>>>3,w=Lt(y,17)^Lt(y,19)^y>>>10;pr[f]=w+pr[f-7]+b+pr[f-16]|0}let{A:o,B:u,C:n,D:s,E:l,F:a,G:c,H:h}=this;for(let f=0;f<64;f++){const g=Lt(l,6)^Lt(l,11)^Lt(l,25),y=h+g+Vf(l,a,c)+Gf[f]+pr[f]|0,w=(Lt(o,2)^Lt(o,13)^Lt(o,22))+Kf(o,u,n)|0;h=c,c=a,a=l,l=s+y|0,s=n,n=u,u=o,o=y+w|0}o=o+this.A|0,u=u+this.B|0,n=n+this.C|0,s=s+this.D|0,l=l+this.E|0,a=a+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(o,u,n,s,l,a,c,h)}roundClean(){pr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Cs=Hf(()=>new Qf);class xu extends Cu{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,Ff(r);const o=fa(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,n=new Uint8Array(u);n.set(o.length>u?r.create().update(o).digest():o);for(let s=0;s<n.length;s++)n[s]^=54;this.iHash.update(n),this.oHash=r.create();for(let s=0;s<n.length;s++)n[s]^=106;this.oHash.update(n),n.fill(0)}update(r){return Ei(this),this.iHash.update(r),this}digestInto(r){Ei(this),Ni(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:o,finished:u,destroyed:n,blockLen:s,outputLen:l}=this;return r=r,r.finished=u,r.destroyed=n,r.blockLen=s,r.outputLen=l,r.oHash=t._cloneInto(r.oHash),r.iHash=o._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ou=(e,r,t)=>new xu(e,r).update(t).digest();Ou.create=(e,r)=>new xu(e,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const da=BigInt(0),Li=BigInt(1),Jf=BigInt(2);function zr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function jn(e){if(!zr(e))throw new Error("Uint8Array expected")}function cn(e,r){if(typeof r!="boolean")throw new Error(`${e} must be valid boolean, got "${r}".`)}const Zf=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function hn(e){jn(e);let r="";for(let t=0;t<e.length;t++)r+=Zf[e[t]];return r}function on(e){const r=e.toString(16);return r.length&1?`0${r}`:r}function pa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const $t={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Xa(e){if(e>=$t._0&&e<=$t._9)return e-$t._0;if(e>=$t._A&&e<=$t._F)return e-($t._A-10);if(e>=$t._a&&e<=$t._f)return e-($t._a-10)}function fn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const r=e.length,t=r/2;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const o=new Uint8Array(t);for(let u=0,n=0;u<t;u++,n+=2){const s=Xa(e.charCodeAt(n)),l=Xa(e.charCodeAt(n+1));if(s===void 0||l===void 0){const a=e[n]+e[n+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+n)}o[u]=s*16+l}return o}function ir(e){return pa(hn(e))}function ga(e){return jn(e),pa(hn(Uint8Array.from(e).reverse()))}function _r(e,r){return fn(e.toString(16).padStart(r*2,"0"))}function ma(e,r){return _r(e,r).reverse()}function Xf(e){return fn(on(e))}function yt(e,r,t){let o;if(typeof r=="string")try{o=fn(r)}catch(n){throw new Error(`${e} must be valid hex string, got "${r}". Cause: ${n}`)}else if(zr(r))o=Uint8Array.from(r);else throw new Error(`${e} must be hex string or Uint8Array`);const u=o.length;if(typeof t=="number"&&u!==t)throw new Error(`${e} expected ${t} bytes, got ${u}`);return o}function Vr(...e){let r=0;for(let o=0;o<e.length;o++){const u=e[o];jn(u),r+=u.length}const t=new Uint8Array(r);for(let o=0,u=0;o<e.length;o++){const n=e[o];t.set(n,u),u+=n.length}return t}function ed(e,r){if(e.length!==r.length)return!1;let t=0;for(let o=0;o<e.length;o++)t|=e[o]^r[o];return t===0}function td(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}const Zi=e=>typeof e=="bigint"&&da<=e;function dn(e,r,t){return Zi(e)&&Zi(r)&&Zi(t)&&r<=e&&e<t}function wr(e,r,t,o){if(!dn(r,t,o))throw new Error(`expected valid ${e}: ${t} <= n < ${o}, got ${typeof r} ${r}`)}function Pu(e){let r;for(r=0;e>da;e>>=Li,r+=1);return r}function rd(e,r){return e>>BigInt(r)&Li}function nd(e,r,t){return e|(t?Li:da)<<BigInt(r)}const ya=e=>(Jf<<BigInt(e-1))-Li,Xi=e=>new Uint8Array(e),el=e=>Uint8Array.from(e);function Bu(e,r,t){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let o=Xi(e),u=Xi(e),n=0;const s=()=>{o.fill(1),u.fill(0),n=0},l=(...f)=>t(u,o,...f),a=(f=Xi())=>{u=l(el([0]),f),o=l(),f.length!==0&&(u=l(el([1]),f),o=l())},c=()=>{if(n++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const g=[];for(;f<r;){o=l();const y=o.slice();g.push(y),f+=o.length}return Vr(...g)};return(f,g)=>{s(),a(f);let y;for(;!(y=g(c()));)a();return s(),y}}const id={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||zr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,r)=>r.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Fn(e,r,t={}){const o=(u,n,s)=>{const l=id[n];if(typeof l!="function")throw new Error(`Invalid validator "${n}", expected function`);const a=e[u];if(!(s&&a===void 0)&&!l(a,e))throw new Error(`Invalid param ${String(u)}=${a} (${typeof a}), expected ${n}`)};for(const[u,n]of Object.entries(r))o(u,n,!1);for(const[u,n]of Object.entries(t))o(u,n,!0);return e}const sd=()=>{throw new Error("not implemented")};function Rs(e){const r=new WeakMap;return(t,...o)=>{const u=r.get(t);if(u!==void 0)return u;const n=e(t,...o);return r.set(t,n),n}}var od=Object.freeze({__proto__:null,aInRange:wr,abool:cn,abytes:jn,bitGet:rd,bitLen:Pu,bitMask:ya,bitSet:nd,bytesToHex:hn,bytesToNumberBE:ir,bytesToNumberLE:ga,concatBytes:Vr,createHmacDrbg:Bu,ensureBytes:yt,equalBytes:ed,hexToBytes:fn,hexToNumber:pa,inRange:dn,isBytes:zr,memoized:Rs,notImplemented:sd,numberToBytesBE:_r,numberToBytesLE:ma,numberToHexUnpadded:on,numberToVarBytesBE:Xf,utf8ToBytes:td,validateObject:Fn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ut=BigInt(0),tt=BigInt(1),Pr=BigInt(2),ad=BigInt(3),xs=BigInt(4),tl=BigInt(5),rl=BigInt(8);BigInt(9);BigInt(16);function ht(e,r){const t=e%r;return t>=ut?t:r+t}function ld(e,r,t){if(t<=ut||r<ut)throw new Error("Expected power/modulo > 0");if(t===tt)return ut;let o=tt;for(;r>ut;)r&tt&&(o=o*e%t),e=e*e%t,r>>=tt;return o}function At(e,r,t){let o=e;for(;r-- >ut;)o*=o,o%=t;return o}function Os(e,r){if(e===ut||r<=ut)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let t=ht(e,r),o=r,u=ut,n=tt;for(;t!==ut;){const l=o/t,a=o%t,c=u-n*l;o=t,t=a,u=n,n=c}if(o!==tt)throw new Error("invert: does not exist");return ht(u,r)}function ud(e){const r=(e-tt)/Pr;let t,o,u;for(t=e-tt,o=0;t%Pr===ut;t/=Pr,o++);for(u=Pr;u<e&&ld(u,r,e)!==e-tt;u++);if(o===1){const s=(e+tt)/xs;return function(a,c){const h=a.pow(c,s);if(!a.eql(a.sqr(h),c))throw new Error("Cannot find square root");return h}}const n=(t+tt)/Pr;return function(l,a){if(l.pow(a,r)===l.neg(l.ONE))throw new Error("Cannot find square root");let c=o,h=l.pow(l.mul(l.ONE,u),t),f=l.pow(a,n),g=l.pow(a,t);for(;!l.eql(g,l.ONE);){if(l.eql(g,l.ZERO))return l.ZERO;let y=1;for(let w=l.sqr(g);y<c&&!l.eql(w,l.ONE);y++)w=l.sqr(w);const b=l.pow(h,tt<<BigInt(c-y-1));h=l.sqr(b),f=l.mul(f,b),g=l.mul(g,h),c=y}return f}}function cd(e){if(e%xs===ad){const r=(e+tt)/xs;return function(o,u){const n=o.pow(u,r);if(!o.eql(o.sqr(n),u))throw new Error("Cannot find square root");return n}}if(e%rl===tl){const r=(e-tl)/rl;return function(o,u){const n=o.mul(u,Pr),s=o.pow(n,r),l=o.mul(u,s),a=o.mul(o.mul(l,Pr),s),c=o.mul(l,o.sub(a,o.ONE));if(!o.eql(o.sqr(c),u))throw new Error("Cannot find square root");return c}}return ud(e)}const hd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fd(e){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=hd.reduce((o,u)=>(o[u]="function",o),r);return Fn(e,t)}function dd(e,r,t){if(t<ut)throw new Error("Expected power > 0");if(t===ut)return e.ONE;if(t===tt)return r;let o=e.ONE,u=r;for(;t>ut;)t&tt&&(o=e.mul(o,u)),u=e.sqr(u),t>>=tt;return o}function pd(e,r){const t=new Array(r.length),o=r.reduce((n,s,l)=>e.is0(s)?n:(t[l]=n,e.mul(n,s)),e.ONE),u=e.inv(o);return r.reduceRight((n,s,l)=>e.is0(s)?n:(t[l]=e.mul(n,t[l]),e.mul(n,s)),u),t}function Nu(e,r){const t=r!==void 0?r:e.toString(2).length,o=Math.ceil(t/8);return{nBitLength:t,nByteLength:o}}function Lu(e,r,t=!1,o={}){if(e<=ut)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:u,nByteLength:n}=Nu(e,r);if(n>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=cd(e),l=Object.freeze({ORDER:e,BITS:u,BYTES:n,MASK:ya(u),ZERO:ut,ONE:tt,create:a=>ht(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ut<=a&&a<e},is0:a=>a===ut,isOdd:a=>(a&tt)===tt,neg:a=>ht(-a,e),eql:(a,c)=>a===c,sqr:a=>ht(a*a,e),add:(a,c)=>ht(a+c,e),sub:(a,c)=>ht(a-c,e),mul:(a,c)=>ht(a*c,e),pow:(a,c)=>dd(l,a,c),div:(a,c)=>ht(a*Os(c,e),e),sqrN:a=>a*a,addN:(a,c)=>a+c,subN:(a,c)=>a-c,mulN:(a,c)=>a*c,inv:a=>Os(a,e),sqrt:o.sqrt||(a=>s(l,a)),invertBatch:a=>pd(l,a),cmov:(a,c,h)=>h?c:a,toBytes:a=>t?ma(a,n):_r(a,n),fromBytes:a=>{if(a.length!==n)throw new Error(`Fp.fromBytes: expected ${n}, got ${a.length}`);return t?ga(a):ir(a)}});return Object.freeze(l)}function Mu(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const r=e.toString(2).length;return Math.ceil(r/8)}function Uu(e){const r=Mu(e);return r+Math.ceil(r/2)}function gd(e,r,t=!1){const o=e.length,u=Mu(r),n=Uu(r);if(o<16||o<n||o>1024)throw new Error(`expected ${n}-1024 bytes of input, got ${o}`);const s=t?ir(e):ga(e),l=ht(s,r-tt)+tt;return t?ma(l,u):_r(l,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const md=BigInt(0),es=BigInt(1),ts=new WeakMap,nl=new WeakMap;function yd(e,r){const t=(n,s)=>{const l=s.negate();return n?l:s},o=n=>{if(!Number.isSafeInteger(n)||n<=0||n>r)throw new Error(`Wrong window size=${n}, should be [1..${r}]`)},u=n=>{o(n);const s=Math.ceil(r/n)+1,l=2**(n-1);return{windows:s,windowSize:l}};return{constTimeNegate:t,unsafeLadder(n,s){let l=e.ZERO,a=n;for(;s>md;)s&es&&(l=l.add(a)),a=a.double(),s>>=es;return l},precomputeWindow(n,s){const{windows:l,windowSize:a}=u(s),c=[];let h=n,f=h;for(let g=0;g<l;g++){f=h,c.push(f);for(let y=1;y<a;y++)f=f.add(h),c.push(f);h=f.double()}return c},wNAF(n,s,l){const{windows:a,windowSize:c}=u(n);let h=e.ZERO,f=e.BASE;const g=BigInt(2**n-1),y=2**n,b=BigInt(n);for(let w=0;w<a;w++){const _=w*c;let R=Number(l&g);l>>=b,R>c&&(R-=y,l+=es);const I=_,T=_+Math.abs(R)-1,k=w%2!==0,P=R<0;R===0?f=f.add(t(k,s[I])):h=h.add(t(P,s[T]))}return{p:h,f}},wNAFCached(n,s,l){const a=nl.get(n)||1;let c=ts.get(n);return c||(c=this.precomputeWindow(n,a),a!==1&&ts.set(n,l(c))),this.wNAF(a,c,s)},setWindowSize(n,s){o(s),nl.set(n,s),ts.delete(n)}}}function bd(e,r,t,o){if(!Array.isArray(t)||!Array.isArray(o)||o.length!==t.length)throw new Error("arrays of points and scalars must have equal length");o.forEach((h,f)=>{if(!r.isValid(h))throw new Error(`wrong scalar at index ${f}`)}),t.forEach((h,f)=>{if(!(h instanceof e))throw new Error(`wrong point at index ${f}`)});const u=Pu(BigInt(t.length)),n=u>12?u-3:u>4?u-2:u?2:1,s=(1<<n)-1,l=new Array(s+1).fill(e.ZERO),a=Math.floor((r.BITS-1)/n)*n;let c=e.ZERO;for(let h=a;h>=0;h-=n){l.fill(e.ZERO);for(let g=0;g<o.length;g++){const y=o[g],b=Number(y>>BigInt(h)&BigInt(s));l[b]=l[b].add(t[g])}let f=e.ZERO;for(let g=l.length-1,y=e.ZERO;g>0;g--)y=y.add(l[g]),f=f.add(y);if(c=c.add(f),h!==0)for(let g=0;g<n;g++)c=c.double()}return c}function Du(e){return fd(e.Fp),Fn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Nu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function il(e){e.lowS!==void 0&&cn("lowS",e.lowS),e.prehash!==void 0&&cn("prehash",e.prehash)}function wd(e){const r=Du(e);Fn(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:o,a:u}=r;if(t){if(!o.eql(u,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:_d,hexToBytes:vd}=od,Gt={Err:class extends Error{constructor(r=""){super(r)}},_tlv:{encode:(e,r)=>{const{Err:t}=Gt;if(e<0||e>256)throw new t("tlv.encode: wrong tag");if(r.length&1)throw new t("tlv.encode: unpadded data");const o=r.length/2,u=on(o);if(u.length/2&128)throw new t("tlv.encode: long form length too big");const n=o>127?on(u.length/2|128):"";return`${on(e)}${n}${u}${r}`},decode(e,r){const{Err:t}=Gt;let o=0;if(e<0||e>256)throw new t("tlv.encode: wrong tag");if(r.length<2||r[o++]!==e)throw new t("tlv.decode: wrong tlv");const u=r[o++],n=!!(u&128);let s=0;if(!n)s=u;else{const a=u&127;if(!a)throw new t("tlv.decode(long): indefinite length not supported");if(a>4)throw new t("tlv.decode(long): byte length is too big");const c=r.subarray(o,o+a);if(c.length!==a)throw new t("tlv.decode: length bytes not complete");if(c[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of c)s=s<<8|h;if(o+=a,s<128)throw new t("tlv.decode(long): not minimal encoding")}const l=r.subarray(o,o+s);if(l.length!==s)throw new t("tlv.decode: wrong value length");return{v:l,l:r.subarray(o+s)}}},_int:{encode(e){const{Err:r}=Gt;if(e<tr)throw new r("integer: negative integers are not allowed");let t=on(e);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new r("unexpected assertion");return t},decode(e){const{Err:r}=Gt;if(e[0]&128)throw new r("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return _d(e)}},toSig(e){const{Err:r,_int:t,_tlv:o}=Gt,u=typeof e=="string"?vd(e):e;jn(u);const{v:n,l:s}=o.decode(48,u);if(s.length)throw new r("Invalid signature: left bytes after parsing");const{v:l,l:a}=o.decode(2,n),{v:c,l:h}=o.decode(2,a);if(h.length)throw new r("Invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(c)}},hexFromSig(e){const{_tlv:r,_int:t}=Gt,o=`${r.encode(2,t.encode(e.r))}${r.encode(2,t.encode(e.s))}`;return r.encode(48,o)}},tr=BigInt(0),lt=BigInt(1);BigInt(2);const sl=BigInt(3);BigInt(4);function Ed(e){const r=wd(e),{Fp:t}=r,o=Lu(r.n,r.nBitLength),u=r.toBytes||((w,_,R)=>{const I=_.toAffine();return Vr(Uint8Array.from([4]),t.toBytes(I.x),t.toBytes(I.y))}),n=r.fromBytes||(w=>{const _=w.subarray(1),R=t.fromBytes(_.subarray(0,t.BYTES)),I=t.fromBytes(_.subarray(t.BYTES,2*t.BYTES));return{x:R,y:I}});function s(w){const{a:_,b:R}=r,I=t.sqr(w),T=t.mul(I,w);return t.add(t.add(T,t.mul(w,_)),R)}if(!t.eql(t.sqr(r.Gy),s(r.Gx)))throw new Error("bad generator point: equation left != right");function l(w){return dn(w,lt,r.n)}function a(w){const{allowedPrivateKeyLengths:_,nByteLength:R,wrapPrivateKey:I,n:T}=r;if(_&&typeof w!="bigint"){if(zr(w)&&(w=hn(w)),typeof w!="string"||!_.includes(w.length))throw new Error("Invalid key");w=w.padStart(R*2,"0")}let k;try{k=typeof w=="bigint"?w:ir(yt("private key",w,R))}catch{throw new Error(`private key must be ${R} bytes, hex or bigint, not ${typeof w}`)}return I&&(k=ht(k,T)),wr("private key",k,lt,T),k}function c(w){if(!(w instanceof g))throw new Error("ProjectivePoint expected")}const h=Rs((w,_)=>{const{px:R,py:I,pz:T}=w;if(t.eql(T,t.ONE))return{x:R,y:I};const k=w.is0();_==null&&(_=k?t.ONE:t.inv(T));const P=t.mul(R,_),S=t.mul(I,_),E=t.mul(T,_);if(k)return{x:t.ZERO,y:t.ZERO};if(!t.eql(E,t.ONE))throw new Error("invZ was invalid");return{x:P,y:S}}),f=Rs(w=>{if(w.is0()){if(r.allowInfinityPoint&&!t.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:_,y:R}=w.toAffine();if(!t.isValid(_)||!t.isValid(R))throw new Error("bad point: x or y not FE");const I=t.sqr(R),T=s(_);if(!t.eql(I,T))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(_,R,I){if(this.px=_,this.py=R,this.pz=I,_==null||!t.isValid(_))throw new Error("x required");if(R==null||!t.isValid(R))throw new Error("y required");if(I==null||!t.isValid(I))throw new Error("z required");Object.freeze(this)}static fromAffine(_){const{x:R,y:I}=_||{};if(!_||!t.isValid(R)||!t.isValid(I))throw new Error("invalid affine point");if(_ instanceof g)throw new Error("projective point not allowed");const T=k=>t.eql(k,t.ZERO);return T(R)&&T(I)?g.ZERO:new g(R,I,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const R=t.invertBatch(_.map(I=>I.pz));return _.map((I,T)=>I.toAffine(R[T])).map(g.fromAffine)}static fromHex(_){const R=g.fromAffine(n(yt("pointHex",_)));return R.assertValidity(),R}static fromPrivateKey(_){return g.BASE.multiply(a(_))}static msm(_,R){return bd(g,o,_,R)}_setWindowSize(_){b.setWindowSize(this,_)}assertValidity(){f(this)}hasEvenY(){const{y:_}=this.toAffine();if(t.isOdd)return!t.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){c(_);const{px:R,py:I,pz:T}=this,{px:k,py:P,pz:S}=_,E=t.eql(t.mul(R,S),t.mul(k,T)),O=t.eql(t.mul(I,S),t.mul(P,T));return E&&O}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:_,b:R}=r,I=t.mul(R,sl),{px:T,py:k,pz:P}=this;let S=t.ZERO,E=t.ZERO,O=t.ZERO,L=t.mul(T,T),Q=t.mul(k,k),re=t.mul(P,P),v=t.mul(T,k);return v=t.add(v,v),O=t.mul(T,P),O=t.add(O,O),S=t.mul(_,O),E=t.mul(I,re),E=t.add(S,E),S=t.sub(Q,E),E=t.add(Q,E),E=t.mul(S,E),S=t.mul(v,S),O=t.mul(I,O),re=t.mul(_,re),v=t.sub(L,re),v=t.mul(_,v),v=t.add(v,O),O=t.add(L,L),L=t.add(O,L),L=t.add(L,re),L=t.mul(L,v),E=t.add(E,L),re=t.mul(k,P),re=t.add(re,re),L=t.mul(re,v),S=t.sub(S,L),O=t.mul(re,Q),O=t.add(O,O),O=t.add(O,O),new g(S,E,O)}add(_){c(_);const{px:R,py:I,pz:T}=this,{px:k,py:P,pz:S}=_;let E=t.ZERO,O=t.ZERO,L=t.ZERO;const Q=r.a,re=t.mul(r.b,sl);let v=t.mul(R,k),W=t.mul(I,P),$=t.mul(T,S),q=t.add(R,I),Z=t.add(k,P);q=t.mul(q,Z),Z=t.add(v,W),q=t.sub(q,Z),Z=t.add(R,T);let V=t.add(k,S);return Z=t.mul(Z,V),V=t.add(v,$),Z=t.sub(Z,V),V=t.add(I,T),E=t.add(P,S),V=t.mul(V,E),E=t.add(W,$),V=t.sub(V,E),L=t.mul(Q,Z),E=t.mul(re,$),L=t.add(E,L),E=t.sub(W,L),L=t.add(W,L),O=t.mul(E,L),W=t.add(v,v),W=t.add(W,v),$=t.mul(Q,$),Z=t.mul(re,Z),W=t.add(W,$),$=t.sub(v,$),$=t.mul(Q,$),Z=t.add(Z,$),v=t.mul(W,Z),O=t.add(O,v),v=t.mul(V,Z),E=t.mul(q,E),E=t.sub(E,v),v=t.mul(q,W),L=t.mul(V,L),L=t.add(L,v),new g(E,O,L)}subtract(_){return this.add(_.negate())}is0(){return this.equals(g.ZERO)}wNAF(_){return b.wNAFCached(this,_,g.normalizeZ)}multiplyUnsafe(_){wr("scalar",_,tr,r.n);const R=g.ZERO;if(_===tr)return R;if(_===lt)return this;const{endo:I}=r;if(!I)return b.unsafeLadder(this,_);let{k1neg:T,k1:k,k2neg:P,k2:S}=I.splitScalar(_),E=R,O=R,L=this;for(;k>tr||S>tr;)k&lt&&(E=E.add(L)),S&lt&&(O=O.add(L)),L=L.double(),k>>=lt,S>>=lt;return T&&(E=E.negate()),P&&(O=O.negate()),O=new g(t.mul(O.px,I.beta),O.py,O.pz),E.add(O)}multiply(_){const{endo:R,n:I}=r;wr("scalar",_,lt,I);let T,k;if(R){const{k1neg:P,k1:S,k2neg:E,k2:O}=R.splitScalar(_);let{p:L,f:Q}=this.wNAF(S),{p:re,f:v}=this.wNAF(O);L=b.constTimeNegate(P,L),re=b.constTimeNegate(E,re),re=new g(t.mul(re.px,R.beta),re.py,re.pz),T=L.add(re),k=Q.add(v)}else{const{p:P,f:S}=this.wNAF(_);T=P,k=S}return g.normalizeZ([T,k])[0]}multiplyAndAddUnsafe(_,R,I){const T=g.BASE,k=(S,E)=>E===tr||E===lt||!S.equals(T)?S.multiplyUnsafe(E):S.multiply(E),P=k(this,R).add(k(_,I));return P.is0()?void 0:P}toAffine(_){return h(this,_)}isTorsionFree(){const{h:_,isTorsionFree:R}=r;if(_===lt)return!0;if(R)return R(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:R}=r;return _===lt?this:R?R(g,this):this.multiplyUnsafe(r.h)}toRawBytes(_=!0){return cn("isCompressed",_),this.assertValidity(),u(g,this,_)}toHex(_=!0){return cn("isCompressed",_),hn(this.toRawBytes(_))}}g.BASE=new g(r.Gx,r.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const y=r.nBitLength,b=yd(g,r.endo?Math.ceil(y/2):y);return{CURVE:r,ProjectivePoint:g,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:l}}function Sd(e){const r=Du(e);return Fn(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Ad(e){const r=Sd(e),{Fp:t,n:o}=r,u=t.BYTES+1,n=2*t.BYTES+1;function s($){return ht($,o)}function l($){return Os($,o)}const{ProjectivePoint:a,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:f}=Ed({...r,toBytes($,q,Z){const V=q.toAffine(),F=t.toBytes(V.x),oe=Vr;return cn("isCompressed",Z),Z?oe(Uint8Array.from([q.hasEvenY()?2:3]),F):oe(Uint8Array.from([4]),F,t.toBytes(V.y))},fromBytes($){const q=$.length,Z=$[0],V=$.subarray(1);if(q===u&&(Z===2||Z===3)){const F=ir(V);if(!dn(F,lt,t.ORDER))throw new Error("Point is not on curve");const oe=h(F);let se;try{se=t.sqrt(oe)}catch(J){const ae=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+ae)}const de=(se&lt)===lt;return(Z&1)===1!==de&&(se=t.neg(se)),{x:F,y:se}}else if(q===n&&Z===4){const F=t.fromBytes(V.subarray(0,t.BYTES)),oe=t.fromBytes(V.subarray(t.BYTES,2*t.BYTES));return{x:F,y:oe}}else throw new Error(`Point of length ${q} was invalid. Expected ${u} compressed bytes or ${n} uncompressed bytes`)}}),g=$=>hn(_r($,r.nByteLength));function y($){const q=o>>lt;return $>q}function b($){return y($)?s(-$):$}const w=($,q,Z)=>ir($.slice(q,Z));class _{constructor(q,Z,V){this.r=q,this.s=Z,this.recovery=V,this.assertValidity()}static fromCompact(q){const Z=r.nByteLength;return q=yt("compactSignature",q,Z*2),new _(w(q,0,Z),w(q,Z,2*Z))}static fromDER(q){const{r:Z,s:V}=Gt.toSig(yt("DER",q));return new _(Z,V)}assertValidity(){wr("r",this.r,lt,o),wr("s",this.s,lt,o)}addRecoveryBit(q){return new _(this.r,this.s,q)}recoverPublicKey(q){const{r:Z,s:V,recovery:F}=this,oe=S(yt("msgHash",q));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");const se=F===2||F===3?Z+r.n:Z;if(se>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const de=F&1?"03":"02",A=a.fromHex(de+g(se)),J=l(se),ae=s(-oe*J),Se=s(V*J),le=a.BASE.multiplyAndAddUnsafe(A,ae,Se);if(!le)throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return fn(this.toDERHex())}toDERHex(){return Gt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fn(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const R={isValidPrivateKey($){try{return c($),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const $=Uu(r.n);return gd(r.randomBytes($),r.n)},precompute($=8,q=a.BASE){return q._setWindowSize($),q.multiply(BigInt(3)),q}};function I($,q=!0){return a.fromPrivateKey($).toRawBytes(q)}function T($){const q=zr($),Z=typeof $=="string",V=(q||Z)&&$.length;return q?V===u||V===n:Z?V===2*u||V===2*n:$ instanceof a}function k($,q,Z=!0){if(T($))throw new Error("first arg must be private key");if(!T(q))throw new Error("second arg must be public key");return a.fromHex(q).multiply(c($)).toRawBytes(Z)}const P=r.bits2int||function($){const q=ir($),Z=$.length*8-r.nBitLength;return Z>0?q>>BigInt(Z):q},S=r.bits2int_modN||function($){return s(P($))},E=ya(r.nBitLength);function O($){return wr(`num < 2^${r.nBitLength}`,$,tr,E),_r($,r.nByteLength)}function L($,q,Z=Q){if(["recovered","canonical"].some(B=>B in Z))throw new Error("sign() legacy options not supported");const{hash:V,randomBytes:F}=r;let{lowS:oe,prehash:se,extraEntropy:de}=Z;oe==null&&(oe=!0),$=yt("msgHash",$),il(Z),se&&($=yt("prehashed msgHash",V($)));const A=S($),J=c(q),ae=[O(J),O(A)];if(de!=null&&de!==!1){const B=de===!0?F(t.BYTES):de;ae.push(yt("extraEntropy",B))}const Se=Vr(...ae),le=A;function D(B){const X=P(B);if(!f(X))return;const ue=l(X),ne=a.BASE.multiply(X).toAffine(),ie=s(ne.x);if(ie===tr)return;const ge=s(ue*s(le+ie*J));if(ge===tr)return;let pe=(ne.x===ie?0:2)|Number(ne.y&lt),U=ge;return oe&&y(ge)&&(U=b(ge),pe^=1),new _(ie,U,pe)}return{seed:Se,k2sig:D}}const Q={lowS:r.lowS,prehash:!1},re={lowS:r.lowS,prehash:!1};function v($,q,Z=Q){const{seed:V,k2sig:F}=L($,q,Z),oe=r;return Bu(oe.hash.outputLen,oe.nByteLength,oe.hmac)(V,F)}a.BASE._setWindowSize(8);function W($,q,Z,V=re){var ne;const F=$;if(q=yt("msgHash",q),Z=yt("publicKey",Z),"strict"in V)throw new Error("options.strict was renamed to lowS");il(V);const{lowS:oe,prehash:se}=V;let de,A;try{if(typeof F=="string"||zr(F))try{de=_.fromDER(F)}catch(ie){if(!(ie instanceof Gt.Err))throw ie;de=_.fromCompact(F)}else if(typeof F=="object"&&typeof F.r=="bigint"&&typeof F.s=="bigint"){const{r:ie,s:ge}=F;de=new _(ie,ge)}else throw new Error("PARSE");A=a.fromHex(Z)}catch(ie){if(ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(oe&&de.hasHighS())return!1;se&&(q=r.hash(q));const{r:J,s:ae}=de,Se=S(q),le=l(ae),D=s(Se*le),B=s(J*le),X=(ne=a.BASE.multiplyAndAddUnsafe(A,D,B))==null?void 0:ne.toAffine();return X?s(X.x)===J:!1}return{CURVE:r,getPublicKey:I,getSharedSecret:k,sign:v,verify:W,ProjectivePoint:a,Signature:_,utils:R}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Td(e){return{hash:e,hmac:(r,...t)=>Ou(e,r,$f(...t)),randomBytes:Ru}}function Id(e,r){const t=o=>Ad({...e,...Td(o)});return Object.freeze({...t(r),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Si=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nn=BigInt(1),Ai=BigInt(2),ol=(e,r)=>(e+r/Ai)/r;function ju(e){const r=qn,t=BigInt(3),o=BigInt(6),u=BigInt(11),n=BigInt(22),s=BigInt(23),l=BigInt(44),a=BigInt(88),c=e*e*e%r,h=c*c*e%r,f=At(h,t,r)*h%r,g=At(f,t,r)*h%r,y=At(g,Ai,r)*c%r,b=At(y,u,r)*y%r,w=At(b,n,r)*b%r,_=At(w,l,r)*w%r,R=At(_,a,r)*_%r,I=At(R,l,r)*w%r,T=At(I,t,r)*h%r,k=At(T,s,r)*b%r,P=At(k,o,r)*c%r,S=At(P,Ai,r);if(!Ps.eql(Ps.sqr(S),e))throw new Error("Cannot find square root");return S}const Ps=Lu(qn,void 0,void 0,{sqrt:ju}),ba=Id({a:BigInt(0),b:BigInt(7),Fp:Ps,n:Si,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=Si,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-Nn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=t,s=BigInt("0x100000000000000000000000000000000"),l=ol(n*e,r),a=ol(-o*e,r);let c=ht(e-l*t-a*u,r),h=ht(-l*o-a*n,r);const f=c>s,g=h>s;if(f&&(c=r-c),g&&(h=r-h),c>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:g,k2:h}}}},Cs),Fu=BigInt(0),al={};function Ti(e,...r){let t=al[e];if(t===void 0){const o=Cs(Uint8Array.from(e,u=>u.charCodeAt(0)));t=Vr(o,o),al[e]=t}return Cs(Vr(t,...r))}const wa=e=>e.toRawBytes(!0).slice(1),Bs=e=>_r(e,32),rs=e=>ht(e,qn),Ln=e=>ht(e,Si),_a=ba.ProjectivePoint,kd=(e,r,t)=>_a.BASE.multiplyAndAddUnsafe(e,r,t);function Ns(e){let r=ba.utils.normPrivateKeyToScalar(e),t=_a.fromPrivateKey(r);return{scalar:t.hasEvenY()?r:Ln(-r),bytes:wa(t)}}function qu(e){wr("x",e,Nn,qn);const r=rs(e*e),t=rs(r*e+BigInt(7));let o=ju(t);o%Ai!==Fu&&(o=rs(-o));const u=new _a(e,o,Nn);return u.assertValidity(),u}const ln=ir;function Wu(...e){return Ln(ln(Ti("BIP0340/challenge",...e)))}function Cd(e){return Ns(e).bytes}function Rd(e,r,t=Ru(32)){const o=yt("message",e),{bytes:u,scalar:n}=Ns(r),s=yt("auxRand",t,32),l=Bs(n^ln(Ti("BIP0340/aux",s))),a=Ti("BIP0340/nonce",l,u,o),c=Ln(ln(a));if(c===Fu)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=Ns(c),g=Wu(h,u,o),y=new Uint8Array(64);if(y.set(h,0),y.set(Bs(Ln(f+g*n)),32),!$u(y,o,u))throw new Error("sign: Invalid signature produced");return y}function $u(e,r,t){const o=yt("signature",e,64),u=yt("message",r),n=yt("publicKey",t,32);try{const s=qu(ln(n)),l=ln(o.subarray(0,32));if(!dn(l,Nn,qn))return!1;const a=ln(o.subarray(32,64));if(!dn(a,Nn,Si))return!1;const c=Wu(Bs(l),wa(s),u),h=kd(s,a,Ln(-c));return!(!h||!h.hasEvenY()||h.toAffine().x!==l)}catch{return!1}}const va={getPublicKey:Cd,sign:Rd,verify:$u,utils:{randomPrivateKey:ba.utils.randomPrivateKey,lift_x:qu,pointToBytes:wa,numberToBytesBE:_r,bytesToNumberBE:ir,taggedHash:Ti,mod:ht}},Mn="Trystero",Un=(e,r)=>Array(e).fill().map(r),ll="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",Ls=e=>Un(e,()=>ll[Math.floor(Math.random()*ll.length)]).join(""),jt=Ls(20),nn=Promise.all.bind(Promise),Ea=typeof window<"u",{entries:ul,fromEntries:xd,keys:Od}=Object,xr=()=>{},Qt=e=>new Error(`${Mn}: ${e}`),Pd=new TextEncoder,Bd=new TextDecoder,qr=e=>Pd.encode(e),ii=e=>Bd.decode(e),Ms=e=>e.reduce((r,t)=>r+t.toString(16).padStart(2,"0"),""),Vn=(...e)=>e.join("@"),Hu=(e,r,t)=>(e.relayUrls||r).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||t),Wt=JSON.stringify,Ii=JSON.parse,cl=3333,Xr={},Nd=(e,r)=>{const t={},o=()=>{const u=new WebSocket(e);u.onclose=()=>{Xr[e]??(Xr[e]=cl),setTimeout(o,Xr[e]),Xr[e]*=2},u.onmessage=n=>r(n.data),t.socket=u,t.url=u.url,t.ready=new Promise(n=>u.onopen=()=>{n(t),Xr[e]=cl}),t.send=n=>{u.readyState===1&&u.send(n)}};return o(),t},Sa="AES-GCM",ns={},Ld=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))),Md=e=>{const r=atob(e);return new Uint8Array(r.length).map((t,o)=>r.charCodeAt(o)).buffer},Kn=async e=>{if(ns[e])return ns[e];const r=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",qr(e)))).map(t=>t.toString(36)).join("");return ns[e]=r,r},Ud=async(e,r,t)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},qr(`${e}:${r}:${t}`)),{name:Sa},!1,["encrypt","decrypt"]),zu="$",Vu=",",Dd=async(e,r)=>{const t=crypto.getRandomValues(new Uint8Array(16));return t.join(Vu)+zu+Ld(await crypto.subtle.encrypt({name:Sa,iv:t},await e,qr(r)))},jd=async(e,r)=>{const[t,o]=r.split(zu);return ii(await crypto.subtle.decrypt({name:Sa,iv:new Uint8Array(t.split(Vu))},await e,Md(o)))};function Ku(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yn={exports:{}},is,hl;function Fd(){if(hl)return is;hl=1;var e=1e3,r=e*60,t=r*60,o=t*24,u=o*7,n=o*365.25;is=function(h,f){f=f||{};var g=typeof h;if(g==="string"&&h.length>0)return s(h);if(g==="number"&&isFinite(h))return f.long?a(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function s(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var g=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*n;case"weeks":case"week":case"w":return g*u;case"days":case"day":case"d":return g*o;case"hours":case"hour":case"hrs":case"hr":case"h":return g*t;case"minutes":case"minute":case"mins":case"min":case"m":return g*r;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function l(h){var f=Math.abs(h);return f>=o?Math.round(h/o)+"d":f>=t?Math.round(h/t)+"h":f>=r?Math.round(h/r)+"m":f>=e?Math.round(h/e)+"s":h+"ms"}function a(h){var f=Math.abs(h);return f>=o?c(h,f,o,"day"):f>=t?c(h,f,t,"hour"):f>=r?c(h,f,r,"minute"):f>=e?c(h,f,e,"second"):h+" ms"}function c(h,f,g,y){var b=f>=g*1.5;return Math.round(h/g)+" "+y+(b?"s":"")}return is}var ss,fl;function qd(){if(fl)return ss;fl=1;function e(r){o.debug=o,o.default=o,o.coerce=c,o.disable=s,o.enable=n,o.enabled=l,o.humanize=Fd(),o.destroy=h,Object.keys(r).forEach(f=>{o[f]=r[f]}),o.names=[],o.skips=[],o.formatters={};function t(f){let g=0;for(let y=0;y<f.length;y++)g=(g<<5)-g+f.charCodeAt(y),g|=0;return o.colors[Math.abs(g)%o.colors.length]}o.selectColor=t;function o(f){let g,y=null,b,w;function _(...R){if(!_.enabled)return;const I=_,T=Number(new Date),k=T-(g||T);I.diff=k,I.prev=g,I.curr=T,g=T,R[0]=o.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let P=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(E,O)=>{if(E==="%%")return"%";P++;const L=o.formatters[O];if(typeof L=="function"){const Q=R[P];E=L.call(I,Q),R.splice(P,1),P--}return E}),o.formatArgs.call(I,R),(I.log||o.log).apply(I,R)}return _.namespace=f,_.useColors=o.useColors(),_.color=o.selectColor(f),_.extend=u,_.destroy=o.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(b!==o.namespaces&&(b=o.namespaces,w=o.enabled(f)),w),set:R=>{y=R}}),typeof o.init=="function"&&o.init(_),_}function u(f,g){const y=o(this.namespace+(typeof g>"u"?":":g)+f);return y.log=this.log,y}function n(f){o.save(f),o.namespaces=f,o.names=[],o.skips=[];let g;const y=(typeof f=="string"?f:"").split(/[\s,]+/),b=y.length;for(g=0;g<b;g++)y[g]&&(f=y[g].replace(/\*/g,".*?"),f[0]==="-"?o.skips.push(new RegExp("^"+f.slice(1)+"$")):o.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...o.names.map(a),...o.skips.map(a).map(g=>"-"+g)].join(",");return o.enable(""),f}function l(f){if(f[f.length-1]==="*")return!0;let g,y;for(g=0,y=o.skips.length;g<y;g++)if(o.skips[g].test(f))return!1;for(g=0,y=o.names.length;g<y;g++)if(o.names[g].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return ss=e,ss}var dl;function Wd(){return dl||(dl=1,function(e,r){r.formatArgs=o,r.save=u,r.load=n,r.useColors=t,r.storage=s(),r.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;a.splice(1,0,c,"color: inherit");let h=0,f=0;a[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(f=h))}),a.splice(f,0,c)}r.log=console.debug||console.log||(()=>{});function u(a){try{a?r.storage.setItem("debug",a):r.storage.removeItem("debug")}catch{}}function n(){let a;try{a=r.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=Df.DEBUG),a}function s(){try{return localStorage}catch{}}e.exports=qd()(r);const{formatters:l}=e.exports;l.j=function(a){try{return JSON.stringify(a)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(Yn,Yn.exports)),Yn.exports}var $d=Wd(),Hd=Ku($d);const sr=typeof window<"u"?window:self,Us=sr.RTCPeerConnection||sr.mozRTCPeerConnection||sr.webkitRTCPeerConnection,zd=sr.RTCSessionDescription||sr.mozRTCSessionDescription||sr.webkitRTCSessionDescription,Vd=sr.RTCIceCandidate||sr.mozRTCIceCandidate||sr.webkitRTCIceCandidate;var Gn={exports:{}},pl;function Kd(){if(pl)return Gn.exports;pl=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(P,S,E){return Function.prototype.apply.call(P,S,E)},t;e&&typeof e.ownKeys=="function"?t=e.ownKeys:Object.getOwnPropertySymbols?t=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:t=function(P){return Object.getOwnPropertyNames(P)};function o(k){console&&console.warn&&console.warn(k)}var u=Number.isNaN||function(P){return P!==P};function n(){n.init.call(this)}Gn.exports=n,Gn.exports.once=R,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var s=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(k){if(typeof k!="number"||k<0||u(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");s=k}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||u(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function a(k){return k._maxListeners===void 0?n.defaultMaxListeners:k._maxListeners}n.prototype.getMaxListeners=function(){return a(this)},n.prototype.emit=function(P){for(var S=[],E=1;E<arguments.length;E++)S.push(arguments[E]);var O=P==="error",L=this._events;if(L!==void 0)O=O&&L.error===void 0;else if(!O)return!1;if(O){var Q;if(S.length>0&&(Q=S[0]),Q instanceof Error)throw Q;var re=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw re.context=Q,re}var v=L[P];if(v===void 0)return!1;if(typeof v=="function")r(v,this,S);else for(var W=v.length,$=b(v,W),E=0;E<W;++E)r($[E],this,S);return!0};function c(k,P,S,E){var O,L,Q;if(l(S),L=k._events,L===void 0?(L=k._events=Object.create(null),k._eventsCount=0):(L.newListener!==void 0&&(k.emit("newListener",P,S.listener?S.listener:S),L=k._events),Q=L[P]),Q===void 0)Q=L[P]=S,++k._eventsCount;else if(typeof Q=="function"?Q=L[P]=E?[S,Q]:[Q,S]:E?Q.unshift(S):Q.push(S),O=a(k),O>0&&Q.length>O&&!Q.warned){Q.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=k,re.type=P,re.count=Q.length,o(re)}return k}n.prototype.addListener=function(P,S){return c(this,P,S,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(P,S){return c(this,P,S,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(k,P,S){var E={fired:!1,wrapFn:void 0,target:k,type:P,listener:S},O=h.bind(E);return O.listener=S,E.wrapFn=O,O}n.prototype.once=function(P,S){return l(S),this.on(P,f(this,P,S)),this},n.prototype.prependOnceListener=function(P,S){return l(S),this.prependListener(P,f(this,P,S)),this},n.prototype.removeListener=function(P,S){var E,O,L,Q,re;if(l(S),O=this._events,O===void 0)return this;if(E=O[P],E===void 0)return this;if(E===S||E.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete O[P],O.removeListener&&this.emit("removeListener",P,E.listener||S));else if(typeof E!="function"){for(L=-1,Q=E.length-1;Q>=0;Q--)if(E[Q]===S||E[Q].listener===S){re=E[Q].listener,L=Q;break}if(L<0)return this;L===0?E.shift():w(E,L),E.length===1&&(O[P]=E[0]),O.removeListener!==void 0&&this.emit("removeListener",P,re||S)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(P){var S,E,O;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[P]),this;if(arguments.length===0){var L=Object.keys(E),Q;for(O=0;O<L.length;++O)Q=L[O],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=E[P],typeof S=="function")this.removeListener(P,S);else if(S!==void 0)for(O=S.length-1;O>=0;O--)this.removeListener(P,S[O]);return this};function g(k,P,S){var E=k._events;if(E===void 0)return[];var O=E[P];return O===void 0?[]:typeof O=="function"?S?[O.listener||O]:[O]:S?_(O):b(O,O.length)}n.prototype.listeners=function(P){return g(this,P,!0)},n.prototype.rawListeners=function(P){return g(this,P,!1)},n.listenerCount=function(k,P){return typeof k.listenerCount=="function"?k.listenerCount(P):y.call(k,P)},n.prototype.listenerCount=y;function y(k){var P=this._events;if(P!==void 0){var S=P[k];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(k,P){for(var S=new Array(P),E=0;E<P;++E)S[E]=k[E];return S}function w(k,P){for(;P+1<k.length;P++)k[P]=k[P+1];k.pop()}function _(k){for(var P=new Array(k.length),S=0;S<P.length;++S)P[S]=k[S].listener||k[S];return P}function R(k,P){return new Promise(function(S,E){function O(Q){k.removeListener(P,L),E(Q)}function L(){typeof k.removeListener=="function"&&k.removeListener("error",O),S([].slice.call(arguments))}T(k,P,L,{once:!0}),P!=="error"&&I(k,O,{once:!0})})}function I(k,P,S){typeof k.on=="function"&&T(k,"error",P,S)}function T(k,P,S,E){if(typeof k.on=="function")E.once?k.once(P,S):k.on(P,S);else if(typeof k.addEventListener=="function")k.addEventListener(P,function O(L){E.once&&k.removeEventListener(P,O),S(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return Gn.exports}var os,gl;function Yd(){return gl||(gl=1,os=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)),os}var as,ml;function Gd(){return ml||(ml=1,as=class{constructor(r){if(!(r>0)||r-1&r)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){const r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}),as}var ls,yl;function Qd(){if(yl)return ls;yl=1;const e=Gd();return ls=class{constructor(t){this.hwm=t||16,this.head=new e(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(t){if(this.length++,!this.head.push(t)){const o=this.head;this.head=o.next=new e(2*this.head.buffer.length),this.head.push(t)}}shift(){this.length!==0&&this.length--;const t=this.tail.shift();if(t===void 0&&this.tail.next){const o=this.tail.next;return this.tail.next=null,this.tail=o,this.tail.shift()}return t}peek(){const t=this.tail.peek();return t===void 0&&this.tail.next?this.tail.next.peek():t}isEmpty(){return this.length===0}},ls}var us,bl;function wl(){return bl||(bl=1,us=class{constructor(r){this.decoder=new TextDecoder(r==="utf16le"?"utf16-le":r)}get remaining(){return-1}decode(r){return this.decoder.decode(r,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}),us}var cs,_l;function Jd(){if(_l)return cs;_l=1;const e=wl(),r=wl();cs=class{constructor(u="utf8"){switch(this.encoding=t(u),this.encoding){case"utf8":this.decoder=new r;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new e(this.encoding)}}get remaining(){return this.decoder.remaining}push(u){return typeof u=="string"?u:this.decoder.decode(u)}write(u){return this.push(u)}end(u){let n="";return u&&(n=this.push(u)),n+=this.decoder.flush(),n}};function t(o){switch(o=o.toLowerCase(),o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:throw new Error("Unknown encoding: "+o)}}return cs}var hs,vl;function Zd(){if(vl)return hs;vl=1;const{EventEmitter:e}=Kd(),r=new Error("Stream was destroyed"),t=new Error("Premature close"),o=Yd(),u=Qd(),n=Jd(),s=(1<<29)-1,l=1,a=2,c=4,h=8,f=s^l,g=s^a,y=16,b=32,w=64,_=128,R=256,I=512,T=1024,k=2048,P=4096,S=8192,E=16384,O=32768,L=65536,Q=131072,re=R|I,v=y|L,W=w|y,$=P|_,q=R|Q,Z=s^y,V=s^w,F=s^(w|L),oe=s^L,se=s^R,de=s^(_|S),A=s^T,J=s^re,ae=s^O,Se=s^b,le=s^Q,D=s^q,B=1<<18,X=2<<18,ue=4<<18,ne=8<<18,ie=16<<18,ge=32<<18,pe=64<<18,U=128<<18,K=256<<18,G=512<<18,fe=1024<<18,ce=s^(B|K),H=s^ue,te=s^G,j=s^ie,Y=s^ne,ee=s^U,me=s^X,p=s^fe,d=y|B,m=s^d,C=E|ge,M=c|h|a,z=M|l,he=M|C,Ce=H&V,Be=U|O,Le=Be&m,ke=z|Le,Ne=z|T|E,Re=z|E|_,We=z|T|_,rt=z|P|_|S,Ze=z|y|T|E|L|Q,it=M|T|E,ct=b|z|O|w,nt=z|G|ge,$n=ne|ie,wn=ne|B,ef=ne|ie|z|B,ja=z|B|ne|fe,tf=ue|B,rf=B|K,nf=z|G|wn|ge,sf=ie|M|G|ge,of=X|z|U|ue,Hn=Symbol.asyncIterator||Symbol("asyncIterator");class Fa{constructor(N,{highWaterMark:Ee=16384,map:Pe=null,mapWritable:Me,byteLength:Ye,byteLengthWritable:Ke}={}){this.stream=N,this.queue=new u,this.highWaterMark=Ee,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Ke||Ye||Ka,this.map=Me||Pe,this.afterWrite=ff.bind(this),this.afterUpdateNextTick=gf.bind(this)}get ended(){return(this.stream._duplexState&ge)!==0}push(N){return this.map!==null&&(N=this.map(N)),this.buffered+=this.byteLength(N),this.queue.push(N),this.buffered<this.highWaterMark?(this.stream._duplexState|=ne,!0):(this.stream._duplexState|=$n,!1)}shift(){const N=this.queue.shift();return this.buffered-=this.byteLength(N),this.buffered===0&&(this.stream._duplexState&=Y),N}end(N){typeof N=="function"?this.stream.once("finish",N):N!=null&&this.push(N),this.stream._duplexState=(this.stream._duplexState|G)&H}autoBatch(N,Ee){const Pe=[],Me=this.stream;for(Pe.push(N);(Me._duplexState&ja)===wn;)Pe.push(Me._writableState.shift());if(Me._duplexState&z)return Ee(null);Me._writev(Pe,Ee)}update(){const N=this.stream;N._duplexState|=X;do{for(;(N._duplexState&ja)===ne;){const Ee=this.shift();N._duplexState|=rf,N._write(Ee,this.afterWrite)}N._duplexState&tf||this.updateNonPrimary()}while(this.continueUpdate()===!0);N._duplexState&=me}updateNonPrimary(){const N=this.stream;if((N._duplexState&nf)===G){N._duplexState=(N._duplexState|B)&te,N._final(hf.bind(this));return}if((N._duplexState&M)===c){N._duplexState&Be||(N._duplexState|=d,N._destroy(qa.bind(this)));return}(N._duplexState&ke)===l&&(N._duplexState=(N._duplexState|d)&f,N._open(Wa.bind(this)))}continueUpdate(){return this.stream._duplexState&U?(this.stream._duplexState&=ee,!0):!1}updateCallback(){(this.stream._duplexState&of)===ue?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&U||(this.stream._duplexState|=U,this.stream._duplexState&X||o(this.afterUpdateNextTick))}}class af{constructor(N,{highWaterMark:Ee=16384,map:Pe=null,mapReadable:Me,byteLength:Ye,byteLengthReadable:Ke}={}){this.stream=N,this.queue=new u,this.highWaterMark=Ee===0?1:Ee,this.buffered=0,this.readAhead=Ee>0,this.error=null,this.pipeline=null,this.byteLength=Ke||Ye||Ka,this.map=Me||Pe,this.pipeTo=null,this.afterRead=df.bind(this),this.afterUpdateNextTick=pf.bind(this)}get ended(){return(this.stream._duplexState&E)!==0}pipe(N,Ee){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof Ee!="function"&&(Ee=null),this.stream._duplexState|=I,this.pipeTo=N,this.pipeline=new uf(this.stream,N,Ee),Ee&&this.stream.on("error",Ya),vn(N))N._writableState.pipeline=this.pipeline,Ee&&N.on("error",Ya),N.on("finish",this.pipeline.finished.bind(this.pipeline));else{const Pe=this.pipeline.done.bind(this.pipeline,N),Me=this.pipeline.done.bind(this.pipeline,N,null);N.on("error",Pe),N.on("close",Me),N.on("finish",this.pipeline.finished.bind(this.pipeline))}N.on("drain",cf.bind(this)),this.stream.emit("piping",N),N.emit("pipe",this.stream)}push(N){const Ee=this.stream;return N===null?(this.highWaterMark=0,Ee._duplexState=(Ee._duplexState|T)&F,!1):this.map!==null&&(N=this.map(N),N===null)?(Ee._duplexState&=oe,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(N),this.queue.push(N),Ee._duplexState=(Ee._duplexState|_)&oe,this.buffered<this.highWaterMark)}shift(){const N=this.queue.shift();return this.buffered-=this.byteLength(N),this.buffered===0&&(this.stream._duplexState&=de),N}unshift(N){const Ee=[this.map!==null?this.map(N):N];for(;this.buffered>0;)Ee.push(this.shift());for(let Pe=0;Pe<Ee.length-1;Pe++){const Me=Ee[Pe];this.buffered+=this.byteLength(Me),this.queue.push(Me)}this.push(Ee[Ee.length-1])}read(){const N=this.stream;if((N._duplexState&Re)===_){const Ee=this.shift();return this.pipeTo!==null&&this.pipeTo.write(Ee)===!1&&(N._duplexState&=J),N._duplexState&k&&N.emit("data",Ee),Ee}return this.readAhead===!1&&(N._duplexState|=Q,this.updateNextTick()),null}drain(){const N=this.stream;for(;(N._duplexState&Re)===_&&N._duplexState&re;){const Ee=this.shift();this.pipeTo!==null&&this.pipeTo.write(Ee)===!1&&(N._duplexState&=J),N._duplexState&k&&N.emit("data",Ee)}}update(){const N=this.stream;N._duplexState|=b;do{for(this.drain();this.buffered<this.highWaterMark&&(N._duplexState&Ze)===Q;)N._duplexState|=v,N._read(this.afterRead),this.drain();(N._duplexState&rt)===$&&(N._duplexState|=S,N.emit("readable")),N._duplexState&W||this.updateNonPrimary()}while(this.continueUpdate()===!0);N._duplexState&=Se}updateNonPrimary(){const N=this.stream;if((N._duplexState&We)===T&&(N._duplexState=(N._duplexState|E)&A,N.emit("end"),(N._duplexState&he)===C&&(N._duplexState|=c),this.pipeTo!==null&&this.pipeTo.end()),(N._duplexState&M)===c){N._duplexState&Be||(N._duplexState|=d,N._destroy(qa.bind(this)));return}(N._duplexState&ke)===l&&(N._duplexState=(N._duplexState|d)&f,N._open(Wa.bind(this)))}continueUpdate(){return this.stream._duplexState&O?(this.stream._duplexState&=ae,!0):!1}updateCallback(){(this.stream._duplexState&ct)===w?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&O||(this.stream._duplexState|=O,this.stream._duplexState&b||o(this.afterUpdateNextTick))}}class lf{constructor(N){this.data=null,this.afterTransform=yf.bind(N),this.afterFinal=null}}class uf{constructor(N,Ee,Pe){this.from=N,this.to=Ee,this.afterPipe=Pe,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(N,Ee){if(Ee&&(this.error=Ee),N===this.to&&(this.to=null,this.from!==null)){(!(this.from._duplexState&E)||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(N===this.from&&(this.from=null,this.to!==null)){N._duplexState&E||this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}}function cf(){this.stream._duplexState|=I,this.updateCallback()}function hf(Te){const N=this.stream;Te&&N.destroy(Te),N._duplexState&M||(N._duplexState|=ge,N.emit("finish")),(N._duplexState&he)===C&&(N._duplexState|=c),N._duplexState&=ce,N._duplexState&X?this.updateNextTick():this.update()}function qa(Te){const N=this.stream;!Te&&this.error!==r&&(Te=this.error),Te&&N.emit("error",Te),N._duplexState|=h,N.emit("close");const Ee=N._readableState,Pe=N._writableState;if(Ee!==null&&Ee.pipeline!==null&&Ee.pipeline.done(N,Te),Pe!==null){for(;Pe.drains!==null&&Pe.drains.length>0;)Pe.drains.shift().resolve(!1);Pe.pipeline!==null&&Pe.pipeline.done(N,Te)}}function ff(Te){const N=this.stream;Te&&N.destroy(Te),N._duplexState&=ce,this.drains!==null&&mf(this.drains),(N._duplexState&ef)===ie&&(N._duplexState&=j,(N._duplexState&pe)===pe&&N.emit("drain")),this.updateCallback()}function df(Te){Te&&this.stream.destroy(Te),this.stream._duplexState&=Z,this.readAhead===!1&&!(this.stream._duplexState&R)&&(this.stream._duplexState&=le),this.updateCallback()}function pf(){this.stream._duplexState&b||(this.stream._duplexState&=ae,this.update())}function gf(){this.stream._duplexState&X||(this.stream._duplexState&=ee,this.update())}function mf(Te){for(let N=0;N<Te.length;N++)--Te[N].writes===0&&(Te.shift().resolve(!0),N--)}function Wa(Te){const N=this.stream;Te&&N.destroy(Te),N._duplexState&c||(N._duplexState&Ne||(N._duplexState|=w),N._duplexState&nt||(N._duplexState|=ue),N.emit("open")),N._duplexState&=m,N._writableState!==null&&N._writableState.updateCallback(),N._readableState!==null&&N._readableState.updateCallback()}function yf(Te,N){N!=null&&this.push(N),this._writableState.afterWrite(Te)}function bf(Te){this._readableState!==null&&(Te==="data"&&(this._duplexState|=k|q,this._readableState.updateNextTick()),Te==="readable"&&(this._duplexState|=P,this._readableState.updateNextTick())),this._writableState!==null&&Te==="drain"&&(this._duplexState|=pe,this._writableState.updateNextTick())}class Vi extends e{constructor(N){super(),this._duplexState=0,this._readableState=null,this._writableState=null,N&&(N.open&&(this._open=N.open),N.destroy&&(this._destroy=N.destroy),N.predestroy&&(this._predestroy=N.predestroy),N.signal&&N.signal.addEventListener("abort",Cf.bind(this))),this.on("newListener",bf)}_open(N){N(null)}_destroy(N){N(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&h)!==0}get destroying(){return(this._duplexState&M)!==0}destroy(N){this._duplexState&M||(N||(N=r),this._duplexState=(this._duplexState|c)&Ce,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=N),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=N),this._duplexState|=a,this._predestroy(),this._duplexState&=g,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class _n extends Vi{constructor(N){super(N),this._duplexState|=l|ge|Q,this._readableState=new af(this,N),N&&(this._readableState.readAhead===!1&&(this._duplexState&=le),N.read&&(this._read=N.read),N.eagerOpen&&this._readableState.updateNextTick(),N.encoding&&this.setEncoding(N.encoding))}setEncoding(N){const Ee=new n(N),Pe=this._readableState.map||Ef;return this._readableState.map=Me,this;function Me(Ye){const Ke=Ee.push(Ye);return Ke===""&&(Ye.byteLength!==0||Ee.remaining>0)?null:Pe(Ke)}}_read(N){N(null)}pipe(N,Ee){return this._readableState.updateNextTick(),this._readableState.pipe(N,Ee),N}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(N){return this._readableState.updateNextTick(),this._readableState.push(N)}unshift(N){return this._readableState.updateNextTick(),this._readableState.unshift(N)}resume(){return this._duplexState|=q,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?D:se,this}static _fromAsyncIterator(N,Ee){let Pe;const Me=new _n({...Ee,read(Ke){N.next().then(Ye).then(Ke.bind(null,null)).catch(Ke)},predestroy(){Pe=N.return()},destroy(Ke){if(!Pe)return Ke(null);Pe.then(Ke.bind(null,null)).catch(Ke)}});return Me;function Ye(Ke){Ke.done?Me.push(null):Me.push(Ke.value)}}static from(N,Ee){if(If(N))return N;if(N[Hn])return this._fromAsyncIterator(N[Hn](),Ee);Array.isArray(N)||(N=N===void 0?[]:[N]);let Pe=0;return new _n({...Ee,read(Me){this.push(Pe===N.length?null:N[Pe++]),Me(null)}})}static isBackpressured(N){return(N._duplexState&it)!==0||N._readableState.buffered>=N._readableState.highWaterMark}static isPaused(N){return(N._duplexState&R)===0}[Hn](){const N=this;let Ee=null,Pe=null,Me=null;return this.on("error",Fe=>{Ee=Fe}),this.on("readable",Ye),this.on("close",Ke),{[Hn](){return this},next(){return new Promise(function(Fe,Nt){Pe=Fe,Me=Nt;const fr=N.read();fr!==null?Jr(fr):N._duplexState&h&&Jr(null)})},return(){return En(null)},throw(Fe){return En(Fe)}};function Ye(){Pe!==null&&Jr(N.read())}function Ke(){Pe!==null&&Jr(null)}function Jr(Fe){Me!==null&&(Ee?Me(Ee):Fe===null&&!(N._duplexState&E)?Me(r):Pe({value:Fe,done:Fe===null}),Me=Pe=null)}function En(Fe){return N.destroy(Fe),new Promise((Nt,fr)=>{if(N._duplexState&h)return Nt({value:void 0,done:!0});N.once("close",function(){Fe?fr(Fe):Nt({value:void 0,done:!0})})})}}}class $a extends Vi{constructor(N){super(N),this._duplexState|=l|E,this._writableState=new Fa(this,N),N&&(N.writev&&(this._writev=N.writev),N.write&&(this._write=N.write),N.final&&(this._final=N.final),N.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=fe}uncork(){this._duplexState&=p,this._writableState.updateNextTick()}_writev(N,Ee){Ee(null)}_write(N,Ee){this._writableState.autoBatch(N,Ee)}_final(N){N(null)}static isBackpressured(N){return(N._duplexState&sf)!==0}static drained(N){if(N.destroyed)return Promise.resolve(!1);const Ee=N._writableState,Me=(Rf(N)?Math.min(1,Ee.queue.length):Ee.queue.length)+(N._duplexState&K?1:0);return Me===0?Promise.resolve(!0):(Ee.drains===null&&(Ee.drains=[]),new Promise(Ye=>{Ee.drains.push({writes:Me,resolve:Ye})}))}write(N){return this._writableState.updateNextTick(),this._writableState.push(N)}end(N){return this._writableState.updateNextTick(),this._writableState.end(N),this}}class Ki extends _n{constructor(N){super(N),this._duplexState=l|this._duplexState&Q,this._writableState=new Fa(this,N),N&&(N.writev&&(this._writev=N.writev),N.write&&(this._write=N.write),N.final&&(this._final=N.final))}cork(){this._duplexState|=fe}uncork(){this._duplexState&=p,this._writableState.updateNextTick()}_writev(N,Ee){Ee(null)}_write(N,Ee){this._writableState.autoBatch(N,Ee)}_final(N){N(null)}write(N){return this._writableState.updateNextTick(),this._writableState.push(N)}end(N){return this._writableState.updateNextTick(),this._writableState.end(N),this}}class Ha extends Ki{constructor(N){super(N),this._transformState=new lf(this),N&&(N.transform&&(this._transform=N.transform),N.flush&&(this._flush=N.flush))}_write(N,Ee){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=N:this._transform(N,this._transformState.afterTransform)}_read(N){if(this._transformState.data!==null){const Ee=this._transformState.data;this._transformState.data=null,N(null),this._transform(Ee,this._transformState.afterTransform)}else N(null)}destroy(N){super.destroy(N),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(N,Ee){Ee(null,N)}_flush(N){N(null)}_final(N){this._transformState.afterFinal=N,this._flush(_f.bind(this))}}class wf extends Ha{}function _f(Te,N){const Ee=this._transformState.afterFinal;if(Te)return Ee(Te);N!=null&&this.push(N),this.push(null),Ee(null)}function vf(...Te){return new Promise((N,Ee)=>za(...Te,Pe=>{if(Pe)return Ee(Pe);N()}))}function za(Te,...N){const Ee=Array.isArray(Te)?[...Te,...N]:[Te,...N],Pe=Ee.length&&typeof Ee[Ee.length-1]=="function"?Ee.pop():null;if(Ee.length<2)throw new Error("Pipeline requires at least 2 streams");let Me=Ee[0],Ye=null,Ke=null;for(let Fe=1;Fe<Ee.length;Fe++)Ye=Ee[Fe],vn(Me)?Me.pipe(Ye,En):(Jr(Me,!0,Fe>1,En),Me.pipe(Ye)),Me=Ye;if(Pe){let Fe=!1;const Nt=vn(Ye)||!!(Ye._writableState&&Ye._writableState.autoDestroy);Ye.on("error",fr=>{Ke===null&&(Ke=fr)}),Ye.on("finish",()=>{Fe=!0,Nt||Pe(Ke)}),Nt&&Ye.on("close",()=>Pe(Ke||(Fe?null:t)))}return Ye;function Jr(Fe,Nt,fr,Yi){Fe.on("error",Yi),Fe.on("close",xf);function xf(){if(Fe._readableState&&!Fe._readableState.ended||fr&&Fe._writableState&&!Fe._writableState.ended)return Yi(t)}}function En(Fe){if(!(!Fe||Ke)){Ke=Fe;for(const Nt of Ee)Nt.destroy(Fe)}}}function Ef(Te){return Te}function Va(Te){return!!Te._readableState||!!Te._writableState}function vn(Te){return typeof Te._duplexState=="number"&&Va(Te)}function Sf(Te){return!!Te._readableState&&Te._readableState.ended}function Af(Te){return!!Te._writableState&&Te._writableState.ended}function Tf(Te,N={}){const Ee=Te._readableState&&Te._readableState.error||Te._writableState&&Te._writableState.error;return!N.all&&Ee===r?null:Ee}function If(Te){return vn(Te)&&Te.readable}function kf(Te){return typeof Te=="object"&&Te!==null&&typeof Te.byteLength=="number"}function Ka(Te){return kf(Te)?Te.byteLength:1024}function Ya(){}function Cf(){this.destroy(new Error("Stream aborted."))}function Rf(Te){return Te._writev!==$a.prototype._writev&&Te._writev!==Ki.prototype._writev}return hs={pipeline:za,pipelinePromise:vf,isStream:Va,isStreamx:vn,isEnded:Sf,isFinished:Af,getStreamError:Tf,Stream:Vi,Writable:$a,Readable:_n,Duplex:Ki,Transform:Ha,PassThrough:wf},hs}var Xd=Zd(),fs,El;function ep(){if(El)return fs;El=1;function e(t,o){for(const u in o)Object.defineProperty(t,u,{value:o[u],enumerable:!0,configurable:!0});return t}function r(t,o,u){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof o=="object"&&(u=o,o=""),o&&(u.code=o);try{return e(t,u)}catch{u.message=t.message,u.stack=t.stack;const s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(t)),e(new s,u)}}return fs=r,fs}var tp=ep(),De=Ku(tp);/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const Sl="0123456789abcdef",Yu=[];for(let e=0;e<256;e++)Yu[e]=Sl[e>>4&15]+Sl[e&15];const Al=e=>{const r=e.length;let t="",o=0;for(;o<r;)t+=Yu[e[o++]];return t};var Tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qn=0;Qn<Tl.length;Qn++)rp[Tl.charCodeAt(Qn)]=Qn;new TextDecoder;const np=new TextEncoder,ip=e=>np.encode(e),Il=typeof window<"u"?window:self,Ds=Il.crypto||Il.msCrypto||{};Ds.subtle||Ds.webkitSubtle;const kl=e=>{const r=new Uint8Array(e);return Ds.getRandomValues(r)};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const sp=Hd("simple-peer"),ds=64*1024,op=5*1e3,ap=5*1e3;function Cl(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function lp(e){console.warn(e)}let Mi=class js extends Xd.Duplex{constructor(t){t=Object.assign({allowHalfOpen:!1},t);super(t);Ue(this,"_pc");if(this.__objectMode=!!t.objectMode,this._id=Al(kl(4)).slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||Al(kl(20)):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||js.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},js.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(o=>o),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||op,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!Us)throw De(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new Us(this.config)}catch(o){this.__destroy(De(o,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=o=>{this._onIceCandidate(o)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(o=>{this.__destroy(De(o,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=o=>{this._setupData(o)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new zd(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(o=>{this._addIceCandidate(o)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(o=>{this.__destroy(De(o,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.__destroy(De(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const o=new Vd(t);this._pc.addIceCandidate(o).catch(u=>{!o.address||o.address.endsWith(".local")?lp("Ignoring unsupported ICE candidate."):this.__destroy(De(u,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}_final(t){this._readableState.ended||this.push(null),t(null)}__destroy(t){this.end(),this._destroy(()=>{},t)}_destroy(t,o){this.destroyed||this._destroying||(this._destroying=!0,this._debug("destroying (error: %s)",o&&(o.message||o)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,o&&this.emit("error",o),t()},0))}_setupData(t){if(!t.channel)return this.__destroy(De(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=ds),this.channelName=this._channel.label,this._channel.onmessage=u=>{this._onChannelMessage(u)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=u=>{const n=u.error instanceof Error?u.error:new Error(`Datachannel error: ${u.message} ${u.filename}:${u.lineno}:${u.colno}`);this.__destroy(De(n,"ERR_DATA_CHANNEL"))};let o=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(o&&this._onChannelClose(),o=!0):o=!1},ap)}_write(t,o){if(this.destroyed)return o(De(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(u){return this.__destroy(De(u,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>ds?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=o):o(null)}else this._debug("write before connect"),this._chunk=t,this._cb=o}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.__destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=Cl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const o=()=>{if(this.destroyed)return;const s=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp})},u=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},n=s=>{this.__destroy(De(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(u).catch(n)}).catch(t=>{this.__destroy(De(t,"ERR_CREATE_OFFER"))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=Cl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const o=()=>{var l;if(this.destroyed)return;const s=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp}),this.initiator||(l=this._requestMissingTransceivers)==null||l.call(this)},u=()=>{this.destroyed||(this.trickle||this._iceComplete?o():this.once("_iceComplete",o))},n=s=>{this.__destroy(De(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(u).catch(n)}).catch(t=>{this.__destroy(De(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._destroying||this._pc.connectionState==="failed"&&this.__destroy(De(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,o=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,o),this.emit("iceStateChange",t,o),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.__destroy(De(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.__destroy(De(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const o=u=>(Object.prototype.toString.call(u.values)==="[object Array]"&&u.values.forEach(n=>{Object.assign(u,n)}),u);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(u=>{const n=[];u.forEach(s=>{n.push(o(s))}),t(null,n)},u=>t(u)):this._pc.getStats.length>0?this._pc.getStats(u=>{if(this.destroyed)return;const n=[];u.result().forEach(s=>{const l={};s.names().forEach(a=>{l[a]=s.stat(a)}),l.id=s.id,l.type=s.type,l.timestamp=s.timestamp,n.push(o(l))}),t(null,n)},u=>t(u)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this._destroying||this.getStats((o,u)=>{if(this.destroyed||this._destroying)return;o&&(u=[]);const n={},s={},l={};let a=!1;u.forEach(h=>{(h.type==="remotecandidate"||h.type==="remote-candidate")&&(n[h.id]=h),(h.type==="localcandidate"||h.type==="local-candidate")&&(s[h.id]=h),(h.type==="candidatepair"||h.type==="candidate-pair")&&(l[h.id]=h)});const c=h=>{a=!0;let f=s[h.localCandidateId];f&&(f.ip||f.address)?(this.localAddress=f.ip||f.address,this.localPort=Number(f.port)):f&&f.ipAddress?(this.localAddress=f.ipAddress,this.localPort=Number(f.portNumber)):typeof h.googLocalAddress=="string"&&(f=h.googLocalAddress.split(":"),this.localAddress=f[0],this.localPort=Number(f[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let g=n[h.remoteCandidateId];g&&(g.ip||g.address)?(this.remoteAddress=g.ip||g.address,this.remotePort=Number(g.port)):g&&g.ipAddress?(this.remoteAddress=g.ipAddress,this.remotePort=Number(g.portNumber)):typeof h.googRemoteAddress=="string"&&(g=h.googRemoteAddress.split(":"),this.remoteAddress=g[0],this.remotePort=Number(g[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(u.forEach(h=>{h.type==="transport"&&h.selectedCandidatePairId&&c(l[h.selectedCandidatePairId]),(h.type==="googCandidatePair"&&h.googActiveConnection==="true"||(h.type==="candidatepair"||h.type==="candidate-pair")&&h.selected)&&c(h)}),!a&&(!Object.keys(l).length||Object.keys(s).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(f){return this.__destroy(De(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const h=this._cb;this._cb=null,h(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>ds||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let o=t.data;o instanceof ArrayBuffer?o=new Uint8Array(o):this.__objectMode===!1&&(o=ip(o)),this.push(o)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.__destroy())}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],sp.apply(null,t)}};Mi.WEBRTC_SUPPORT=!!Us;Mi.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Mi.channelConfig={};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */class up extends Mi{constructor(r={}){super(r),this._pc&&(this.streams=r.streams||(r.stream?[r.stream]:[]),this._senderMap=new Map,this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)})}addTransceiver(r,t){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(r,t),this._needsNegotiation()}catch(o){this.__destroy(De(o,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:r,init:t}})}}addStream(r){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),r.getTracks().forEach(t=>{this.addTrack(t,r)})}}addTrack(r,t){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const o=this._senderMap.get(r)||new Map;let u=o.get(t);if(!u)u=this._pc.addTrack(r,t),o.set(t,u),this._senderMap.set(r,o),this._needsNegotiation();else throw u.removed?De(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):De(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(r,t,o){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const u=this._senderMap.get(r),n=u?u.get(o):null;if(!n)throw De(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,u),n.replaceTrack!=null?n.replaceTrack(t):this.__destroy(De(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(r,t){if(this._destroying)return;if(this.destroyed)throw De(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const o=this._senderMap.get(r),u=o?o.get(t):null;if(!u)throw De(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{u.removed=!0,this._pc.removeTrack(u)}catch(n){n.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(u):this.__destroy(De(n,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(r){if(!this._destroying){if(this.destroyed)throw De(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),r.getTracks().forEach(t=>{this.removeTrack(t,r)})}}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(r=>{!r.mid&&r.sender.track&&!r.requested&&(r.requested=!0,this.addTransceiver(r.sender.track.kind))})}_onTrack(r){this.destroyed||r.streams.forEach(t=>{this._debug("on track"),this.emit("track",r.track,t),this._remoteTracks.push({track:r.track,stream:t}),!this._remoteStreams.some(o=>o.id===t.id)&&(this._remoteStreams.push(t),queueMicrotask(()=>{this._debug("on stream"),this.emit("stream",t)}))})}}const Rl="data",xl="signal";var Ol=(e,r)=>{const t=new up({iceServers:[{urls:cp}],...r,initiator:e,trickle:!1}),o=n=>u.push(n);let u=[];return t.on(Rl,o),{id:t._id,created:Date.now(),connection:t._pc,get channel(){return t._channel},get isDead(){return t.destroyed},signal:n=>new Promise(s=>{e||t.on(xl,s),t.signal(n)}),sendData:n=>t.send(n),destroy:()=>t.destroy(),setHandlers:n=>Object.entries(n).forEach(([s,l])=>t.on(s,l)),offerPromise:e?new Promise(n=>t.on(xl,n)):Promise.resolve(),addStream:n=>t.addStream(n),removeStream:n=>t.removeStream(n),addTrack:(n,s)=>t.addTrack(n,s),removeTrack:(n,s)=>t.removeTrack(n,s),replaceTrack:(n,s,l)=>t.replaceTrack(n,s,l),drainEarlyData:n=>{t.off(Rl,o),u.forEach(n),u=null}}};const cp=[...Un(5,(e,r)=>`stun:stun${r||""}.l.google.com:19302`),"stun:global.stun.twilio.com:3478"],hp=Object.getPrototypeOf(Uint8Array),si=12,Gu=0,oi=Gu+si,ai=oi+1,kn=ai+1,Cn=kn+1,Er=16*2**10-Cn,Jn=255,Pl="bufferedamountlow",en=e=>"@_"+e;var fp=(e,r,t)=>{const o={},u={},n={},s={},l={},a={},c={},h={onPeerJoin:xr,onPeerLeave:xr,onPeerStream:xr,onPeerTrack:xr},f=(v,W)=>(v?Array.isArray(v)?v:[v]:Od(o)).flatMap($=>{const q=o[$];return q?W($,q):(console.warn(`${Mn}: no peer with id ${$} found`),[])}),g=v=>{o[v]&&(delete o[v],delete s[v],delete l[v],h.onPeerLeave(v),r(v))},y=v=>{if(u[v])return n[v];if(!v)throw Qt("action type argument is required");const W=qr(v);if(W.byteLength>si)throw Qt(`action type string "${v}" (${W.byteLength}b) exceeds byte limit (${si}). Hint: choose a shorter name.`);const $=new Uint8Array(si);$.set(W);let q=0;return u[v]={onComplete:xr,onProgress:xr,setOnComplete:Z=>u[v]={...u[v],onComplete:Z},setOnProgress:Z=>u[v]={...u[v],onProgress:Z},send:async(Z,V,F,oe)=>{if(F&&typeof F!="object")throw Qt("action meta argument must be an object");const se=typeof Z;if(se==="undefined")throw Qt("action data cannot be undefined");const de=se!=="string",A=Z instanceof Blob,J=A||Z instanceof ArrayBuffer||Z instanceof hp;if(F&&!J)throw Qt("action meta argument can only be used with binary data");const ae=J?new Uint8Array(A?await Z.arrayBuffer():Z):qr(de?Wt(Z):Z),Se=F?qr(Wt(F)):null,le=Math.ceil(ae.byteLength/Er)+(F?1:0)||1,D=Un(le,(B,X)=>{const ue=X===le-1,ne=F&&X===0,ie=new Uint8Array(Cn+(ne?Se.byteLength:ue?ae.byteLength-Er*(le-(F?2:1)):Er));return ie.set($),ie.set([q],oi),ie.set([ue|ne<<1|J<<2|de<<3],ai),ie.set([Math.round((X+1)/le*Jn)],kn),ie.set(F?ne?Se:ae.subarray((X-1)*Er,X*Er):ae.subarray(X*Er,(X+1)*Er),Cn),ie});return q=q+1&Jn,nn(f(V,async(B,X)=>{const{channel:ue}=X;let ne=0;for(;ne<le;){const ie=D[ne];if(ue.bufferedAmount>ue.bufferedAmountLowThreshold&&await new Promise(ge=>{const pe=()=>{ue.removeEventListener(Pl,pe),ge()};ue.addEventListener(Pl,pe)}),!o[B])break;X.sendData(ie),ne++,oe==null||oe(ie[kn]/Jn,B,F)}}))}},n[v]||(n[v]=[u[v].send,u[v].setOnComplete,u[v].setOnProgress])},b=(v,W)=>{var le,D;const $=new Uint8Array(W),q=ii($.subarray(Gu,oi)).replaceAll("\0",""),[Z]=$.subarray(oi,ai),[V]=$.subarray(ai,kn),[F]=$.subarray(kn,Cn),oe=$.subarray(Cn),se=!!(V&1),de=!!(V&2),A=!!(V&4),J=!!(V&8);if(!u[q]){console.warn(`${Mn}: received message with unregistered type (${q})`);return}s[v]||(s[v]={}),(le=s[v])[q]||(le[q]={});const ae=(D=s[v][q])[Z]||(D[Z]={chunks:[]});if(de?ae.meta=Ii(ii(oe)):ae.chunks.push(oe),u[q].onProgress(F/Jn,v,ae.meta),!se)return;const Se=new Uint8Array(ae.chunks.reduce((B,X)=>B+X.byteLength,0));if(ae.chunks.reduce((B,X)=>(Se.set(X,B),B+X.byteLength),0),delete s[v][q][Z],A)u[q].onComplete(Se,v,ae.meta);else{const B=ii(Se);u[q].onComplete(J?Ii(B):B,v)}},w=async()=>{await Q(""),await new Promise(v=>setTimeout(v,99)),ul(o).forEach(([v,W])=>{W.destroy(),delete o[v]}),t()},[_,R]=y(en("ping")),[I,T]=y(en("pong")),[k,P]=y(en("signal")),[S,E]=y(en("stream")),[O,L]=y(en("track")),[Q,re]=y(en("leave"));return e((v,W)=>{var $;o[W]||(o[W]=v,v.setHandlers({data:q=>b(W,q),stream:q=>{h.onPeerStream(q,W,a[W]),delete a[W]},track:(q,Z)=>{h.onPeerTrack(q,Z,W,c[W]),delete c[W]},signal:q=>k(q,W),close:()=>g(W),error:()=>g(W)}),h.onPeerJoin(W),($=v.drainEarlyData)==null||$.call(v,q=>b(W,q)))}),R((v,W)=>I("",W)),T((v,W)=>{var $;($=l[W])==null||$.call(l),delete l[W]}),P((v,W)=>{var $;return($=o[W])==null?void 0:$.signal(v)}),E((v,W)=>a[W]=v),L((v,W)=>c[W]=v),re((v,W)=>g(W)),Ea&&addEventListener("beforeunload",w),{makeAction:y,leave:w,ping:async v=>{if(!v)throw Qt("ping() must be called with target peer ID");const W=Date.now();return _("",v),await new Promise($=>l[v]=$),Date.now()-W},getPeers:()=>xd(ul(o).map(([v,W])=>[v,W.connection])),addStream:(v,W,$)=>f(W,async(q,Z)=>{$&&await S($,q),Z.addStream(v)}),removeStream:(v,W)=>f(W,($,q)=>q.removeStream(v)),addTrack:(v,W,$,q)=>f($,async(Z,V)=>{q&&await O(q,Z),V.addTrack(v,W)}),removeTrack:(v,W,$)=>f($,(q,Z)=>Z.removeTrack(v,W)),replaceTrack:(v,W,$,q,Z)=>f(q,async(V,F)=>{Z&&await O(Z,V),F.replaceTrack(v,W,$)}),onPeerJoin:v=>h.onPeerJoin=v,onPeerLeave:v=>h.onPeerLeave=v,onPeerStream:v=>h.onPeerStream=v,onPeerTrack:v=>h.onPeerTrack=v}};const dp=20,pp=5333,Bl=57333;var Qu=({init:e,subscribe:r,announce:t})=>{const o={};let u=!1,n,s,l;return(a,c,h)=>{var Z;const{appId:f}=a;if((Z=o[f])!=null&&Z[c])return o[f][c];const g={},y={},b=Vn(Mn,f,c),w=Kn(b),_=Kn(Vn(b,jt)),R=Ud(a.password||"",f,c),I=V=>async F=>({type:F.type,sdp:await V(R,F.sdp)}),T=I(jd),k=I(Dd),P=()=>Ol(!0,a.rtcConfig),S=(V,F,oe)=>{var se;if(y[F]){y[F]!==V&&V.destroy();return}y[F]=V,q(V,F),(se=g[F])==null||se.forEach((de,A)=>{A!==oe&&de.destroy()}),delete g[F]},E=(V,F)=>{y[F]===V&&delete y[F]},O=(V,F)=>{var se;if(y[V])return;const oe=(se=g[V])==null?void 0:se[F];oe&&(delete g[V][F],oe.destroy())},L=V=>(s.push(...Un(V,P)),nn(s.splice(0,V).map(F=>F.offerPromise.then(k).then(oe=>({peer:F,offer:oe}))))),Q=(V,F)=>h==null?void 0:h({error:`incorrect password (${a.password}) when decrypting ${F}`,appId:f,peerId:V,roomId:c}),re=V=>async(F,oe,se)=>{var D,B,X;const[de,A]=await nn([w,_]);if(F!==de&&F!==A)return;const{peerId:J,offer:ae,answer:Se,peer:le}=typeof oe=="string"?Ii(oe):oe;if(!(J===jt||y[J])){if(J&&!ae&&!Se){if((D=g[J])!=null&&D[V])return;const[[{peer:ue,offer:ne}],ie]=await nn([L(1),Kn(Vn(b,J))]);g[J]||(g[J]=[]),g[J][V]=ue,setTimeout(()=>O(J,V),v[V]*.9),ue.setHandlers({connect:()=>S(ue,J,V),close:()=>E(ue,J)}),se(ie,Wt({peerId:jt,offer:ne}))}else if(ae){if(((B=g[J])==null?void 0:B[V])&&jt>J)return;const ne=Ol(!1,a.rtcConfig);ne.setHandlers({connect:()=>S(ne,J,V),close:()=>E(ne,J)});let ie;try{ie=await T(ae)}catch{Q(J,"offer");return}if(ne.isDead)return;const[ge,pe]=await nn([Kn(Vn(b,J)),ne.signal(ie)]);se(ge,Wt({peerId:jt,answer:await k(pe)}))}else if(Se){let ue;try{ue=await T(Se)}catch{Q(J,"answer");return}if(le)le.setHandlers({connect:()=>S(le,J,V),close:()=>E(le,J)}),le.signal(ue);else{const ne=(X=g[J])==null?void 0:X[V];ne&&!ne.isDead&&ne.signal(ue)}}}};if(!a)throw Qt("requires a config map as the first argument");if(!f&&!a.firebaseApp)throw Qt("config map is missing appId field");if(!c)throw Qt("roomId argument required");if(!u){const V=e(a);s=Un(dp,P),n=Array.isArray(V)?V:[V],u=!0,l=setInterval(()=>s=s.filter(F=>{const oe=Date.now()-F.created<Bl;return oe||F.destroy(),oe}),Bl*1.03)}const v=n.map(()=>pp),W=[],$=n.map(async(V,F)=>r(await V,await w,await _,re(F),L));nn([w,_]).then(([V,F])=>{const oe=async(se,de)=>{const A=await t(se,V,F);typeof A=="number"&&(v[de]=A),W[de]=setTimeout(()=>oe(se,de),v[de])};$.forEach(async(se,de)=>{await se,oe(await n[de],de)})});let q=xr;return o[f]||(o[f]={}),o[f][c]=fp(V=>q=V,V=>delete y[V],()=>{delete o[f][c],W.forEach(clearTimeout),$.forEach(async V=>(await V)()),clearInterval(l)})}};const gp=5,Ju=29333,Zu="x",Xu="EVENT",ec=Ea&&va.utils.randomPrivateKey(),mp=Ea&&Ms(va.getPublicKey(ec)),Aa={},Sr={},tc=()=>Math.floor(Date.now()/1e3),Nl=async(e,r)=>{const t={kind:Ju,content:r,pubkey:mp,created_at:tc(),tags:[[Zu,e]]},o=Ms(new Uint8Array(await crypto.subtle.digest("SHA-256",qr(Wt([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])))));return Wt([Xu,{...t,id:o,sig:Ms(await va.sign(o,ec))}])},Ll=(e,r)=>(Aa[e]=r,Wt(["REQ",e,{kinds:[Ju],since:tc(),["#"+Zu]:[r]}])),Ml=e=>(delete Aa[e],Wt(["CLOSE",e])),Ul=Qu({init:e=>Hu(e,yp,gp).map(r=>{const t=Nd(r,o=>{var a;const[u,n,s,l]=Ii(o);if(u!==Xu){const c=`${Mn}: relay failure from ${t.url} - `;u==="NOTICE"?console.warn(c+n):u==="OK"&&!s&&console.warn(c+l);return}(a=Sr[n])==null||a.call(Sr,Aa[n],s.content)});return t.ready}),subscribe:(e,r,t,o)=>{const u=Ls(64),n=Ls(64);return Sr[u]=Sr[n]=(s,l)=>o(s,l,async(a,c)=>e.send(await Nl(a,c))),e.send(Ll(u,r)),e.send(Ll(n,t)),()=>{e.send(Ml(u)),e.send(Ml(n)),delete Sr[u],delete Sr[n]}},announce:async(e,r)=>e.send(await Nl(r,Wt({peerId:jt})))}),yp=["relay.nostr.net","relay.snort.social","relay.piazza.today","relay.exit.pub","nostr.lu.ke","nostr.mom","relay.urbanzap.space","nostr.data.haus","nostr.sathoarder.com","relay.nostromo.social","relay.nostr.bg","nostr.stakey.net","nostr.vulpem.com","a.nos.lol","eu.purplerelay.com","nostr2.sanhauf.com","e.nos.lol"].map(e=>"wss://"+e);var Ta=Object.defineProperty,bp=Object.getOwnPropertyDescriptor,wp=Object.getOwnPropertyNames,_p=Object.prototype.hasOwnProperty,ft=(e,r)=>()=>(e&&(r=e(e=0)),r),ve=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Kr=(e,r)=>{for(var t in r)Ta(e,t,{get:r[t],enumerable:!0})},vp=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of wp(r))!_p.call(e,u)&&u!==t&&Ta(e,u,{get:()=>r[u],enumerable:!(o=bp(r,u))||o.enumerable});return e},Ve=e=>vp(Ta({},"__esModule",{value:!0}),e),ye=ft(()=>{}),qe={};Kr(qe,{_debugEnd:()=>wo,_debugProcess:()=>bo,_events:()=>No,_eventsCount:()=>Lo,_exiting:()=>no,_fatalExceptions:()=>go,_getActiveHandles:()=>lc,_getActiveRequests:()=>ac,_kill:()=>oo,_linkedBinding:()=>sc,_maxListeners:()=>Bo,_preload_modules:()=>Oo,_rawDebug:()=>eo,_startProfilerIdleNotifier:()=>_o,_stopProfilerIdleNotifier:()=>vo,_tickCallback:()=>yo,abort:()=>To,addListener:()=>Mo,allowedNodeEnvironmentFlags:()=>fo,arch:()=>qs,argv:()=>Hs,argv0:()=>xo,assert:()=>uc,binding:()=>Gs,chdir:()=>Zs,config:()=>io,cpuUsage:()=>Rn,cwd:()=>Js,debugPort:()=>Ro,default:()=>ka,dlopen:()=>oc,domain:()=>ro,emit:()=>qo,emitWarning:()=>Ys,env:()=>$s,execArgv:()=>zs,execPath:()=>Co,exit:()=>co,features:()=>po,hasUncaughtExceptionCaptureCallback:()=>cc,hrtime:()=>li,kill:()=>uo,listeners:()=>fc,memoryUsage:()=>lo,moduleLoadList:()=>to,nextTick:()=>nc,off:()=>Do,on:()=>zt,once:()=>Uo,openStdin:()=>ho,pid:()=>Io,platform:()=>Ws,ppid:()=>ko,prependListener:()=>Wo,prependOnceListener:()=>$o,reallyExit:()=>so,release:()=>Xs,removeAllListeners:()=>Fo,removeListener:()=>jo,resourceUsage:()=>ao,setSourceMapsEnabled:()=>Po,setUncaughtExceptionCaptureCallback:()=>mo,stderr:()=>So,stdin:()=>Ao,stdout:()=>Eo,title:()=>Fs,umask:()=>Qs,uptime:()=>hc,version:()=>Vs,versions:()=>Ks});function Ia(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Ep(){!Wr||!Nr||(Wr=!1,Nr.length?Ft=Nr.concat(Ft):Pn=-1,Ft.length&&rc())}function rc(){if(!Wr){var e=setTimeout(Ep,0);Wr=!0;for(var r=Ft.length;r;){for(Nr=Ft,Ft=[];++Pn<r;)Nr&&Nr[Pn].run();Pn=-1,r=Ft.length}Nr=null,Wr=!1,clearTimeout(e)}}function nc(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];Ft.push(new ic(e,r)),Ft.length===1&&!Wr&&setTimeout(rc,0)}function ic(e,r){this.fun=e,this.array=r}function gt(){}function sc(e){Ia("_linkedBinding")}function oc(e){Ia("dlopen")}function ac(){return[]}function lc(){return[]}function uc(e,r){if(!e)throw new Error(r||"assertion error")}function cc(){return!1}function hc(){return Jt.now()/1e3}function li(e){var r=Math.floor((Date.now()-Jt.now())*.001),t=Jt.now()*.001,o=Math.floor(t)+r,u=Math.floor(t%1*1e9);return e&&(o=o-e[0],u=u-e[1],u<0&&(o--,u+=ui)),[o,u]}function zt(){return ka}function fc(e){return[]}var Ft,Wr,Nr,Pn,Fs,qs,Ws,$s,Hs,zs,Vs,Ks,Ys,Gs,Qs,Js,Zs,Xs,eo,to,ro,no,io,so,oo,Rn,ao,lo,uo,co,ho,fo,po,go,mo,yo,bo,wo,_o,vo,Eo,So,Ao,To,Io,ko,Co,Ro,xo,Oo,Po,Jt,ps,ui,Bo,No,Lo,Mo,Uo,Do,jo,Fo,qo,Wo,$o,ka,Sp=ft(()=>{ye(),we(),be(),Ft=[],Wr=!1,Pn=-1,ic.prototype.run=function(){this.fun.apply(null,this.array)},Fs="browser",qs="x64",Ws="browser",$s={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Hs=["/usr/bin/node"],zs=[],Vs="v16.8.0",Ks={},Ys=function(e,r){console.warn((r?r+": ":"")+e)},Gs=function(e){Ia("binding")},Qs=function(e){return 0},Js=function(){return"/"},Zs=function(e){},Xs={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},eo=gt,to=[],ro={},no=!1,io={},so=gt,oo=gt,Rn=function(){return{}},ao=Rn,lo=Rn,uo=gt,co=gt,ho=gt,fo={},po={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},go=gt,mo=gt,yo=gt,bo=gt,wo=gt,_o=gt,vo=gt,Eo=void 0,So=void 0,Ao=void 0,To=gt,Io=2,ko=1,Co="/bin/usr/node",Ro=9229,xo="node",Oo=[],Po=gt,Jt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Jt.now===void 0&&(ps=Date.now(),Jt.timing&&Jt.timing.navigationStart&&(ps=Jt.timing.navigationStart),Jt.now=()=>Date.now()-ps),ui=1e9,li.bigint=function(e){var r=li(e);return typeof BigInt>"u"?r[0]*ui+r[1]:BigInt(r[0]*ui)+BigInt(r[1])},Bo=10,No={},Lo=0,Mo=zt,Uo=zt,Do=zt,jo=zt,Fo=zt,qo=gt,Wo=zt,$o=zt,ka={version:Vs,versions:Ks,arch:qs,platform:Ws,release:Xs,_rawDebug:eo,moduleLoadList:to,binding:Gs,_linkedBinding:sc,_events:No,_eventsCount:Lo,_maxListeners:Bo,on:zt,addListener:Mo,once:Uo,off:Do,removeListener:jo,removeAllListeners:Fo,emit:qo,prependListener:Wo,prependOnceListener:$o,listeners:fc,domain:ro,_exiting:no,config:io,dlopen:oc,uptime:hc,_getActiveRequests:ac,_getActiveHandles:lc,reallyExit:so,_kill:oo,cpuUsage:Rn,resourceUsage:ao,memoryUsage:lo,kill:uo,exit:co,openStdin:ho,allowedNodeEnvironmentFlags:fo,assert:uc,features:po,_fatalExceptions:go,setUncaughtExceptionCaptureCallback:mo,hasUncaughtExceptionCaptureCallback:cc,emitWarning:Ys,nextTick:nc,_tickCallback:yo,_debugProcess:bo,_debugEnd:wo,_startProfilerIdleNotifier:_o,_stopProfilerIdleNotifier:vo,stdout:Eo,stdin:Ao,stderr:So,abort:To,umask:Qs,chdir:Zs,cwd:Js,env:$s,title:Fs,argv:Hs,execArgv:zs,pid:Io,ppid:ko,execPath:Co,debugPort:Ro,hrtime:li,argv0:xo,_preload_modules:Oo,setSourceMapsEnabled:Po}}),be=ft(()=>{Sp()}),dt={};Kr(dt,{Buffer:()=>ki,INSPECT_MAX_BYTES:()=>dc,default:()=>Vt,kMaxLength:()=>pc});function Ap(){if(Ho)return sn;Ho=!0,sn.byteLength=l,sn.toByteArray=c,sn.fromByteArray=g;for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,n=o.length;u<n;++u)e[u]=o[u],r[o.charCodeAt(u)]=u;r[45]=62,r[95]=63;function s(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=y.indexOf("=");w===-1&&(w=b);var _=w===b?0:4-w%4;return[w,_]}function l(y){var b=s(y),w=b[0],_=b[1];return(w+_)*3/4-_}function a(y,b,w){return(b+w)*3/4-w}function c(y){var b,w=s(y),_=w[0],R=w[1],I=new t(a(y,_,R)),T=0,k=R>0?_-4:_,P;for(P=0;P<k;P+=4)b=r[y.charCodeAt(P)]<<18|r[y.charCodeAt(P+1)]<<12|r[y.charCodeAt(P+2)]<<6|r[y.charCodeAt(P+3)],I[T++]=b>>16&255,I[T++]=b>>8&255,I[T++]=b&255;return R===2&&(b=r[y.charCodeAt(P)]<<2|r[y.charCodeAt(P+1)]>>4,I[T++]=b&255),R===1&&(b=r[y.charCodeAt(P)]<<10|r[y.charCodeAt(P+1)]<<4|r[y.charCodeAt(P+2)]>>2,I[T++]=b>>8&255,I[T++]=b&255),I}function h(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function f(y,b,w){for(var _,R=[],I=b;I<w;I+=3)_=(y[I]<<16&16711680)+(y[I+1]<<8&65280)+(y[I+2]&255),R.push(h(_));return R.join("")}function g(y){for(var b,w=y.length,_=w%3,R=[],I=16383,T=0,k=w-_;T<k;T+=I)R.push(f(y,T,T+I>k?k:T+I));return _===1?(b=y[w-1],R.push(e[b>>2]+e[b<<4&63]+"==")):_===2&&(b=(y[w-2]<<8)+y[w-1],R.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),R.join("")}return sn}function Tp(){return zo?xn:(zo=!0,xn.read=function(e,r,t,o,u){var n,s,l=u*8-o-1,a=(1<<l)-1,c=a>>1,h=-7,f=t?u-1:0,g=t?-1:1,y=e[r+f];for(f+=g,n=y&(1<<-h)-1,y>>=-h,h+=l;h>0;n=n*256+e[r+f],f+=g,h-=8);for(s=n&(1<<-h)-1,n>>=-h,h+=o;h>0;s=s*256+e[r+f],f+=g,h-=8);if(n===0)n=1-c;else{if(n===a)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,o),n=n-c}return(y?-1:1)*s*Math.pow(2,n-o)},xn.write=function(e,r,t,o,u,n){var s,l,a,c=n*8-u-1,h=(1<<c)-1,f=h>>1,g=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:n-1,b=o?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,s=h):(s=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+f>=1?r+=g/a:r+=g*Math.pow(2,1-f),r*a>=2&&(s++,a/=2),s+f>=h?(l=0,s=h):s+f>=1?(l=(r*a-1)*Math.pow(2,u),s=s+f):(l=r*Math.pow(2,f-1)*Math.pow(2,u),s=0));u>=8;e[t+y]=l&255,y+=b,l/=256,u-=8);for(s=s<<u|l,c+=u;c>0;e[t+y]=s&255,y+=b,s/=256,c-=8);e[t+y-b]|=w*128},xn)}function Ip(){if(Vo)return gr;Vo=!0;let e=Ap(),r=Tp(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;gr.Buffer=s,gr.SlowBuffer=R,gr.INSPECT_MAX_BYTES=50;let o=2147483647;gr.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=u(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let p=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(p,d),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function n(p){if(p>o)throw new RangeError('The value "'+p+'" is invalid for option "size"');let d=new Uint8Array(p);return Object.setPrototypeOf(d,s.prototype),d}function s(p,d,m){if(typeof p=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return l(p,d,m)}s.poolSize=8192;function l(p,d,m){if(typeof p=="string")return f(p,d);if(ArrayBuffer.isView(p))return y(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(te(p,ArrayBuffer)||p&&te(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(p,SharedArrayBuffer)||p&&te(p.buffer,SharedArrayBuffer)))return b(p,d,m);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let C=p.valueOf&&p.valueOf();if(C!=null&&C!==p)return s.from(C,d,m);let M=w(p);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),d,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}s.from=function(p,d,m){return l(p,d,m)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function a(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function c(p,d,m){return a(p),p<=0?n(p):d!==void 0?typeof m=="string"?n(p).fill(d,m):n(p).fill(d):n(p)}s.alloc=function(p,d,m){return c(p,d,m)};function h(p){return a(p),n(p<0?0:_(p)|0)}s.allocUnsafe=function(p){return h(p)},s.allocUnsafeSlow=function(p){return h(p)};function f(p,d){if((typeof d!="string"||d==="")&&(d="utf8"),!s.isEncoding(d))throw new TypeError("Unknown encoding: "+d);let m=I(p,d)|0,C=n(m),M=C.write(p,d);return M!==m&&(C=C.slice(0,M)),C}function g(p){let d=p.length<0?0:_(p.length)|0,m=n(d);for(let C=0;C<d;C+=1)m[C]=p[C]&255;return m}function y(p){if(te(p,Uint8Array)){let d=new Uint8Array(p);return b(d.buffer,d.byteOffset,d.byteLength)}return g(p)}function b(p,d,m){if(d<0||p.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<d+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return d===void 0&&m===void 0?C=new Uint8Array(p):m===void 0?C=new Uint8Array(p,d):C=new Uint8Array(p,d,m),Object.setPrototypeOf(C,s.prototype),C}function w(p){if(s.isBuffer(p)){let d=_(p.length)|0,m=n(d);return m.length===0||p.copy(m,0,0,d),m}if(p.length!==void 0)return typeof p.length!="number"||j(p.length)?n(0):g(p);if(p.type==="Buffer"&&Array.isArray(p.data))return g(p.data)}function _(p){if(p>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return p|0}function R(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,d){if(te(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),te(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),!s.isBuffer(p)||!s.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===d)return 0;let m=p.length,C=d.length;for(let M=0,z=Math.min(m,C);M<z;++M)if(p[M]!==d[M]){m=p[M],C=d[M];break}return m<C?-1:C<m?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,d){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let m;if(d===void 0)for(d=0,m=0;m<p.length;++m)d+=p[m].length;let C=s.allocUnsafe(d),M=0;for(m=0;m<p.length;++m){let z=p[m];if(te(z,Uint8Array))M+z.length>C.length?(s.isBuffer(z)||(z=s.from(z)),z.copy(C,M)):Uint8Array.prototype.set.call(C,z,M);else if(s.isBuffer(z))z.copy(C,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=z.length}return C};function I(p,d){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||te(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let m=p.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let M=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return K(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return ce(p).length;default:if(M)return C?-1:K(p).length;d=(""+d).toLowerCase(),M=!0}}s.byteLength=I;function T(p,d,m){let C=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,d>>>=0,m<=d))return"";for(p||(p="utf8");;)switch(p){case"hex":return F(this,d,m);case"utf8":case"utf-8":return W(this,d,m);case"ascii":return Z(this,d,m);case"latin1":case"binary":return V(this,d,m);case"base64":return v(this,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,d,m);default:if(C)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),C=!0}}s.prototype._isBuffer=!0;function k(p,d,m){let C=p[d];p[d]=p[m],p[m]=C}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<p;d+=2)k(this,d,d+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<p;d+=4)k(this,d,d+3),k(this,d+1,d+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<p;d+=8)k(this,d,d+7),k(this,d+1,d+6),k(this,d+2,d+5),k(this,d+3,d+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?W(this,0,p):T.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",d=gr.INSPECT_MAX_BYTES;return p=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(p+=" ... "),"<Buffer "+p+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(p,d,m,C,M){if(te(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(d===void 0&&(d=0),m===void 0&&(m=p?p.length:0),C===void 0&&(C=0),M===void 0&&(M=this.length),d<0||m>p.length||C<0||M>this.length)throw new RangeError("out of range index");if(C>=M&&d>=m)return 0;if(C>=M)return-1;if(d>=m)return 1;if(d>>>=0,m>>>=0,C>>>=0,M>>>=0,this===p)return 0;let z=M-C,he=m-d,Ce=Math.min(z,he),Be=this.slice(C,M),Le=p.slice(d,m);for(let ke=0;ke<Ce;++ke)if(Be[ke]!==Le[ke]){z=Be[ke],he=Le[ke];break}return z<he?-1:he<z?1:0};function P(p,d,m,C,M){if(p.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,j(m)&&(m=M?0:p.length-1),m<0&&(m=p.length+m),m>=p.length){if(M)return-1;m=p.length-1}else if(m<0)if(M)m=0;else return-1;if(typeof d=="string"&&(d=s.from(d,C)),s.isBuffer(d))return d.length===0?-1:S(p,d,m,C,M);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(p,d,m):Uint8Array.prototype.lastIndexOf.call(p,d,m):S(p,[d],m,C,M);throw new TypeError("val must be string, number or Buffer")}function S(p,d,m,C,M){let z=1,he=p.length,Ce=d.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(p.length<2||d.length<2)return-1;z=2,he/=2,Ce/=2,m/=2}function Be(ke,Ne){return z===1?ke[Ne]:ke.readUInt16BE(Ne*z)}let Le;if(M){let ke=-1;for(Le=m;Le<he;Le++)if(Be(p,Le)===Be(d,ke===-1?0:Le-ke)){if(ke===-1&&(ke=Le),Le-ke+1===Ce)return ke*z}else ke!==-1&&(Le-=Le-ke),ke=-1}else for(m+Ce>he&&(m=he-Ce),Le=m;Le>=0;Le--){let ke=!0;for(let Ne=0;Ne<Ce;Ne++)if(Be(p,Le+Ne)!==Be(d,Ne)){ke=!1;break}if(ke)return Le}return-1}s.prototype.includes=function(p,d,m){return this.indexOf(p,d,m)!==-1},s.prototype.indexOf=function(p,d,m){return P(this,p,d,m,!0)},s.prototype.lastIndexOf=function(p,d,m){return P(this,p,d,m,!1)};function E(p,d,m,C){m=Number(m)||0;let M=p.length-m;C?(C=Number(C),C>M&&(C=M)):C=M;let z=d.length;C>z/2&&(C=z/2);let he;for(he=0;he<C;++he){let Ce=parseInt(d.substr(he*2,2),16);if(j(Ce))return he;p[m+he]=Ce}return he}function O(p,d,m,C){return H(K(d,p.length-m),p,m,C)}function L(p,d,m,C){return H(G(d),p,m,C)}function Q(p,d,m,C){return H(ce(d),p,m,C)}function re(p,d,m,C){return H(fe(d,p.length-m),p,m,C)}s.prototype.write=function(p,d,m,C){if(d===void 0)C="utf8",m=this.length,d=0;else if(m===void 0&&typeof d=="string")C=d,m=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(m)?(m=m>>>0,C===void 0&&(C="utf8")):(C=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-d;if((m===void 0||m>M)&&(m=M),p.length>0&&(m<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let z=!1;for(;;)switch(C){case"hex":return E(this,p,d,m);case"utf8":case"utf-8":return O(this,p,d,m);case"ascii":case"latin1":case"binary":return L(this,p,d,m);case"base64":return Q(this,p,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,p,d,m);default:if(z)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),z=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(p,d,m){return d===0&&m===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(d,m))}function W(p,d,m){m=Math.min(p.length,m);let C=[],M=d;for(;M<m;){let z=p[M],he=null,Ce=z>239?4:z>223?3:z>191?2:1;if(M+Ce<=m){let Be,Le,ke,Ne;switch(Ce){case 1:z<128&&(he=z);break;case 2:Be=p[M+1],(Be&192)===128&&(Ne=(z&31)<<6|Be&63,Ne>127&&(he=Ne));break;case 3:Be=p[M+1],Le=p[M+2],(Be&192)===128&&(Le&192)===128&&(Ne=(z&15)<<12|(Be&63)<<6|Le&63,Ne>2047&&(Ne<55296||Ne>57343)&&(he=Ne));break;case 4:Be=p[M+1],Le=p[M+2],ke=p[M+3],(Be&192)===128&&(Le&192)===128&&(ke&192)===128&&(Ne=(z&15)<<18|(Be&63)<<12|(Le&63)<<6|ke&63,Ne>65535&&Ne<1114112&&(he=Ne))}}he===null?(he=65533,Ce=1):he>65535&&(he-=65536,C.push(he>>>10&1023|55296),he=56320|he&1023),C.push(he),M+=Ce}return q(C)}let $=4096;function q(p){let d=p.length;if(d<=$)return String.fromCharCode.apply(String,p);let m="",C=0;for(;C<d;)m+=String.fromCharCode.apply(String,p.slice(C,C+=$));return m}function Z(p,d,m){let C="";m=Math.min(p.length,m);for(let M=d;M<m;++M)C+=String.fromCharCode(p[M]&127);return C}function V(p,d,m){let C="";m=Math.min(p.length,m);for(let M=d;M<m;++M)C+=String.fromCharCode(p[M]);return C}function F(p,d,m){let C=p.length;(!d||d<0)&&(d=0),(!m||m<0||m>C)&&(m=C);let M="";for(let z=d;z<m;++z)M+=Y[p[z]];return M}function oe(p,d,m){let C=p.slice(d,m),M="";for(let z=0;z<C.length-1;z+=2)M+=String.fromCharCode(C[z]+C[z+1]*256);return M}s.prototype.slice=function(p,d){let m=this.length;p=~~p,d=d===void 0?m:~~d,p<0?(p+=m,p<0&&(p=0)):p>m&&(p=m),d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),d<p&&(d=p);let C=this.subarray(p,d);return Object.setPrototypeOf(C,s.prototype),C};function se(p,d,m){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+d>m)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,d,m){p=p>>>0,d=d>>>0,m||se(p,d,this.length);let C=this[p],M=1,z=0;for(;++z<d&&(M*=256);)C+=this[p+z]*M;return C},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,d,m){p=p>>>0,d=d>>>0,m||se(p,d,this.length);let C=this[p+--d],M=1;for(;d>0&&(M*=256);)C+=this[p+--d]*M;return C},s.prototype.readUint8=s.prototype.readUInt8=function(p,d){return p=p>>>0,d||se(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,d){return p=p>>>0,d||se(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,d){return p=p>>>0,d||se(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,d){return p=p>>>0,d||se(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,d){return p=p>>>0,d||se(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=ee(function(p){p=p>>>0,ie(p,"offset");let d=this[p],m=this[p+7];(d===void 0||m===void 0)&&ge(p,this.length-8);let C=d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,M=this[++p]+this[++p]*2**8+this[++p]*2**16+m*2**24;return BigInt(C)+(BigInt(M)<<BigInt(32))}),s.prototype.readBigUInt64BE=ee(function(p){p=p>>>0,ie(p,"offset");let d=this[p],m=this[p+7];(d===void 0||m===void 0)&&ge(p,this.length-8);let C=d*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],M=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+m;return(BigInt(C)<<BigInt(32))+BigInt(M)}),s.prototype.readIntLE=function(p,d,m){p=p>>>0,d=d>>>0,m||se(p,d,this.length);let C=this[p],M=1,z=0;for(;++z<d&&(M*=256);)C+=this[p+z]*M;return M*=128,C>=M&&(C-=Math.pow(2,8*d)),C},s.prototype.readIntBE=function(p,d,m){p=p>>>0,d=d>>>0,m||se(p,d,this.length);let C=d,M=1,z=this[p+--C];for(;C>0&&(M*=256);)z+=this[p+--C]*M;return M*=128,z>=M&&(z-=Math.pow(2,8*d)),z},s.prototype.readInt8=function(p,d){return p=p>>>0,d||se(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,d){p=p>>>0,d||se(p,2,this.length);let m=this[p]|this[p+1]<<8;return m&32768?m|4294901760:m},s.prototype.readInt16BE=function(p,d){p=p>>>0,d||se(p,2,this.length);let m=this[p+1]|this[p]<<8;return m&32768?m|4294901760:m},s.prototype.readInt32LE=function(p,d){return p=p>>>0,d||se(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,d){return p=p>>>0,d||se(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=ee(function(p){p=p>>>0,ie(p,"offset");let d=this[p],m=this[p+7];(d===void 0||m===void 0)&&ge(p,this.length-8);let C=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(m<<24);return(BigInt(C)<<BigInt(32))+BigInt(d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=ee(function(p){p=p>>>0,ie(p,"offset");let d=this[p],m=this[p+7];(d===void 0||m===void 0)&&ge(p,this.length-8);let C=(d<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(C)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+m)}),s.prototype.readFloatLE=function(p,d){return p=p>>>0,d||se(p,4,this.length),r.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,d){return p=p>>>0,d||se(p,4,this.length),r.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,d){return p=p>>>0,d||se(p,8,this.length),r.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,d){return p=p>>>0,d||se(p,8,this.length),r.read(this,p,!1,52,8)};function de(p,d,m,C,M,z){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>M||d<z)throw new RangeError('"value" argument is out of bounds');if(m+C>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,d,m,C){if(p=+p,d=d>>>0,m=m>>>0,!C){let he=Math.pow(2,8*m)-1;de(this,p,d,m,he,0)}let M=1,z=0;for(this[d]=p&255;++z<m&&(M*=256);)this[d+z]=p/M&255;return d+m},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,d,m,C){if(p=+p,d=d>>>0,m=m>>>0,!C){let he=Math.pow(2,8*m)-1;de(this,p,d,m,he,0)}let M=m-1,z=1;for(this[d+M]=p&255;--M>=0&&(z*=256);)this[d+M]=p/z&255;return d+m},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,1,255,0),this[d]=p&255,d+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,2,65535,0),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,2,65535,0),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,4,4294967295,0),this[d+3]=p>>>24,this[d+2]=p>>>16,this[d+1]=p>>>8,this[d]=p&255,d+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,4,4294967295,0),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4};function A(p,d,m,C,M){ne(d,C,M,p,m,7);let z=Number(d&BigInt(4294967295));p[m++]=z,z=z>>8,p[m++]=z,z=z>>8,p[m++]=z,z=z>>8,p[m++]=z;let he=Number(d>>BigInt(32)&BigInt(4294967295));return p[m++]=he,he=he>>8,p[m++]=he,he=he>>8,p[m++]=he,he=he>>8,p[m++]=he,m}function J(p,d,m,C,M){ne(d,C,M,p,m,7);let z=Number(d&BigInt(4294967295));p[m+7]=z,z=z>>8,p[m+6]=z,z=z>>8,p[m+5]=z,z=z>>8,p[m+4]=z;let he=Number(d>>BigInt(32)&BigInt(4294967295));return p[m+3]=he,he=he>>8,p[m+2]=he,he=he>>8,p[m+1]=he,he=he>>8,p[m]=he,m+8}s.prototype.writeBigUInt64LE=ee(function(p,d=0){return A(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ee(function(p,d=0){return J(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,d,m,C){if(p=+p,d=d>>>0,!C){let Ce=Math.pow(2,8*m-1);de(this,p,d,m,Ce-1,-Ce)}let M=0,z=1,he=0;for(this[d]=p&255;++M<m&&(z*=256);)p<0&&he===0&&this[d+M-1]!==0&&(he=1),this[d+M]=(p/z>>0)-he&255;return d+m},s.prototype.writeIntBE=function(p,d,m,C){if(p=+p,d=d>>>0,!C){let Ce=Math.pow(2,8*m-1);de(this,p,d,m,Ce-1,-Ce)}let M=m-1,z=1,he=0;for(this[d+M]=p&255;--M>=0&&(z*=256);)p<0&&he===0&&this[d+M+1]!==0&&(he=1),this[d+M]=(p/z>>0)-he&255;return d+m},s.prototype.writeInt8=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,1,127,-128),p<0&&(p=255+p+1),this[d]=p&255,d+1},s.prototype.writeInt16LE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,2,32767,-32768),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeInt16BE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,2,32767,-32768),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeInt32LE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,4,2147483647,-2147483648),this[d]=p&255,this[d+1]=p>>>8,this[d+2]=p>>>16,this[d+3]=p>>>24,d+4},s.prototype.writeInt32BE=function(p,d,m){return p=+p,d=d>>>0,m||de(this,p,d,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4},s.prototype.writeBigInt64LE=ee(function(p,d=0){return A(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ee(function(p,d=0){return J(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(p,d,m,C,M,z){if(m+C>p.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Se(p,d,m,C,M){return d=+d,m=m>>>0,M||ae(p,d,m,4),r.write(p,d,m,C,23,4),m+4}s.prototype.writeFloatLE=function(p,d,m){return Se(this,p,d,!0,m)},s.prototype.writeFloatBE=function(p,d,m){return Se(this,p,d,!1,m)};function le(p,d,m,C,M){return d=+d,m=m>>>0,M||ae(p,d,m,8),r.write(p,d,m,C,52,8),m+8}s.prototype.writeDoubleLE=function(p,d,m){return le(this,p,d,!0,m)},s.prototype.writeDoubleBE=function(p,d,m){return le(this,p,d,!1,m)},s.prototype.copy=function(p,d,m,C){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(m||(m=0),!C&&C!==0&&(C=this.length),d>=p.length&&(d=p.length),d||(d=0),C>0&&C<m&&(C=m),C===m||p.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),p.length-d<C-m&&(C=p.length-d+m);let M=C-m;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,m,C):Uint8Array.prototype.set.call(p,this.subarray(m,C),d),M},s.prototype.fill=function(p,d,m,C){if(typeof p=="string"){if(typeof d=="string"?(C=d,d=0,m=this.length):typeof m=="string"&&(C=m,m=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!s.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(p.length===1){let z=p.charCodeAt(0);(C==="utf8"&&z<128||C==="latin1")&&(p=z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(d<0||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;d=d>>>0,m=m===void 0?this.length:m>>>0,p||(p=0);let M;if(typeof p=="number")for(M=d;M<m;++M)this[M]=p;else{let z=s.isBuffer(p)?p:s.from(p,C),he=z.length;if(he===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(M=0;M<m-d;++M)this[M+d]=z[M%he]}return this};let D={};function B(p,d,m){D[p]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(p,d){return`The "${p}" argument must be of type number. Received type ${typeof d}`},TypeError),B("ERR_OUT_OF_RANGE",function(p,d,m){let C=`The value of "${p}" is out of range.`,M=m;return Number.isInteger(m)&&Math.abs(m)>2**32?M=X(String(m)):typeof m=="bigint"&&(M=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(M=X(M)),M+="n"),C+=` It must be ${d}. Received ${M}`,C},RangeError);function X(p){let d="",m=p.length,C=p[0]==="-"?1:0;for(;m>=C+4;m-=3)d=`_${p.slice(m-3,m)}${d}`;return`${p.slice(0,m)}${d}`}function ue(p,d,m){ie(d,"offset"),(p[d]===void 0||p[d+m]===void 0)&&ge(d,p.length-(m+1))}function ne(p,d,m,C,M,z){if(p>m||p<d){let he=typeof d=="bigint"?"n":"",Ce;throw d===0||d===BigInt(0)?Ce=`>= 0${he} and < 2${he} ** ${(z+1)*8}${he}`:Ce=`>= -(2${he} ** ${(z+1)*8-1}${he}) and < 2 ** ${(z+1)*8-1}${he}`,new D.ERR_OUT_OF_RANGE("value",Ce,p)}ue(C,M,z)}function ie(p,d){if(typeof p!="number")throw new D.ERR_INVALID_ARG_TYPE(d,"number",p)}function ge(p,d,m){throw Math.floor(p)!==p?(ie(p,m),new D.ERR_OUT_OF_RANGE("offset","an integer",p)):d<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,p)}let pe=/[^+/0-9A-Za-z-_]/g;function U(p){if(p=p.split("=")[0],p=p.trim().replace(pe,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function K(p,d){d=d||1/0;let m,C=p.length,M=null,z=[];for(let he=0;he<C;++he){if(m=p.charCodeAt(he),m>55295&&m<57344){if(!M){if(m>56319){(d-=3)>-1&&z.push(239,191,189);continue}else if(he+1===C){(d-=3)>-1&&z.push(239,191,189);continue}M=m;continue}if(m<56320){(d-=3)>-1&&z.push(239,191,189),M=m;continue}m=(M-55296<<10|m-56320)+65536}else M&&(d-=3)>-1&&z.push(239,191,189);if(M=null,m<128){if((d-=1)<0)break;z.push(m)}else if(m<2048){if((d-=2)<0)break;z.push(m>>6|192,m&63|128)}else if(m<65536){if((d-=3)<0)break;z.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((d-=4)<0)break;z.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return z}function G(p){let d=[];for(let m=0;m<p.length;++m)d.push(p.charCodeAt(m)&255);return d}function fe(p,d){let m,C,M,z=[];for(let he=0;he<p.length&&!((d-=2)<0);++he)m=p.charCodeAt(he),C=m>>8,M=m%256,z.push(M),z.push(C);return z}function ce(p){return e.toByteArray(U(p))}function H(p,d,m,C){let M;for(M=0;M<C&&!(M+m>=d.length||M>=p.length);++M)d[M+m]=p[M];return M}function te(p,d){return p instanceof d||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===d.name}function j(p){return p!==p}let Y=function(){let p="0123456789abcdef",d=new Array(256);for(let m=0;m<16;++m){let C=m*16;for(let M=0;M<16;++M)d[C+M]=p[m]+p[M]}return d}();function ee(p){return typeof BigInt>"u"?me:p}function me(){throw new Error("BigInt not supported")}return gr}var sn,Ho,xn,zo,gr,Vo,Vt,ki,dc,pc,pt=ft(()=>{ye(),we(),be(),sn={},Ho=!1,xn={},zo=!1,gr={},Vo=!1,Vt=Ip(),Vt.Buffer,Vt.SlowBuffer,Vt.INSPECT_MAX_BYTES,Vt.kMaxLength,ki=Vt.Buffer,dc=Vt.INSPECT_MAX_BYTES,pc=Vt.kMaxLength}),we=ft(()=>{pt()}),kp=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,o){return o===0||o>this.max?!1:(this.aliasToTopic[o]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=r}),ot=ve((e,r)=>{ye(),we(),be(),r.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,o){return t.includes(o)},ArrayPrototypeIndexOf(t,o){return t.indexOf(o)},ArrayPrototypeJoin(t,o){return t.join(o)},ArrayPrototypeMap(t,o){return t.map(o)},ArrayPrototypePop(t,o){return t.pop(o)},ArrayPrototypePush(t,o){return t.push(o)},ArrayPrototypeSlice(t,o,u){return t.slice(o,u)},Error,FunctionPrototypeCall(t,o,...u){return t.call(o,...u)},FunctionPrototypeSymbolHasInstance(t,o){return Function.prototype[Symbol.hasInstance].call(t,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,o){return Object.defineProperties(t,o)},ObjectDefineProperty(t,o,u){return Object.defineProperty(t,o,u)},ObjectGetOwnPropertyDescriptor(t,o){return Object.getOwnPropertyDescriptor(t,o)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,o){return Object.setPrototypeOf(t,o)},Promise,PromisePrototypeCatch(t,o){return t.catch(o)},PromisePrototypeThen(t,o,u){return t.then(o,u)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,o){return t.test(o)},SafeSet:Set,String,StringPrototypeSlice(t,o,u){return t.slice(o,u)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,o,u){return t.set(o,u)},Uint8Array}}),or=ve((e,r)=>{ye(),we(),be();var t=(pt(),Ve(dt)),o=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||t.Blob,n=typeof u<"u"?function(l){return l instanceof u}:function(l){return!1},s=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let a="";for(let c=0;c<l.length;c++)a+=`    ${l[c].stack}
`;super(a),this.name="AggregateError",this.errors=l}};r.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(l){let a=!1;return function(...c){a||(a=!0,l.apply(this,c))}},createDeferredPromise:function(){let l,a;return{promise:new Promise((c,h)=>{l=c,a=h}),resolve:l,reject:a}},promisify(l){return new Promise((a,c)=>{l((h,...f)=>h?c(h):a(...f))})},debuglog(){return function(){}},format(l,...a){return l.replace(/%([sdifj])/g,function(...[c,h]){let f=a.shift();return h==="f"?f.toFixed(6):h==="j"?JSON.stringify(f):h==="s"&&typeof f=="object"?`${f.constructor!==Object?f.constructor.name:""} {}`.trim():f.toString()})},inspect(l){switch(typeof l){case"string":if(l.includes("'"))if(l.includes('"')){if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}else return`"${l}"`;return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}},types:{isAsyncFunction(l){return l instanceof o},isArrayBufferView(l){return ArrayBuffer.isView(l)}},isBlob:n},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Ca=ve((e,r)=>{ye(),we(),be();var{AbortController:t,AbortSignal:o}=typeof self<"u"?self:typeof window<"u"?window:void 0;r.exports=t,r.exports.AbortSignal=o,r.exports.default=t}),vt=ve((e,r)=>{ye(),we(),be();var{format:t,inspect:o,AggregateError:u}=or(),n=globalThis.AggregateError||u,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",h={};function f(I,T){if(!I)throw new h.ERR_INTERNAL_ASSERTION(T)}function g(I){let T="",k=I.length,P=I[0]==="-"?1:0;for(;k>=P+4;k-=3)T=`_${I.slice(k-3,k)}${T}`;return`${I.slice(0,k)}${T}`}function y(I,T,k){if(typeof T=="function")return f(T.length<=k.length,`Code: ${I}; The provided arguments length (${k.length}) does not match the required ones (${T.length}).`),T(...k);let P=(T.match(/%[dfijoOs]/g)||[]).length;return f(P===k.length,`Code: ${I}; The provided arguments length (${k.length}) does not match the required ones (${P}).`),k.length===0?T:t(T,...k)}function b(I,T,k){k||(k=Error);class P extends k{constructor(...E){super(y(I,T,E))}toString(){return`${this.name} [${I}]: ${this.message}`}}Object.defineProperties(P.prototype,{name:{value:k.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${I}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),P.prototype.code=I,P.prototype[s]=!0,h[I]=P}function w(I){let T=c+I.name;return Object.defineProperty(I,"name",{value:T}),I}function _(I,T){if(I&&T&&I!==T){if(Array.isArray(T.errors))return T.errors.push(I),T;let k=new n([T,I],T.message);return k.code=T.code,k}return I||T}var R=class extends Error{constructor(I="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",T);super(I,T),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(I,T,k)=>{f(typeof I=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let P="The ";I.endsWith(" argument")?P+=`${I} `:P+=`"${I}" ${I.includes(".")?"property":"argument"} `,P+="must be ";let S=[],E=[],O=[];for(let Q of T)f(typeof Q=="string","All expected entries have to be of type string"),l.includes(Q)?S.push(Q.toLowerCase()):a.test(Q)?E.push(Q):(f(Q!=="object",'The value "object" should be written as "Object"'),O.push(Q));if(E.length>0){let Q=S.indexOf("object");Q!==-1&&(S.splice(S,Q,1),E.push("Object"))}if(S.length>0){switch(S.length){case 1:P+=`of type ${S[0]}`;break;case 2:P+=`one of type ${S[0]} or ${S[1]}`;break;default:{let Q=S.pop();P+=`one of type ${S.join(", ")}, or ${Q}`}}(E.length>0||O.length>0)&&(P+=" or ")}if(E.length>0){switch(E.length){case 1:P+=`an instance of ${E[0]}`;break;case 2:P+=`an instance of ${E[0]} or ${E[1]}`;break;default:{let Q=E.pop();P+=`an instance of ${E.join(", ")}, or ${Q}`}}O.length>0&&(P+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(P+="an "),P+=`${O[0]}`;break;case 2:P+=`one of ${O[0]} or ${O[1]}`;break;default:{let Q=O.pop();P+=`one of ${O.join(", ")}, or ${Q}`}}if(k==null)P+=`. Received ${k}`;else if(typeof k=="function"&&k.name)P+=`. Received function ${k.name}`;else if(typeof k=="object"){var L;if((L=k.constructor)!==null&&L!==void 0&&L.name)P+=`. Received an instance of ${k.constructor.name}`;else{let Q=o(k,{depth:-1});P+=`. Received ${Q}`}}else{let Q=o(k,{colors:!1});Q.length>25&&(Q=`${Q.slice(0,25)}...`),P+=`. Received type ${typeof k} (${Q})`}return P},TypeError),b("ERR_INVALID_ARG_VALUE",(I,T,k="is invalid")=>{let P=o(T);return P.length>128&&(P=P.slice(0,128)+"..."),`The ${I.includes(".")?"property":"argument"} '${I}' ${k}. Received ${P}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(I,T,k)=>{var P;let S=k!=null&&(P=k.constructor)!==null&&P!==void 0&&P.name?`instance of ${k.constructor.name}`:`type ${typeof k}`;return`Expected ${I} to be returned from the "${T}" function but got ${S}.`},TypeError),b("ERR_MISSING_ARGS",(...I)=>{f(I.length>0,"At least one arg needs to be specified");let T,k=I.length;switch(I=(Array.isArray(I)?I:[I]).map(P=>`"${P}"`).join(" or "),k){case 1:T+=`The ${I[0]} argument`;break;case 2:T+=`The ${I[0]} and ${I[1]} arguments`;break;default:{let P=I.pop();T+=`The ${I.join(", ")}, and ${P} arguments`}break}return`${T} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(I,T,k)=>{f(T,'Missing "range" argument');let P;return Number.isInteger(k)&&Math.abs(k)>2**32?P=g(String(k)):typeof k=="bigint"?(P=String(k),(k>2n**32n||k<-(2n**32n))&&(P=g(P)),P+="n"):P=o(k),`The value of "${I}" is out of range. It must be ${T}. Received ${P}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),r.exports={AbortError:R,aggregateTwoErrors:w(_),hideStackFrames:w,codes:h}}),Ui=ve((e,r)=>{ye(),we(),be();var{ArrayIsArray:t,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:u,ArrayPrototypeMap:n,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:c,NumberParseInt:h,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:g,String:y,StringPrototypeToUpperCase:b,StringPrototypeTrim:w}=ot(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:P}}=vt(),{normalizeEncoding:S}=or(),{isAsyncFunction:E,isArrayBufferView:O}=or().types,L={};function Q(H){return H===(H|0)}function re(H){return H===H>>>0}var v=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function $(H,te,j){if(typeof H>"u"&&(H=j),typeof H=="string"){if(g(v,H)===null)throw new T(te,H,W);H=h(H,8)}return V(H,te),H}var q=_((H,te,j=c,Y=a)=>{if(typeof H!="number")throw new I(te,"number",H);if(!s(H))throw new k(te,"an integer",H);if(H<j||H>Y)throw new k(te,`>= ${j} && <= ${Y}`,H)}),Z=_((H,te,j=-2147483648,Y=2147483647)=>{if(typeof H!="number")throw new I(te,"number",H);if(!s(H))throw new k(te,"an integer",H);if(H<j||H>Y)throw new k(te,`>= ${j} && <= ${Y}`,H)}),V=_((H,te,j=!1)=>{if(typeof H!="number")throw new I(te,"number",H);if(!s(H))throw new k(te,"an integer",H);let Y=j?1:0,ee=4294967295;if(H<Y||H>ee)throw new k(te,`>= ${Y} && <= ${ee}`,H)});function F(H,te){if(typeof H!="string")throw new I(te,"string",H)}function oe(H,te,j=void 0,Y){if(typeof H!="number")throw new I(te,"number",H);if(j!=null&&H<j||Y!=null&&H>Y||(j!=null||Y!=null)&&l(H))throw new k(te,`${j!=null?`>= ${j}`:""}${j!=null&&Y!=null?" && ":""}${Y!=null?`<= ${Y}`:""}`,H)}var se=_((H,te,j)=>{if(!o(j,H)){let Y="must be one of: "+u(n(j,ee=>typeof ee=="string"?`'${ee}'`:y(ee)),", ");throw new T(te,H,Y)}});function de(H,te){if(typeof H!="boolean")throw new I(te,"boolean",H)}function A(H,te,j){return H==null||!f(H,te)?j:H[te]}var J=_((H,te,j=null)=>{let Y=A(j,"allowArray",!1),ee=A(j,"allowFunction",!1);if(!A(j,"nullable",!1)&&H===null||!Y&&t(H)||typeof H!="object"&&(!ee||typeof H!="function"))throw new I(te,"Object",H)}),ae=_((H,te)=>{if(H!=null&&typeof H!="object"&&typeof H!="function")throw new I(te,"a dictionary",H)}),Se=_((H,te,j=0)=>{if(!t(H))throw new I(te,"Array",H);if(H.length<j){let Y=`must be longer than ${j}`;throw new T(te,H,Y)}});function le(H,te){Se(H,te);for(let j=0;j<H.length;j++)F(H[j],`${te}[${j}]`)}function D(H,te){Se(H,te);for(let j=0;j<H.length;j++)de(H[j],`${te}[${j}]`)}function B(H,te="signal"){if(F(H,te),L[H]===void 0)throw L[b(H)]!==void 0?new P(H+" (signals must use all capital letters)"):new P(H)}var X=_((H,te="buffer")=>{if(!O(H))throw new I(te,["Buffer","TypedArray","DataView"],H)});function ue(H,te){let j=S(te),Y=H.length;if(j==="hex"&&Y%2!==0)throw new T("encoding",te,`is invalid for data of length ${Y}`)}function ne(H,te="Port",j=!0){if(typeof H!="number"&&typeof H!="string"||typeof H=="string"&&w(H).length===0||+H!==+H>>>0||H>65535||H===0&&!j)throw new R(te,H,j);return H|0}var ie=_((H,te)=>{if(H!==void 0&&(H===null||typeof H!="object"||!("aborted"in H)))throw new I(te,"AbortSignal",H)}),ge=_((H,te)=>{if(typeof H!="function")throw new I(te,"Function",H)}),pe=_((H,te)=>{if(typeof H!="function"||E(H))throw new I(te,"Function",H)}),U=_((H,te)=>{if(H!==void 0)throw new I(te,"undefined",H)});function K(H,te,j){if(!o(j,H))throw new I(te,`('${u(j,"|")}')`,H)}var G=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(H,te){if(typeof H>"u"||!g(G,H))throw new T(te,H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ce(H){if(typeof H=="string")return fe(H,"hints"),H;if(t(H)){let te=H.length,j="";if(te===0)return j;for(let Y=0;Y<te;Y++){let ee=H[Y];fe(ee,"hints"),j+=ee,Y!==te-1&&(j+=", ")}return j}throw new T("hints",H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}r.exports={isInt32:Q,isUint32:re,parseFileMode:$,validateArray:Se,validateStringArray:le,validateBooleanArray:D,validateBoolean:de,validateBuffer:X,validateDictionary:ae,validateEncoding:ue,validateFunction:ge,validateInt32:Z,validateInteger:q,validateNumber:oe,validateObject:J,validateOneOf:se,validatePlainFunction:pe,validatePort:ne,validateSignalName:B,validateString:F,validateUint32:V,validateUndefined:U,validateUnion:K,validateAbortSignal:ie,validateLinkHeaderValue:ce}}),Yr=ve((e,r)=>{ye(),we(),be();var t=r.exports={},o,u;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=n}catch{o=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=s}catch{u=s}})();function l(R){if(o===setTimeout)return setTimeout(R,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(R,0);try{return o(R,0)}catch{try{return o.call(null,R,0)}catch{return o.call(this,R,0)}}}function a(R){if(u===clearTimeout)return clearTimeout(R);if((u===s||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(R);try{return u(R)}catch{try{return u.call(null,R)}catch{return u.call(this,R)}}}var c=[],h=!1,f,g=-1;function y(){!h||!f||(h=!1,f.length?c=f.concat(c):g=-1,c.length&&b())}function b(){if(!h){var R=l(y);h=!0;for(var I=c.length;I;){for(f=c,c=[];++g<I;)f&&f[g].run();g=-1,I=c.length}f=null,h=!1,a(R)}}t.nextTick=function(R){var I=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)I[T-1]=arguments[T];c.push(new w(R,I)),c.length===1&&!h&&l(b)};function w(R,I){this.fun=R,this.array=I}w.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function _(){}t.on=_,t.addListener=_,t.once=_,t.off=_,t.removeListener=_,t.removeAllListeners=_,t.emit=_,t.prependListener=_,t.prependOnceListener=_,t.listeners=function(R){return[]},t.binding=function(R){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(R){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),ur=ve((e,r)=>{ye(),we(),be();var{Symbol:t,SymbolAsyncIterator:o,SymbolIterator:u,SymbolFor:n}=ot(),s=t("kDestroyed"),l=t("kIsErrored"),a=t("kIsReadable"),c=t("kIsDisturbed"),h=n("nodejs.webstream.isClosedPromise"),f=n("nodejs.webstream.controllerErrorFunction");function g(A,J=!1){var ae;return!!(A&&typeof A.pipe=="function"&&typeof A.on=="function"&&(!J||typeof A.pause=="function"&&typeof A.resume=="function")&&(!A._writableState||((ae=A._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!A._writableState||A._readableState))}function y(A){var J;return!!(A&&typeof A.write=="function"&&typeof A.on=="function"&&(!A._readableState||((J=A._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function b(A){return!!(A&&typeof A.pipe=="function"&&A._readableState&&typeof A.on=="function"&&typeof A.write=="function")}function w(A){return A&&(A._readableState||A._writableState||typeof A.write=="function"&&typeof A.on=="function"||typeof A.pipe=="function"&&typeof A.on=="function")}function _(A){return!!(A&&!w(A)&&typeof A.pipeThrough=="function"&&typeof A.getReader=="function"&&typeof A.cancel=="function")}function R(A){return!!(A&&!w(A)&&typeof A.getWriter=="function"&&typeof A.abort=="function")}function I(A){return!!(A&&!w(A)&&typeof A.readable=="object"&&typeof A.writable=="object")}function T(A){return _(A)||R(A)||I(A)}function k(A,J){return A==null?!1:J===!0?typeof A[o]=="function":J===!1?typeof A[u]=="function":typeof A[o]=="function"||typeof A[u]=="function"}function P(A){if(!w(A))return null;let J=A._writableState,ae=A._readableState,Se=J||ae;return!!(A.destroyed||A[s]||Se!=null&&Se.destroyed)}function S(A){if(!y(A))return null;if(A.writableEnded===!0)return!0;let J=A._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function E(A,J){if(!y(A))return null;if(A.writableFinished===!0)return!0;let ae=A._writableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.finished)!="boolean"?null:!!(ae.finished||J===!1&&ae.ended===!0&&ae.length===0)}function O(A){if(!g(A))return null;if(A.readableEnded===!0)return!0;let J=A._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function L(A,J){if(!g(A))return null;let ae=A._readableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.endEmitted)!="boolean"?null:!!(ae.endEmitted||J===!1&&ae.ended===!0&&ae.length===0)}function Q(A){return A&&A[a]!=null?A[a]:typeof(A==null?void 0:A.readable)!="boolean"?null:P(A)?!1:g(A)&&A.readable&&!L(A)}function re(A){return typeof(A==null?void 0:A.writable)!="boolean"?null:P(A)?!1:y(A)&&A.writable&&!S(A)}function v(A,J){return w(A)?P(A)?!0:!((J==null?void 0:J.readable)!==!1&&Q(A)||(J==null?void 0:J.writable)!==!1&&re(A)):null}function W(A){var J,ae;return w(A)?A.writableErrored?A.writableErrored:(J=(ae=A._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&J!==void 0?J:null:null}function $(A){var J,ae;return w(A)?A.readableErrored?A.readableErrored:(J=(ae=A._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&J!==void 0?J:null:null}function q(A){if(!w(A))return null;if(typeof A.closed=="boolean")return A.closed;let J=A._writableState,ae=A._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(ae==null?void 0:ae.closed)=="boolean"?(J==null?void 0:J.closed)||(ae==null?void 0:ae.closed):typeof A._closed=="boolean"&&Z(A)?A._closed:null}function Z(A){return typeof A._closed=="boolean"&&typeof A._defaultKeepAlive=="boolean"&&typeof A._removedConnection=="boolean"&&typeof A._removedContLen=="boolean"}function V(A){return typeof A._sent100=="boolean"&&Z(A)}function F(A){var J;return typeof A._consuming=="boolean"&&typeof A._dumped=="boolean"&&((J=A.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function oe(A){if(!w(A))return null;let J=A._writableState,ae=A._readableState,Se=J||ae;return!Se&&V(A)||!!(Se&&Se.autoDestroy&&Se.emitClose&&Se.closed===!1)}function se(A){var J;return!!(A&&((J=A[c])!==null&&J!==void 0?J:A.readableDidRead||A.readableAborted))}function de(A){var J,ae,Se,le,D,B,X,ue,ne,ie;return!!(A&&((J=(ae=(Se=(le=(D=(B=A[l])!==null&&B!==void 0?B:A.readableErrored)!==null&&D!==void 0?D:A.writableErrored)!==null&&le!==void 0?le:(X=A._readableState)===null||X===void 0?void 0:X.errorEmitted)!==null&&Se!==void 0?Se:(ue=A._writableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&ae!==void 0?ae:(ne=A._readableState)===null||ne===void 0?void 0:ne.errored)!==null&&J!==void 0?J:!((ie=A._writableState)===null||ie===void 0)&&ie.errored))}r.exports={kDestroyed:s,isDisturbed:se,kIsDisturbed:c,isErrored:de,kIsErrored:l,isReadable:Q,kIsReadable:a,kIsClosedPromise:h,kControllerErrorFunction:f,isClosed:q,isDestroyed:P,isDuplexNodeStream:b,isFinished:v,isIterable:k,isReadableNodeStream:g,isReadableStream:_,isReadableEnded:O,isReadableFinished:L,isReadableErrored:$,isNodeStream:w,isWebStream:T,isWritable:re,isWritableNodeStream:y,isWritableStream:R,isWritableEnded:S,isWritableFinished:E,isWritableErrored:W,isServerRequest:F,isServerResponse:V,willEmitClose:oe,isTransformStream:I}}),vr=ve((e,r)=>{ye(),we(),be();var t=Yr(),{AbortError:o,codes:u}=vt(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:s}=u,{kEmptyObject:l,once:a}=or(),{validateAbortSignal:c,validateFunction:h,validateObject:f,validateBoolean:g}=Ui(),{Promise:y,PromisePrototypeThen:b}=ot(),{isClosed:w,isReadable:_,isReadableNodeStream:R,isReadableStream:I,isReadableFinished:T,isReadableErrored:k,isWritable:P,isWritableNodeStream:S,isWritableStream:E,isWritableFinished:O,isWritableErrored:L,isNodeStream:Q,willEmitClose:re,kIsClosedPromise:v}=ur();function W(F){return F.setHeader&&typeof F.abort=="function"}var $=()=>{};function q(F,oe,se){var de,A;if(arguments.length===2?(se=oe,oe=l):oe==null?oe=l:f(oe,"options"),h(se,"callback"),c(oe.signal,"options.signal"),se=a(se),I(F)||E(F))return Z(F,oe,se);if(!Q(F))throw new n("stream",["ReadableStream","WritableStream","Stream"],F);let J=(de=oe.readable)!==null&&de!==void 0?de:R(F),ae=(A=oe.writable)!==null&&A!==void 0?A:S(F),Se=F._writableState,le=F._readableState,D=()=>{F.writable||ue()},B=re(F)&&R(F)===J&&S(F)===ae,X=O(F,!1),ue=()=>{X=!0,F.destroyed&&(B=!1),!(B&&(!F.readable||J))&&(!J||ne)&&se.call(F)},ne=T(F,!1),ie=()=>{ne=!0,F.destroyed&&(B=!1),!(B&&(!F.writable||ae))&&(!ae||X)&&se.call(F)},ge=ce=>{se.call(F,ce)},pe=w(F),U=()=>{pe=!0;let ce=L(F)||k(F);if(ce&&typeof ce!="boolean")return se.call(F,ce);if(J&&!ne&&R(F,!0)&&!T(F,!1))return se.call(F,new s);if(ae&&!X&&!O(F,!1))return se.call(F,new s);se.call(F)},K=()=>{pe=!0;let ce=L(F)||k(F);if(ce&&typeof ce!="boolean")return se.call(F,ce);se.call(F)},G=()=>{F.req.on("finish",ue)};W(F)?(F.on("complete",ue),B||F.on("abort",U),F.req?G():F.on("request",G)):ae&&!Se&&(F.on("end",D),F.on("close",D)),!B&&typeof F.aborted=="boolean"&&F.on("aborted",U),F.on("end",ie),F.on("finish",ue),oe.error!==!1&&F.on("error",ge),F.on("close",U),pe?t.nextTick(U):Se!=null&&Se.errorEmitted||le!=null&&le.errorEmitted?B||t.nextTick(K):(!J&&(!B||_(F))&&(X||P(F)===!1)||!ae&&(!B||P(F))&&(ne||_(F)===!1)||le&&F.req&&F.aborted)&&t.nextTick(K);let fe=()=>{se=$,F.removeListener("aborted",U),F.removeListener("complete",ue),F.removeListener("abort",U),F.removeListener("request",G),F.req&&F.req.removeListener("finish",ue),F.removeListener("end",D),F.removeListener("close",D),F.removeListener("finish",ue),F.removeListener("end",ie),F.removeListener("error",ge),F.removeListener("close",U)};if(oe.signal&&!pe){let ce=()=>{let H=se;fe(),H.call(F,new o(void 0,{cause:oe.signal.reason}))};if(oe.signal.aborted)t.nextTick(ce);else{let H=se;se=a((...te)=>{oe.signal.removeEventListener("abort",ce),H.apply(F,te)}),oe.signal.addEventListener("abort",ce)}}return fe}function Z(F,oe,se){let de=!1,A=$;if(oe.signal)if(A=()=>{de=!0,se.call(F,new o(void 0,{cause:oe.signal.reason}))},oe.signal.aborted)t.nextTick(A);else{let ae=se;se=a((...Se)=>{oe.signal.removeEventListener("abort",A),ae.apply(F,Se)}),oe.signal.addEventListener("abort",A)}let J=(...ae)=>{de||t.nextTick(()=>se.apply(F,ae))};return b(F[v].promise,J,J),$}function V(F,oe){var se;let de=!1;return oe===null&&(oe=l),(se=oe)!==null&&se!==void 0&&se.cleanup&&(g(oe.cleanup,"cleanup"),de=oe.cleanup),new y((A,J)=>{let ae=q(F,oe,Se=>{de&&ae(),Se?J(Se):A()})})}r.exports=q,r.exports.finished=V}),mn=ve((e,r)=>{ye(),we(),be();var t=Yr(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:n}=vt(),{Symbol:s}=ot(),{kDestroyed:l,isDestroyed:a,isFinished:c,isServerRequest:h}=ur(),f=s("kDestroy"),g=s("kConstruct");function y(v,W,$){v&&(v.stack,W&&!W.errored&&(W.errored=v),$&&!$.errored&&($.errored=v))}function b(v,W){let $=this._readableState,q=this._writableState,Z=q||$;return q!=null&&q.destroyed||$!=null&&$.destroyed?(typeof W=="function"&&W(),this):(y(v,q,$),q&&(q.destroyed=!0),$&&($.destroyed=!0),Z.constructed?w(this,v,W):this.once(f,function(V){w(this,o(V,v),W)}),this)}function w(v,W,$){let q=!1;function Z(V){if(q)return;q=!0;let F=v._readableState,oe=v._writableState;y(V,oe,F),oe&&(oe.closed=!0),F&&(F.closed=!0),typeof $=="function"&&$(V),V?t.nextTick(_,v,V):t.nextTick(R,v)}try{v._destroy(W||null,Z)}catch(V){Z(V)}}function _(v,W){I(v,W),R(v)}function R(v){let W=v._readableState,$=v._writableState;$&&($.closeEmitted=!0),W&&(W.closeEmitted=!0),($!=null&&$.emitClose||W!=null&&W.emitClose)&&v.emit("close")}function I(v,W){let $=v._readableState,q=v._writableState;q!=null&&q.errorEmitted||$!=null&&$.errorEmitted||(q&&(q.errorEmitted=!0),$&&($.errorEmitted=!0),v.emit("error",W))}function T(){let v=this._readableState,W=this._writableState;v&&(v.constructed=!0,v.closed=!1,v.closeEmitted=!1,v.destroyed=!1,v.errored=null,v.errorEmitted=!1,v.reading=!1,v.ended=v.readable===!1,v.endEmitted=v.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function k(v,W,$){let q=v._readableState,Z=v._writableState;if(Z!=null&&Z.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||Z!=null&&Z.autoDestroy?v.destroy(W):W&&(W.stack,Z&&!Z.errored&&(Z.errored=W),q&&!q.errored&&(q.errored=W),$?t.nextTick(I,v,W):I(v,W))}function P(v,W){if(typeof v._construct!="function")return;let $=v._readableState,q=v._writableState;$&&($.constructed=!1),q&&(q.constructed=!1),v.once(g,W),!(v.listenerCount(g)>1)&&t.nextTick(S,v)}function S(v){let W=!1;function $(q){if(W){k(v,q??new u);return}W=!0;let Z=v._readableState,V=v._writableState,F=V||Z;Z&&(Z.constructed=!0),V&&(V.constructed=!0),F.destroyed?v.emit(f,q):q?k(v,q,!0):t.nextTick(E,v)}try{v._construct(q=>{t.nextTick($,q)})}catch(q){t.nextTick($,q)}}function E(v){v.emit(g)}function O(v){return(v==null?void 0:v.setHeader)&&typeof v.abort=="function"}function L(v){v.emit("close")}function Q(v,W){v.emit("error",W),t.nextTick(L,v)}function re(v,W){!v||a(v)||(!W&&!c(v)&&(W=new n),h(v)?(v.socket=null,v.destroy(W)):O(v)?v.abort():O(v.req)?v.req.abort():typeof v.destroy=="function"?v.destroy(W):typeof v.close=="function"?v.close():W?t.nextTick(Q,v,W):t.nextTick(L,v),v.destroyed||(v[l]=!0))}r.exports={construct:P,destroyer:re,destroy:b,undestroy:T,errorOrDestroy:k}});function He(){He.init.call(this)}function ci(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function gc(e){return e._maxListeners===void 0?He.defaultMaxListeners:e._maxListeners}function Dl(e,r,t,o){var u,n,s,l;if(ci(t),(n=e._events)===void 0?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),n=e._events),s=n[r]),s===void 0)s=n[r]=t,++e._eventsCount;else if(typeof s=="function"?s=n[r]=o?[t,s]:[s,t]:o?s.unshift(t):s.push(t),(u=gc(e))>0&&s.length>u&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=r,a.count=s.length,l=a,console&&console.warn&&console.warn(l)}return e}function Cp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jl(e,r,t){var o={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},u=Cp.bind(o);return u.listener=t,o.wrapFn=u,u}function Fl(e,r,t){var o=e._events;if(o===void 0)return[];var u=o[r];return u===void 0?[]:typeof u=="function"?t?[u.listener||u]:[u]:t?function(n){for(var s=new Array(n.length),l=0;l<s.length;++l)s[l]=n[l].listener||n[l];return s}(u):mc(u,u.length)}function ql(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function mc(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e[o];return t}var Wl,$l,Ar,gs,ms,ys,St,Hl=ft(()=>{ye(),we(),be(),Ar=typeof Reflect=="object"?Reflect:null,gs=Ar&&typeof Ar.apply=="function"?Ar.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},$l=Ar&&typeof Ar.ownKeys=="function"?Ar.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},ms=Number.isNaN||function(e){return e!=e},Wl=He,He.EventEmitter=He,He.prototype._events=void 0,He.prototype._eventsCount=0,He.prototype._maxListeners=void 0,ys=10,Object.defineProperty(He,"defaultMaxListeners",{enumerable:!0,get:function(){return ys},set:function(e){if(typeof e!="number"||e<0||ms(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ys=e}}),He.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},He.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ms(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},He.prototype.getMaxListeners=function(){return gc(this)},He.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var n;if(r.length>0&&(n=r[0]),n instanceof Error)throw n;var s=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw s.context=n,s}var l=u[e];if(l===void 0)return!1;if(typeof l=="function")gs(l,this,r);else{var a=l.length,c=mc(l,a);for(t=0;t<a;++t)gs(c[t],this,r)}return!0},He.prototype.addListener=function(e,r){return Dl(this,e,r,!1)},He.prototype.on=He.prototype.addListener,He.prototype.prependListener=function(e,r){return Dl(this,e,r,!0)},He.prototype.once=function(e,r){return ci(r),this.on(e,jl(this,e,r)),this},He.prototype.prependOnceListener=function(e,r){return ci(r),this.prependListener(e,jl(this,e,r)),this},He.prototype.removeListener=function(e,r){var t,o,u,n,s;if(ci(r),(o=this._events)===void 0)return this;if((t=o[e])===void 0)return this;if(t===r||t.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(u=-1,n=t.length-1;n>=0;n--)if(t[n]===r||t[n].listener===r){s=t[n].listener,u=n;break}if(u<0)return this;u===0?t.shift():function(l,a){for(;a+1<l.length;a++)l[a]=l[a+1];l.pop()}(t,u),t.length===1&&(o[e]=t[0]),o.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this},He.prototype.off=He.prototype.removeListener,He.prototype.removeAllListeners=function(e){var r,t,o;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var u,n=Object.keys(t);for(o=0;o<n.length;++o)(u=n[o])!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(r=t[e])=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this},He.prototype.listeners=function(e){return Fl(this,e,!0)},He.prototype.rawListeners=function(e){return Fl(this,e,!1)},He.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):ql.call(e,r)},He.prototype.listenerCount=ql,He.prototype.eventNames=function(){return this._eventsCount>0?$l(this._events):[]},St=Wl,St.EventEmitter,St.defaultMaxListeners,St.init,St.listenerCount,St.EventEmitter,St.defaultMaxListeners,St.init,St.listenerCount}),Gr={};Kr(Gr,{EventEmitter:()=>yc,default:()=>St,defaultMaxListeners:()=>bc,init:()=>wc,listenerCount:()=>_c,on:()=>vc,once:()=>Ec});var yc,bc,wc,_c,vc,Ec,yn=ft(()=>{ye(),we(),be(),Hl(),Hl(),St.once=function(e,r){return new Promise((t,o)=>{function u(...s){n!==void 0&&e.removeListener("error",n),t(s)}let n;r!=="error"&&(n=s=>{e.removeListener(name,u),o(s)},e.once("error",n)),e.once(r,u)})},St.on=function(e,r){let t=[],o=[],u=null,n=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(u){let h=Promise.reject(u);return u=null,h}return n?createIterResult(void 0,!0):new Promise((h,f)=>o.push({resolve:h,reject:f}))},async return(){e.removeListener(r,l),e.removeListener("error",a),n=!0;for(let c of o)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){u=c,e.removeListener(r,l),e.removeListener("error",a)},[Symbol.asyncIterator](){return this}};return e.on(r,l),e.on("error",a),s;function l(...c){let h=o.shift();h?h.resolve(createIterResult(c,!1)):t.push(c)}function a(c){n=!0;let h=o.shift();h?h.reject(c):u=c,s.return()}},{EventEmitter:yc,defaultMaxListeners:bc,init:wc,listenerCount:_c,on:vc,once:Ec}=St}),Ra=ve((e,r)=>{ye(),we(),be();var{ArrayIsArray:t,ObjectSetPrototypeOf:o}=ot(),{EventEmitter:u}=(yn(),Ve(Gr));function n(l){u.call(this,l)}o(n.prototype,u.prototype),o(n,u),n.prototype.pipe=function(l,a){let c=this;function h(R){l.writable&&l.write(R)===!1&&c.pause&&c.pause()}c.on("data",h);function f(){c.readable&&c.resume&&c.resume()}l.on("drain",f),!l._isStdio&&(!a||a.end!==!1)&&(c.on("end",y),c.on("close",b));let g=!1;function y(){g||(g=!0,l.end())}function b(){g||(g=!0,typeof l.destroy=="function"&&l.destroy())}function w(R){_(),u.listenerCount(this,"error")===0&&this.emit("error",R)}s(c,"error",w),s(l,"error",w);function _(){c.removeListener("data",h),l.removeListener("drain",f),c.removeListener("end",y),c.removeListener("close",b),c.removeListener("error",w),l.removeListener("error",w),c.removeListener("end",_),c.removeListener("close",_),l.removeListener("close",_)}return c.on("end",_),c.on("close",_),l.on("close",_),l.emit("pipe",c),l};function s(l,a,c){if(typeof l.prependListener=="function")return l.prependListener(a,c);!l._events||!l._events[a]?l.on(a,c):t(l._events[a])?l._events[a].unshift(c):l._events[a]=[c,l._events[a]]}r.exports={Stream:n,prependListener:s}}),Di=ve((e,r)=>{ye(),we(),be();var{AbortError:t,codes:o}=vt(),{isNodeStream:u,isWebStream:n,kControllerErrorFunction:s}=ur(),l=vr(),{ERR_INVALID_ARG_TYPE:a}=o,c=(h,f)=>{if(typeof h!="object"||!("aborted"in h))throw new a(f,"AbortSignal",h)};r.exports.addAbortSignal=function(h,f){if(c(h,"signal"),!u(f)&&!n(f))throw new a("stream",["ReadableStream","WritableStream","Stream"],f);return r.exports.addAbortSignalNoValidate(h,f)},r.exports.addAbortSignalNoValidate=function(h,f){if(typeof h!="object"||!("aborted"in h))return f;let g=u(f)?()=>{f.destroy(new t(void 0,{cause:h.reason}))}:()=>{f[s](new t(void 0,{cause:h.reason}))};return h.aborted?g():(h.addEventListener("abort",g),l(f,()=>h.removeEventListener("abort",g))),f}}),Rp=ve((e,r)=>{ye(),we(),be();var{StringPrototypeSlice:t,SymbolIterator:o,TypedArrayPrototypeSet:u,Uint8Array:n}=ot(),{Buffer:s}=(pt(),Ve(dt)),{inspect:l}=or();r.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let c={data:a,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(a){let c={data:a,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let c=this.head,h=""+c.data;for(;(c=c.next)!==null;)h+=a+c.data;return h}concat(a){if(this.length===0)return s.alloc(0);let c=s.allocUnsafe(a>>>0),h=this.head,f=0;for(;h;)u(c,h.data,f),f+=h.data.length,h=h.next;return c}consume(a,c){let h=this.head.data;if(a<h.length){let f=h.slice(0,a);return this.head.data=h.slice(a),f}return a===h.length?this.shift():c?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[o](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let c="",h=this.head,f=0;do{let g=h.data;if(a>g.length)c+=g,a-=g.length;else{a===g.length?(c+=g,++f,h.next?this.head=h.next:this.head=this.tail=null):(c+=t(g,0,a),this.head=h,h.data=t(g,a));break}++f}while((h=h.next)!==null);return this.length-=f,c}_getBuffer(a){let c=s.allocUnsafe(a),h=a,f=this.head,g=0;do{let y=f.data;if(a>y.length)u(c,y,h-a),a-=y.length;else{a===y.length?(u(c,y,h-a),++g,f.next?this.head=f.next:this.head=this.tail=null):(u(c,new n(y.buffer,y.byteOffset,a),h-a),this.head=f,f.data=y.slice(a));break}++g}while((f=f.next)!==null);return this.length-=g,c}[Symbol.for("nodejs.util.inspect.custom")](a,c){return l(this,{...c,depth:0,customInspect:!1})}}}),xa=ve((e,r)=>{ye(),we(),be();var{MathFloor:t,NumberIsInteger:o}=ot(),{ERR_INVALID_ARG_VALUE:u}=vt().codes;function n(a,c,h){return a.highWaterMark!=null?a.highWaterMark:c?a[h]:null}function s(a){return a?16:16*1024}function l(a,c,h,f){let g=n(c,f,h);if(g!=null){if(!o(g)||g<0){let y=f?`options.${h}`:"options.highWaterMark";throw new u(y,g)}return t(g)}return s(a.objectMode)}r.exports={getHighWaterMark:l,getDefaultHighWaterMark:s}});function zl(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=r),[t,t===r?0:4-t%4]}function xp(e,r,t){for(var o,u,n=[],s=r;s<t;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),n.push(Bt[(u=o)>>18&63]+Bt[u>>12&63]+Bt[u>>6&63]+Bt[63&u]);return n.join("")}function rr(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,_e.prototype),r}function _e(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ko(e)}return Sc(e,r,t)}function Sc(e,r,t){if(typeof e=="string")return function(n,s){if(typeof s=="string"&&s!==""||(s="utf8"),!_e.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var l=0|Tc(n,s),a=rr(l),c=a.write(n,s);return c!==l&&(a=a.slice(0,c)),a}(e,r);if(ArrayBuffer.isView(e))return bs(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(nr(e,ArrayBuffer)||e&&nr(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nr(e,SharedArrayBuffer)||e&&nr(e.buffer,SharedArrayBuffer)))return Op(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return _e.from(o,r,t);var u=function(n){if(_e.isBuffer(n)){var s=0|Oa(n.length),l=rr(s);return l.length===0||n.copy(l,0,0,s),l}if(n.length!==void 0)return typeof n.length!="number"||Pa(n.length)?rr(0):bs(n);if(n.type==="Buffer"&&Array.isArray(n.data))return bs(n.data)}(e);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return _e.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Ac(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Ko(e){return Ac(e),rr(e<0?0:0|Oa(e))}function bs(e){for(var r=e.length<0?0:0|Oa(e.length),t=rr(r),o=0;o<r;o+=1)t[o]=255&e[o];return t}function Op(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=r===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,r):new Uint8Array(e,r,t),Object.setPrototypeOf(o,_e.prototype),o}function Oa(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Tc(e,r){if(_e.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||nr(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&t===0)return 0;for(var u=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Yo(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return Rc(e).length;default:if(u)return o?-1:Yo(e).length;r=(""+r).toLowerCase(),u=!0}}function Pp(e,r,t){var o=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return qp(this,r,t);case"utf8":case"utf-8":return kc(this,r,t);case"ascii":return jp(this,r,t);case"latin1":case"binary":return Fp(this,r,t);case"base64":return Dp(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wp(this,r,t);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Tr(e,r,t){var o=e[r];e[r]=e[t],e[t]=o}function Vl(e,r,t,o,u){if(e.length===0)return-1;if(typeof t=="string"?(o=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),Pa(t=+t)&&(t=u?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(u)return-1;t=e.length-1}else if(t<0){if(!u)return-1;t=0}if(typeof r=="string"&&(r=_e.from(r,o)),_e.isBuffer(r))return r.length===0?-1:Kl(e,r,t,o,u);if(typeof r=="number")return r&=255,typeof Uint8Array.prototype.indexOf=="function"?u?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):Kl(e,[r],t,o,u);throw new TypeError("val must be string, number or Buffer")}function Kl(e,r,t,o,u){var n,s=1,l=e.length,a=r.length;if(o!==void 0&&((o=String(o).toLowerCase())==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(e.length<2||r.length<2)return-1;s=2,l/=2,a/=2,t/=2}function c(y,b){return s===1?y[b]:y.readUInt16BE(b*s)}if(u){var h=-1;for(n=t;n<l;n++)if(c(e,n)===c(r,h===-1?0:n-h)){if(h===-1&&(h=n),n-h+1===a)return h*s}else h!==-1&&(n-=n-h),h=-1}else for(t+a>l&&(t=l-a),n=t;n>=0;n--){for(var f=!0,g=0;g<a;g++)if(c(e,n+g)!==c(r,g)){f=!1;break}if(f)return n}return-1}function Bp(e,r,t,o){t=Number(t)||0;var u=e.length-t;o?(o=Number(o))>u&&(o=u):o=u;var n=r.length;o>n/2&&(o=n/2);for(var s=0;s<o;++s){var l=parseInt(r.substr(2*s,2),16);if(Pa(l))return s;e[t+s]=l}return s}function Np(e,r,t,o){return ji(Yo(r,e.length-t),e,t,o)}function Ic(e,r,t,o){return ji(function(u){for(var n=[],s=0;s<u.length;++s)n.push(255&u.charCodeAt(s));return n}(r),e,t,o)}function Lp(e,r,t,o){return Ic(e,r,t,o)}function Mp(e,r,t,o){return ji(Rc(r),e,t,o)}function Up(e,r,t,o){return ji(function(u,n){for(var s,l,a,c=[],h=0;h<u.length&&!((n-=2)<0);++h)s=u.charCodeAt(h),l=s>>8,a=s%256,c.push(a),c.push(l);return c}(r,e.length-t),e,t,o)}function Dp(e,r,t){return r===0&&t===e.length?Ci.fromByteArray(e):Ci.fromByteArray(e.slice(r,t))}function kc(e,r,t){t=Math.min(e.length,t);for(var o=[],u=r;u<t;){var n,s,l,a,c=e[u],h=null,f=c>239?4:c>223?3:c>191?2:1;if(u+f<=t)switch(f){case 1:c<128&&(h=c);break;case 2:(192&(n=e[u+1]))==128&&(a=(31&c)<<6|63&n)>127&&(h=a);break;case 3:n=e[u+1],s=e[u+2],(192&n)==128&&(192&s)==128&&(a=(15&c)<<12|(63&n)<<6|63&s)>2047&&(a<55296||a>57343)&&(h=a);break;case 4:n=e[u+1],s=e[u+2],l=e[u+3],(192&n)==128&&(192&s)==128&&(192&l)==128&&(a=(15&c)<<18|(63&n)<<12|(63&s)<<6|63&l)>65535&&a<1114112&&(h=a)}h===null?(h=65533,f=1):h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h),u+=f}return function(g){var y=g.length;if(y<=4096)return String.fromCharCode.apply(String,g);for(var b="",w=0;w<y;)b+=String.fromCharCode.apply(String,g.slice(w,w+=4096));return b}(o)}function jp(e,r,t){var o="";t=Math.min(e.length,t);for(var u=r;u<t;++u)o+=String.fromCharCode(127&e[u]);return o}function Fp(e,r,t){var o="";t=Math.min(e.length,t);for(var u=r;u<t;++u)o+=String.fromCharCode(e[u]);return o}function qp(e,r,t){var o=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>o)&&(t=o);for(var u="",n=r;n<t;++n)u+=Oc[e[n]];return u}function Wp(e,r,t){for(var o=e.slice(r,t),u="",n=0;n<o.length;n+=2)u+=String.fromCharCode(o[n]+256*o[n+1]);return u}function at(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function _t(e,r,t,o,u,n){if(!_e.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>u||r<n)throw new RangeError('"value" argument is out of bounds');if(t+o>e.length)throw new RangeError("Index out of range")}function Cc(e,r,t,o,u,n){if(t+o>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Yl(e,r,t,o,u){return r=+r,t>>>=0,u||Cc(e,0,t,4),Br.write(e,r,t,o,23,4),t+4}function Gl(e,r,t,o,u){return r=+r,t>>>=0,u||Cc(e,0,t,8),Br.write(e,r,t,o,52,8),t+8}function Yo(e,r){var t;r=r||1/0;for(var o=e.length,u=null,n=[],s=0;s<o;++s){if((t=e.charCodeAt(s))>55295&&t<57344){if(!u){if(t>56319){(r-=3)>-1&&n.push(239,191,189);continue}if(s+1===o){(r-=3)>-1&&n.push(239,191,189);continue}u=t;continue}if(t<56320){(r-=3)>-1&&n.push(239,191,189),u=t;continue}t=65536+(u-55296<<10|t-56320)}else u&&(r-=3)>-1&&n.push(239,191,189);if(u=null,t<128){if((r-=1)<0)break;n.push(t)}else if(t<2048){if((r-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function Rc(e){return Ci.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(xc,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(e))}function ji(e,r,t,o){for(var u=0;u<o&&!(u+t>=r.length||u>=e.length);++u)r[u+t]=e[u];return u}function nr(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function Pa(e){return e!=e}function Ql(e,r){for(var t in e)r[t]=e[t]}function Ir(e,r,t){return Ct(e,r,t)}function Sn(e){var r;switch(this.encoding=function(t){var o=function(u){if(!u)return"utf8";for(var n;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(n)return;u=(""+u).toLowerCase(),n=!0}}(t);if(typeof o!="string"&&(Ri.isEncoding===Go||!Go(t)))throw new Error("Unknown encoding: "+t);return o||t}(e),this.encoding){case"utf16le":this.text=Hp,this.end=zp,r=4;break;case"utf8":this.fillLast=$p,r=4;break;case"base64":this.text=Vp,this.end=Kp,r=3;break;default:return this.write=Yp,this.end=Gp,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ri.allocUnsafe(r)}function ws(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function $p(e){var r=this.lastTotal-this.lastNeed,t=function(o,u,n){if((192&u[0])!=128)return o.lastNeed=0,"�";if(o.lastNeed>1&&u.length>1){if((192&u[1])!=128)return o.lastNeed=1,"�";if(o.lastNeed>2&&u.length>2&&(192&u[2])!=128)return o.lastNeed=2,"�"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length,void 0)}function Hp(e,r){if((e.length-r)%2==0){var t=e.toString("utf16le",r);if(t){var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function zp(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function Vp(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function Kp(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function Yp(e){return e.toString(this.encoding)}function Gp(e){return e&&e.length?this.write(e):""}var Jl,Bt,Et,Zl,Zn,kr,Xl,eu,Mt,Ci,Br,_s,xc,Oc,An,Tn,Ct,tu,an,Ri,Go,ru=ft(()=>{for(ye(),we(),be(),Jl={byteLength:function(e){var r=zl(e),t=r[0],o=r[1];return 3*(t+o)/4-o},toByteArray:function(e){var r,t,o=zl(e),u=o[0],n=o[1],s=new Zl(function(c,h,f){return 3*(h+f)/4-f}(0,u,n)),l=0,a=n>0?u-4:u;for(t=0;t<a;t+=4)r=Et[e.charCodeAt(t)]<<18|Et[e.charCodeAt(t+1)]<<12|Et[e.charCodeAt(t+2)]<<6|Et[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return n===2&&(r=Et[e.charCodeAt(t)]<<2|Et[e.charCodeAt(t+1)]>>4,s[l++]=255&r),n===1&&(r=Et[e.charCodeAt(t)]<<10|Et[e.charCodeAt(t+1)]<<4|Et[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s},fromByteArray:function(e){for(var r,t=e.length,o=t%3,u=[],n=0,s=t-o;n<s;n+=16383)u.push(xp(e,n,n+16383>s?s:n+16383));return o===1?(r=e[t-1],u.push(Bt[r>>2]+Bt[r<<4&63]+"==")):o===2&&(r=(e[t-2]<<8)+e[t-1],u.push(Bt[r>>10]+Bt[r>>4&63]+Bt[r<<2&63]+"=")),u.join("")}},Bt=[],Et=[],Zl=typeof Uint8Array<"u"?Uint8Array:Array,Zn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kr=0,Xl=Zn.length;kr<Xl;++kr)Bt[kr]=Zn[kr],Et[Zn.charCodeAt(kr)]=kr;Et[45]=62,Et[95]=63,eu={read:function(e,r,t,o,u){var n,s,l=8*u-o-1,a=(1<<l)-1,c=a>>1,h=-7,f=t?u-1:0,g=t?-1:1,y=e[r+f];for(f+=g,n=y&(1<<-h)-1,y>>=-h,h+=l;h>0;n=256*n+e[r+f],f+=g,h-=8);for(s=n&(1<<-h)-1,n>>=-h,h+=o;h>0;s=256*s+e[r+f],f+=g,h-=8);if(n===0)n=1-c;else{if(n===a)return s?NaN:1/0*(y?-1:1);s+=Math.pow(2,o),n-=c}return(y?-1:1)*s*Math.pow(2,n-o)},write:function(e,r,t,o,u,n){var s,l,a,c=8*n-u-1,h=(1<<c)-1,f=h>>1,g=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:n-1,b=o?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,s=h):(s=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-s))<1&&(s--,a*=2),(r+=s+f>=1?g/a:g*Math.pow(2,1-f))*a>=2&&(s++,a/=2),s+f>=h?(l=0,s=h):s+f>=1?(l=(r*a-1)*Math.pow(2,u),s+=f):(l=r*Math.pow(2,f-1)*Math.pow(2,u),s=0));u>=8;e[t+y]=255&l,y+=b,l/=256,u-=8);for(s=s<<u|l,c+=u;c>0;e[t+y]=255&s,y+=b,s/=256,c-=8);e[t+y-b]|=128*w}},Mt={},Ci=Jl,Br=eu,_s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Mt.Buffer=_e,Mt.SlowBuffer=function(e){return+e!=e&&(e=0),_e.alloc(+e)},Mt.INSPECT_MAX_BYTES=50,Mt.kMaxLength=2147483647,_e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}(),_e.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_e.prototype,"parent",{enumerable:!0,get:function(){if(_e.isBuffer(this))return this.buffer}}),Object.defineProperty(_e.prototype,"offset",{enumerable:!0,get:function(){if(_e.isBuffer(this))return this.byteOffset}}),_e.poolSize=8192,_e.from=function(e,r,t){return Sc(e,r,t)},Object.setPrototypeOf(_e.prototype,Uint8Array.prototype),Object.setPrototypeOf(_e,Uint8Array),_e.alloc=function(e,r,t){return function(o,u,n){return Ac(o),o<=0?rr(o):u!==void 0?typeof n=="string"?rr(o).fill(u,n):rr(o).fill(u):rr(o)}(e,r,t)},_e.allocUnsafe=function(e){return Ko(e)},_e.allocUnsafeSlow=function(e){return Ko(e)},_e.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==_e.prototype},_e.compare=function(e,r){if(nr(e,Uint8Array)&&(e=_e.from(e,e.offset,e.byteLength)),nr(r,Uint8Array)&&(r=_e.from(r,r.offset,r.byteLength)),!_e.isBuffer(e)||!_e.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var t=e.length,o=r.length,u=0,n=Math.min(t,o);u<n;++u)if(e[u]!==r[u]){t=e[u],o=r[u];break}return t<o?-1:o<t?1:0},_e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_e.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return _e.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var o=_e.allocUnsafe(r),u=0;for(t=0;t<e.length;++t){var n=e[t];if(nr(n,Uint8Array)&&(n=_e.from(n)),!_e.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(o,u),u+=n.length}return o},_e.byteLength=Tc,_e.prototype._isBuffer=!0,_e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Tr(this,r,r+1);return this},_e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Tr(this,r,r+3),Tr(this,r+1,r+2);return this},_e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Tr(this,r,r+7),Tr(this,r+1,r+6),Tr(this,r+2,r+5),Tr(this,r+3,r+4);return this},_e.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?kc(this,0,e):Pp.apply(this,arguments)},_e.prototype.toLocaleString=_e.prototype.toString,_e.prototype.equals=function(e){if(!_e.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||_e.compare(this,e)===0},_e.prototype.inspect=function(){var e="",r=Mt.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},_s&&(_e.prototype[_s]=_e.prototype.inspect),_e.prototype.compare=function(e,r,t,o,u){if(nr(e,Uint8Array)&&(e=_e.from(e,e.offset,e.byteLength)),!_e.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),o===void 0&&(o=0),u===void 0&&(u=this.length),r<0||t>e.length||o<0||u>this.length)throw new RangeError("out of range index");if(o>=u&&r>=t)return 0;if(o>=u)return-1;if(r>=t)return 1;if(this===e)return 0;for(var n=(u>>>=0)-(o>>>=0),s=(t>>>=0)-(r>>>=0),l=Math.min(n,s),a=this.slice(o,u),c=e.slice(r,t),h=0;h<l;++h)if(a[h]!==c[h]){n=a[h],s=c[h];break}return n<s?-1:s<n?1:0},_e.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},_e.prototype.indexOf=function(e,r,t){return Vl(this,e,r,t,!0)},_e.prototype.lastIndexOf=function(e,r,t){return Vl(this,e,r,t,!1)},_e.prototype.write=function(e,r,t,o){if(r===void 0)o="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")o=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(t)?(t>>>=0,o===void 0&&(o="utf8")):(o=t,t=void 0)}var u=this.length-r;if((t===void 0||t>u)&&(t=u),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var n=!1;;)switch(o){case"hex":return Bp(this,e,r,t);case"utf8":case"utf-8":return Np(this,e,r,t);case"ascii":return Ic(this,e,r,t);case"latin1":case"binary":return Lp(this,e,r,t);case"base64":return Mp(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Up(this,e,r,t);default:if(n)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),n=!0}},_e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},_e.prototype.slice=function(e,r){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(r=r===void 0?t:~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),r<e&&(r=e);var o=this.subarray(e,r);return Object.setPrototypeOf(o,_e.prototype),o},_e.prototype.readUIntLE=function(e,r,t){e>>>=0,r>>>=0,t||at(e,r,this.length);for(var o=this[e],u=1,n=0;++n<r&&(u*=256);)o+=this[e+n]*u;return o},_e.prototype.readUIntBE=function(e,r,t){e>>>=0,r>>>=0,t||at(e,r,this.length);for(var o=this[e+--r],u=1;r>0&&(u*=256);)o+=this[e+--r]*u;return o},_e.prototype.readUInt8=function(e,r){return e>>>=0,r||at(e,1,this.length),this[e]},_e.prototype.readUInt16LE=function(e,r){return e>>>=0,r||at(e,2,this.length),this[e]|this[e+1]<<8},_e.prototype.readUInt16BE=function(e,r){return e>>>=0,r||at(e,2,this.length),this[e]<<8|this[e+1]},_e.prototype.readUInt32LE=function(e,r){return e>>>=0,r||at(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},_e.prototype.readUInt32BE=function(e,r){return e>>>=0,r||at(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},_e.prototype.readIntLE=function(e,r,t){e>>>=0,r>>>=0,t||at(e,r,this.length);for(var o=this[e],u=1,n=0;++n<r&&(u*=256);)o+=this[e+n]*u;return o>=(u*=128)&&(o-=Math.pow(2,8*r)),o},_e.prototype.readIntBE=function(e,r,t){e>>>=0,r>>>=0,t||at(e,r,this.length);for(var o=r,u=1,n=this[e+--o];o>0&&(u*=256);)n+=this[e+--o]*u;return n>=(u*=128)&&(n-=Math.pow(2,8*r)),n},_e.prototype.readInt8=function(e,r){return e>>>=0,r||at(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},_e.prototype.readInt16LE=function(e,r){e>>>=0,r||at(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},_e.prototype.readInt16BE=function(e,r){e>>>=0,r||at(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},_e.prototype.readInt32LE=function(e,r){return e>>>=0,r||at(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},_e.prototype.readInt32BE=function(e,r){return e>>>=0,r||at(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},_e.prototype.readFloatLE=function(e,r){return e>>>=0,r||at(e,4,this.length),Br.read(this,e,!0,23,4)},_e.prototype.readFloatBE=function(e,r){return e>>>=0,r||at(e,4,this.length),Br.read(this,e,!1,23,4)},_e.prototype.readDoubleLE=function(e,r){return e>>>=0,r||at(e,8,this.length),Br.read(this,e,!0,52,8)},_e.prototype.readDoubleBE=function(e,r){return e>>>=0,r||at(e,8,this.length),Br.read(this,e,!1,52,8)},_e.prototype.writeUIntLE=function(e,r,t,o){e=+e,r>>>=0,t>>>=0,o||_t(this,e,r,t,Math.pow(2,8*t)-1,0);var u=1,n=0;for(this[r]=255&e;++n<t&&(u*=256);)this[r+n]=e/u&255;return r+t},_e.prototype.writeUIntBE=function(e,r,t,o){e=+e,r>>>=0,t>>>=0,o||_t(this,e,r,t,Math.pow(2,8*t)-1,0);var u=t-1,n=1;for(this[r+u]=255&e;--u>=0&&(n*=256);)this[r+u]=e/n&255;return r+t},_e.prototype.writeUInt8=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,1,255,0),this[r]=255&e,r+1},_e.prototype.writeUInt16LE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},_e.prototype.writeUInt16BE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},_e.prototype.writeUInt32LE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},_e.prototype.writeUInt32BE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},_e.prototype.writeIntLE=function(e,r,t,o){if(e=+e,r>>>=0,!o){var u=Math.pow(2,8*t-1);_t(this,e,r,t,u-1,-u)}var n=0,s=1,l=0;for(this[r]=255&e;++n<t&&(s*=256);)e<0&&l===0&&this[r+n-1]!==0&&(l=1),this[r+n]=(e/s>>0)-l&255;return r+t},_e.prototype.writeIntBE=function(e,r,t,o){if(e=+e,r>>>=0,!o){var u=Math.pow(2,8*t-1);_t(this,e,r,t,u-1,-u)}var n=t-1,s=1,l=0;for(this[r+n]=255&e;--n>=0&&(s*=256);)e<0&&l===0&&this[r+n+1]!==0&&(l=1),this[r+n]=(e/s>>0)-l&255;return r+t},_e.prototype.writeInt8=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},_e.prototype.writeInt16LE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},_e.prototype.writeInt16BE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},_e.prototype.writeInt32LE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},_e.prototype.writeInt32BE=function(e,r,t){return e=+e,r>>>=0,t||_t(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},_e.prototype.writeFloatLE=function(e,r,t){return Yl(this,e,r,!0,t)},_e.prototype.writeFloatBE=function(e,r,t){return Yl(this,e,r,!1,t)},_e.prototype.writeDoubleLE=function(e,r,t){return Gl(this,e,r,!0,t)},_e.prototype.writeDoubleBE=function(e,r,t){return Gl(this,e,r,!1,t)},_e.prototype.copy=function(e,r,t,o){if(!_e.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),o||o===0||(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<t&&(o=t),o===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-t&&(o=e.length-r+t);var u=o-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,t,o);else if(this===e&&t<r&&r<o)for(var n=u-1;n>=0;--n)e[n+r]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,o),r);return u},_e.prototype.fill=function(e,r,t,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,t=this.length):typeof t=="string"&&(o=t,t=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!_e.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var u=e.charCodeAt(0);(o==="utf8"&&u<128||o==="latin1")&&(e=u)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var n;if(r>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(n=r;n<t;++n)this[n]=e;else{var s=_e.isBuffer(e)?e:_e.from(e,o),l=s.length;if(l===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<t-r;++n)this[n+r]=s[n%l]}return this},xc=/[^+/0-9A-Za-z-_]/g,Oc=function(){for(var e=new Array(256),r=0;r<16;++r)for(var t=16*r,o=0;o<16;++o)e[t+o]="0123456789abcdef"[r]+"0123456789abcdef"[o];return e}(),Mt.Buffer,Mt.INSPECT_MAX_BYTES,Mt.kMaxLength,An={},Tn=Mt,Ct=Tn.Buffer,Ct.from&&Ct.alloc&&Ct.allocUnsafe&&Ct.allocUnsafeSlow?An=Tn:(Ql(Tn,An),An.Buffer=Ir),Ir.prototype=Object.create(Ct.prototype),Ql(Ct,Ir),Ir.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ct(e,r,t)},Ir.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var o=Ct(e);return r!==void 0?typeof t=="string"?o.fill(r,t):o.fill(r):o.fill(0),o},Ir.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ct(e)},Ir.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Tn.SlowBuffer(e)},tu=An,an={},Ri=tu.Buffer,Go=Ri.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},an.StringDecoder=Sn,Sn.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if((r=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""},Sn.prototype.end=function(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"�":r},Sn.prototype.text=function(e,r){var t=function(u,n,s){var l=n.length-1;if(l<s)return 0;var a=ws(n[l]);return a>=0?(a>0&&(u.lastNeed=a-1),a):--l<s||a===-2?0:(a=ws(n[l]))>=0?(a>0&&(u.lastNeed=a-2),a):--l<s||a===-2?0:(a=ws(n[l]))>=0?(a>0&&(a===2?a=0:u.lastNeed=a-3),a):0}(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var o=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",r,o)},Sn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},an.StringDecoder,an.StringDecoder}),Pc={};Kr(Pc,{StringDecoder:()=>Bc,default:()=>an});var Bc,Qp=ft(()=>{ye(),we(),be(),ru(),ru(),Bc=an.StringDecoder}),Nc=ve((e,r)=>{ye(),we(),be();var t=Yr(),{PromisePrototypeThen:o,SymbolAsyncIterator:u,SymbolIterator:n}=ot(),{Buffer:s}=(pt(),Ve(dt)),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:a}=vt().codes;function c(h,f,g){let y;if(typeof f=="string"||f instanceof s)return new h({objectMode:!0,...g,read(){this.push(f),this.push(null)}});let b;if(f&&f[u])b=!0,y=f[u]();else if(f&&f[n])b=!1,y=f[n]();else throw new l("iterable",["Iterable"],f);let w=new h({objectMode:!0,highWaterMark:1,...g}),_=!1;w._read=function(){_||(_=!0,I())},w._destroy=function(T,k){o(R(T),()=>t.nextTick(k,T),P=>t.nextTick(k,P||T))};async function R(T){let k=T!=null,P=typeof y.throw=="function";if(k&&P){let{value:S,done:E}=await y.throw(T);if(await S,E)return}if(typeof y.return=="function"){let{value:S}=await y.return();await S}}async function I(){for(;;){try{let{value:T,done:k}=b?await y.next():y.next();if(k)w.push(null);else{let P=T&&typeof T.then=="function"?await T:T;if(P===null)throw _=!1,new a;if(w.push(P))continue;_=!1}}catch(T){w.destroy(T)}break}}return w}r.exports=c}),Fi=ve((e,r)=>{ye(),we(),be();var t=Yr(),{ArrayPrototypeIndexOf:o,NumberIsInteger:u,NumberIsNaN:n,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:a,ObjectSetPrototypeOf:c,Promise:h,SafeSet:f,SymbolAsyncIterator:g,Symbol:y}=ot();r.exports=A,A.ReadableState=de;var{EventEmitter:b}=(yn(),Ve(Gr)),{Stream:w,prependListener:_}=Ra(),{Buffer:R}=(pt(),Ve(dt)),{addAbortSignal:I}=Di(),T=vr(),k=or().debuglog("stream",d=>{k=d}),P=Rp(),S=mn(),{getHighWaterMark:E,getDefaultHighWaterMark:O}=xa(),{aggregateTwoErrors:L,codes:{ERR_INVALID_ARG_TYPE:Q,ERR_METHOD_NOT_IMPLEMENTED:re,ERR_OUT_OF_RANGE:v,ERR_STREAM_PUSH_AFTER_EOF:W,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$}}=vt(),{validateObject:q}=Ui(),Z=y("kPaused"),{StringDecoder:V}=(Qp(),Ve(Pc)),F=Nc();c(A.prototype,w.prototype),c(A,w);var oe=()=>{},{errorOrDestroy:se}=S;function de(d,m,C){typeof C!="boolean"&&(C=m instanceof ar()),this.objectMode=!!(d&&d.objectMode),C&&(this.objectMode=this.objectMode||!!(d&&d.readableObjectMode)),this.highWaterMark=d?E(this,d,"readableHighWaterMark",C):O(!1),this.buffer=new P,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Z]=null,this.errorEmitted=!1,this.emitClose=!d||d.emitClose!==!1,this.autoDestroy=!d||d.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=d&&d.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,d&&d.encoding&&(this.decoder=new V(d.encoding),this.encoding=d.encoding)}function A(d){if(!(this instanceof A))return new A(d);let m=this instanceof ar();this._readableState=new de(d,this,m),d&&(typeof d.read=="function"&&(this._read=d.read),typeof d.destroy=="function"&&(this._destroy=d.destroy),typeof d.construct=="function"&&(this._construct=d.construct),d.signal&&!m&&I(d.signal,this)),w.call(this,d),S.construct(this,()=>{this._readableState.needReadable&&ne(this,this._readableState)})}A.prototype.destroy=S.destroy,A.prototype._undestroy=S.undestroy,A.prototype._destroy=function(d,m){m(d)},A.prototype[b.captureRejectionSymbol]=function(d){this.destroy(d)},A.prototype.push=function(d,m){return J(this,d,m,!1)},A.prototype.unshift=function(d,m){return J(this,d,m,!0)};function J(d,m,C,M){k("readableAddChunk",m);let z=d._readableState,he;if(z.objectMode||(typeof m=="string"?(C=C||z.defaultEncoding,z.encoding!==C&&(M&&z.encoding?m=R.from(m,C).toString(z.encoding):(m=R.from(m,C),C=""))):m instanceof R?C="":w._isUint8Array(m)?(m=w._uint8ArrayToBuffer(m),C=""):m!=null&&(he=new Q("chunk",["string","Buffer","Uint8Array"],m))),he)se(d,he);else if(m===null)z.reading=!1,B(d,z);else if(z.objectMode||m&&m.length>0)if(M)if(z.endEmitted)se(d,new $);else{if(z.destroyed||z.errored)return!1;ae(d,z,m,!0)}else if(z.ended)se(d,new W);else{if(z.destroyed||z.errored)return!1;z.reading=!1,z.decoder&&!C?(m=z.decoder.write(m),z.objectMode||m.length!==0?ae(d,z,m,!1):ne(d,z)):ae(d,z,m,!1)}else M||(z.reading=!1,ne(d,z));return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function ae(d,m,C,M){m.flowing&&m.length===0&&!m.sync&&d.listenerCount("data")>0?(m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null,m.dataEmitted=!0,d.emit("data",C)):(m.length+=m.objectMode?1:C.length,M?m.buffer.unshift(C):m.buffer.push(C),m.needReadable&&X(d)),ne(d,m)}A.prototype.isPaused=function(){let d=this._readableState;return d[Z]===!0||d.flowing===!1},A.prototype.setEncoding=function(d){let m=new V(d);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;let C=this._readableState.buffer,M="";for(let z of C)M+=m.write(z);return C.clear(),M!==""&&C.push(M),this._readableState.length=M.length,this};var Se=1073741824;function le(d){if(d>Se)throw new v("size","<= 1GiB",d);return d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++,d}function D(d,m){return d<=0||m.length===0&&m.ended?0:m.objectMode?1:n(d)?m.flowing&&m.length?m.buffer.first().length:m.length:d<=m.length?d:m.ended?m.length:0}A.prototype.read=function(d){k("read",d),d===void 0?d=NaN:u(d)||(d=s(d,10));let m=this._readableState,C=d;if(d>m.highWaterMark&&(m.highWaterMark=le(d)),d!==0&&(m.emittedReadable=!1),d===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return k("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?j(this):X(this),null;if(d=D(d,m),d===0&&m.ended)return m.length===0&&j(this),null;let M=m.needReadable;if(k("need readable",M),(m.length===0||m.length-d<m.highWaterMark)&&(M=!0,k("length less than watermark",M)),m.ended||m.reading||m.destroyed||m.errored||!m.constructed)M=!1,k("reading, ended or constructing",M);else if(M){k("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0);try{this._read(m.highWaterMark)}catch(he){se(this,he)}m.sync=!1,m.reading||(d=D(C,m))}let z;return d>0?z=te(d,m):z=null,z===null?(m.needReadable=m.length<=m.highWaterMark,d=0):(m.length-=d,m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null),m.length===0&&(m.ended||(m.needReadable=!0),C!==d&&m.ended&&j(this)),z!==null&&!m.errorEmitted&&!m.closeEmitted&&(m.dataEmitted=!0,this.emit("data",z)),z};function B(d,m){if(k("onEofChunk"),!m.ended){if(m.decoder){let C=m.decoder.end();C&&C.length&&(m.buffer.push(C),m.length+=m.objectMode?1:C.length)}m.ended=!0,m.sync?X(d):(m.needReadable=!1,m.emittedReadable=!0,ue(d))}}function X(d){let m=d._readableState;k("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(k("emitReadable",m.flowing),m.emittedReadable=!0,t.nextTick(ue,d))}function ue(d){let m=d._readableState;k("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&!m.errored&&(m.length||m.ended)&&(d.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,fe(d)}function ne(d,m){!m.readingMore&&m.constructed&&(m.readingMore=!0,t.nextTick(ie,d,m))}function ie(d,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){let C=m.length;if(k("maybeReadMore read 0"),d.read(0),C===m.length)break}m.readingMore=!1}A.prototype._read=function(d){throw new re("_read()")},A.prototype.pipe=function(d,m){let C=this,M=this._readableState;M.pipes.length===1&&(M.multiAwaitDrain||(M.multiAwaitDrain=!0,M.awaitDrainWriters=new f(M.awaitDrainWriters?[M.awaitDrainWriters]:[]))),M.pipes.push(d),k("pipe count=%d opts=%j",M.pipes.length,m);let z=(!m||m.end!==!1)&&d!==t.stdout&&d!==t.stderr?Ce:it;M.endEmitted?t.nextTick(z):C.once("end",z),d.on("unpipe",he);function he(ct,nt){k("onunpipe"),ct===C&&nt&&nt.hasUnpiped===!1&&(nt.hasUnpiped=!0,ke())}function Ce(){k("onend"),d.end()}let Be,Le=!1;function ke(){k("cleanup"),d.removeListener("close",rt),d.removeListener("finish",Ze),Be&&d.removeListener("drain",Be),d.removeListener("error",We),d.removeListener("unpipe",he),C.removeListener("end",Ce),C.removeListener("end",it),C.removeListener("data",Re),Le=!0,Be&&M.awaitDrainWriters&&(!d._writableState||d._writableState.needDrain)&&Be()}function Ne(){Le||(M.pipes.length===1&&M.pipes[0]===d?(k("false write response, pause",0),M.awaitDrainWriters=d,M.multiAwaitDrain=!1):M.pipes.length>1&&M.pipes.includes(d)&&(k("false write response, pause",M.awaitDrainWriters.size),M.awaitDrainWriters.add(d)),C.pause()),Be||(Be=ge(C,d),d.on("drain",Be))}C.on("data",Re);function Re(ct){k("ondata");let nt=d.write(ct);k("dest.write",nt),nt===!1&&Ne()}function We(ct){if(k("onerror",ct),it(),d.removeListener("error",We),d.listenerCount("error")===0){let nt=d._writableState||d._readableState;nt&&!nt.errorEmitted?se(d,ct):d.emit("error",ct)}}_(d,"error",We);function rt(){d.removeListener("finish",Ze),it()}d.once("close",rt);function Ze(){k("onfinish"),d.removeListener("close",rt),it()}d.once("finish",Ze);function it(){k("unpipe"),C.unpipe(d)}return d.emit("pipe",C),d.writableNeedDrain===!0?M.flowing&&Ne():M.flowing||(k("pipe resume"),C.resume()),d};function ge(d,m){return function(){let C=d._readableState;C.awaitDrainWriters===m?(k("pipeOnDrain",1),C.awaitDrainWriters=null):C.multiAwaitDrain&&(k("pipeOnDrain",C.awaitDrainWriters.size),C.awaitDrainWriters.delete(m)),(!C.awaitDrainWriters||C.awaitDrainWriters.size===0)&&d.listenerCount("data")&&d.resume()}}A.prototype.unpipe=function(d){let m=this._readableState,C={hasUnpiped:!1};if(m.pipes.length===0)return this;if(!d){let z=m.pipes;m.pipes=[],this.pause();for(let he=0;he<z.length;he++)z[he].emit("unpipe",this,{hasUnpiped:!1});return this}let M=o(m.pipes,d);return M===-1?this:(m.pipes.splice(M,1),m.pipes.length===0&&this.pause(),d.emit("unpipe",this,C),this)},A.prototype.on=function(d,m){let C=w.prototype.on.call(this,d,m),M=this._readableState;return d==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):d==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,k("on readable",M.length,M.reading),M.length?X(this):M.reading||t.nextTick(U,this)),C},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(d,m){let C=w.prototype.removeListener.call(this,d,m);return d==="readable"&&t.nextTick(pe,this),C},A.prototype.off=A.prototype.removeListener,A.prototype.removeAllListeners=function(d){let m=w.prototype.removeAllListeners.apply(this,arguments);return(d==="readable"||d===void 0)&&t.nextTick(pe,this),m};function pe(d){let m=d._readableState;m.readableListening=d.listenerCount("readable")>0,m.resumeScheduled&&m[Z]===!1?m.flowing=!0:d.listenerCount("data")>0?d.resume():m.readableListening||(m.flowing=null)}function U(d){k("readable nexttick read 0"),d.read(0)}A.prototype.resume=function(){let d=this._readableState;return d.flowing||(k("resume"),d.flowing=!d.readableListening,K(this,d)),d[Z]=!1,this};function K(d,m){m.resumeScheduled||(m.resumeScheduled=!0,t.nextTick(G,d,m))}function G(d,m){k("resume",m.reading),m.reading||d.read(0),m.resumeScheduled=!1,d.emit("resume"),fe(d),m.flowing&&!m.reading&&d.read(0)}A.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function fe(d){let m=d._readableState;for(k("flow",m.flowing);m.flowing&&d.read()!==null;);}A.prototype.wrap=function(d){let m=!1;d.on("data",M=>{!this.push(M)&&d.pause&&(m=!0,d.pause())}),d.on("end",()=>{this.push(null)}),d.on("error",M=>{se(this,M)}),d.on("close",()=>{this.destroy()}),d.on("destroy",()=>{this.destroy()}),this._read=()=>{m&&d.resume&&(m=!1,d.resume())};let C=a(d);for(let M=1;M<C.length;M++){let z=C[M];this[z]===void 0&&typeof d[z]=="function"&&(this[z]=d[z].bind(d))}return this},A.prototype[g]=function(){return ce(this)},A.prototype.iterator=function(d){return d!==void 0&&q(d,"options"),ce(this,d)};function ce(d,m){typeof d.read!="function"&&(d=A.wrap(d,{objectMode:!0}));let C=H(d,m);return C.stream=d,C}async function*H(d,m){let C=oe;function M(Ce){this===d?(C(),C=oe):C=Ce}d.on("readable",M);let z,he=T(d,{writable:!1},Ce=>{z=Ce?L(z,Ce):null,C(),C=oe});try{for(;;){let Ce=d.destroyed?null:d.read();if(Ce!==null)yield Ce;else{if(z)throw z;if(z===null)return;await new h(M)}}}catch(Ce){throw z=L(z,Ce),z}finally{(z||(m==null?void 0:m.destroyOnReturn)!==!1)&&(z===void 0||d._readableState.autoDestroy)?S.destroyer(d,null):(d.off("readable",M),he())}}l(A.prototype,{readable:{__proto__:null,get(){let d=this._readableState;return!!d&&d.readable!==!1&&!d.destroyed&&!d.errorEmitted&&!d.endEmitted},set(d){this._readableState&&(this._readableState.readable=!!d)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(d){this._readableState&&(this._readableState.flowing=d)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(d){this._readableState&&(this._readableState.destroyed=d)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(de.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(d){this[Z]=!!d}}}),A._fromList=te;function te(d,m){if(m.length===0)return null;let C;return m.objectMode?C=m.buffer.shift():!d||d>=m.length?(m.decoder?C=m.buffer.join(""):m.buffer.length===1?C=m.buffer.first():C=m.buffer.concat(m.length),m.buffer.clear()):C=m.buffer.consume(d,m.decoder),C}function j(d){let m=d._readableState;k("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,t.nextTick(Y,m,d))}function Y(d,m){if(k("endReadableNT",d.endEmitted,d.length),!d.errored&&!d.closeEmitted&&!d.endEmitted&&d.length===0){if(d.endEmitted=!0,m.emit("end"),m.writable&&m.allowHalfOpen===!1)t.nextTick(ee,m);else if(d.autoDestroy){let C=m._writableState;(!C||C.autoDestroy&&(C.finished||C.writable===!1))&&m.destroy()}}}function ee(d){d.writable&&!d.writableEnded&&!d.destroyed&&d.end()}A.from=function(d,m){return F(A,d,m)};var me;function p(){return me===void 0&&(me={}),me}A.fromWeb=function(d,m){return p().newStreamReadableFromReadableStream(d,m)},A.toWeb=function(d,m){return p().newReadableStreamFromStreamReadable(d,m)},A.wrap=function(d,m){var C,M;return new A({objectMode:(C=(M=d.readableObjectMode)!==null&&M!==void 0?M:d.objectMode)!==null&&C!==void 0?C:!0,...m,destroy(z,he){S.destroyer(d,z),he(z)}}).wrap(d)}}),Lc=ve((e,r)=>{ye(),we(),be();var t=Yr(),{ArrayPrototypeSlice:o,Error:u,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:c,Symbol:h,SymbolHasInstance:f}=ot();r.exports=V,V.WritableState=q;var{EventEmitter:g}=(yn(),Ve(Gr)),y=Ra().Stream,{Buffer:b}=(pt(),Ve(dt)),w=mn(),{addAbortSignal:_}=Di(),{getHighWaterMark:R,getDefaultHighWaterMark:I}=xa(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:L,ERR_STREAM_WRITE_AFTER_END:Q,ERR_UNKNOWN_ENCODING:re}=vt().codes,{errorOrDestroy:v}=w;a(V.prototype,y.prototype),a(V,y);function W(){}var $=h("kOnFinished");function q(U,K,G){typeof G!="boolean"&&(G=K instanceof ar()),this.objectMode=!!(U&&U.objectMode),G&&(this.objectMode=this.objectMode||!!(U&&U.writableObjectMode)),this.highWaterMark=U?R(this,U,"writableHighWaterMark",G):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let fe=!!(U&&U.decodeStrings===!1);this.decodeStrings=!fe,this.defaultEncoding=U&&U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=A.bind(void 0,K),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!U||U.emitClose!==!1,this.autoDestroy=!U||U.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[$]=[]}function Z(U){U.buffered=[],U.bufferedIndex=0,U.allBuffers=!0,U.allNoop=!0}q.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},s(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function V(U){let K=this instanceof ar();if(!K&&!n(V,this))return new V(U);this._writableState=new q(U,this,K),U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final),typeof U.construct=="function"&&(this._construct=U.construct),U.signal&&_(U.signal,this)),y.call(this,U),w.construct(this,()=>{let G=this._writableState;G.writing||le(this,G),ue(this,G)})}s(V,f,{__proto__:null,value:function(U){return n(this,U)?!0:this!==V?!1:U&&U._writableState instanceof q}}),V.prototype.pipe=function(){v(this,new S)};function F(U,K,G,fe){let ce=U._writableState;if(typeof G=="function")fe=G,G=ce.defaultEncoding;else{if(!G)G=ce.defaultEncoding;else if(G!=="buffer"&&!b.isEncoding(G))throw new re(G);typeof fe!="function"&&(fe=W)}if(K===null)throw new L;if(!ce.objectMode)if(typeof K=="string")ce.decodeStrings!==!1&&(K=b.from(K,G),G="buffer");else if(K instanceof b)G="buffer";else if(y._isUint8Array(K))K=y._uint8ArrayToBuffer(K),G="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],K);let H;return ce.ending?H=new Q:ce.destroyed&&(H=new E("write")),H?(t.nextTick(fe,H),v(U,H,!0),H):(ce.pendingcb++,oe(U,ce,K,G,fe))}V.prototype.write=function(U,K,G){return F(this,U,K,G)===!0},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){let U=this._writableState;U.corked&&(U.corked--,U.writing||le(this,U))},V.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=c(U)),!b.isEncoding(U))throw new re(U);return this._writableState.defaultEncoding=U,this};function oe(U,K,G,fe,ce){let H=K.objectMode?1:G.length;K.length+=H;let te=K.length<K.highWaterMark;return te||(K.needDrain=!0),K.writing||K.corked||K.errored||!K.constructed?(K.buffered.push({chunk:G,encoding:fe,callback:ce}),K.allBuffers&&fe!=="buffer"&&(K.allBuffers=!1),K.allNoop&&ce!==W&&(K.allNoop=!1)):(K.writelen=H,K.writecb=ce,K.writing=!0,K.sync=!0,U._write(G,fe,K.onwrite),K.sync=!1),te&&!K.errored&&!K.destroyed}function se(U,K,G,fe,ce,H,te){K.writelen=fe,K.writecb=te,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new E("write")):G?U._writev(ce,K.onwrite):U._write(ce,H,K.onwrite),K.sync=!1}function de(U,K,G,fe){--K.pendingcb,fe(G),Se(K),v(U,G)}function A(U,K){let G=U._writableState,fe=G.sync,ce=G.writecb;if(typeof ce!="function"){v(U,new P);return}G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0,K?(K.stack,G.errored||(G.errored=K),U._readableState&&!U._readableState.errored&&(U._readableState.errored=K),fe?t.nextTick(de,U,G,K,ce):de(U,G,K,ce)):(G.buffered.length>G.bufferedIndex&&le(U,G),fe?G.afterWriteTickInfo!==null&&G.afterWriteTickInfo.cb===ce?G.afterWriteTickInfo.count++:(G.afterWriteTickInfo={count:1,cb:ce,stream:U,state:G},t.nextTick(J,G.afterWriteTickInfo)):ae(U,G,1,ce))}function J({stream:U,state:K,count:G,cb:fe}){return K.afterWriteTickInfo=null,ae(U,K,G,fe)}function ae(U,K,G,fe){for(!K.ending&&!U.destroyed&&K.length===0&&K.needDrain&&(K.needDrain=!1,U.emit("drain"));G-- >0;)K.pendingcb--,fe();K.destroyed&&Se(K),ue(U,K)}function Se(U){if(U.writing)return;for(let ce=U.bufferedIndex;ce<U.buffered.length;++ce){var K;let{chunk:H,callback:te}=U.buffered[ce],j=U.objectMode?1:H.length;U.length-=j,te((K=U.errored)!==null&&K!==void 0?K:new E("write"))}let G=U[$].splice(0);for(let ce=0;ce<G.length;ce++){var fe;G[ce]((fe=U.errored)!==null&&fe!==void 0?fe:new E("end"))}Z(U)}function le(U,K){if(K.corked||K.bufferProcessing||K.destroyed||!K.constructed)return;let{buffered:G,bufferedIndex:fe,objectMode:ce}=K,H=G.length-fe;if(!H)return;let te=fe;if(K.bufferProcessing=!0,H>1&&U._writev){K.pendingcb-=H-1;let j=K.allNoop?W:ee=>{for(let me=te;me<G.length;++me)G[me].callback(ee)},Y=K.allNoop&&te===0?G:o(G,te);Y.allBuffers=K.allBuffers,se(U,K,!0,K.length,Y,"",j),Z(K)}else{do{let{chunk:j,encoding:Y,callback:ee}=G[te];G[te++]=null;let me=ce?1:j.length;se(U,K,!1,me,j,Y,ee)}while(te<G.length&&!K.writing);te===G.length?Z(K):te>256?(G.splice(0,te),K.bufferedIndex=0):K.bufferedIndex=te}K.bufferProcessing=!1}V.prototype._write=function(U,K,G){if(this._writev)this._writev([{chunk:U,encoding:K}],G);else throw new k("_write()")},V.prototype._writev=null,V.prototype.end=function(U,K,G){let fe=this._writableState;typeof U=="function"?(G=U,U=null,K=null):typeof K=="function"&&(G=K,K=null);let ce;if(U!=null){let H=F(this,U,K);H instanceof u&&(ce=H)}return fe.corked&&(fe.corked=1,this.uncork()),ce||(!fe.errored&&!fe.ending?(fe.ending=!0,ue(this,fe,!0),fe.ended=!0):fe.finished?ce=new O("end"):fe.destroyed&&(ce=new E("end"))),typeof G=="function"&&(ce||fe.finished?t.nextTick(G,ce):fe[$].push(G)),this};function D(U){return U.ending&&!U.destroyed&&U.constructed&&U.length===0&&!U.errored&&U.buffered.length===0&&!U.finished&&!U.writing&&!U.errorEmitted&&!U.closeEmitted}function B(U,K){let G=!1;function fe(ce){if(G){v(U,ce??P());return}if(G=!0,K.pendingcb--,ce){let H=K[$].splice(0);for(let te=0;te<H.length;te++)H[te](ce);v(U,ce,K.sync)}else D(K)&&(K.prefinished=!0,U.emit("prefinish"),K.pendingcb++,t.nextTick(ne,U,K))}K.sync=!0,K.pendingcb++;try{U._final(fe)}catch(ce){fe(ce)}K.sync=!1}function X(U,K){!K.prefinished&&!K.finalCalled&&(typeof U._final=="function"&&!K.destroyed?(K.finalCalled=!0,B(U,K)):(K.prefinished=!0,U.emit("prefinish")))}function ue(U,K,G){D(K)&&(X(U,K),K.pendingcb===0&&(G?(K.pendingcb++,t.nextTick((fe,ce)=>{D(ce)?ne(fe,ce):ce.pendingcb--},U,K)):D(K)&&(K.pendingcb++,ne(U,K))))}function ne(U,K){K.pendingcb--,K.finished=!0;let G=K[$].splice(0);for(let fe=0;fe<G.length;fe++)G[fe]();if(U.emit("finish"),K.autoDestroy){let fe=U._readableState;(!fe||fe.autoDestroy&&(fe.endEmitted||fe.readable===!1))&&U.destroy()}}l(V.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(U){this._writableState&&(this._writableState.destroyed=U)}},writable:{__proto__:null,get(){let U=this._writableState;return!!U&&U.writable!==!1&&!U.destroyed&&!U.errored&&!U.ending&&!U.ended},set(U){this._writableState&&(this._writableState.writable=!!U)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let U=this._writableState;return U?!U.destroyed&&!U.ending&&U.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ie=w.destroy;V.prototype.destroy=function(U,K){let G=this._writableState;return!G.destroyed&&(G.bufferedIndex<G.buffered.length||G[$].length)&&t.nextTick(Se,G),ie.call(this,U,K),this},V.prototype._undestroy=w.undestroy,V.prototype._destroy=function(U,K){K(U)},V.prototype[g.captureRejectionSymbol]=function(U){this.destroy(U)};var ge;function pe(){return ge===void 0&&(ge={}),ge}V.fromWeb=function(U,K){return pe().newStreamWritableFromWritableStream(U,K)},V.toWeb=function(U){return pe().newWritableStreamFromStreamWritable(U)}}),Jp=ve((e,r)=>{ye(),we(),be();var t=Yr(),o=(pt(),Ve(dt)),{isReadable:u,isWritable:n,isIterable:s,isNodeStream:l,isReadableNodeStream:a,isWritableNodeStream:c,isDuplexNodeStream:h}=ur(),f=vr(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b}}=vt(),{destroyer:w}=mn(),_=ar(),R=Fi(),{createDeferredPromise:I}=or(),T=Nc(),k=globalThis.Blob||o.Blob,P=typeof k<"u"?function(re){return re instanceof k}:function(re){return!1},S=globalThis.AbortController||Ca().AbortController,{FunctionPrototypeCall:E}=ot(),O=class extends _{constructor(re){super(re),(re==null?void 0:re.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(re==null?void 0:re.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};r.exports=function re(v,W){if(h(v))return v;if(a(v))return Q({readable:v});if(c(v))return Q({writable:v});if(l(v))return Q({writable:!1,readable:!1});if(typeof v=="function"){let{value:q,write:Z,final:V,destroy:F}=L(v);if(s(q))return T(O,q,{objectMode:!0,write:Z,final:V,destroy:F});let oe=q==null?void 0:q.then;if(typeof oe=="function"){let se,de=E(oe,q,A=>{if(A!=null)throw new b("nully","body",A)},A=>{w(se,A)});return se=new O({objectMode:!0,readable:!1,write:Z,final(A){V(async()=>{try{await de,t.nextTick(A,null)}catch(J){t.nextTick(A,J)}})},destroy:F})}throw new b("Iterable, AsyncIterable or AsyncFunction",W,q)}if(P(v))return re(v.arrayBuffer());if(s(v))return T(O,v,{objectMode:!0,writable:!1});if(typeof(v==null?void 0:v.writable)=="object"||typeof(v==null?void 0:v.readable)=="object"){let q=v!=null&&v.readable?a(v==null?void 0:v.readable)?v==null?void 0:v.readable:re(v.readable):void 0,Z=v!=null&&v.writable?c(v==null?void 0:v.writable)?v==null?void 0:v.writable:re(v.writable):void 0;return Q({readable:q,writable:Z})}let $=v==null?void 0:v.then;if(typeof $=="function"){let q;return E($,v,Z=>{Z!=null&&q.push(Z),q.push(null)},Z=>{w(q,Z)}),q=new O({objectMode:!0,writable:!1,read(){}})}throw new y(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],v)};function L(re){let{promise:v,resolve:W}=I(),$=new S,q=$.signal;return{value:re(async function*(){for(;;){let Z=v;v=null;let{chunk:V,done:F,cb:oe}=await Z;if(t.nextTick(oe),F)return;if(q.aborted)throw new g(void 0,{cause:q.reason});({promise:v,resolve:W}=I()),yield V}}(),{signal:q}),write(Z,V,F){let oe=W;W=null,oe({chunk:Z,done:!1,cb:F})},final(Z){let V=W;W=null,V({done:!0,cb:Z})},destroy(Z,V){$.abort(),V(Z)}}}function Q(re){let v=re.readable&&typeof re.readable.read!="function"?R.wrap(re.readable):re.readable,W=re.writable,$=!!u(v),q=!!n(W),Z,V,F,oe,se;function de(A){let J=oe;oe=null,J?J(A):A&&se.destroy(A)}return se=new O({readableObjectMode:!!(v!=null&&v.readableObjectMode),writableObjectMode:!!(W!=null&&W.writableObjectMode),readable:$,writable:q}),q&&(f(W,A=>{q=!1,A&&w(v,A),de(A)}),se._write=function(A,J,ae){W.write(A,J)?ae():Z=ae},se._final=function(A){W.end(),V=A},W.on("drain",function(){if(Z){let A=Z;Z=null,A()}}),W.on("finish",function(){if(V){let A=V;V=null,A()}})),$&&(f(v,A=>{$=!1,A&&w(v,A),de(A)}),v.on("readable",function(){if(F){let A=F;F=null,A()}}),v.on("end",function(){se.push(null)}),se._read=function(){for(;;){let A=v.read();if(A===null){F=se._read;return}if(!se.push(A))return}}),se._destroy=function(A,J){!A&&oe!==null&&(A=new g),F=null,Z=null,V=null,oe===null?J(A):(oe=J,w(W,A),w(v,A))},se}}),ar=ve((e,r)=>{ye(),we(),be();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:u,ObjectSetPrototypeOf:n}=ot();r.exports=a;var s=Fi(),l=Lc();n(a.prototype,s.prototype),n(a,s);{let g=u(l.prototype);for(let y=0;y<g.length;y++){let b=g[y];a.prototype[b]||(a.prototype[b]=l.prototype[b])}}function a(g){if(!(this instanceof a))return new a(g);s.call(this,g),l.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...o(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(l.prototype,"writableLength")},writableFinished:{__proto__:null,...o(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var c;function h(){return c===void 0&&(c={}),c}a.fromWeb=function(g,y){return h().newStreamDuplexFromReadableWritablePair(g,y)},a.toWeb=function(g){return h().newReadableWritablePairFromDuplex(g)};var f;a.from=function(g){return f||(f=Jp()),f(g,"body")}}),Mc=ve((e,r)=>{ye(),we(),be();var{ObjectSetPrototypeOf:t,Symbol:o}=ot();r.exports=a;var{ERR_METHOD_NOT_IMPLEMENTED:u}=vt().codes,n=ar(),{getHighWaterMark:s}=xa();t(a.prototype,n.prototype),t(a,n);var l=o("kCallback");function a(f){if(!(this instanceof a))return new a(f);let g=f?s(this,f,"readableHighWaterMark",!0):null;g===0&&(f={...f,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:f.writableHighWaterMark||0}),n.call(this,f),this._readableState.sync=!1,this[l]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",h)}function c(f){typeof this._flush=="function"&&!this.destroyed?this._flush((g,y)=>{if(g){f?f(g):this.destroy(g);return}y!=null&&this.push(y),this.push(null),f&&f()}):(this.push(null),f&&f())}function h(){this._final!==c&&c.call(this)}a.prototype._final=c,a.prototype._transform=function(f,g,y){throw new u("_transform()")},a.prototype._write=function(f,g,y){let b=this._readableState,w=this._writableState,_=b.length;this._transform(f,g,(R,I)=>{if(R){y(R);return}I!=null&&this.push(I),w.ended||_===b.length||b.length<b.highWaterMark?y():this[l]=y})},a.prototype._read=function(){if(this[l]){let f=this[l];this[l]=null,f()}}}),Uc=ve((e,r)=>{ye(),we(),be();var{ObjectSetPrototypeOf:t}=ot();r.exports=u;var o=Mc();t(u.prototype,o.prototype),t(u,o);function u(n){if(!(this instanceof u))return new u(n);o.call(this,n)}u.prototype._transform=function(n,s,l){l(null,n)}}),Ba=ve((e,r)=>{ye(),we(),be();var t=Yr(),{ArrayIsArray:o,Promise:u,SymbolAsyncIterator:n}=ot(),s=vr(),{once:l}=or(),a=mn(),c=ar(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:_}=vt(),{validateFunction:R,validateAbortSignal:I}=Ui(),{isIterable:T,isReadable:k,isReadableNodeStream:P,isNodeStream:S,isTransformStream:E,isWebStream:O,isReadableStream:L,isReadableEnded:Q}=ur(),re=globalThis.AbortController||Ca().AbortController,v,W;function $(J,ae,Se){let le=!1;J.on("close",()=>{le=!0});let D=s(J,{readable:ae,writable:Se},B=>{le=!B});return{destroy:B=>{le||(le=!0,a.destroyer(J,B||new b("pipe")))},cleanup:D}}function q(J){return R(J[J.length-1],"streams[stream.length - 1]"),J.pop()}function Z(J){if(T(J))return J;if(P(J))return V(J);throw new f("val",["Readable","Iterable","AsyncIterable"],J)}async function*V(J){W||(W=Fi()),yield*W.prototype[n].call(J)}async function F(J,ae,Se,{end:le}){let D,B=null,X=ie=>{if(ie&&(D=ie),B){let ge=B;B=null,ge()}},ue=()=>new u((ie,ge)=>{D?ge(D):B=()=>{D?ge(D):ie()}});ae.on("drain",X);let ne=s(ae,{readable:!1},X);try{ae.writableNeedDrain&&await ue();for await(let ie of J)ae.write(ie)||await ue();le&&ae.end(),await ue(),Se()}catch(ie){Se(D!==ie?h(D,ie):ie)}finally{ne(),ae.off("drain",X)}}async function oe(J,ae,Se,{end:le}){E(ae)&&(ae=ae.writable);let D=ae.getWriter();try{for await(let B of J)await D.ready,D.write(B).catch(()=>{});await D.ready,le&&await D.close(),Se()}catch(B){try{await D.abort(B),Se(B)}catch(X){Se(X)}}}function se(...J){return de(J,l(q(J)))}function de(J,ae,Se){if(J.length===1&&o(J[0])&&(J=J[0]),J.length<2)throw new y("streams");let le=new re,D=le.signal,B=Se==null?void 0:Se.signal,X=[];I(B,"options.signal");function ue(){K(new _)}B==null||B.addEventListener("abort",ue);let ne,ie,ge=[],pe=0;function U(H){K(H,--pe===0)}function K(H,te){if(H&&(!ne||ne.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ne=H),!(!ne&&!te)){for(;ge.length;)ge.shift()(ne);B==null||B.removeEventListener("abort",ue),le.abort(),te&&(ne||X.forEach(j=>j()),t.nextTick(ae,ne,ie))}}let G;for(let H=0;H<J.length;H++){let te=J[H],j=H<J.length-1,Y=H>0,ee=j||(Se==null?void 0:Se.end)!==!1,me=H===J.length-1;if(S(te)){let p=function(d){d&&d.name!=="AbortError"&&d.code!=="ERR_STREAM_PREMATURE_CLOSE"&&U(d)};if(ee){let{destroy:d,cleanup:m}=$(te,j,Y);ge.push(d),k(te)&&me&&X.push(m)}te.on("error",p),k(te)&&me&&X.push(()=>{te.removeListener("error",p)})}if(H===0)if(typeof te=="function"){if(G=te({signal:D}),!T(G))throw new g("Iterable, AsyncIterable or Stream","source",G)}else T(te)||P(te)||E(te)?G=te:G=c.from(te);else if(typeof te=="function"){if(E(G)){var fe;G=Z((fe=G)===null||fe===void 0?void 0:fe.readable)}else G=Z(G);if(G=te(G,{signal:D}),j){if(!T(G,!0))throw new g("AsyncIterable",`transform[${H-1}]`,G)}else{var ce;v||(v=Uc());let p=new v({objectMode:!0}),d=(ce=G)===null||ce===void 0?void 0:ce.then;if(typeof d=="function")pe++,d.call(G,M=>{ie=M,M!=null&&p.write(M),ee&&p.end(),t.nextTick(U)},M=>{p.destroy(M),t.nextTick(U,M)});else if(T(G,!0))pe++,F(G,p,U,{end:ee});else if(L(G)||E(G)){let M=G.readable||G;pe++,F(M,p,U,{end:ee})}else throw new g("AsyncIterable or Promise","destination",G);G=p;let{destroy:m,cleanup:C}=$(G,!1,!0);ge.push(m),me&&X.push(C)}}else if(S(te)){if(P(G)){pe+=2;let p=A(G,te,U,{end:ee});k(te)&&me&&X.push(p)}else if(E(G)||L(G)){let p=G.readable||G;pe++,F(p,te,U,{end:ee})}else if(T(G))pe++,F(G,te,U,{end:ee});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],G);G=te}else if(O(te)){if(P(G))pe++,oe(Z(G),te,U,{end:ee});else if(L(G)||T(G))pe++,oe(G,te,U,{end:ee});else if(E(G))pe++,oe(G.readable,te,U,{end:ee});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],G);G=te}else G=c.from(te)}return(D!=null&&D.aborted||B!=null&&B.aborted)&&t.nextTick(ue),G}function A(J,ae,Se,{end:le}){let D=!1;if(ae.on("close",()=>{D||Se(new w)}),J.pipe(ae,{end:!1}),le){let B=function(){D=!0,ae.end()};Q(J)?t.nextTick(B):J.once("end",B)}else Se();return s(J,{readable:!0,writable:!1},B=>{let X=J._readableState;B&&B.code==="ERR_STREAM_PREMATURE_CLOSE"&&X&&X.ended&&!X.errored&&!X.errorEmitted?J.once("end",Se).once("error",Se):Se(B)}),s(ae,{readable:!1,writable:!0},Se)}r.exports={pipelineImpl:de,pipeline:se}}),Dc=ve((e,r)=>{ye(),we(),be();var{pipeline:t}=Ba(),o=ar(),{destroyer:u}=mn(),{isNodeStream:n,isReadable:s,isWritable:l,isWebStream:a,isTransformStream:c,isWritableStream:h,isReadableStream:f}=ur(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:y,ERR_MISSING_ARGS:b}}=vt(),w=vr();r.exports=function(..._){if(_.length===0)throw new b("streams");if(_.length===1)return o.from(_[0]);let R=[..._];if(typeof _[0]=="function"&&(_[0]=o.from(_[0])),typeof _[_.length-1]=="function"){let v=_.length-1;_[v]=o.from(_[v])}for(let v=0;v<_.length;++v)if(!(!n(_[v])&&!a(_[v]))){if(v<_.length-1&&!(s(_[v])||f(_[v])||c(_[v])))throw new y(`streams[${v}]`,R[v],"must be readable");if(v>0&&!(l(_[v])||h(_[v])||c(_[v])))throw new y(`streams[${v}]`,R[v],"must be writable")}let I,T,k,P,S;function E(v){let W=P;P=null,W?W(v):v?S.destroy(v):!re&&!Q&&S.destroy()}let O=_[0],L=t(_,E),Q=!!(l(O)||h(O)||c(O)),re=!!(s(L)||f(L)||c(L));if(S=new o({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(L!=null&&L.writableObjectMode),writable:Q,readable:re}),Q){if(n(O))S._write=function(W,$,q){O.write(W,$)?q():I=q},S._final=function(W){O.end(),T=W},O.on("drain",function(){if(I){let W=I;I=null,W()}});else if(a(O)){let W=(c(O)?O.writable:O).getWriter();S._write=async function($,q,Z){try{await W.ready,W.write($).catch(()=>{}),Z()}catch(V){Z(V)}},S._final=async function($){try{await W.ready,W.close().catch(()=>{}),T=$}catch(q){$(q)}}}let v=c(L)?L.readable:L;w(v,()=>{if(T){let W=T;T=null,W()}})}if(re){if(n(L))L.on("readable",function(){if(k){let v=k;k=null,v()}}),L.on("end",function(){S.push(null)}),S._read=function(){for(;;){let v=L.read();if(v===null){k=S._read;return}if(!S.push(v))return}};else if(a(L)){let v=(c(L)?L.readable:L).getReader();S._read=async function(){for(;;)try{let{value:W,done:$}=await v.read();if(!S.push(W))return;if($){S.push(null);return}}catch{return}}}}return S._destroy=function(v,W){!v&&P!==null&&(v=new g),k=null,I=null,T=null,P===null?W(v):(P=W,n(L)&&u(L,v))},S}}),Zp=ve((e,r)=>{ye(),we(),be();var t=globalThis.AbortController||Ca().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:s},AbortError:l}=vt(),{validateAbortSignal:a,validateInteger:c,validateObject:h}=Ui(),f=ot().Symbol("kWeak"),{finished:g}=vr(),y=Dc(),{addAbortSignalNoValidate:b}=Di(),{isWritable:w,isNodeStream:_}=ur(),{ArrayPrototypePush:R,MathFloor:I,Number:T,NumberIsNaN:k,Promise:P,PromiseReject:S,PromisePrototypeThen:E,Symbol:O}=ot(),L=O("kEmpty"),Q=O("kEof");function re(le,D){if(D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),_(le)&&!w(le))throw new o("stream",le,"must be writable");let B=y(this,le);return D!=null&&D.signal&&b(D.signal,B),B}function v(le,D){if(typeof le!="function")throw new u("fn",["Function","AsyncFunction"],le);D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal");let B=1;return(D==null?void 0:D.concurrency)!=null&&(B=I(D.concurrency)),c(B,"concurrency",1),(async function*(){var X,ue;let ne=new t,ie=this,ge=[],pe=ne.signal,U={signal:pe},K=()=>ne.abort();D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted&&K(),D==null||(ue=D.signal)===null||ue===void 0||ue.addEventListener("abort",K);let G,fe,ce=!1;function H(){ce=!0}async function te(){try{for await(let ee of ie){var j;if(ce)return;if(pe.aborted)throw new l;try{ee=le(ee,U)}catch(me){ee=S(me)}ee!==L&&(typeof((j=ee)===null||j===void 0?void 0:j.catch)=="function"&&ee.catch(H),ge.push(ee),G&&(G(),G=null),!ce&&ge.length&&ge.length>=B&&await new P(me=>{fe=me}))}ge.push(Q)}catch(ee){let me=S(ee);E(me,void 0,H),ge.push(me)}finally{var Y;ce=!0,G&&(G(),G=null),D==null||(Y=D.signal)===null||Y===void 0||Y.removeEventListener("abort",K)}}te();try{for(;;){for(;ge.length>0;){let j=await ge[0];if(j===Q)return;if(pe.aborted)throw new l;j!==L&&(yield j),ge.shift(),fe&&(fe(),fe=null)}await new P(j=>{G=j})}}finally{ne.abort(),ce=!0,fe&&(fe(),fe=null)}}).call(this)}function W(le=void 0){return le!=null&&h(le,"options"),(le==null?void 0:le.signal)!=null&&a(le.signal,"options.signal"),(async function*(){let D=0;for await(let X of this){var B;if(le!=null&&(B=le.signal)!==null&&B!==void 0&&B.aborted)throw new l({cause:le.signal.reason});yield[D++,X]}}).call(this)}async function $(le,D=void 0){for await(let B of F.call(this,le,D))return!0;return!1}async function q(le,D=void 0){if(typeof le!="function")throw new u("fn",["Function","AsyncFunction"],le);return!await $.call(this,async(...B)=>!await le(...B),D)}async function Z(le,D){for await(let B of F.call(this,le,D))return B}async function V(le,D){if(typeof le!="function")throw new u("fn",["Function","AsyncFunction"],le);async function B(X,ue){return await le(X,ue),L}for await(let X of v.call(this,B,D));}function F(le,D){if(typeof le!="function")throw new u("fn",["Function","AsyncFunction"],le);async function B(X,ue){return await le(X,ue)?X:L}return v.call(this,B,D)}var oe=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function se(le,D,B){var X;if(typeof le!="function")throw new u("reducer",["Function","AsyncFunction"],le);B!=null&&h(B,"options"),(B==null?void 0:B.signal)!=null&&a(B.signal,"options.signal");let ue=arguments.length>1;if(B!=null&&(X=B.signal)!==null&&X!==void 0&&X.aborted){let U=new l(void 0,{cause:B.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(U)),U}let ne=new t,ie=ne.signal;if(B!=null&&B.signal){let U={once:!0,[f]:this};B.signal.addEventListener("abort",()=>ne.abort(),U)}let ge=!1;try{for await(let U of this){var pe;if(ge=!0,B!=null&&(pe=B.signal)!==null&&pe!==void 0&&pe.aborted)throw new l;ue?D=await le(D,U,{signal:ie}):(D=U,ue=!0)}if(!ge&&!ue)throw new oe}finally{ne.abort()}return D}async function de(le){le!=null&&h(le,"options"),(le==null?void 0:le.signal)!=null&&a(le.signal,"options.signal");let D=[];for await(let X of this){var B;if(le!=null&&(B=le.signal)!==null&&B!==void 0&&B.aborted)throw new l(void 0,{cause:le.signal.reason});R(D,X)}return D}function A(le,D){let B=v.call(this,le,D);return(async function*(){for await(let X of B)yield*X}).call(this)}function J(le){if(le=T(le),k(le))return 0;if(le<0)throw new s("number",">= 0",le);return le}function ae(le,D=void 0){return D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),le=J(le),(async function*(){var B;if(D!=null&&(B=D.signal)!==null&&B!==void 0&&B.aborted)throw new l;for await(let ue of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new l;le--<=0&&(yield ue)}}).call(this)}function Se(le,D=void 0){return D!=null&&h(D,"options"),(D==null?void 0:D.signal)!=null&&a(D.signal,"options.signal"),le=J(le),(async function*(){var B;if(D!=null&&(B=D.signal)!==null&&B!==void 0&&B.aborted)throw new l;for await(let ue of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new l;if(le-- >0)yield ue;else return}}).call(this)}r.exports.streamReturningOperators={asIndexedPairs:W,drop:ae,filter:F,flatMap:A,map:v,take:Se,compose:re},r.exports.promiseReturningOperators={every:q,forEach:V,reduce:se,toArray:de,some:$,find:Z}}),jc=ve((e,r)=>{ye(),we(),be();var{ArrayPrototypePop:t,Promise:o}=ot(),{isIterable:u,isNodeStream:n,isWebStream:s}=ur(),{pipelineImpl:l}=Ba(),{finished:a}=vr();Fc();function c(...h){return new o((f,g)=>{let y,b,w=h[h.length-1];if(w&&typeof w=="object"&&!n(w)&&!u(w)&&!s(w)){let _=t(h);y=_.signal,b=_.end}l(h,(_,R)=>{_?g(_):f(R)},{signal:y,end:b})})}r.exports={finished:a,pipeline:c}}),Fc=ve((e,r)=>{ye(),we(),be();var{Buffer:t}=(pt(),Ve(dt)),{ObjectDefineProperty:o,ObjectKeys:u,ReflectApply:n}=ot(),{promisify:{custom:s}}=or(),{streamReturningOperators:l,promiseReturningOperators:a}=Zp(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=vt(),h=Dc(),{pipeline:f}=Ba(),{destroyer:g}=mn(),y=vr(),b=jc(),w=ur(),_=r.exports=Ra().Stream;_.isDisturbed=w.isDisturbed,_.isErrored=w.isErrored,_.isReadable=w.isReadable,_.Readable=Fi();for(let I of u(l)){let T=function(...P){if(new.target)throw c();return _.Readable.from(n(k,this,P))},k=l[I];o(T,"name",{__proto__:null,value:k.name}),o(T,"length",{__proto__:null,value:k.length}),o(_.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let I of u(a)){let T=function(...P){if(new.target)throw c();return n(k,this,P)},k=a[I];o(T,"name",{__proto__:null,value:k.name}),o(T,"length",{__proto__:null,value:k.length}),o(_.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}_.Writable=Lc(),_.Duplex=ar(),_.Transform=Mc(),_.PassThrough=Uc(),_.pipeline=f;var{addAbortSignal:R}=Di();_.addAbortSignal=R,_.finished=y,_.destroy=g,_.compose=h,o(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),o(f,s,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),o(y,s,{__proto__:null,enumerable:!0,get(){return b.finished}}),_.Stream=_,_._isUint8Array=function(I){return I instanceof Uint8Array},_._uint8ArrayToBuffer=function(I){return t.from(I.buffer,I.byteOffset,I.byteLength)}}),Qr=ve((e,r)=>{ye(),we(),be();var t=Fc(),o=jc(),u=t.Readable.destroy;r.exports=t.Readable,r.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,r.exports._isUint8Array=t._isUint8Array,r.exports.isDisturbed=t.isDisturbed,r.exports.isErrored=t.isErrored,r.exports.isReadable=t.isReadable,r.exports.Readable=t.Readable,r.exports.Writable=t.Writable,r.exports.Duplex=t.Duplex,r.exports.Transform=t.Transform,r.exports.PassThrough=t.PassThrough,r.exports.addAbortSignal=t.addAbortSignal,r.exports.finished=t.finished,r.exports.destroy=t.destroy,r.exports.destroy=u,r.exports.pipeline=t.pipeline,r.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return o}}),r.exports.Stream=t.Stream,r.exports.default=r.exports}),Xp=ve((e,r)=>{ye(),we(),be(),typeof Object.create=="function"?r.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,o){if(o){t.super_=o;var u=function(){};u.prototype=o.prototype,t.prototype=new u,t.prototype.constructor=t}}}),eg=ve((e,r)=>{ye(),we(),be();var{Buffer:t}=(pt(),Ve(dt)),o=Symbol.for("BufferList");function u(n){if(!(this instanceof u))return new u(n);u._init.call(this,n)}u._init=function(n){Object.defineProperty(this,o,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},u.prototype._new=function(n){return new u(n)},u.prototype._offset=function(n){if(n===0)return[0,0];let s=0;for(let l=0;l<this._bufs.length;l++){let a=s+this._bufs[l].length;if(n<a||l===this._bufs.length-1)return[l,n-s];s=a}},u.prototype._reverseOffset=function(n){let s=n[0],l=n[1];for(let a=0;a<s;a++)l+=this._bufs[a].length;return l},u.prototype.get=function(n){if(n>this.length||n<0)return;let s=this._offset(n);return this._bufs[s[0]][s[1]]},u.prototype.slice=function(n,s){return typeof n=="number"&&n<0&&(n+=this.length),typeof s=="number"&&s<0&&(s+=this.length),this.copy(null,0,n,s)},u.prototype.copy=function(n,s,l,a){if((typeof l!="number"||l<0)&&(l=0),(typeof a!="number"||a>this.length)&&(a=this.length),l>=this.length||a<=0)return n||t.alloc(0);let c=!!n,h=this._offset(l),f=a-l,g=f,y=c&&s||0,b=h[1];if(l===0&&a===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(n,y),y+=this._bufs[w].length;return n}if(g<=this._bufs[h[0]].length-b)return c?this._bufs[h[0]].copy(n,s,b,b+g):this._bufs[h[0]].slice(b,b+g);c||(n=t.allocUnsafe(f));for(let w=h[0];w<this._bufs.length;w++){let _=this._bufs[w].length-b;if(g>_)this._bufs[w].copy(n,y,b),y+=_;else{this._bufs[w].copy(n,y,b,b+g),y+=_;break}g-=_,b&&(b=0)}return n.length>y?n.slice(0,y):n},u.prototype.shallowSlice=function(n,s){if(n=n||0,s=typeof s!="number"?this.length:s,n<0&&(n+=this.length),s<0&&(s+=this.length),n===s)return this._new();let l=this._offset(n),a=this._offset(s),c=this._bufs.slice(l[0],a[0]+1);return a[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,a[1]),l[1]!==0&&(c[0]=c[0].slice(l[1])),this._new(c)},u.prototype.toString=function(n,s,l){return this.slice(s,l).toString(n)},u.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},u.prototype.duplicate=function(){let n=this._new();for(let s=0;s<this._bufs.length;s++)n.append(this._bufs[s]);return n},u.prototype.append=function(n){if(n==null)return this;if(n.buffer)this._appendBuffer(t.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n))for(let s=0;s<n.length;s++)this.append(n[s]);else if(this._isBufferList(n))for(let s=0;s<n._bufs.length;s++)this.append(n._bufs[s]);else typeof n=="number"&&(n=n.toString()),this._appendBuffer(t.from(n));return this},u.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},u.prototype.indexOf=function(n,s,l){if(l===void 0&&typeof s=="string"&&(l=s,s=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=t.from([n]):typeof n=="string"?n=t.from(n,l):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=t.from(n.buffer,n.byteOffset,n.byteLength):t.isBuffer(n)||(n=t.from(n)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),n.length===0)return s>this.length?this.length:s;let a=this._offset(s),c=a[0],h=a[1];for(;c<this._bufs.length;c++){let f=this._bufs[c];for(;h<f.length;)if(f.length-h>=n.length){let g=f.indexOf(n,h);if(g!==-1)return this._reverseOffset([c,g]);h=f.length-n.length+1}else{let g=this._reverseOffset([c,h]);if(this._match(g,n))return g;h++}h=0}return-1},u.prototype._match=function(n,s){if(this.length-n<s.length)return!1;for(let l=0;l<s.length;l++)if(this.get(n+l)!==s[l])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let s in n)(function(l){n[l]===null?u.prototype[l]=function(a,c){return this.slice(a,a+c)[l](0,c)}:u.prototype[l]=function(a=0){return this.slice(a,a+n[l])[l](0)}})(s)}(),u.prototype._isBufferList=function(n){return n instanceof u||u.isBufferList(n)},u.isBufferList=function(n){return n!=null&&n[o]},r.exports=u}),tg=ve((e,r)=>{ye(),we(),be();var t=Qr().Duplex,o=Xp(),u=eg();function n(s){if(!(this instanceof n))return new n(s);if(typeof s=="function"){this._callback=s;let l=(function(a){this._callback&&(this._callback(a),this._callback=null)}).bind(this);this.on("pipe",function(a){a.on("error",l)}),this.on("unpipe",function(a){a.removeListener("error",l)}),s=null}u._init.call(this,s),t.call(this)}o(n,t),Object.assign(n.prototype,u.prototype),n.prototype._new=function(s){return new n(s)},n.prototype._write=function(s,l,a){this._appendBuffer(s),typeof a=="function"&&a()},n.prototype._read=function(s){if(!this.length)return this.push(null);s=Math.min(s,this.length),this.push(this.slice(0,s)),this.consume(s)},n.prototype.end=function(s){t.prototype.end.call(this,s),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(s,l){this._bufs.length=0,this.length=0,l(s)},n.prototype._isBufferList=function(s){return s instanceof n||s instanceof u||n.isBufferList(s)},n.isBufferList=u.isBufferList,r.exports=n,r.exports.BufferListStream=n,r.exports.BufferList=u}),rg=ve((e,r)=>{ye(),we(),be();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};r.exports=t}),qc=ve((e,r)=>{ye(),we(),be();var t=r.exports,{Buffer:o}=(pt(),Ve(dt));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let n in t.requiredHeaderFlags){let s=t.requiredHeaderFlags[n];t.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+s.toString(16)+" for "+t.types[n]+" packet"}t.codes={};for(let n in t.types){let s=t.types[n];t.codes[s]=n}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=o.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=o.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=o.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let n in t.properties){let s=t.properties[n];t.propertiesCodes[s]=n}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function u(n){return[0,1,2].map(s=>[0,1].map(l=>[0,1].map(a=>{let c=o.alloc(1);return c.writeUInt8(t.codes[n]<<t.CMD_SHIFT|(l?t.DUP_MASK:0)|s<<t.QOS_SHIFT|a,0,!0),c})))}t.PUBLISH_HEADER=u("publish"),t.SUBSCRIBE_HEADER=u("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=u("unsubscribe"),t.ACKS={unsuback:u("unsuback"),puback:u("puback"),pubcomp:u("pubcomp"),pubrel:u("pubrel"),pubrec:u("pubrec")},t.SUBACK_HEADER=o.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=o.from([3]),t.VERSION4=o.from([4]),t.VERSION5=o.from([5]),t.VERSION131=o.from([131]),t.VERSION132=o.from([132]),t.QOS=[0,1,2].map(n=>o.from([n])),t.EMPTY={pingreq:o.from([t.codes.pingreq<<4,0]),pingresp:o.from([t.codes.pingresp<<4,0]),disconnect:o.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),ng=ve((e,r)=>{ye(),we(),be();var t=1e3,o=t*60,u=o*60,n=u*24,s=n*7,l=n*365.25;r.exports=function(g,y){y=y||{};var b=typeof g;if(b==="string"&&g.length>0)return a(g);if(b==="number"&&isFinite(g))return y.long?h(g):c(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function a(g){if(g=String(g),!(g.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(y){var b=parseFloat(y[1]),w=(y[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return b*l;case"weeks":case"week":case"w":return b*s;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*u;case"minutes":case"minute":case"mins":case"min":case"m":return b*o;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function c(g){var y=Math.abs(g);return y>=n?Math.round(g/n)+"d":y>=u?Math.round(g/u)+"h":y>=o?Math.round(g/o)+"m":y>=t?Math.round(g/t)+"s":g+"ms"}function h(g){var y=Math.abs(g);return y>=n?f(g,y,n,"day"):y>=u?f(g,y,u,"hour"):y>=o?f(g,y,o,"minute"):y>=t?f(g,y,t,"second"):g+" ms"}function f(g,y,b,w){var _=y>=b*1.5;return Math.round(g/b)+" "+w+(_?"s":"")}}),ig=ve((e,r)=>{ye(),we(),be();function t(o){n.debug=n,n.default=n,n.coerce=f,n.disable=a,n.enable=l,n.enabled=c,n.humanize=ng(),n.destroy=g,Object.keys(o).forEach(y=>{n[y]=o[y]}),n.names=[],n.skips=[],n.formatters={};function u(y){let b=0;for(let w=0;w<y.length;w++)b=(b<<5)-b+y.charCodeAt(w),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=u;function n(y){let b,w=null,_,R;function I(...T){if(!I.enabled)return;let k=I,P=Number(new Date),S=P-(b||P);k.diff=S,k.prev=b,k.curr=P,b=P,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let E=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(O,L)=>{if(O==="%%")return"%";E++;let Q=n.formatters[L];if(typeof Q=="function"){let re=T[E];O=Q.call(k,re),T.splice(E,1),E--}return O}),n.formatArgs.call(k,T),(k.log||n.log).apply(k,T)}return I.namespace=y,I.useColors=n.useColors(),I.color=n.selectColor(y),I.extend=s,I.destroy=n.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==n.namespaces&&(_=n.namespaces,R=n.enabled(y)),R),set:T=>{w=T}}),typeof n.init=="function"&&n.init(I),I}function s(y,b){let w=n(this.namespace+(typeof b>"u"?":":b)+y);return w.log=this.log,w}function l(y){n.save(y),n.namespaces=y,n.names=[],n.skips=[];let b,w=(typeof y=="string"?y:"").split(/[\s,]+/),_=w.length;for(b=0;b<_;b++)w[b]&&(y=w[b].replace(/\*/g,".*?"),y[0]==="-"?n.skips.push(new RegExp("^"+y.slice(1)+"$")):n.names.push(new RegExp("^"+y+"$")))}function a(){let y=[...n.names.map(h),...n.skips.map(h).map(b=>"-"+b)].join(",");return n.enable(""),y}function c(y){if(y[y.length-1]==="*")return!0;let b,w;for(b=0,w=n.skips.length;b<w;b++)if(n.skips[b].test(y))return!1;for(b=0,w=n.names.length;b<w;b++)if(n.names[b].test(y))return!0;return!1}function h(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function f(y){return y instanceof Error?y.stack||y.message:y}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}r.exports=t}),lr=ve((e,r)=>{ye(),we(),be(),e.formatArgs=o,e.save=u,e.load=n,e.useColors=t,e.storage=s(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let h=0,f=0;a[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(f=h))}),a.splice(f,0,c)}e.log=console.debug||console.log||(()=>{});function u(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function n(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof qe<"u"&&"env"in qe&&(a=qe.env.DEBUG),a}function s(){try{return localStorage}catch{}}r.exports=ig()(e);var{formatters:l}=r.exports;l.j=function(a){try{return JSON.stringify(a)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),sg=ve((e,r)=>{ye(),we(),be();var t=tg(),{EventEmitter:o}=(yn(),Ve(Gr)),u=rg(),n=qc(),s=lr()("mqtt-packet:parser"),l=class Qo extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof Qo?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Qo().parser(c)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new u,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),h=c>>n.CMD_SHIFT;this.packet.cmd=n.types[h];let f=c&15,g=n.requiredHeaderFlags[h];return g!=null&&f!==g?this._emitError(new Error(n.requiredHeaderFlagsErrors[h])):(this.packet.retain=(c&n.RETAIN_MASK)!==0,this.packet.qos=c>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&n.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),s("_parseLength %d",c.value),!!c}_parsePayload(){s("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return s("_parsePayload complete result: %s",c),c}_parseConnect(){s("_parseConnect");let c,h,f,g,y={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),R=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(y.will)b.will={},b.will.retain=_,b.will.qos=R;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(R)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(b.properties=T)}let I=this._parseString();if(I===null)return this._emitError(new Error("Packet too short"));if(b.clientId=I,s("_parseConnect: packet.clientId: %s",b.clientId),y.will){if(b.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(b.will.properties=T)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=c,s("_parseConnect: packet.will.topic: %s",b.will.topic),h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=h,s("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(y.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));b.username=g,s("_parseConnect: packet.username: %s",b.username)}if(y.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));b.password=f}return this.settings=b,s("_parseConnect: complete"),b}_parseConnack(){s("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let h=this._list.readUInt8(this._pos++);if(h>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(h&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}c.payload=this._list.slice(this._pos,c.length),s("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){s("_parseSubscribe");let c=this.packet,h,f,g,y,b,w,_;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let R=this._parseProperties();Object.getOwnPropertyNames(R).length&&(c.properties=R)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=f&n.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(w=(f>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(f>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=f>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,y>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:h,qos:g},this.settings.protocolVersion===5?(_.nl=w,_.rap=b,_.rh=y):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",_),c.subscriptions.push(_)}}}_parseSuback(){s("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[h])return this._emitError(new Error("Invalid suback code"))}else if(h>2&&h!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(h)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let h=this._parseString();if(h===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",h),c.unsubscriptions.push(h)}}}_parseUnsuback(){s("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let h=this._parseProperties();for(Object.getOwnPropertyNames(h).length&&(c.properties=h),c.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}s("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}}return!0}_parseDisconnect(){let c=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let h=this._parseProperties();return Object.getOwnPropertyNames(h).length&&(c.properties=h),s("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let h=this._parseNum(),f=h+this._pos;if(h===-1||f>this._list.length||f>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,f);return this._pos+=h,s("_parseString: result: %s",g),g}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),h=c+this._pos;if(c===-1||h>this._list.length||h>this.packet.length)return null;let f=this._list.slice(this._pos,h);return this._pos+=c,s("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){s("_parseVarByteNum");let h=4,f=0,g=1,y=0,b=!1,w,_=this._pos?this._pos:0;for(;f<h&&_+f<this._list.length;){if(w=this._list.readUInt8(_+f++),y+=g*(w&n.VARBYTEINT_MASK),g*=128,!(w&n.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=f)break}return!b&&f===h&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=f),b?c?b={bytes:f,value:y}:b=y:b=!1,s("_parseVarByteNum: result: %o",b),b}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",c),c}_parseByType(c){switch(s("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let c=this._parseVarByteNum(),h=this._pos+c,f={};for(;this._pos<h;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let y=n.propertiesCodes[g];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){f[y]||(f[y]=Object.create(null));let b=this._parseByType(n.propertiesTypes[y]);if(f[y][b.name])if(Array.isArray(f[y][b.name]))f[y][b.name].push(b.value);else{let w=f[y][b.name];f[y][b.name]=[w],f[y][b.name].push(b.value)}else f[y][b.name]=b.value;continue}f[y]?Array.isArray(f[y])?f[y].push(this._parseByType(n.propertiesTypes[y])):(f[y]=[f[y]],f[y].push(this._parseByType(n.propertiesTypes[y]))):f[y]=this._parseByType(n.propertiesTypes[y])}return f}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new u,this._pos=0,!0}_emitError(c){s("_emitError",c),this.error=c,this.emit("error",c)}};r.exports=l}),og=ve((e,r)=>{ye(),we(),be();var{Buffer:t}=(pt(),Ve(dt)),o=65536,u={},n=t.isBuffer(t.from([1,2]).subarray(0,1));function s(h){let f=t.allocUnsafe(2);return f.writeUInt8(h>>8,0),f.writeUInt8(h&255,1),f}function l(){for(let h=0;h<o;h++)u[h]=s(h)}function a(h){let f=0,g=0,y=t.allocUnsafe(4);do f=h%128|0,h=h/128|0,h>0&&(f=f|128),y.writeUInt8(f,g++);while(h>0&&g<4);return h>0&&(g=0),n?y.subarray(0,g):y.slice(0,g)}function c(h){let f=t.allocUnsafe(4);return f.writeUInt32BE(h,0),f}r.exports={cache:u,generateCache:l,generateNumber:s,genBufVariableByteInt:a,generate4ByteBuffer:c}}),ag=ve((e,r)=>{ye(),we(),be(),typeof qe>"u"||!qe.version||qe.version.indexOf("v0.")===0||qe.version.indexOf("v1.")===0&&qe.version.indexOf("v1.8.")!==0?r.exports={nextTick:t}:r.exports=qe;function t(o,u,n,s){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var l=arguments.length,a,c;switch(l){case 0:case 1:return qe.nextTick(o);case 2:return qe.nextTick(function(){o.call(null,u)});case 3:return qe.nextTick(function(){o.call(null,u,n)});case 4:return qe.nextTick(function(){o.call(null,u,n,s)});default:for(a=new Array(l-1),c=0;c<a.length;)a[c++]=arguments[c];return qe.nextTick(function(){o.apply(null,a)})}}}),Wc=ve((e,r)=>{ye(),we(),be();var t=qc(),{Buffer:o}=(pt(),Ve(dt)),u=o.allocUnsafe(0),n=o.from([0]),s=og(),l=ag().nextTick,a=lr()("mqtt-packet:writeToStream"),c=s.cache,h=s.generateNumber,f=s.generateCache,g=s.genBufVariableByteInt,y=s.generate4ByteBuffer,b=V,w=!0;function _(D,B,X){switch(a("generate called"),B.cork&&(B.cork(),l(R,B)),w&&(w=!1,f()),a("generate: packet.cmd: %s",D.cmd),D.cmd){case"connect":return I(D,B);case"connack":return T(D,B,X);case"publish":return k(D,B,X);case"puback":case"pubrec":case"pubrel":case"pubcomp":return P(D,B,X);case"subscribe":return S(D,B,X);case"suback":return E(D,B,X);case"unsubscribe":return O(D,B,X);case"unsuback":return L(D,B,X);case"pingreq":case"pingresp":return Q(D,B);case"disconnect":return re(D,B,X);case"auth":return v(D,B,X);default:return B.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return b===V},set(D){D?((!c||Object.keys(c).length===0)&&(w=!0),b=V):(w=!1,b=F)}});function R(D){D.uncork()}function I(D,B,X){let ue=D||{},ne=ue.protocolId||"MQTT",ie=ue.protocolVersion||4,ge=ue.will,pe=ue.clean,U=ue.keepalive||0,K=ue.clientId||"",G=ue.username,fe=ue.password,ce=ue.properties;pe===void 0&&(pe=!0);let H=0;if(!ne||typeof ne!="string"&&!o.isBuffer(ne))return B.destroy(new Error("Invalid protocolId")),!1;if(H+=ne.length+2,ie!==3&&ie!==4&&ie!==5)return B.destroy(new Error("Invalid protocol version")),!1;if(H+=1,(typeof K=="string"||o.isBuffer(K))&&(K||ie>=4)&&(K||pe))H+=o.byteLength(K)+2;else{if(ie<4)return B.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(pe*1===0)return B.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof U!="number"||U<0||U>65535||U%1!==0)return B.destroy(new Error("Invalid keepalive")),!1;H+=2,H+=1;let te,j;if(ie===5){if(te=de(B,ce),!te)return!1;H+=te.length}if(ge){if(typeof ge!="object")return B.destroy(new Error("Invalid will")),!1;if(!ge.topic||typeof ge.topic!="string")return B.destroy(new Error("Invalid will topic")),!1;if(H+=o.byteLength(ge.topic)+2,H+=2,ge.payload)if(ge.payload.length>=0)typeof ge.payload=="string"?H+=o.byteLength(ge.payload):H+=ge.payload.length;else return B.destroy(new Error("Invalid will payload")),!1;if(j={},ie===5){if(j=de(B,ge.properties),!j)return!1;H+=j.length}}let Y=!1;if(G!=null)if(le(G))Y=!0,H+=o.byteLength(G)+2;else return B.destroy(new Error("Invalid username")),!1;if(fe!=null){if(!Y)return B.destroy(new Error("Username is required to use password")),!1;if(le(fe))H+=Se(fe)+2;else return B.destroy(new Error("Invalid password")),!1}B.write(t.CONNECT_HEADER),$(B,H),se(B,ne),ue.bridgeMode&&(ie+=128),B.write(ie===131?t.VERSION131:ie===132?t.VERSION132:ie===4?t.VERSION4:ie===5?t.VERSION5:t.VERSION3);let ee=0;return ee|=G!=null?t.USERNAME_MASK:0,ee|=fe!=null?t.PASSWORD_MASK:0,ee|=ge&&ge.retain?t.WILL_RETAIN_MASK:0,ee|=ge&&ge.qos?ge.qos<<t.WILL_QOS_SHIFT:0,ee|=ge?t.WILL_FLAG_MASK:0,ee|=pe?t.CLEAN_SESSION_MASK:0,B.write(o.from([ee])),b(B,U),ie===5&&te.write(),se(B,K),ge&&(ie===5&&j.write(),q(B,ge.topic),se(B,ge.payload)),G!=null&&se(B,G),fe!=null&&se(B,fe),!0}function T(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ue===5?ne.reasonCode:ne.returnCode,ge=ne.properties,pe=2;if(typeof ie!="number")return B.destroy(new Error("Invalid return code")),!1;let U=null;if(ue===5){if(U=de(B,ge),!U)return!1;pe+=U.length}return B.write(t.CONNACK_HEADER),$(B,pe),B.write(ne.sessionPresent?t.SESSIONPRESENT_HEADER:n),B.write(o.from([ie])),U==null||U.write(),!0}function k(D,B,X){a("publish: packet: %o",D);let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.qos||0,ge=ne.retain?t.RETAIN_MASK:0,pe=ne.topic,U=ne.payload||u,K=ne.messageId,G=ne.properties,fe=0;if(typeof pe=="string")fe+=o.byteLength(pe)+2;else if(o.isBuffer(pe))fe+=pe.length+2;else return B.destroy(new Error("Invalid topic")),!1;if(o.isBuffer(U)?fe+=U.length:fe+=o.byteLength(U),ie&&typeof K!="number")return B.destroy(new Error("Invalid messageId")),!1;ie&&(fe+=2);let ce=null;if(ue===5){if(ce=de(B,G),!ce)return!1;fe+=ce.length}return B.write(t.PUBLISH_HEADER[ie][ne.dup?1:0][ge?1:0]),$(B,fe),b(B,Se(pe)),B.write(pe),ie>0&&b(B,K),ce==null||ce.write(),a("publish: payload: %o",U),B.write(U)}function P(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.cmd||"puback",ge=ne.messageId,pe=ne.dup&&ie==="pubrel"?t.DUP_MASK:0,U=0,K=ne.reasonCode,G=ne.properties,fe=ue===5?3:2;if(ie==="pubrel"&&(U=1),typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;let ce=null;if(ue===5&&typeof G=="object"){if(ce=A(B,G,X,fe),!ce)return!1;fe+=ce.length}return B.write(t.ACKS[ie][U][pe][0]),fe===3&&(fe+=K!==0?1:-1),$(B,fe),b(B,ge),ue===5&&fe!==2&&B.write(o.from([K])),ce!==null?ce.write():fe===4&&B.write(o.from([0])),!0}function S(D,B,X){a("subscribe: packet: ");let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.dup?t.DUP_MASK:0,ge=ne.messageId,pe=ne.subscriptions,U=ne.properties,K=0;if(typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;K+=2;let G=null;if(ue===5){if(G=de(B,U),!G)return!1;K+=G.length}if(typeof pe=="object"&&pe.length)for(let ce=0;ce<pe.length;ce+=1){let H=pe[ce].topic,te=pe[ce].qos;if(typeof H!="string")return B.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof te!="number")return B.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ue===5){if(typeof(pe[ce].nl||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(pe[ce].rap||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let j=pe[ce].rh||0;if(typeof j!="number"||j>2)return B.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}K+=o.byteLength(H)+2+1}else return B.destroy(new Error("Invalid subscriptions")),!1;a("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),B.write(t.SUBSCRIBE_HEADER[1][ie?1:0][0]),$(B,K),b(B,ge),G!==null&&G.write();let fe=!0;for(let ce of pe){let H=ce.topic,te=ce.qos,j=+ce.nl,Y=+ce.rap,ee=ce.rh,me;q(B,H),me=t.SUBSCRIBE_OPTIONS_QOS[te],ue===5&&(me|=j?t.SUBSCRIBE_OPTIONS_NL:0,me|=Y?t.SUBSCRIBE_OPTIONS_RAP:0,me|=ee?t.SUBSCRIBE_OPTIONS_RH[ee]:0),fe=B.write(o.from([me]))}return fe}function E(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.granted,pe=ne.properties,U=0;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(U+=2,typeof ge=="object"&&ge.length)for(let G=0;G<ge.length;G+=1){if(typeof ge[G]!="number")return B.destroy(new Error("Invalid qos vector")),!1;U+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let K=null;if(ue===5){if(K=A(B,pe,X,U),!K)return!1;U+=K.length}return B.write(t.SUBACK_HEADER),$(B,U),b(B,ie),K!==null&&K.write(),B.write(o.from(ge))}function O(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.dup?t.DUP_MASK:0,pe=ne.unsubscriptions,U=ne.properties,K=0;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(K+=2,typeof pe=="object"&&pe.length)for(let ce=0;ce<pe.length;ce+=1){if(typeof pe[ce]!="string")return B.destroy(new Error("Invalid unsubscriptions")),!1;K+=o.byteLength(pe[ce])+2}else return B.destroy(new Error("Invalid unsubscriptions")),!1;let G=null;if(ue===5){if(G=de(B,U),!G)return!1;K+=G.length}B.write(t.UNSUBSCRIBE_HEADER[1][ge?1:0][0]),$(B,K),b(B,ie),G!==null&&G.write();let fe=!0;for(let ce=0;ce<pe.length;ce++)fe=q(B,pe[ce]);return fe}function L(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.messageId,ge=ne.dup?t.DUP_MASK:0,pe=ne.granted,U=ne.properties,K=ne.cmd,G=0,fe=2;if(typeof ie!="number")return B.destroy(new Error("Invalid messageId")),!1;if(ue===5)if(typeof pe=="object"&&pe.length)for(let H=0;H<pe.length;H+=1){if(typeof pe[H]!="number")return B.destroy(new Error("Invalid qos vector")),!1;fe+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let ce=null;if(ue===5){if(ce=A(B,U,X,fe),!ce)return!1;fe+=ce.length}return B.write(t.ACKS[K][G][ge][0]),$(B,fe),b(B,ie),ce!==null&&ce.write(),ue===5&&B.write(o.from(pe)),!0}function Q(D,B,X){return B.write(t.EMPTY[D.cmd])}function re(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.reasonCode,ge=ne.properties,pe=ue===5?1:0,U=null;if(ue===5){if(U=A(B,ge,X,pe),!U)return!1;pe+=U.length}return B.write(o.from([t.codes.disconnect<<4])),$(B,pe),ue===5&&B.write(o.from([ie])),U!==null&&U.write(),!0}function v(D,B,X){let ue=X?X.protocolVersion:4,ne=D||{},ie=ne.reasonCode,ge=ne.properties,pe=ue===5?1:0;ue!==5&&B.destroy(new Error("Invalid mqtt version for auth packet"));let U=A(B,ge,X,pe);return U?(pe+=U.length,B.write(o.from([t.codes.auth<<4])),$(B,pe),B.write(o.from([ie])),U!==null&&U.write(),!0):!1}var W={};function $(D,B){if(B>t.VARBYTEINT_MAX)return D.destroy(new Error(`Invalid variable byte integer: ${B}`)),!1;let X=W[B];return X||(X=g(B),B<16384&&(W[B]=X)),a("writeVarByteInt: writing to stream: %o",X),D.write(X)}function q(D,B){let X=o.byteLength(B);return b(D,X),a("writeString: %s",B),D.write(B,"utf8")}function Z(D,B,X){q(D,B),q(D,X)}function V(D,B){return a("writeNumberCached: number: %d",B),a("writeNumberCached: %o",c[B]),D.write(c[B])}function F(D,B){let X=h(B);return a("writeNumberGenerated: %o",X),D.write(X)}function oe(D,B){let X=y(B);return a("write4ByteNumber: %o",X),D.write(X)}function se(D,B){typeof B=="string"?q(D,B):B?(b(D,B.length),D.write(B)):b(D,0)}function de(D,B){if(typeof B!="object"||B.length!=null)return{length:1,write(){ae(D,{},0)}};let X=0;function ue(ne,ie){let ge=t.propertiesTypes[ne],pe=0;switch(ge){case"byte":{if(typeof ie!="boolean")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=2;break}case"int8":{if(typeof ie!="number"||ie<0||ie>255)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=2;break}case"binary":{if(ie&&ie===null)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=1+o.byteLength(ie)+2;break}case"int16":{if(typeof ie!="number"||ie<0||ie>65535)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=3;break}case"int32":{if(typeof ie!="number"||ie<0||ie>4294967295)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=5;break}case"var":{if(typeof ie!="number"||ie<0||ie>268435455)return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=1+o.byteLength(g(ie));break}case"string":{if(typeof ie!="string")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=3+o.byteLength(ie.toString());break}case"pair":{if(typeof ie!="object")return D.destroy(new Error(`Invalid ${ne}: ${ie}`)),!1;pe+=Object.getOwnPropertyNames(ie).reduce((U,K)=>{let G=ie[K];return Array.isArray(G)?U+=G.reduce((fe,ce)=>(fe+=3+o.byteLength(K.toString())+2+o.byteLength(ce.toString()),fe),0):U+=3+o.byteLength(K.toString())+2+o.byteLength(ie[K].toString()),U},0);break}default:return D.destroy(new Error(`Invalid property ${ne}: ${ie}`)),!1}return pe}if(B)for(let ne in B){let ie=0,ge=0,pe=B[ne];if(Array.isArray(pe))for(let U=0;U<pe.length;U++){if(ge=ue(ne,pe[U]),!ge)return!1;ie+=ge}else{if(ge=ue(ne,pe),!ge)return!1;ie=ge}if(!ie)return!1;X+=ie}return{length:o.byteLength(g(X))+X,write(){ae(D,B,X)}}}function A(D,B,X,ue){let ne=["reasonString","userProperties"],ie=X&&X.properties&&X.properties.maximumPacketSize?X.properties.maximumPacketSize:0,ge=de(D,B);if(ie)for(;ue+ge.length>ie;){let pe=ne.shift();if(pe&&B[pe])delete B[pe],ge=de(D,B);else return!1}return ge}function J(D,B,X){switch(t.propertiesTypes[B]){case"byte":{D.write(o.from([t.properties[B]])),D.write(o.from([+X]));break}case"int8":{D.write(o.from([t.properties[B]])),D.write(o.from([X]));break}case"binary":{D.write(o.from([t.properties[B]])),se(D,X);break}case"int16":{D.write(o.from([t.properties[B]])),b(D,X);break}case"int32":{D.write(o.from([t.properties[B]])),oe(D,X);break}case"var":{D.write(o.from([t.properties[B]])),$(D,X);break}case"string":{D.write(o.from([t.properties[B]])),q(D,X);break}case"pair":{Object.getOwnPropertyNames(X).forEach(ue=>{let ne=X[ue];Array.isArray(ne)?ne.forEach(ie=>{D.write(o.from([t.properties[B]])),Z(D,ue.toString(),ie.toString())}):(D.write(o.from([t.properties[B]])),Z(D,ue.toString(),ne.toString()))});break}default:return D.destroy(new Error(`Invalid property ${B} value: ${X}`)),!1}}function ae(D,B,X){$(D,X);for(let ue in B)if(Object.prototype.hasOwnProperty.call(B,ue)&&B[ue]!==null){let ne=B[ue];if(Array.isArray(ne))for(let ie=0;ie<ne.length;ie++)J(D,ue,ne[ie]);else J(D,ue,ne)}}function Se(D){return D?D instanceof o?D.length:o.byteLength(D):0}function le(D){return typeof D=="string"||D instanceof o}r.exports=_}),lg=ve((e,r)=>{ye(),we(),be();var t=Wc(),{EventEmitter:o}=(yn(),Ve(Gr)),{Buffer:u}=(pt(),Ve(dt));function n(l,a){let c=new s;return t(l,c,a),c.concat()}var s=class extends o{constructor(){super(),this._array=new Array(20),this._i=0}write(l){return this._array[this._i++]=l,!0}concat(){let l=0,a=new Array(this._array.length),c=this._array,h=0,f;for(f=0;f<c.length&&c[f]!==void 0;f++)typeof c[f]!="string"?a[f]=c[f].length:a[f]=u.byteLength(c[f]),l+=a[f];let g=u.allocUnsafe(l);for(f=0;f<c.length&&c[f]!==void 0;f++)typeof c[f]!="string"?(c[f].copy(g,h),h+=a[f]):(g.write(c[f],h),h+=a[f]);return g}destroy(l){l&&this.emit("error",l)}};r.exports=n}),ug=ve(e=>{ye(),we(),be(),e.parser=sg().parser,e.generate=lg(),e.writeToStream=Wc()}),$c=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=r}),cg=ve((e,r)=>{ye(),we(),be(),r.exports=o;function t(n){return n instanceof ki?ki.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function o(n){if(n=n||{},n.circles)return u(n);return n.proto?a:l;function s(c,h){for(var f=Object.keys(c),g=new Array(f.length),y=0;y<f.length;y++){var b=f[y],w=c[b];typeof w!="object"||w===null?g[b]=w:w instanceof Date?g[b]=new Date(w):ArrayBuffer.isView(w)?g[b]=t(w):g[b]=h(w)}return g}function l(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return s(c,l);if(c instanceof Map)return new Map(s(Array.from(c),l));if(c instanceof Set)return new Set(s(Array.from(c),l));var h={};for(var f in c)if(Object.hasOwnProperty.call(c,f)!==!1){var g=c[f];typeof g!="object"||g===null?h[f]=g:g instanceof Date?h[f]=new Date(g):g instanceof Map?h[f]=new Map(s(Array.from(g),l)):g instanceof Set?h[f]=new Set(s(Array.from(g),l)):ArrayBuffer.isView(g)?h[f]=t(g):h[f]=l(g)}return h}function a(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return s(c,a);if(c instanceof Map)return new Map(s(Array.from(c),a));if(c instanceof Set)return new Set(s(Array.from(c),a));var h={};for(var f in c){var g=c[f];typeof g!="object"||g===null?h[f]=g:g instanceof Date?h[f]=new Date(g):g instanceof Map?h[f]=new Map(s(Array.from(g),a)):g instanceof Set?h[f]=new Set(s(Array.from(g),a)):ArrayBuffer.isView(g)?h[f]=t(g):h[f]=a(g)}return h}}function u(n){var s=[],l=[];return n.proto?h:c;function a(f,g){for(var y=Object.keys(f),b=new Array(y.length),w=0;w<y.length;w++){var _=y[w],R=f[_];if(typeof R!="object"||R===null)b[_]=R;else if(R instanceof Date)b[_]=new Date(R);else if(ArrayBuffer.isView(R))b[_]=t(R);else{var I=s.indexOf(R);I!==-1?b[_]=l[I]:b[_]=g(R)}}return b}function c(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return a(f,c);if(f instanceof Map)return new Map(a(Array.from(f),c));if(f instanceof Set)return new Set(a(Array.from(f),c));var g={};s.push(f),l.push(g);for(var y in f)if(Object.hasOwnProperty.call(f,y)!==!1){var b=f[y];if(typeof b!="object"||b===null)g[y]=b;else if(b instanceof Date)g[y]=new Date(b);else if(b instanceof Map)g[y]=new Map(a(Array.from(b),c));else if(b instanceof Set)g[y]=new Set(a(Array.from(b),c));else if(ArrayBuffer.isView(b))g[y]=t(b);else{var w=s.indexOf(b);w!==-1?g[y]=l[w]:g[y]=c(b)}}return s.pop(),l.pop(),g}function h(f){if(typeof f!="object"||f===null)return f;if(f instanceof Date)return new Date(f);if(Array.isArray(f))return a(f,h);if(f instanceof Map)return new Map(a(Array.from(f),h));if(f instanceof Set)return new Set(a(Array.from(f),h));var g={};s.push(f),l.push(g);for(var y in f){var b=f[y];if(typeof b!="object"||b===null)g[y]=b;else if(b instanceof Date)g[y]=new Date(b);else if(b instanceof Map)g[y]=new Map(a(Array.from(b),h));else if(b instanceof Set)g[y]=new Set(a(Array.from(b),h));else if(ArrayBuffer.isView(b))g[y]=t(b);else{var w=s.indexOf(b);w!==-1?g[y]=l[w]:g[y]=h(b)}}return s.pop(),l.pop(),g}}}),hg=ve((e,r)=>{ye(),we(),be(),r.exports=cg()()}),fg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function r(o){let u=o.split("/");for(let n=0;n<u.length;n++)if(u[n]!=="+"){if(u[n]==="#")return n===u.length-1;if(u[n].indexOf("+")!==-1||u[n].indexOf("#")!==-1)return!1}return!0}e.validateTopic=r;function t(o){if(o.length===0)return"empty_topic_list";for(let u=0;u<o.length;u++)if(!r(o[u]))return o[u];return null}e.validateTopics=t}),Hc=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=Qr(),t={objectMode:!0},o={clean:!0},u=class{constructor(n){this.options=n||{},this.options=Object.assign(Object.assign({},o),n),this._inflights=new Map}put(n,s){return this._inflights.set(n.messageId,n),s&&s(),this}createStream(){let n=new r.Readable(t),s=[],l=!1,a=0;return this._inflights.forEach((c,h)=>{s.push(c)}),n._read=()=>{!l&&a<s.length?n.push(s[a++]):n.push(null)},n.destroy=c=>{if(!l)return l=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,s){let l=this._inflights.get(n.messageId);return l?(this._inflights.delete(n.messageId),s(null,l)):s&&s(new Error("missing packet")),this}get(n,s){let l=this._inflights.get(n.messageId);return l?s(null,l):s&&s(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};e.default=u}),dg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=[0,16,128,131,135,144,145,151,153],t=(o,u,n)=>{o.log("handlePublish: packet %o",u),n=typeof n<"u"?n:o.noop;let s=u.topic.toString(),l=u.payload,{qos:a}=u,{messageId:c}=u,{options:h}=o;if(o.options.protocolVersion===5){let f;if(u.properties&&(f=u.properties.topicAlias),typeof f<"u")if(s.length===0)if(f>0&&f<=65535){let g=o.topicAliasRecv.getTopicByAlias(f);if(g)s=g,o.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,f);else{o.log("handlePublish :: unregistered topic alias. alias: %d",f),o.emit("error",new Error("Received unregistered Topic Alias"));return}}else{o.log("handlePublish :: topic alias out of range. alias: %d",f),o.emit("error",new Error("Received Topic Alias is out of range"));return}else if(o.topicAliasRecv.put(s,f))o.log("handlePublish :: registered topic: %s - alias: %d",s,f);else{o.log("handlePublish :: topic alias out of range. alias: %d",f),o.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(o.log("handlePublish: qos %d",a),a){case 2:{h.customHandleAcks(s,l,u,(f,g)=>{if(typeof f=="number"&&(g=f,f=null),f)return o.emit("error",f);if(r.indexOf(g)===-1)return o.emit("error",new Error("Wrong reason code for pubrec"));g?o._sendPacket({cmd:"pubrec",messageId:c,reasonCode:g},n):o.incomingStore.put(u,()=>{o._sendPacket({cmd:"pubrec",messageId:c},n)})});break}case 1:{h.customHandleAcks(s,l,u,(f,g)=>{if(typeof f=="number"&&(g=f,f=null),f)return o.emit("error",f);if(r.indexOf(g)===-1)return o.emit("error",new Error("Wrong reason code for puback"));g||o.emit("message",s,l,u),o.handleMessage(u,y=>{if(y)return n&&n(y);o._sendPacket({cmd:"puback",messageId:c,reasonCode:g},n)})});break}case 0:o.emit("message",s,l,u),o.handleMessage(u,n);break;default:o.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),pg=ve((e,r)=>{r.exports={version:"5.10.1"}}),bn=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var r=class zc extends Error{constructor(u,n){super(u),this.code=n,Object.setPrototypeOf(this,zc.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=r;function t(o,u,n=!1){var s;let l=[u];for(;;){let a=l[0],c=Object.getPrototypeOf(a);if(c!=null&&c.prototype)l.unshift(c);else break}for(let a of l)for(let c of Object.getOwnPropertyNames(a.prototype))(n||c!=="constructor")&&Object.defineProperty(o.prototype,c,(s=Object.getOwnPropertyDescriptor(a.prototype,c))!==null&&s!==void 0?s:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(qe==null?void 0:qe.nextTick)=="function"?qe.nextTick:o=>{setTimeout(o,0)},e.MQTTJS_VERSION=pg().version}),qi=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var r=bn();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(o,u)=>{let{messageId:n}=u,s=u.cmd,l=null,a=o.outgoing[n]?o.outgoing[n].cb:null,c=null;if(!a){o.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(o.log("_handleAck :: packet type",s),s){case"pubcomp":case"puback":{let h=u.reasonCode;h&&h>0&&h!==16?(c=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),o._removeOutgoingAndStoreMessage(n,()=>{a(c,u)})):o._removeOutgoingAndStoreMessage(n,a);break}case"pubrec":{l={cmd:"pubrel",qos:2,messageId:n};let h=u.reasonCode;h&&h>0&&h!==16?(c=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[h]}`,h),o._removeOutgoingAndStoreMessage(n,()=>{a(c,u)})):o._sendPacket(l);break}case"suback":{delete o.outgoing[n],o.messageIdProvider.deallocate(n);let h=u.granted;for(let f=0;f<h.length;f++){let g=h[f];if(g&128){c=new Error(`Subscribe error: ${e.ReasonCodes[g]}`),c.code=g;let y=o.messageIdToTopic[n];y&&y.forEach(b=>{delete o._resubscribeTopics[b]})}}delete o.messageIdToTopic[n],o._invokeStoreProcessingQueue(),a(c,u);break}case"unsuback":{delete o.outgoing[n],o.messageIdProvider.deallocate(n),o._invokeStoreProcessingQueue(),a(null,u);break}default:o.emit("error",new Error("unrecognized packet type"))}o.disconnecting&&Object.keys(o.outgoing).length===0&&o.emit("outgoingEmpty")};e.default=t}),gg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=bn(),t=qi(),o=(u,n)=>{let{options:s}=u,l=s.protocolVersion,a=l===5?n.reasonCode:n.returnCode;if(l!==5){let c=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${l}`,a);u.emit("error",c);return}u.handleAuth(n,(c,h)=>{if(c){u.emit("error",c);return}if(a===24)u.reconnecting=!1,u._sendPacket(h);else{let f=new r.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);u.emit("error",f)}})};e.default=o}),mg=ve(e=>{var y,b,w,_,R,I,T,k,P,S,E,O,L,Q,re,v,W,$,q,Z,V,F,oe,se,de,A,Jo,ae,Se,le,D,Vc,X,ue,ne,mr,yr,Zo,hi,fi,Ge,Xo,On,H;ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var r=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,o=typeof qe=="object"&&qe?qe:{},u=(te,j,Y,ee)=>{typeof o.emitWarning=="function"?o.emitWarning(te,j,Y,ee):console.error(`[${Y}] ${j}: ${te}`)},n=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof n>"u"){s=class{constructor(){Ue(this,"onabort");Ue(this,"_onabort",[]);Ue(this,"reason");Ue(this,"aborted",!1)}addEventListener(Y,ee){this._onabort.push(ee)}},n=class{constructor(){Ue(this,"signal",new s);j()}abort(Y){var ee,me;if(!this.signal.aborted){this.signal.reason=Y,this.signal.aborted=!0;for(let p of this.signal._onabort)p(Y);(me=(ee=this.signal).onabort)==null||me.call(ee,Y)}}};let te=((y=o.env)==null?void 0:y.LRU_CACHE_IGNORE_AC_WARNING)!=="1",j=()=>{te&&(te=!1,u("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",j))}}var l=te=>!t.has(te),a=te=>te&&te===Math.floor(te)&&te>0&&isFinite(te),c=te=>a(te)?te<=Math.pow(2,8)?Uint8Array:te<=Math.pow(2,16)?Uint16Array:te<=Math.pow(2,32)?Uint32Array:te<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(te){super(te),this.fill(0)}},f=(b=class{constructor(j,Y){Ue(this,"heap");Ue(this,"length");if(!x(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new Y(j),this.length=0}static create(j){let Y=c(j);if(!Y)return[];Ie(b,w,!0);let ee=new b(j,Y);return Ie(b,w,!1),ee}push(j){this.heap[this.length++]=j}pop(){return this.heap[--this.length]}},w=new WeakMap,xe(b,w,!1),b),g=(H=class{constructor(j){xe(this,A);xe(this,_);xe(this,R);xe(this,I);xe(this,T);xe(this,k);Ue(this,"ttl");Ue(this,"ttlResolution");Ue(this,"ttlAutopurge");Ue(this,"updateAgeOnGet");Ue(this,"updateAgeOnHas");Ue(this,"allowStale");Ue(this,"noDisposeOnSet");Ue(this,"noUpdateTTL");Ue(this,"maxEntrySize");Ue(this,"sizeCalculation");Ue(this,"noDeleteOnFetchRejection");Ue(this,"noDeleteOnStaleGet");Ue(this,"allowStaleOnFetchAbort");Ue(this,"allowStaleOnFetchRejection");Ue(this,"ignoreFetchAbort");xe(this,P);xe(this,S);xe(this,E);xe(this,O);xe(this,L);xe(this,Q);xe(this,re);xe(this,v);xe(this,W);xe(this,$);xe(this,q);xe(this,Z);xe(this,V);xe(this,F);xe(this,oe);xe(this,se);xe(this,de);xe(this,ae,()=>{});xe(this,Se,()=>{});xe(this,le,()=>{});xe(this,D,()=>!1);xe(this,X,j=>{});xe(this,ue,(j,Y,ee)=>{});xe(this,ne,(j,Y,ee,me)=>{if(ee||me)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:Y=0,ttl:ee,ttlResolution:me=1,ttlAutopurge:p,updateAgeOnGet:d,updateAgeOnHas:m,allowStale:C,dispose:M,disposeAfter:z,noDisposeOnSet:he,noUpdateTTL:Ce,maxSize:Be=0,maxEntrySize:Le=0,sizeCalculation:ke,fetchMethod:Ne,noDeleteOnFetchRejection:Re,noDeleteOnStaleGet:We,allowStaleOnFetchRejection:rt,allowStaleOnFetchAbort:Ze,ignoreFetchAbort:it}=j;if(Y!==0&&!a(Y))throw new TypeError("max option must be a nonnegative integer");let ct=Y?c(Y):Array;if(!ct)throw new Error("invalid max value: "+Y);if(Ie(this,_,Y),Ie(this,R,Be),this.maxEntrySize=Le||x(this,R),this.sizeCalculation=ke,this.sizeCalculation){if(!x(this,R)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ne!==void 0&&typeof Ne!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ie(this,k,Ne),Ie(this,se,!!Ne),Ie(this,E,new Map),Ie(this,O,new Array(Y).fill(void 0)),Ie(this,L,new Array(Y).fill(void 0)),Ie(this,Q,new ct(Y)),Ie(this,re,new ct(Y)),Ie(this,v,0),Ie(this,W,0),Ie(this,$,f.create(Y)),Ie(this,P,0),Ie(this,S,0),typeof M=="function"&&Ie(this,I,M),typeof z=="function"?(Ie(this,T,z),Ie(this,q,[])):(Ie(this,T,void 0),Ie(this,q,void 0)),Ie(this,oe,!!x(this,I)),Ie(this,de,!!x(this,T)),this.noDisposeOnSet=!!he,this.noUpdateTTL=!!Ce,this.noDeleteOnFetchRejection=!!Re,this.allowStaleOnFetchRejection=!!rt,this.allowStaleOnFetchAbort=!!Ze,this.ignoreFetchAbort=!!it,this.maxEntrySize!==0){if(x(this,R)!==0&&!a(x(this,R)))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ae(this,A,Vc).call(this)}if(this.allowStale=!!C,this.noDeleteOnStaleGet=!!We,this.updateAgeOnGet=!!d,this.updateAgeOnHas=!!m,this.ttlResolution=a(me)||me===0?me:1,this.ttlAutopurge=!!p,this.ttl=ee||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ae(this,A,Jo).call(this)}if(x(this,_)===0&&this.ttl===0&&x(this,R)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!x(this,_)&&!x(this,R)){let nt="LRU_CACHE_UNBOUNDED";l(nt)&&(t.add(nt),u("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",nt,H))}}static unsafeExposeInternals(j){return{starts:x(j,V),ttls:x(j,F),sizes:x(j,Z),keyMap:x(j,E),keyList:x(j,O),valList:x(j,L),next:x(j,Q),prev:x(j,re),get head(){return x(j,v)},get tail(){return x(j,W)},free:x(j,$),isBackgroundFetch:Y=>{var ee;return Ae(ee=j,A,Ge).call(ee,Y)},backgroundFetch:(Y,ee,me,p)=>{var d;return Ae(d=j,A,fi).call(d,Y,ee,me,p)},moveToTail:Y=>{var ee;return Ae(ee=j,A,On).call(ee,Y)},indexes:Y=>{var ee;return Ae(ee=j,A,mr).call(ee,Y)},rindexes:Y=>{var ee;return Ae(ee=j,A,yr).call(ee,Y)},isStale:Y=>{var ee;return x(ee=j,D).call(ee,Y)}}}get max(){return x(this,_)}get maxSize(){return x(this,R)}get calculatedSize(){return x(this,S)}get size(){return x(this,P)}get fetchMethod(){return x(this,k)}get dispose(){return x(this,I)}get disposeAfter(){return x(this,T)}getRemainingTTL(j){return x(this,E).has(j)?1/0:0}*entries(){for(let j of Ae(this,A,mr).call(this))x(this,L)[j]!==void 0&&x(this,O)[j]!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield[x(this,O)[j],x(this,L)[j]])}*rentries(){for(let j of Ae(this,A,yr).call(this))x(this,L)[j]!==void 0&&x(this,O)[j]!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield[x(this,O)[j],x(this,L)[j]])}*keys(){for(let j of Ae(this,A,mr).call(this)){let Y=x(this,O)[j];Y!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield Y)}}*rkeys(){for(let j of Ae(this,A,yr).call(this)){let Y=x(this,O)[j];Y!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield Y)}}*values(){for(let j of Ae(this,A,mr).call(this))x(this,L)[j]!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield x(this,L)[j])}*rvalues(){for(let j of Ae(this,A,yr).call(this))x(this,L)[j]!==void 0&&!Ae(this,A,Ge).call(this,x(this,L)[j])&&(yield x(this,L)[j])}[Symbol.iterator](){return this.entries()}find(j,Y={}){for(let ee of Ae(this,A,mr).call(this)){let me=x(this,L)[ee],p=Ae(this,A,Ge).call(this,me)?me.__staleWhileFetching:me;if(p!==void 0&&j(p,x(this,O)[ee],this))return this.get(x(this,O)[ee],Y)}}forEach(j,Y=this){for(let ee of Ae(this,A,mr).call(this)){let me=x(this,L)[ee],p=Ae(this,A,Ge).call(this,me)?me.__staleWhileFetching:me;p!==void 0&&j.call(Y,p,x(this,O)[ee],this)}}rforEach(j,Y=this){for(let ee of Ae(this,A,yr).call(this)){let me=x(this,L)[ee],p=Ae(this,A,Ge).call(this,me)?me.__staleWhileFetching:me;p!==void 0&&j.call(Y,p,x(this,O)[ee],this)}}purgeStale(){let j=!1;for(let Y of Ae(this,A,yr).call(this,{allowStale:!0}))x(this,D).call(this,Y)&&(this.delete(x(this,O)[Y]),j=!0);return j}dump(){let j=[];for(let Y of Ae(this,A,mr).call(this,{allowStale:!0})){let ee=x(this,O)[Y],me=x(this,L)[Y],p=Ae(this,A,Ge).call(this,me)?me.__staleWhileFetching:me;if(p===void 0||ee===void 0)continue;let d={value:p};if(x(this,F)&&x(this,V)){d.ttl=x(this,F)[Y];let m=r.now()-x(this,V)[Y];d.start=Math.floor(Date.now()-m)}x(this,Z)&&(d.size=x(this,Z)[Y]),j.unshift([ee,d])}return j}load(j){this.clear();for(let[Y,ee]of j){if(ee.start){let me=Date.now()-ee.start;ee.start=r.now()-me}this.set(Y,ee.value,ee)}}set(j,Y,ee={}){var Ce,Be,Le,ke,Ne;if(Y===void 0)return this.delete(j),this;let{ttl:me=this.ttl,start:p,noDisposeOnSet:d=this.noDisposeOnSet,sizeCalculation:m=this.sizeCalculation,status:C}=ee,{noUpdateTTL:M=this.noUpdateTTL}=ee,z=x(this,ne).call(this,j,Y,ee.size||0,m);if(this.maxEntrySize&&z>this.maxEntrySize)return C&&(C.set="miss",C.maxEntrySizeExceeded=!0),this.delete(j),this;let he=x(this,P)===0?void 0:x(this,E).get(j);if(he===void 0)he=x(this,P)===0?x(this,W):x(this,$).length!==0?x(this,$).pop():x(this,P)===x(this,_)?Ae(this,A,hi).call(this,!1):x(this,P),x(this,O)[he]=j,x(this,L)[he]=Y,x(this,E).set(j,he),x(this,Q)[x(this,W)]=he,x(this,re)[he]=x(this,W),Ie(this,W,he),zn(this,P)._++,x(this,ue).call(this,he,z,C),C&&(C.set="add"),M=!1;else{Ae(this,A,On).call(this,he);let Re=x(this,L)[he];if(Y!==Re){if(x(this,se)&&Ae(this,A,Ge).call(this,Re)){Re.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:We}=Re;We!==void 0&&!d&&(x(this,oe)&&((Ce=x(this,I))==null||Ce.call(this,We,j,"set")),x(this,de)&&((Be=x(this,q))==null||Be.push([We,j,"set"])))}else d||(x(this,oe)&&((Le=x(this,I))==null||Le.call(this,Re,j,"set")),x(this,de)&&((ke=x(this,q))==null||ke.push([Re,j,"set"])));if(x(this,X).call(this,he),x(this,ue).call(this,he,z,C),x(this,L)[he]=Y,C){C.set="replace";let We=Re&&Ae(this,A,Ge).call(this,Re)?Re.__staleWhileFetching:Re;We!==void 0&&(C.oldValue=We)}}else C&&(C.set="update")}if(me!==0&&!x(this,F)&&Ae(this,A,Jo).call(this),x(this,F)&&(M||x(this,le).call(this,he,me,p),C&&x(this,Se).call(this,C,he)),!d&&x(this,de)&&x(this,q)){let Re=x(this,q),We;for(;We=Re==null?void 0:Re.shift();)(Ne=x(this,T))==null||Ne.call(this,...We)}return this}pop(){var j;try{for(;x(this,P);){let Y=x(this,L)[x(this,v)];if(Ae(this,A,hi).call(this,!0),Ae(this,A,Ge).call(this,Y)){if(Y.__staleWhileFetching)return Y.__staleWhileFetching}else if(Y!==void 0)return Y}}finally{if(x(this,de)&&x(this,q)){let Y=x(this,q),ee;for(;ee=Y==null?void 0:Y.shift();)(j=x(this,T))==null||j.call(this,...ee)}}}has(j,Y={}){let{updateAgeOnHas:ee=this.updateAgeOnHas,status:me}=Y,p=x(this,E).get(j);if(p!==void 0){let d=x(this,L)[p];if(Ae(this,A,Ge).call(this,d)&&d.__staleWhileFetching===void 0)return!1;if(x(this,D).call(this,p))me&&(me.has="stale",x(this,Se).call(this,me,p));else return ee&&x(this,ae).call(this,p),me&&(me.has="hit",x(this,Se).call(this,me,p)),!0}else me&&(me.has="miss");return!1}peek(j,Y={}){let{allowStale:ee=this.allowStale}=Y,me=x(this,E).get(j);if(me!==void 0&&(ee||!x(this,D).call(this,me))){let p=x(this,L)[me];return Ae(this,A,Ge).call(this,p)?p.__staleWhileFetching:p}}async fetch(j,Y={}){let{allowStale:ee=this.allowStale,updateAgeOnGet:me=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,ttl:d=this.ttl,noDisposeOnSet:m=this.noDisposeOnSet,size:C=0,sizeCalculation:M=this.sizeCalculation,noUpdateTTL:z=this.noUpdateTTL,noDeleteOnFetchRejection:he=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ce=this.allowStaleOnFetchRejection,ignoreFetchAbort:Be=this.ignoreFetchAbort,allowStaleOnFetchAbort:Le=this.allowStaleOnFetchAbort,context:ke,forceRefresh:Ne=!1,status:Re,signal:We}=Y;if(!x(this,se))return Re&&(Re.fetch="get"),this.get(j,{allowStale:ee,updateAgeOnGet:me,noDeleteOnStaleGet:p,status:Re});let rt={allowStale:ee,updateAgeOnGet:me,noDeleteOnStaleGet:p,ttl:d,noDisposeOnSet:m,size:C,sizeCalculation:M,noUpdateTTL:z,noDeleteOnFetchRejection:he,allowStaleOnFetchRejection:Ce,allowStaleOnFetchAbort:Le,ignoreFetchAbort:Be,status:Re,signal:We},Ze=x(this,E).get(j);if(Ze===void 0){Re&&(Re.fetch="miss");let it=Ae(this,A,fi).call(this,j,Ze,rt,ke);return it.__returned=it}else{let it=x(this,L)[Ze];if(Ae(this,A,Ge).call(this,it)){let wn=ee&&it.__staleWhileFetching!==void 0;return Re&&(Re.fetch="inflight",wn&&(Re.returnedStale=!0)),wn?it.__staleWhileFetching:it.__returned=it}let ct=x(this,D).call(this,Ze);if(!Ne&&!ct)return Re&&(Re.fetch="hit"),Ae(this,A,On).call(this,Ze),me&&x(this,ae).call(this,Ze),Re&&x(this,Se).call(this,Re,Ze),it;let nt=Ae(this,A,fi).call(this,j,Ze,rt,ke),$n=nt.__staleWhileFetching!==void 0&&ee;return Re&&(Re.fetch=ct?"stale":"refresh",$n&&ct&&(Re.returnedStale=!0)),$n?nt.__staleWhileFetching:nt.__returned=nt}}get(j,Y={}){let{allowStale:ee=this.allowStale,updateAgeOnGet:me=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,status:d}=Y,m=x(this,E).get(j);if(m!==void 0){let C=x(this,L)[m],M=Ae(this,A,Ge).call(this,C);return d&&x(this,Se).call(this,d,m),x(this,D).call(this,m)?(d&&(d.get="stale"),M?(d&&ee&&C.__staleWhileFetching!==void 0&&(d.returnedStale=!0),ee?C.__staleWhileFetching:void 0):(p||this.delete(j),d&&ee&&(d.returnedStale=!0),ee?C:void 0)):(d&&(d.get="hit"),M?C.__staleWhileFetching:(Ae(this,A,On).call(this,m),me&&x(this,ae).call(this,m),C))}else d&&(d.get="miss")}delete(j){var ee,me,p,d;let Y=!1;if(x(this,P)!==0){let m=x(this,E).get(j);if(m!==void 0)if(Y=!0,x(this,P)===1)this.clear();else{x(this,X).call(this,m);let C=x(this,L)[m];Ae(this,A,Ge).call(this,C)?C.__abortController.abort(new Error("deleted")):(x(this,oe)||x(this,de))&&(x(this,oe)&&((ee=x(this,I))==null||ee.call(this,C,j,"delete")),x(this,de)&&((me=x(this,q))==null||me.push([C,j,"delete"]))),x(this,E).delete(j),x(this,O)[m]=void 0,x(this,L)[m]=void 0,m===x(this,W)?Ie(this,W,x(this,re)[m]):m===x(this,v)?Ie(this,v,x(this,Q)[m]):(x(this,Q)[x(this,re)[m]]=x(this,Q)[m],x(this,re)[x(this,Q)[m]]=x(this,re)[m]),zn(this,P)._--,x(this,$).push(m)}}if(x(this,de)&&((p=x(this,q))!=null&&p.length)){let m=x(this,q),C;for(;C=m==null?void 0:m.shift();)(d=x(this,T))==null||d.call(this,...C)}return Y}clear(){var j,Y,ee;for(let me of Ae(this,A,yr).call(this,{allowStale:!0})){let p=x(this,L)[me];if(Ae(this,A,Ge).call(this,p))p.__abortController.abort(new Error("deleted"));else{let d=x(this,O)[me];x(this,oe)&&((j=x(this,I))==null||j.call(this,p,d,"delete")),x(this,de)&&((Y=x(this,q))==null||Y.push([p,d,"delete"]))}}if(x(this,E).clear(),x(this,L).fill(void 0),x(this,O).fill(void 0),x(this,F)&&x(this,V)&&(x(this,F).fill(0),x(this,V).fill(0)),x(this,Z)&&x(this,Z).fill(0),Ie(this,v,0),Ie(this,W,0),x(this,$).length=0,Ie(this,S,0),Ie(this,P,0),x(this,de)&&x(this,q)){let me=x(this,q),p;for(;p=me==null?void 0:me.shift();)(ee=x(this,T))==null||ee.call(this,...p)}}},_=new WeakMap,R=new WeakMap,I=new WeakMap,T=new WeakMap,k=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,L=new WeakMap,Q=new WeakMap,re=new WeakMap,v=new WeakMap,W=new WeakMap,$=new WeakMap,q=new WeakMap,Z=new WeakMap,V=new WeakMap,F=new WeakMap,oe=new WeakMap,se=new WeakMap,de=new WeakMap,A=new WeakSet,Jo=function(){let j=new h(x(this,_)),Y=new h(x(this,_));Ie(this,F,j),Ie(this,V,Y),Ie(this,le,(p,d,m=r.now())=>{if(Y[p]=d!==0?m:0,j[p]=d,d!==0&&this.ttlAutopurge){let C=setTimeout(()=>{x(this,D).call(this,p)&&this.delete(x(this,O)[p])},d+1);C.unref&&C.unref()}}),Ie(this,ae,p=>{Y[p]=j[p]!==0?r.now():0}),Ie(this,Se,(p,d)=>{if(j[d]){let m=j[d],C=Y[d];p.ttl=m,p.start=C,p.now=ee||me();let M=p.now-C;p.remainingTTL=m-M}});let ee=0,me=()=>{let p=r.now();if(this.ttlResolution>0){ee=p;let d=setTimeout(()=>ee=0,this.ttlResolution);d.unref&&d.unref()}return p};this.getRemainingTTL=p=>{let d=x(this,E).get(p);if(d===void 0)return 0;let m=j[d],C=Y[d];if(m===0||C===0)return 1/0;let M=(ee||me())-C;return m-M},Ie(this,D,p=>j[p]!==0&&Y[p]!==0&&(ee||me())-Y[p]>j[p])},ae=new WeakMap,Se=new WeakMap,le=new WeakMap,D=new WeakMap,Vc=function(){let j=new h(x(this,_));Ie(this,S,0),Ie(this,Z,j),Ie(this,X,Y=>{Ie(this,S,x(this,S)-j[Y]),j[Y]=0}),Ie(this,ne,(Y,ee,me,p)=>{if(Ae(this,A,Ge).call(this,ee))return 0;if(!a(me))if(p){if(typeof p!="function")throw new TypeError("sizeCalculation must be a function");if(me=p(ee,Y),!a(me))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return me}),Ie(this,ue,(Y,ee,me)=>{if(j[Y]=ee,x(this,R)){let p=x(this,R)-j[Y];for(;x(this,S)>p;)Ae(this,A,hi).call(this,!0)}Ie(this,S,x(this,S)+j[Y]),me&&(me.entrySize=ee,me.totalCalculatedSize=x(this,S))})},X=new WeakMap,ue=new WeakMap,ne=new WeakMap,mr=function*({allowStale:j=this.allowStale}={}){if(x(this,P))for(let Y=x(this,W);!(!Ae(this,A,Zo).call(this,Y)||((j||!x(this,D).call(this,Y))&&(yield Y),Y===x(this,v)));)Y=x(this,re)[Y]},yr=function*({allowStale:j=this.allowStale}={}){if(x(this,P))for(let Y=x(this,v);!(!Ae(this,A,Zo).call(this,Y)||((j||!x(this,D).call(this,Y))&&(yield Y),Y===x(this,W)));)Y=x(this,Q)[Y]},Zo=function(j){return j!==void 0&&x(this,E).get(x(this,O)[j])===j},hi=function(j){var p,d;let Y=x(this,v),ee=x(this,O)[Y],me=x(this,L)[Y];return x(this,se)&&Ae(this,A,Ge).call(this,me)?me.__abortController.abort(new Error("evicted")):(x(this,oe)||x(this,de))&&(x(this,oe)&&((p=x(this,I))==null||p.call(this,me,ee,"evict")),x(this,de)&&((d=x(this,q))==null||d.push([me,ee,"evict"]))),x(this,X).call(this,Y),j&&(x(this,O)[Y]=void 0,x(this,L)[Y]=void 0,x(this,$).push(Y)),x(this,P)===1?(Ie(this,v,Ie(this,W,0)),x(this,$).length=0):Ie(this,v,x(this,Q)[Y]),x(this,E).delete(ee),zn(this,P)._--,Y},fi=function(j,Y,ee,me){let p=Y===void 0?void 0:x(this,L)[Y];if(Ae(this,A,Ge).call(this,p))return p;let d=new n,{signal:m}=ee;m==null||m.addEventListener("abort",()=>d.abort(m.reason),{signal:d.signal});let C={signal:d.signal,options:ee,context:me},M=(ke,Ne=!1)=>{let{aborted:Re}=d.signal,We=ee.ignoreFetchAbort&&ke!==void 0;if(ee.status&&(Re&&!Ne?(ee.status.fetchAborted=!0,ee.status.fetchError=d.signal.reason,We&&(ee.status.fetchAbortIgnored=!0)):ee.status.fetchResolved=!0),Re&&!We&&!Ne)return he(d.signal.reason);let rt=Be;return x(this,L)[Y]===Be&&(ke===void 0?rt.__staleWhileFetching?x(this,L)[Y]=rt.__staleWhileFetching:this.delete(j):(ee.status&&(ee.status.fetchUpdated=!0),this.set(j,ke,C.options))),ke},z=ke=>(ee.status&&(ee.status.fetchRejected=!0,ee.status.fetchError=ke),he(ke)),he=ke=>{let{aborted:Ne}=d.signal,Re=Ne&&ee.allowStaleOnFetchAbort,We=Re||ee.allowStaleOnFetchRejection,rt=We||ee.noDeleteOnFetchRejection,Ze=Be;if(x(this,L)[Y]===Be&&(!rt||Ze.__staleWhileFetching===void 0?this.delete(j):Re||(x(this,L)[Y]=Ze.__staleWhileFetching)),We)return ee.status&&Ze.__staleWhileFetching!==void 0&&(ee.status.returnedStale=!0),Ze.__staleWhileFetching;if(Ze.__returned===Ze)throw ke},Ce=(ke,Ne)=>{var We;let Re=(We=x(this,k))==null?void 0:We.call(this,j,p,C);Re&&Re instanceof Promise&&Re.then(rt=>ke(rt===void 0?void 0:rt),Ne),d.signal.addEventListener("abort",()=>{(!ee.ignoreFetchAbort||ee.allowStaleOnFetchAbort)&&(ke(void 0),ee.allowStaleOnFetchAbort&&(ke=rt=>M(rt,!0)))})};ee.status&&(ee.status.fetchDispatched=!0);let Be=new Promise(Ce).then(M,z),Le=Object.assign(Be,{__abortController:d,__staleWhileFetching:p,__returned:void 0});return Y===void 0?(this.set(j,Le,{...C.options,status:void 0}),Y=x(this,E).get(j)):x(this,L)[Y]=Le,Le},Ge=function(j){if(!x(this,se))return!1;let Y=j;return!!Y&&Y instanceof Promise&&Y.hasOwnProperty("__staleWhileFetching")&&Y.__abortController instanceof n},Xo=function(j,Y){x(this,re)[Y]=j,x(this,Q)[j]=Y},On=function(j){j!==x(this,W)&&(j===x(this,v)?Ie(this,v,x(this,Q)[j]):Ae(this,A,Xo).call(this,x(this,re)[j],x(this,Q)[j]),Ae(this,A,Xo).call(this,x(this,W),j),Ie(this,W,j))},H);e.LRUCache=g}),cr=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var r=class{constructor(u=0){this.iteratorType=u}equals(u){return this.o===u.o}};e.ContainerIterator=r;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var o=class extends t{};e.Container=o}),yg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=cr(),t=class extends r.Base{constructor(u=[]){super(),this.S=[];let n=this;u.forEach(function(s){n.push(s)})}clear(){this.i=0,this.S=[]}push(u){return this.S.push(u),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},o=t;e.default=o}),bg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=cr(),t=class extends r.Base{constructor(u=[]){super(),this.j=0,this.q=[];let n=this;u.forEach(function(s){n.push(s)})}clear(){this.q=[],this.i=this.j=0}push(u){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let s=this.i;for(let l=0;l<s;++l)this.q[l]=this.q[this.j+l];this.j=0,this.q[this.i]=u}else this.q[this.j+this.i]=u;return++this.i}pop(){if(this.i===0)return;let u=this.q[this.j++];return this.i-=1,u}front(){if(this.i!==0)return this.q[this.j]}},o=t;e.default=o}),wg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=cr(),t=class extends r.Base{constructor(u=[],n=function(l,a){return l>a?-1:l<a?1:0},s=!0){if(super(),this.v=n,Array.isArray(u))this.C=s?[...u]:u;else{this.C=[];let a=this;u.forEach(function(c){a.C.push(c)})}this.i=this.C.length;let l=this.i>>1;for(let a=this.i-1>>1;a>=0;--a)this.k(a,l)}m(u){let n=this.C[u];for(;u>0;){let s=u-1>>1,l=this.C[s];if(this.v(l,n)<=0)break;this.C[u]=l,u=s}this.C[u]=n}k(u,n){let s=this.C[u];for(;u<n;){let l=u<<1|1,a=l+1,c=this.C[l];if(a<this.i&&this.v(c,this.C[a])>0&&(l=a,c=this.C[a]),this.v(c,s)>=0)break;this.C[u]=c,u=l}this.C[u]=s}clear(){this.i=0,this.C.length=0}push(u){this.C.push(u),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let u=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),u}top(){return this.C[0]}find(u){return this.C.indexOf(u)>=0}remove(u){let n=this.C.indexOf(u);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(u){let n=this.C.indexOf(u);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},o=t;e.default=o}),Na=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=cr(),t=class extends r.Container{},o=t;e.default=o}),hr=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=r;function r(){throw new RangeError("Iterator access denied!")}}),Kc=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var r=cr(),t=hr(),o=class extends r.ContainerIterator{constructor(u,n){super(n),this.o=u,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(u){this.container.setElementByPos(this.o,u)}};e.RandomIterator=o}),_g=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=o(Na()),t=Kc();function o(l){return l&&l.t?l:{default:l}}var u=class Yc extends t.RandomIterator{constructor(a,c,h){super(a,h),this.container=c}copy(){return new Yc(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(l=[],a=!0){if(super(),Array.isArray(l))this.J=a?[...l]:l,this.i=l.length;else{this.J=[];let c=this;l.forEach(function(h){c.pushBack(h)})}}clear(){this.i=0,this.J.length=0}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;return this.J[l]}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;return this.J.splice(l,1),this.i-=1,this.i}eraseElementByValue(l){let a=0;for(let c=0;c<this.i;++c)this.J[c]!==l&&(this.J[a++]=this.J[c]);return this.i=this.J.length=a,this.i}eraseElementByIterator(l){let a=l.o;return l=l.next(),this.eraseElementByPos(a),l}pushBack(l){return this.J.push(l),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(l,a){if(l<0||l>this.i-1)throw new RangeError;this.J[l]=a}insert(l,a,c=1){if(l<0||l>this.i)throw new RangeError;return this.J.splice(l,0,...new Array(c).fill(a)),this.i+=c,this.i}find(l){for(let a=0;a<this.i;++a)if(this.J[a]===l)return new u(a,this);return this.end()}reverse(){this.J.reverse()}unique(){let l=1;for(let a=1;a<this.i;++a)this.J[a]!==this.J[a-1]&&(this.J[l++]=this.J[a]);return this.i=this.J.length=l,this.i}sort(l){this.J.sort(l)}forEach(l){for(let a=0;a<this.i;++a)l(this.J[a],a,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},s=n;e.default=s}),vg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Na()),t=cr(),o=hr();function u(a){return a&&a.t?a:{default:a}}var n=class Gc extends t.ContainerIterator{constructor(c,h,f,g){super(g),this.o=c,this.h=h,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l=c}copy(){return new Gc(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.default{constructor(a=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;a.forEach(function(h){c.pushBack(h)})}V(a){let{L:c,B:h}=a;c.B=h,h.L=c,a===this.p&&(this.p=h),a===this._&&(this._=c),this.i-=1}G(a,c){let h=c.B,f={l:a,L:c,B:h};c.B=f,h.L=f,c===this.h&&(this.p=f),h===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return c.l}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return this.V(c),this.i}eraseElementByValue(a){let c=this.p;for(;c!==this.h;)c.l===a&&this.V(c),c=c.B;return this.i}eraseElementByIterator(a){let c=a.o;return c===this.h&&(0,o.throwIteratorAccessError)(),a=a.next(),this.V(c),a}pushBack(a){return this.G(a,this._),this.i}popBack(){if(this.i===0)return;let a=this._.l;return this.V(this._),a}pushFront(a){return this.G(a,this.h),this.i}popFront(){if(this.i===0)return;let a=this.p.l;return this.V(this.p),a}setElementByPos(a,c){if(a<0||a>this.i-1)throw new RangeError;let h=this.p;for(;a--;)h=h.B;h.l=c}insert(a,c,h=1){if(a<0||a>this.i)throw new RangeError;if(h<=0)return this.i;if(a===0)for(;h--;)this.pushFront(c);else if(a===this.i)for(;h--;)this.pushBack(c);else{let f=this.p;for(let y=1;y<a;++y)f=f.B;let g=f.B;for(this.i+=h;h--;)f.B={l:c,L:f},f.B.L=f,f=f.B;f.B=g,g.L=f}return this.i}find(a){let c=this.p;for(;c!==this.h;){if(c.l===a)return new n(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let a=this.p,c=this._,h=0;for(;h<<1<this.i;){let f=a.l;a.l=c.l,c.l=f,a=a.B,c=c.L,h+=1}}unique(){if(this.i<=1)return this.i;let a=this.p;for(;a!==this.h;){let c=a;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;a.B=c.B,a.B.L=a,a=a.B}return this.i}sort(a){if(this.i<=1)return;let c=[];this.forEach(function(f){c.push(f)}),c.sort(a);let h=this.p;c.forEach(function(f){h.l=f,h=h.B})}merge(a){let c=this;if(this.i===0)a.forEach(function(h){c.pushBack(h)});else{let h=this.p;a.forEach(function(f){for(;h!==c.h&&h.l<=f;)h=h.B;c.G(f,h.L)})}return this.i}forEach(a){let c=this.p,h=0;for(;c!==this.h;)a(c.l,h++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let a=this.p;for(;a!==this.h;)yield a.l,a=a.B}).bind(this)()}},l=s;e.default=l}),Eg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=o(Na()),t=Kc();function o(l){return l&&l.t?l:{default:l}}var u=class Qc extends t.RandomIterator{constructor(a,c,h){super(a,h),this.container=c}copy(){return new Qc(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(l=[],a=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof l.length=="number")return l.length;if(typeof l.size=="number")return l.size;if(typeof l.size=="function")return l.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=a,this.P=Math.max(Math.ceil(c/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let h=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(h>>1),this.D=this.N=this.F-c%this.F>>1;let f=this;l.forEach(function(g){f.pushBack(g)})}T(){let l=[],a=Math.max(this.P>>1,1);for(let c=0;c<a;++c)l[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)l[l.length]=this.A[c];for(let c=0;c<this.R;++c)l[l.length]=this.A[c];l[l.length]=[...this.A[this.R]],this.j=a,this.R=l.length-1;for(let c=0;c<a;++c)l[l.length]=new Array(this.F);this.A=l,this.P=l.length}O(l){let a=this.D+l+1,c=a%this.F,h=c-1,f=this.j+(a-c)/this.F;return c===0&&(f-=1),f%=this.P,h<0&&(h+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:h}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new u(0,this)}end(){return new u(this.i,this)}rBegin(){return new u(this.i-1,this,1)}rEnd(){return new u(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(l){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=l,this.i}popBack(){if(this.i===0)return;let l=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,l}pushFront(l){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=l,this.i}popFront(){if(this.i===0)return;let l=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:c}=this.O(l);return this.A[a][c]}setElementByPos(l,a){if(l<0||l>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(l);this.A[c][h]=a}insert(l,a,c=1){if(l<0||l>this.i)throw new RangeError;if(l===0)for(;c--;)this.pushFront(a);else if(l===this.i)for(;c--;)this.pushBack(a);else{let h=[];for(let f=l;f<this.i;++f)h.push(this.getElementByPos(f));this.cut(l-1);for(let f=0;f<c;++f)this.pushBack(a);for(let f=0;f<h.length;++f)this.pushBack(h[f])}return this.i}cut(l){if(l<0)return this.clear(),0;let{curNodeBucketIndex:a,curNodePointerIndex:c}=this.O(l);return this.R=a,this.N=c,this.i=l+1,this.i}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;if(l===0)this.popFront();else if(l===this.i-1)this.popBack();else{let a=[];for(let h=l+1;h<this.i;++h)a.push(this.getElementByPos(h));this.cut(l),this.popBack();let c=this;a.forEach(function(h){c.pushBack(h)})}return this.i}eraseElementByValue(l){if(this.i===0)return 0;let a=[];for(let h=0;h<this.i;++h){let f=this.getElementByPos(h);f!==l&&a.push(f)}let c=a.length;for(let h=0;h<c;++h)this.setElementByPos(h,a[h]);return this.cut(c-1)}eraseElementByIterator(l){let a=l.o;return this.eraseElementByPos(a),l=l.next(),l}find(l){for(let a=0;a<this.i;++a)if(this.getElementByPos(a)===l)return new u(a,this);return this.end()}reverse(){let l=0,a=this.i-1;for(;l<a;){let c=this.getElementByPos(l);this.setElementByPos(l,this.getElementByPos(a)),this.setElementByPos(a,c),l+=1,a-=1}}unique(){if(this.i<=1)return this.i;let l=1,a=this.getElementByPos(0);for(let c=1;c<this.i;++c){let h=this.getElementByPos(c);h!==a&&(a=h,this.setElementByPos(l++,h))}for(;this.i>l;)this.popBack();return this.i}sort(l){let a=[];for(let c=0;c<this.i;++c)a.push(this.getElementByPos(c));a.sort(l);for(let c=0;c<this.i;++c)this.setElementByPos(c,a[c])}shrinkToFit(){if(this.i===0)return;let l=[];this.forEach(function(a){l.push(a)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let a=0;a<this.P;++a)this.A.push(new Array(this.F));for(let a=0;a<l.length;++a)this.pushBack(l[a])}forEach(l){for(let a=0;a<this.i;++a)l(this.getElementByPos(a),a,this)}[Symbol.iterator](){return(function*(){for(let l=0;l<this.i;++l)yield this.getElementByPos(l)}).bind(this)()}},s=n;e.default=s}),Sg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var r=class{constructor(o,u){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=o,this.l=u}L(){let o=this;if(o.ee===1&&o.tt.tt===o)o=o.W;else if(o.U)for(o=o.U;o.W;)o=o.W;else{let u=o.tt;for(;u.U===o;)o=u,u=o.tt;o=u}return o}B(){let o=this;if(o.W){for(o=o.W;o.U;)o=o.U;return o}else{let u=o.tt;for(;u.W===o;)o=u,u=o.tt;return o.W!==u?u:o}}te(){let o=this.tt,u=this.W,n=u.U;return o.tt===this?o.tt=u:o.U===this?o.U=u:o.W=u,u.tt=o,u.U=this,this.tt=u,this.W=n,n&&(n.tt=this),u}se(){let o=this.tt,u=this.U,n=u.W;return o.tt===this?o.tt=u:o.U===this?o.U=u:o.W=u,u.tt=o,u.W=this,this.tt=u,this.U=n,n&&(n.tt=this),u}};e.TreeNode=r;var t=class extends r{constructor(){super(...arguments),this.rt=1}te(){let o=super.te();return this.ie(),o.ie(),o}se(){let o=super.se();return this.ie(),o.ie(),o}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Jc=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Sg(),t=cr(),o=hr(),u=class extends t.Container{constructor(s=function(a,c){return a<c?-1:a>c?1:0},l=!1){super(),this.Y=void 0,this.v=s,l?(this.re=r.TreeNodeEnableIndex,this.M=function(a,c,h){let f=this.ne(a,c,h);if(f){let g=f.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let y=this.he(f);if(y){let{parentNode:b,grandParent:w,curNode:_}=y;b.ie(),w.ie(),_.ie()}}return this.i},this.V=function(a){let c=this.fe(a);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=r.TreeNode,this.M=function(a,c,h){let f=this.ne(a,c,h);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(s,l){let a=this.h;for(;s;){let c=this.v(s.u,l);if(c<0)s=s.W;else if(c>0)a=s,s=s.U;else return s}return a}Z(s,l){let a=this.h;for(;s;)this.v(s.u,l)<=0?s=s.W:(a=s,s=s.U);return a}$(s,l){let a=this.h;for(;s;){let c=this.v(s.u,l);if(c<0)a=s,s=s.W;else if(c>0)s=s.U;else return s}return a}rr(s,l){let a=this.h;for(;s;)this.v(s.u,l)<0?(a=s,s=s.W):s=s.U;return a}ue(s){for(;;){let l=s.tt;if(l===this.h)return;if(s.ee===1){s.ee=0;return}if(s===l.U){let a=l.W;if(a.ee===1)a.ee=0,l.ee=1,l===this.Y?this.Y=l.te():l.te();else if(a.W&&a.W.ee===1){a.ee=l.ee,l.ee=0,a.W.ee=0,l===this.Y?this.Y=l.te():l.te();return}else a.U&&a.U.ee===1?(a.ee=1,a.U.ee=0,a.se()):(a.ee=1,s=l)}else{let a=l.U;if(a.ee===1)a.ee=0,l.ee=1,l===this.Y?this.Y=l.se():l.se();else if(a.U&&a.U.ee===1){a.ee=l.ee,l.ee=0,a.U.ee=0,l===this.Y?this.Y=l.se():l.se();return}else a.W&&a.W.ee===1?(a.ee=1,a.W.ee=0,a.te()):(a.ee=1,s=l)}}}fe(s){if(this.i===1)return this.clear(),this.h;let l=s;for(;l.U||l.W;){if(l.W)for(l=l.W;l.U;)l=l.U;else l=l.U;[s.u,l.u]=[l.u,s.u],[s.l,l.l]=[l.l,s.l],s=l}this.h.U===l?this.h.U=l.tt:this.h.W===l&&(this.h.W=l.tt),this.ue(l);let a=l.tt;return l===a.U?a.U=void 0:a.W=void 0,this.i-=1,this.Y.ee=0,a}oe(s,l){return s===void 0?!1:this.oe(s.U,l)||l(s)?!0:this.oe(s.W,l)}he(s){for(;;){let l=s.tt;if(l.ee===0)return;let a=l.tt;if(l===a.U){let c=a.W;if(c&&c.ee===1){if(c.ee=l.ee=0,a===this.Y)return;a.ee=1,s=a;continue}else if(s===l.W){if(s.ee=0,s.U&&(s.U.tt=l),s.W&&(s.W.tt=a),l.W=s.U,a.U=s.W,s.U=l,s.W=a,a===this.Y)this.Y=s,this.h.tt=s;else{let h=a.tt;h.U===a?h.U=s:h.W=s}return s.tt=a.tt,l.tt=s,a.tt=s,a.ee=1,{parentNode:l,grandParent:a,curNode:s}}else l.ee=0,a===this.Y?this.Y=a.se():a.se(),a.ee=1}else{let c=a.U;if(c&&c.ee===1){if(c.ee=l.ee=0,a===this.Y)return;a.ee=1,s=a;continue}else if(s===l.U){if(s.ee=0,s.U&&(s.U.tt=a),s.W&&(s.W.tt=l),a.W=s.U,l.U=s.W,s.U=a,s.W=l,a===this.Y)this.Y=s,this.h.tt=s;else{let h=a.tt;h.U===a?h.U=s:h.W=s}return s.tt=a.tt,l.tt=s,a.tt=s,a.ee=1,{parentNode:l,grandParent:a,curNode:s}}else l.ee=0,a===this.Y?this.Y=a.te():a.te(),a.ee=1}return}}ne(s,l,a){if(this.Y===void 0){this.i+=1,this.Y=new this.re(s,l),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,h=this.h.U,f=this.v(h.u,s);if(f===0){h.l=l;return}else if(f>0)h.U=new this.re(s,l),h.U.tt=h,c=h.U,this.h.U=c;else{let g=this.h.W,y=this.v(g.u,s);if(y===0){g.l=l;return}else if(y<0)g.W=new this.re(s,l),g.W.tt=g,c=g.W,this.h.W=c;else{if(a!==void 0){let b=a.o;if(b!==this.h){let w=this.v(b.u,s);if(w===0){b.l=l;return}else if(w>0){let _=b.L(),R=this.v(_.u,s);if(R===0){_.l=l;return}else R<0&&(c=new this.re(s,l),_.W===void 0?(_.W=c,c.tt=_):(b.U=c,c.tt=b))}}}if(c===void 0)for(c=this.Y;;){let b=this.v(c.u,s);if(b>0){if(c.U===void 0){c.U=new this.re(s,l),c.U.tt=c,c=c.U;break}c=c.U}else if(b<0){if(c.W===void 0){c.W=new this.re(s,l),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=l;return}}}}return this.i+=1,c}I(s,l){for(;s;){let a=this.v(s.u,l);if(a<0)s=s.W;else if(a>0)s=s.U;else return s}return s||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(s,l){let a=s.o;if(a===this.h&&(0,o.throwIteratorAccessError)(),this.i===1)return a.u=l,!0;if(a===this.h.U)return this.v(a.B().u,l)>0?(a.u=l,!0):!1;if(a===this.h.W)return this.v(a.L().u,l)<0?(a.u=l,!0):!1;let c=a.L().u;if(this.v(c,l)>=0)return!1;let h=a.B().u;return this.v(h,l)<=0?!1:(a.u=l,!0)}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let l=0,a=this;return this.oe(this.Y,function(c){return s===l?(a.V(c),!0):(l+=1,!1)}),this.i}eraseElementByKey(s){if(this.i===0)return!1;let l=this.I(this.Y,s);return l===this.h?!1:(this.V(l),!0)}eraseElementByIterator(s){let l=s.o;l===this.h&&(0,o.throwIteratorAccessError)();let a=l.W===void 0;return s.iteratorType===0?a&&s.next():(!a||l.U===void 0)&&s.next(),this.V(l),s}forEach(s){let l=0;for(let a of this)s(a,l++,this)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let l,a=0;for(let c of this){if(a===s){l=c;break}a+=1}return l}getHeight(){if(this.i===0)return 0;let s=function(l){return l?Math.max(s(l.U),s(l.W))+1:0};return s(this.Y)}},n=u;e.default=n}),Zc=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=cr(),t=hr(),o=class extends r.ContainerIterator{constructor(n,s,l){super(l),this.o=n,this.h=s,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,s=this.h.tt;if(n===this.h)return s?s.rt-1:0;let l=0;for(n.U&&(l+=n.U.rt);n!==s;){let a=n.tt;n===a.W&&(l+=1,a.U&&(l+=a.U.rt)),n=a}return l}},u=o;e.default=u}),Ag=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Jc()),t=u(Zc()),o=hr();function u(a){return a&&a.t?a:{default:a}}var n=class Xc extends t.default{constructor(c,h,f,g){super(c,h,g),this.container=f}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Xc(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.default{constructor(a=[],c,h){super(c,h);let f=this;a.forEach(function(g){f.insert(g)})}*K(a){a!==void 0&&(yield*this.K(a.U),yield a.u,yield*this.K(a.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(a,c){return this.M(a,void 0,c)}find(a){let c=this.I(this.Y,a);return new n(c,this.h,this)}lowerBound(a){let c=this.X(this.Y,a);return new n(c,this.h,this)}upperBound(a){let c=this.Z(this.Y,a);return new n(c,this.h,this)}reverseLowerBound(a){let c=this.$(this.Y,a);return new n(c,this.h,this)}reverseUpperBound(a){let c=this.rr(this.Y,a);return new n(c,this.h,this)}union(a){let c=this;return a.forEach(function(h){c.insert(h)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},l=s;e.default=l}),Tg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=u(Jc()),t=u(Zc()),o=hr();function u(a){return a&&a.t?a:{default:a}}var n=class eh extends t.default{constructor(c,h,f,g){super(c,h,g),this.container=f}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,f){if(f==="0")return c.o.u;if(f==="1")return c.o.l},set(h,f,g){if(f!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new eh(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.default{constructor(a=[],c,h){super(c,h);let f=this;a.forEach(function(g){f.setElement(g[0],g[1])})}*K(a){a!==void 0&&(yield*this.K(a.U),yield[a.u,a.l],yield*this.K(a.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let a=this.h.U;return[a.u,a.l]}back(){if(this.i===0)return;let a=this.h.W;return[a.u,a.l]}lowerBound(a){let c=this.X(this.Y,a);return new n(c,this.h,this)}upperBound(a){let c=this.Z(this.Y,a);return new n(c,this.h,this)}reverseLowerBound(a){let c=this.$(this.Y,a);return new n(c,this.h,this)}reverseUpperBound(a){let c=this.rr(this.Y,a);return new n(c,this.h,this)}setElement(a,c,h){return this.M(a,c,h)}find(a){let c=this.I(this.Y,a);return new n(c,this.h,this)}getElementByKey(a){return this.I(this.Y,a).l}union(a){let c=this;return a.forEach(function(h){c.setElement(h[0],h[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},l=s;e.default=l}),th=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=r;function r(t){let o=typeof t;return o==="object"&&t!==null||o==="function"}}),rh=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var r=cr(),t=u(th()),o=hr();function u(l){return l&&l.t?l:{default:l}}var n=class extends r.ContainerIterator{constructor(l,a,c){super(c),this.o=l,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=n;var s=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(l){let{L:a,B:c}=l;a.B=c,c.L=a,l===this.p&&(this.p=c),l===this._&&(this._=a),this.i-=1}M(l,a,c){c===void 0&&(c=(0,t.default)(l));let h;if(c){let f=l[this.HASH_TAG];if(f!==void 0)return this.H[f].l=a,this.i;Object.defineProperty(l,this.HASH_TAG,{value:this.H.length,configurable:!0}),h={u:l,l:a,L:this._,B:this.h},this.H.push(h)}else{let f=this.g[l];if(f)return f.l=a,this.i;h={u:l,l:a,L:this._,B:this.h},this.g[l]=h}return this.i===0?(this.p=h,this.h.B=h):this._.B=h,this._=h,this.h.L=h,++this.i}I(l,a){if(a===void 0&&(a=(0,t.default)(l)),a){let c=l[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[l]||this.h}clear(){let l=this.HASH_TAG;this.H.forEach(function(a){delete a.u[l]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(l,a){let c;if(a===void 0&&(a=(0,t.default)(l)),a){let h=l[this.HASH_TAG];if(h===void 0)return!1;delete l[this.HASH_TAG],c=this.H[h],delete this.H[h]}else{if(c=this.g[l],c===void 0)return!1;delete this.g[l]}return this.V(c),!0}eraseElementByIterator(l){let a=l.o;return a===this.h&&(0,o.throwIteratorAccessError)(),this.V(a),l.next()}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let a=this.p;for(;l--;)a=a.B;return this.V(a),this.i}};e.HashContainer=s}),Ig=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=rh(),t=hr(),o=class nh extends r.HashContainerIterator{constructor(l,a,c,h){super(l,a,h),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new nh(this.o,this.h,this.container,this.iteratorType)}},u=class extends r.HashContainer{constructor(s=[]){super();let l=this;s.forEach(function(a){l.insert(a)})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(s,l){return this.M(s,void 0,l)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let l=this.p;for(;s--;)l=l.B;return l.u}find(s,l){let a=this.I(s,l);return new o(a,this.h,this)}forEach(s){let l=0,a=this.p;for(;a!==this.h;)s(a.u,l++,this),a=a.B}[Symbol.iterator](){return(function*(){let s=this.p;for(;s!==this.h;)yield s.u,s=s.B}).bind(this)()}},n=u;e.default=n}),kg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=rh(),t=u(th()),o=hr();function u(a){return a&&a.t?a:{default:a}}var n=class ih extends r.HashContainerIterator{constructor(c,h,f,g){super(c,h,g),this.container=f}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,f){if(f==="0")return c.o.u;if(f==="1")return c.o.l},set(h,f,g){if(f!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new ih(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.HashContainer{constructor(a=[]){super();let c=this;a.forEach(function(h){c.setElement(h[0],h[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(a,c,h){return this.M(a,c,h)}getElementByKey(a,c){if(c===void 0&&(c=(0,t.default)(a)),c){let f=a[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let h=this.g[a];return h?h.l:void 0}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return[c.u,c.l]}find(a,c){let h=this.I(a,c);return new n(h,this.h,this)}forEach(a){let c=0,h=this.p;for(;h!==this.h;)a([h.u,h.l],c++,this),h=h.B}[Symbol.iterator](){return(function*(){let a=this.p;for(;a!==this.h;)yield[a.u,a.l],a=a.B}).bind(this)()}},l=s;e.default=l}),Cg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return u.default}});var r=f(yg()),t=f(bg()),o=f(wg()),u=f(_g()),n=f(vg()),s=f(Eg()),l=f(Ag()),a=f(Tg()),c=f(Ig()),h=f(kg());function f(g){return g&&g.t?g:{default:g}}}),Rg=ve((e,r)=>{ye(),we(),be();var t=Cg().OrderedSet,o=lr()("number-allocator:trace"),u=lr()("number-allocator:error");function n(l,a){this.low=l,this.high=a}n.prototype.equals=function(l){return this.low===l.low&&this.high===l.high},n.prototype.compare=function(l){return this.low<l.low&&this.high<l.low?-1:l.low<this.low&&l.high<this.low?1:0};function s(l,a){if(!(this instanceof s))return new s(l,a);this.min=l,this.max=a,this.ss=new t([],(c,h)=>c.compare(h)),o("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return o("alloc():empty"),null;let l=this.ss.begin(),a=l.pointer.low,c=l.pointer.high,h=a;return h+1<=c?this.ss.updateKeyByIterator(l,new n(a+1,c)):this.ss.eraseElementByPos(0),o("alloc():"+h),h},s.prototype.use=function(l){let a=new n(l,l),c=this.ss.lowerBound(a);if(!c.equals(this.ss.end())){let h=c.pointer.low,f=c.pointer.high;return c.pointer.equals(a)?(this.ss.eraseElementByIterator(c),o("use():"+l),!0):h>l?!1:h===l?(this.ss.updateKeyByIterator(c,new n(h+1,f)),o("use():"+l),!0):f===l?(this.ss.updateKeyByIterator(c,new n(h,f-1)),o("use():"+l),!0):(this.ss.updateKeyByIterator(c,new n(l+1,f)),this.ss.insert(new n(h,l-1)),o("use():"+l),!0)}return o("use():failed"),!1},s.prototype.free=function(l){if(l<this.min||l>this.max){u("free():"+l+" is out of range");return}let a=new n(l,l),c=this.ss.upperBound(a);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(a);return}c.pre();let h=c.pointer.high;c.pointer.high+1===l?this.ss.updateKeyByIterator(c,new n(h,l)):this.ss.insert(a)}else if(c.equals(this.ss.begin()))if(l+1===c.pointer.low){let h=c.pointer.high;this.ss.updateKeyByIterator(c,new n(l,h))}else this.ss.insert(a);else{let h=c.pointer.low,f=c.pointer.high;c.pre();let g=c.pointer.low;c.pointer.high+1===l?l+1===h?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new n(g,f))):this.ss.updateKeyByIterator(c,new n(g,l)):l+1===h?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new n(l,f))):this.ss.insert(a)}o("free():"+l)},s.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let l of this.ss)console.log(l)},r.exports=s}),sh=ve((e,r)=>{ye(),we(),be();var t=Rg();r.exports.NumberAllocator=t}),xg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=mg(),t=sh(),o=class{constructor(u){u>0&&(this.aliasToTopic=new r.LRUCache({max:u}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,u),this.max=u,this.length=0)}put(u,n){if(n===0||n>this.max)return!1;let s=this.aliasToTopic.get(n);return s&&delete this.topicToAlias[s],this.aliasToTopic.set(n,u),this.topicToAlias[u]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(u){return this.aliasToTopic.get(u)}getAliasByTopic(u){let n=this.topicToAlias[u];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=o}),Og=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=qi(),o=r(xg()),u=bn(),n=(s,l)=>{s.log("_handleConnack");let{options:a}=s,c=a.protocolVersion===5?l.reasonCode:l.returnCode;if(clearTimeout(s.connackTimer),delete s.topicAliasSend,l.properties){if(l.properties.topicAliasMaximum){if(l.properties.topicAliasMaximum>65535){s.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}l.properties.topicAliasMaximum>0&&(s.topicAliasSend=new o.default(l.properties.topicAliasMaximum))}l.properties.serverKeepAlive&&a.keepalive&&(a.keepalive=l.properties.serverKeepAlive),l.properties.maximumPacketSize&&(a.properties||(a.properties={}),a.properties.maximumPacketSize=l.properties.maximumPacketSize)}if(c===0)s.reconnecting=!1,s._onConnect(l);else if(c>0){let h=new u.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);s.emit("error",h)}};e.default=n}),Pg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(t,o,u)=>{t.log("handling pubrel packet");let n=typeof u<"u"?u:t.noop,{messageId:s}=o,l={cmd:"pubcomp",messageId:s};t.incomingStore.get(o,(a,c)=>{a?t._sendPacket(l,n):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,h=>{if(h)return n(h);t.incomingStore.del(c,t.noop),t._sendPacket(l,n)}))})};e.default=r}),Bg=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(dg()),o=r(gg()),u=r(Og()),n=r(qi()),s=r(Pg()),l=(a,c,h)=>{let{options:f}=a;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<c.length)return a.emit("error",new Error(`exceeding packets size ${c.cmd}`)),a.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),a;switch(a.log("_handlePacket :: emitting packetreceive"),a.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(a,c,h);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":a.reschedulePing(),(0,n.default)(a,c),h();break;case"pubrel":a.reschedulePing(),(0,s.default)(a,c,h);break;case"connack":(0,u.default)(a,c),h();break;case"auth":a.reschedulePing(),(0,o.default)(a,c),h();break;case"pingresp":a.log("_handlePacket :: received pingresp"),a.reschedulePing(!0),h();break;case"disconnect":a.emit("disconnect",c),h();break;default:a.log("_handlePacket :: unknown command"),h();break}};e.default=l}),Ng=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=r((yn(),Ve(Gr))),o=bn(),u=class{};e.TypedEventEmitter=u,(0,o.applyMixin)(u,t.default)}),Wi=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var r=()=>{var n;return typeof window<"u"?typeof navigator<"u"&&((n=navigator.userAgent)===null||n===void 0?void 0:n.toLowerCase().indexOf(" electron/"))>-1&&qe!=null&&qe.versions?!Object.prototype.hasOwnProperty.call(qe.versions,"electron"):typeof window.document<"u":!1},t=()=>{var n,s;return!!(typeof self=="object"&&!((s=(n=self==null?void 0:self.constructor)===null||n===void 0?void 0:n.name)===null||s===void 0)&&s.includes("WorkerGlobalScope"))},o=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u=r()||t()||o();e.isWebWorker=t(),e.isReactNativeBrowser=o(),e.default=u}),Lg=ve((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.fastUniqueNumbers={}))}(e,function(t){var o=function(y){return function(b){var w=y(b);return b.add(w),w}},u=function(y){return function(b,w){return y.set(b,w),w}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,l=s*2,a=function(y,b){return function(w){var _=b.get(w),R=_===void 0?w.size:_<l?_+1:0;if(!w.has(R))return y(w,R);if(w.size<s){for(;w.has(R);)R=Math.floor(Math.random()*l);return y(w,R)}if(w.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(R);)R=Math.floor(Math.random()*n);return y(w,R)}},c=new WeakMap,h=u(c),f=a(h,c),g=o(f);t.addUniqueNumber=g,t.generateUniqueNumber=f})}),Mg=ve((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e,Lg()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,o){var u=function(l){return l.method!==void 0&&l.method==="call"},n=function(l){return l.error===null&&typeof l.id=="number"},s=function(l){var a=new Map([[0,function(){}]]),c=new Map([[0,function(){}]]),h=new Map,f=new Worker(l);f.addEventListener("message",function(_){var R=_.data;if(u(R)){var I=R.params,T=I.timerId,k=I.timerType;if(k==="interval"){var P=a.get(T);if(typeof P=="number"){var S=h.get(P);if(S===void 0||S.timerId!==T||S.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P();else throw new Error("The timer is in an undefined state.")}else if(k==="timeout"){var E=c.get(T);if(typeof E=="number"){var O=h.get(E);if(O===void 0||O.timerId!==T||O.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof E<"u")E(),c.delete(T);else throw new Error("The timer is in an undefined state.")}}else if(n(R)){var L=R.id,Q=h.get(L);if(Q===void 0)throw new Error("The timer is in an undefined state.");var re=Q.timerId,v=Q.timerType;h.delete(L),v==="interval"?a.delete(re):c.delete(re)}else{var W=R.error.message;throw new Error(W)}});var g=function(_){var R=o.generateUniqueNumber(h);h.set(R,{timerId:_,timerType:"interval"}),a.set(_,R),f.postMessage({id:R,method:"clear",params:{timerId:_,timerType:"interval"}})},y=function(_){var R=o.generateUniqueNumber(h);h.set(R,{timerId:_,timerType:"timeout"}),c.set(_,R),f.postMessage({id:R,method:"clear",params:{timerId:_,timerType:"timeout"}})},b=function(_){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=o.generateUniqueNumber(a);return a.set(I,function(){_(),typeof a.get(I)=="function"&&f.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:I,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:I,timerType:"interval"}}),I},w=function(_){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=o.generateUniqueNumber(c);return c.set(I,_),f.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:I,timerType:"timeout"}}),I};return{clearInterval:g,clearTimeout:y,setInterval:b,setTimeout:w}};t.load=s})}),Ug=ve((e,r)=>{ye(),we(),be(),function(t,o){typeof e=="object"&&typeof r<"u"?o(e,Mg()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimers={},t.workerTimersBroker))}(e,function(t,o){var u=function(f,g){var y=null;return function(){if(y!==null)return y;var b=new Blob([g],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(b);return y=f(w),setTimeout(function(){return URL.revokeObjectURL(w)}),y}},n=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,s=u(o.load,n),l=function(f){return s().clearInterval(f)},a=function(f){return s().clearTimeout(f)},c=function(){var f;return(f=s()).setInterval.apply(f,arguments)},h=function(){var f;return(f=s()).setTimeout.apply(f,arguments)};t.clearInterval=l,t.clearTimeout=a,t.setInterval=c,t.setTimeout=h})}),Dg=ve(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(c,h,f,g){g===void 0&&(g=f);var y=Object.getOwnPropertyDescriptor(h,f);(!y||("get"in y?!h.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(c,g,y)}:function(c,h,f,g){g===void 0&&(g=f),c[g]=h[f]}),t=e&&e.__setModuleDefault||(Object.create?function(c,h){Object.defineProperty(c,"default",{enumerable:!0,value:h})}:function(c,h){c.default=h}),o=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var h={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&r(h,c,f);return t(h,c),h};Object.defineProperty(e,"__esModule",{value:!0});var u=o(Wi()),n=Ug(),s={set:n.setInterval,clear:n.clearInterval},l={set:(c,h)=>setInterval(c,h),clear:c=>clearInterval(c)},a=c=>{switch(c){case"native":return l;case"worker":return s;case"auto":default:return u.default&&!u.isWebWorker&&!u.isReactNativeBrowser?s:l}};e.default=a}),oh=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Dg()),o=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(u,n){this.destroyed=!1,this.client=u,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,t.default)(n),this.setKeepalive(u.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(u){if(u*=1e3,isNaN(u)||u<=0||u>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${u}`);this._keepalive=u,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${u}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let u=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+u,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=o}),ea=ve(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(P,S,E,O){O===void 0&&(O=E);var L=Object.getOwnPropertyDescriptor(S,E);(!L||("get"in L?!S.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return S[E]}}),Object.defineProperty(P,O,L)}:function(P,S,E,O){O===void 0&&(O=E),P[O]=S[E]}),t=e&&e.__setModuleDefault||(Object.create?function(P,S){Object.defineProperty(P,"default",{enumerable:!0,value:S})}:function(P,S){P.default=S}),o=e&&e.__importStar||function(P){if(P&&P.__esModule)return P;var S={};if(P!=null)for(var E in P)E!=="default"&&Object.prototype.hasOwnProperty.call(P,E)&&r(S,P,E);return t(S,P),S},u=e&&e.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var n=u(kp()),s=u(ug()),l=u($c()),a=Qr(),c=u(hg()),h=o(fg()),f=u(lr()),g=u(Hc()),y=u(Bg()),b=bn(),w=Ng(),_=u(oh()),R=o(Wi()),I=globalThis.setImmediate||((...P)=>{let S=P.shift();(0,b.nextTick)(()=>{S(...P)})}),T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},k=class ta extends w.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,E){super(),this.options=E||{};for(let O in T)typeof this.options[O]>"u"?this.options[O]=T[O]:this.options[O]=E[O];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",ta.VERSION),R.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",R.default?"browser":"node"),this.log("MqttClient :: options.protocol",E.protocol),this.log("MqttClient :: options.protocolVersion",E.protocolVersion),this.log("MqttClient :: options.username",E.username),this.log("MqttClient :: options.keepalive",E.keepalive),this.log("MqttClient :: options.reconnectPeriod",E.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",E.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",E.properties?E.properties.topicAliasMaximum:void 0),this.options.clientId=typeof E.clientId=="string"?E.clientId:ta.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=E.protocolVersion===5&&E.customHandleAcks?E.customHandleAcks:(...O)=>{O[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new l.default:this.options.messageIdProvider,this.outgoingStore=E.outgoingStore||new g.default,this.incomingStore=E.incomingStore||new g.default,this.queueQoSZero=E.queueQoSZero===void 0?!0:E.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,E.properties&&E.properties.topicAliasMaximum>0&&(E.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new n.default(E.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:O}=this,L=()=>{let Q=O.shift();this.log("deliver :: entry %o",Q);let re=null;if(!Q){this._resubscribe();return}re=Q.packet,this.log("deliver :: call _sendPacket for %o",re);let v=!0;re.messageId&&re.messageId!==0&&(this.messageIdProvider.register(re.messageId)||(v=!1)),v?this._sendPacket(re,W=>{Q.cb&&Q.cb(W),L()}):(this.log("messageId: %d has already used. The message is skipped and removed.",re.messageId),L())};this.log("connect :: sending queued packets"),L()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,E){E()}handleMessage(S,E){E()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let E=new a.Writable,O=s.default.parser(this.options),L=null,Q=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),O.on("packet",q=>{this.log("parser :: on packet push to packets array."),Q.push(q)});let re=()=>{this.log("work :: getting next packet in queue");let q=Q.shift();if(q)this.log("work :: packet pulled from queue"),(0,y.default)(this,q,v);else{this.log("work :: no packets in queue");let Z=L;L=null,this.log("work :: done flag is %s",!!Z),Z&&Z()}},v=()=>{if(Q.length)(0,b.nextTick)(re);else{let q=L;L=null,q()}};E._write=(q,Z,V)=>{L=V,this.log("writable stream :: parsing buffer"),O.parse(q),re()};let W=q=>{this.log("streamErrorHandler :: error",q.message),q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",q)):this.noop(q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(E),this.stream.on("error",W),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let $={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&($.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&($.properties||($.properties={}),this.topicAliasRecv&&($.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket($),O.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let q=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,E,O,L){this.log("publish :: message `%s` to topic `%s`",E,S);let{options:Q}=this;typeof O=="function"&&(L=O,O=null),O=O||{},O=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),O);let{qos:re,retain:v,dup:W,properties:$,cbStorePut:q}=O;if(this._checkDisconnecting(L))return this;let Z=()=>{let V=0;if((re===1||re===2)&&(V=this._nextId(),V===null))return this.log("No messageId left"),!1;let F={cmd:"publish",topic:S,payload:E,qos:re,retain:v,messageId:V,dup:W};switch(Q.protocolVersion===5&&(F.properties=$),this.log("publish :: qos",re),re){case 1:case 2:this.outgoing[F.messageId]={volatile:!1,cb:L||this.noop},this.log("MqttClient:publish: packet cmd: %s",F.cmd),this._sendPacket(F,void 0,q);break;default:this.log("MqttClient:publish: packet cmd: %s",F.cmd),this._sendPacket(F,L,q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Z())&&this._storeProcessingQueue.push({invoke:Z,cbStorePut:O.cbStorePut,callback:L}),this}publishAsync(S,E,O){return new Promise((L,Q)=>{this.publish(S,E,O,(re,v)=>{re?Q(re):L(v)})})}subscribe(S,E,O){let L=this.options.protocolVersion;typeof E=="function"&&(O=E),O=O||this.noop;let Q=!1,re=[];typeof S=="string"?(S=[S],re=S):Array.isArray(S)?re=S:typeof S=="object"&&(Q=S.resubscribe,delete S.resubscribe,re=Object.keys(S));let v=h.validateTopics(re);if(v!==null)return I(O,new Error(`Invalid topic ${v}`)),this;if(this._checkDisconnecting(O))return this.log("subscribe: discconecting true"),this;let W={qos:0};L===5&&(W.nl=!1,W.rap=!1,W.rh=0),E=Object.assign(Object.assign({},W),E);let $=E.properties,q=[],Z=(F,oe)=>{if(oe=oe||E,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,F)||this._resubscribeTopics[F].qos<oe.qos||Q){let se={topic:F,qos:oe.qos};L===5&&(se.nl=oe.nl,se.rap=oe.rap,se.rh=oe.rh,se.properties=$),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",se.topic,se.qos),q.push(se)}};if(Array.isArray(S)?S.forEach(F=>{this.log("subscribe: array topic %s",F),Z(F)}):Object.keys(S).forEach(F=>{this.log("subscribe: object topic %s, %o",F,S[F]),Z(F,S[F])}),!q.length)return O(null,[]),this;let V=()=>{let F=this._nextId();if(F===null)return this.log("No messageId left"),!1;let oe={cmd:"subscribe",subscriptions:q,messageId:F};if($&&(oe.properties=$),this.options.resubscribe){this.log("subscribe :: resubscribe true");let se=[];q.forEach(de=>{if(this.options.reconnectPeriod>0){let A={qos:de.qos};L===5&&(A.nl=de.nl||!1,A.rap=de.rap||!1,A.rh=de.rh||0,A.properties=de.properties),this._resubscribeTopics[de.topic]=A,se.push(de.topic)}}),this.messageIdToTopic[oe.messageId]=se}return this.outgoing[oe.messageId]={volatile:!0,cb(se,de){if(!se){let{granted:A}=de;for(let J=0;J<A.length;J+=1)q[J].qos=A[J]}O(se,q,de)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(oe),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!V())&&this._storeProcessingQueue.push({invoke:V,callback:O}),this}subscribeAsync(S,E){return new Promise((O,L)=>{this.subscribe(S,E,(Q,re)=>{Q?L(Q):O(re)})})}unsubscribe(S,E,O){typeof S=="string"&&(S=[S]),typeof E=="function"&&(O=E),O=O||this.noop;let L=h.validateTopics(S);if(L!==null)return I(O,new Error(`Invalid topic ${L}`)),this;if(this._checkDisconnecting(O))return this;let Q=()=>{let re=this._nextId();if(re===null)return this.log("No messageId left"),!1;let v={cmd:"unsubscribe",messageId:re,unsubscriptions:[]};return typeof S=="string"?v.unsubscriptions=[S]:Array.isArray(S)&&(v.unsubscriptions=S),this.options.resubscribe&&v.unsubscriptions.forEach(W=>{delete this._resubscribeTopics[W]}),typeof E=="object"&&E.properties&&(v.properties=E.properties),this.outgoing[v.messageId]={volatile:!0,cb:O},this.log("unsubscribe: call _sendPacket"),this._sendPacket(v),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,callback:O}),this}unsubscribeAsync(S,E){return new Promise((O,L)=>{this.unsubscribe(S,E,(Q,re)=>{Q?L(Q):O(re)})})}end(S,E,O){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(O=O||E,E=S,S=!1),typeof E!="object"&&(O=O||E,E=null),this.log("end :: cb? %s",!!O),(!O||typeof O!="function")&&(O=this.noop);let L=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(re=>{this.outgoingStore.close(v=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),O){let W=re||v;this.log("end :: closeStores: invoking callback with args"),O(W)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},Q=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(L)},E)};return this.disconnecting?(O(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,Q,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),Q()),this)}endAsync(S,E){return new Promise((O,L)=>{this.end(S,E,Q=>{Q?L(Q):O()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:E}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{E(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let E=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=E:E(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let E;S.properties&&(E=S.properties.topicAlias);let O=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",E,O),O.length===0){if(typeof E>"u")return new Error("Unregistered Topic Alias");if(O=this.topicAliasSend.getTopicByAlias(E),typeof O>"u")return new Error("Unregistered Topic Alias");S.topic=O}E&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,E,O={}){if(E&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",E)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let L=Object.assign({cmd:"disconnect"},O);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(L,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),I(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),E&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",E),E())}_storeAndSend(S,E,O){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let L=S,Q;if(L.cmd==="publish"&&(L=(0,c.default)(S),Q=this._removeTopicAliasAndRecoverTopicName(L),Q))return E&&E(Q);this.outgoingStore.put(L,re=>{if(re)return E&&E(re);O(),this._writePacket(S,E)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let E;S.properties&&(E=S.properties.topicAlias);let O=S.topic.toString();if(this.topicAliasSend)if(E){if(O.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",O,E),!this.topicAliasSend.put(O,E)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",O,E),new Error("Sending Topic Alias out of range")}else O.length!==0&&(this.options.autoAssignTopicAlias?(E=this.topicAliasSend.getAliasByTopic(O),E?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:E}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",O,E)):(E=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(O,E),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:E}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",O,E))):this.options.autoUseTopicAlias&&(E=this.topicAliasSend.getAliasByTopic(O),E&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:E}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",O,E))));else if(E)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",O,E),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,E){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let O=s.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",O),!O&&E&&E!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",E)):E&&(this.log("_writePacket :: invoking cb"),E())}_sendPacket(S,E,O,L){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),O=O||this.noop,E=E||this.noop;let Q=this._applyTopicAlias(S);if(Q){E(Q);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,E);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,E,O);return}if(L){this._writePacket(S,E);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,E,O);return;default:this._writePacket(S,E);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,E,O);break;case 0:default:this._writePacket(S,E);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,E,O){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!E),O=O||this.noop;let L=S;if(L.cmd==="publish"){L=(0,c.default)(S);let re=this._removeTopicAliasAndRecoverTopicName(L);if(re)return E&&E(re)}let Q=L.qos||0;Q===0&&this.queueQoSZero||L.cmd!=="publish"?this.queue.push({packet:L,cb:E}):Q>0?(E=this.outgoing[L.messageId]?this.outgoing[L.messageId].cb:null,this.outgoingStore.put(L,re=>{if(re)return E&&E(re);O()})):E&&E(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let E=0;E<S.length;E++){let O={};O[S[E]]=this._resubscribeTopics[S[E]],O.resubscribe=!0,this.subscribe(O,{properties:O[S[E]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let E=()=>{let O=this.outgoingStore.createStream(),L=()=>{O.destroy(),O=null,this._flushStoreProcessingQueue(),Q()},Q=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",L),O.on("error",v=>{Q(),this._flushStoreProcessingQueue(),this.removeListener("close",L),this.emit("error",v)});let re=()=>{if(!O)return;let v=O.read(1),W;if(!v){O.once("readable",re);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[v.messageId]){re();return}!this.disconnecting&&!this.reconnectTimer?(W=this.outgoing[v.messageId]?this.outgoing[v.messageId].cb:null,this.outgoing[v.messageId]={volatile:!1,cb($,q){W&&W($,q),re()}},this._packetIdsDuringStoreProcessing[v.messageId]=!0,this.messageIdProvider.register(v.messageId)?this._sendPacket(v,void 0,void 0,!0):this.log("messageId: %d has already used.",v.messageId)):O.destroy&&O.destroy()};O.on("end",()=>{let v=!0;for(let W in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[W]){v=!1;break}this.removeListener("close",L),v?(Q(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):E()}),re()};E()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,E){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(O,L)=>{E(O,L),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};k.VERSION=b.MQTTJS_VERSION,e.default=k}),jg=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=sh(),t=class{constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(o){return this.numberAllocator.use(o)}deallocate(o){this.numberAllocator.free(o)}clear(){this.numberAllocator.clear()}};e.default=t});function Cr(e){throw new RangeError(lh[e])}function nu(e,r){let t=e.split("@"),o="";t.length>1&&(o=t[0]+"@",e=t[1]);let u=function(n,s){let l=[],a=n.length;for(;a--;)l[a]=s(n[a]);return l}((e=e.replace(ah,".")).split("."),r).join(".");return o+u}function iu(e){let r=[],t=0,o=e.length;for(;t<o;){let u=e.charCodeAt(t++);if(u>=55296&&u<=56319&&t<o){let n=e.charCodeAt(t++);(64512&n)==56320?r.push(((1023&u)<<10)+(1023&n)+65536):(r.push(u),t--)}else r.push(u)}return r}var su,ou,ah,lh,kt,Xn,vs,Es,Ss,As,br,Fg=ft(()=>{ye(),we(),be(),su=/^xn--/,ou=/[^\0-\x7E]/,ah=/[\x2E\u3002\uFF0E\uFF61]/g,lh={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},kt=Math.floor,Xn=String.fromCharCode,vs=function(e,r){return e+22+75*(e<26)-((r!=0)<<5)},Es=function(e,r,t){let o=0;for(e=t?kt(e/700):e>>1,e+=kt(e/r);e>455;o+=36)e=kt(e/35);return kt(o+36*e/(e+38))},Ss=function(e){let r=[],t=e.length,o=0,u=128,n=72,s=e.lastIndexOf("-");s<0&&(s=0);for(let a=0;a<s;++a)e.charCodeAt(a)>=128&&Cr("not-basic"),r.push(e.charCodeAt(a));for(let a=s>0?s+1:0;a<t;){let c=o;for(let f=1,g=36;;g+=36){a>=t&&Cr("invalid-input");let y=(l=e.charCodeAt(a++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36;(y>=36||y>kt((2147483647-o)/f))&&Cr("overflow"),o+=y*f;let b=g<=n?1:g>=n+26?26:g-n;if(y<b)break;let w=36-b;f>kt(2147483647/w)&&Cr("overflow"),f*=w}let h=r.length+1;n=Es(o-c,h,c==0),kt(o/h)>2147483647-u&&Cr("overflow"),u+=kt(o/h),o%=h,r.splice(o++,0,u)}var l;return String.fromCodePoint(...r)},As=function(e){let r=[],t=(e=iu(e)).length,o=128,u=0,n=72;for(let a of e)a<128&&r.push(Xn(a));let s=r.length,l=s;for(s&&r.push("-");l<t;){let a=2147483647;for(let h of e)h>=o&&h<a&&(a=h);let c=l+1;a-o>kt((2147483647-u)/c)&&Cr("overflow"),u+=(a-o)*c,o=a;for(let h of e)if(h<o&&++u>2147483647&&Cr("overflow"),h==o){let f=u;for(let g=36;;g+=36){let y=g<=n?1:g>=n+26?26:g-n;if(f<y)break;let b=f-y,w=36-y;r.push(Xn(vs(y+b%w,0))),f=kt(b/w)}r.push(Xn(vs(f,0))),n=Es(u,c,l==s),u=0,++l}++u,++o}return r.join("")},br={version:"2.1.0",ucs2:{decode:iu,encode:e=>String.fromCodePoint(...e)},decode:Ss,encode:As,toASCII:function(e){return nu(e,function(r){return ou.test(r)?"xn--"+As(r):r})},toUnicode:function(e){return nu(e,function(r){return su.test(r)?Ss(r.slice(4).toLowerCase()):r})}},br.decode,br.encode,br.toASCII,br.toUnicode,br.ucs2,br.version});function qg(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var au,tn,lu,Ut,Wg=ft(()=>{ye(),we(),be(),au=function(e,r,t,o){r=r||"&",t=t||"=";var u={};if(typeof e!="string"||e.length===0)return u;var n=/\+/g;e=e.split(r);var s=1e3;o&&typeof o.maxKeys=="number"&&(s=o.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var a=0;a<l;++a){var c,h,f,g,y=e[a].replace(n,"%20"),b=y.indexOf(t);b>=0?(c=y.substr(0,b),h=y.substr(b+1)):(c=y,h=""),f=decodeURIComponent(c),g=decodeURIComponent(h),qg(u,f)?Array.isArray(u[f])?u[f].push(g):u[f]=[u[f],g]:u[f]=g}return u},tn=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},lu=function(e,r,t,o){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(u){var n=encodeURIComponent(tn(u))+t;return Array.isArray(e[u])?e[u].map(function(s){return n+encodeURIComponent(tn(s))}).join(r):n+encodeURIComponent(tn(e[u]))}).join(r):o?encodeURIComponent(tn(o))+t+encodeURIComponent(tn(e)):""},Ut={},Ut.decode=Ut.parse=au,Ut.encode=Ut.stringify=lu,Ut.decode,Ut.encode,Ut.parse,Ut.stringify});function ra(){throw new Error("setTimeout has not been defined")}function na(){throw new Error("clearTimeout has not been defined")}function uh(e){if(Kt===setTimeout)return setTimeout(e,0);if((Kt===ra||!Kt)&&setTimeout)return Kt=setTimeout,setTimeout(e,0);try{return Kt(e,0)}catch{try{return Kt.call(null,e,0)}catch{return Kt.call(this||$r,e,0)}}}function $g(){Hr&&Lr&&(Hr=!1,Lr.length?qt=Lr.concat(qt):Bn=-1,qt.length&&ch())}function ch(){if(!Hr){var e=uh($g);Hr=!0;for(var r=qt.length;r;){for(Lr=qt,qt=[];++Bn<r;)Lr&&Lr[Bn].run();Bn=-1,r=qt.length}Lr=null,Hr=!1,function(t){if(Yt===clearTimeout)return clearTimeout(t);if((Yt===na||!Yt)&&clearTimeout)return Yt=clearTimeout,clearTimeout(t);try{Yt(t)}catch{try{return Yt.call(null,t)}catch{return Yt.call(this||$r,t)}}}(e)}}function uu(e,r){(this||$r).fun=e,(this||$r).array=r}function Ht(){}var cu,Kt,Yt,$r,et,Lr,qt,Hr,Bn,Xe,Hg=ft(()=>{ye(),we(),be(),$r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,et=cu={},function(){try{Kt=typeof setTimeout=="function"?setTimeout:ra}catch{Kt=ra}try{Yt=typeof clearTimeout=="function"?clearTimeout:na}catch{Yt=na}}(),qt=[],Hr=!1,Bn=-1,et.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];qt.push(new uu(e,r)),qt.length!==1||Hr||uh(ch)},uu.prototype.run=function(){(this||$r).fun.apply(null,(this||$r).array)},et.title="browser",et.browser=!0,et.env={},et.argv=[],et.version="",et.versions={},et.on=Ht,et.addListener=Ht,et.once=Ht,et.off=Ht,et.removeListener=Ht,et.removeAllListeners=Ht,et.emit=Ht,et.prependListener=Ht,et.prependOnceListener=Ht,et.listeners=function(e){return[]},et.binding=function(e){throw new Error("process.binding is not supported")},et.cwd=function(){return"/"},et.chdir=function(e){throw new Error("process.chdir is not supported")},et.umask=function(){return 0},Xe=cu,Xe.addListener,Xe.argv,Xe.binding,Xe.browser,Xe.chdir,Xe.cwd,Xe.emit,Xe.env,Xe.listeners,Xe.nextTick,Xe.off,Xe.on,Xe.once,Xe.prependListener,Xe.prependOnceListener,Xe.removeAllListeners,Xe.removeListener,Xe.title,Xe.umask,Xe.version,Xe.versions});function zg(){if(ia)return di;ia=!0;var e=di={},r,t;function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=o}catch{r=o}try{typeof clearTimeout=="function"?t=clearTimeout:t=u}catch{t=u}})();function n(w){if(r===setTimeout)return setTimeout(w,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(w,0);try{return r(w,0)}catch{try{return r.call(null,w,0)}catch{return r.call(this||Or,w,0)}}}function s(w){if(t===clearTimeout)return clearTimeout(w);if((t===u||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(w);try{return t(w)}catch{try{return t.call(null,w)}catch{return t.call(this||Or,w)}}}var l=[],a=!1,c,h=-1;function f(){!a||!c||(a=!1,c.length?l=c.concat(l):h=-1,l.length&&g())}function g(){if(!a){var w=n(f);a=!0;for(var _=l.length;_;){for(c=l,l=[];++h<_;)c&&c[h].run();h=-1,_=l.length}c=null,a=!1,s(w)}}e.nextTick=function(w){var _=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)_[R-1]=arguments[R];l.push(new y(w,_)),l.length===1&&!a&&n(g)};function y(w,_){(this||Or).fun=w,(this||Or).array=_}y.prototype.run=function(){(this||Or).fun.apply(null,(this||Or).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(w){return[]},e.binding=function(w){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(w){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},di}var di,ia,Or,Qe,hh=ft(()=>{ye(),we(),be(),di={},ia=!1,Or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Qe=zg(),Qe.platform="browser",Qe.addListener,Qe.argv,Qe.binding,Qe.browser,Qe.chdir,Qe.cwd,Qe.emit,Qe.env,Qe.listeners,Qe.nextTick,Qe.off,Qe.on,Qe.once,Qe.prependListener,Qe.prependOnceListener,Qe.removeAllListeners,Qe.removeListener,Qe.title,Qe.umask,Qe.version,Qe.versions});function Vg(){if(sa)return pi;sa=!0;var e=Qe;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,s){for(var l="",a=0,c=-1,h=0,f,g=0;g<=n.length;++g){if(g<n.length)f=n.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(c===g-1||h===1))if(c!==g-1&&h===2){if(l.length<2||a!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var y=l.lastIndexOf("/");if(y!==l.length-1){y===-1?(l="",a=0):(l=l.slice(0,y),a=l.length-1-l.lastIndexOf("/")),c=g,h=0;continue}}else if(l.length===2||l.length===1){l="",a=0,c=g,h=0;continue}}s&&(l.length>0?l+="/..":l="..",a=2)}else l.length>0?l+="/"+n.slice(c+1,g):l=n.slice(c+1,g),a=g-c-1;c=g,h=0}else f===46&&h!==-1?++h:h=-1}return l}function o(n,s){var l=s.dir||s.root,a=s.base||(s.name||"")+(s.ext||"");return l?l===s.root?l+a:l+n+a:a}var u={resolve:function(){for(var n="",s=!1,l,a=arguments.length-1;a>=-1&&!s;a--){var c;a>=0?c=arguments[a]:(l===void 0&&(l=e.cwd()),c=l),r(c),c.length!==0&&(n=c+"/"+n,s=c.charCodeAt(0)===47)}return n=t(n,!s),s?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var s=n.charCodeAt(0)===47,l=n.charCodeAt(n.length-1)===47;return n=t(n,!s),n.length===0&&!s&&(n="."),n.length>0&&l&&(n+="/"),s?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,s=0;s<arguments.length;++s){var l=arguments[s];r(l),l.length>0&&(n===void 0?n=l:n+="/"+l)}return n===void 0?".":u.normalize(n)},relative:function(n,s){if(r(n),r(s),n===s||(n=u.resolve(n),s=u.resolve(s),n===s))return"";for(var l=1;l<n.length&&n.charCodeAt(l)===47;++l);for(var a=n.length,c=a-l,h=1;h<s.length&&s.charCodeAt(h)===47;++h);for(var f=s.length,g=f-h,y=c<g?c:g,b=-1,w=0;w<=y;++w){if(w===y){if(g>y){if(s.charCodeAt(h+w)===47)return s.slice(h+w+1);if(w===0)return s.slice(h+w)}else c>y&&(n.charCodeAt(l+w)===47?b=w:w===0&&(b=0));break}var _=n.charCodeAt(l+w),R=s.charCodeAt(h+w);if(_!==R)break;_===47&&(b=w)}var I="";for(w=l+b+1;w<=a;++w)(w===a||n.charCodeAt(w)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+s.slice(h+b):(h+=b,s.charCodeAt(h)===47&&++h,s.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var s=n.charCodeAt(0),l=s===47,a=-1,c=!0,h=n.length-1;h>=1;--h)if(s=n.charCodeAt(h),s===47){if(!c){a=h;break}}else c=!1;return a===-1?l?"/":".":l&&a===1?"//":n.slice(0,a)},basename:function(n,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');r(n);var l=0,a=-1,c=!0,h;if(s!==void 0&&s.length>0&&s.length<=n.length){if(s.length===n.length&&s===n)return"";var f=s.length-1,g=-1;for(h=n.length-1;h>=0;--h){var y=n.charCodeAt(h);if(y===47){if(!c){l=h+1;break}}else g===-1&&(c=!1,g=h+1),f>=0&&(y===s.charCodeAt(f)?--f===-1&&(a=h):(f=-1,a=g))}return l===a?a=g:a===-1&&(a=n.length),n.slice(l,a)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!c){l=h+1;break}}else a===-1&&(c=!1,a=h+1);return a===-1?"":n.slice(l,a)}},extname:function(n){r(n);for(var s=-1,l=0,a=-1,c=!0,h=0,f=n.length-1;f>=0;--f){var g=n.charCodeAt(f);if(g===47){if(!c){l=f+1;break}continue}a===-1&&(c=!1,a=f+1),g===46?s===-1?s=f:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===l+1?"":n.slice(s,a)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return o("/",n)},parse:function(n){r(n);var s={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return s;var l=n.charCodeAt(0),a=l===47,c;a?(s.root="/",c=1):c=0;for(var h=-1,f=0,g=-1,y=!0,b=n.length-1,w=0;b>=c;--b){if(l=n.charCodeAt(b),l===47){if(!y){f=b+1;break}continue}g===-1&&(y=!1,g=b+1),l===46?h===-1?h=b:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||g===-1||w===0||w===1&&h===g-1&&h===f+1?g!==-1&&(f===0&&a?s.base=s.name=n.slice(1,g):s.base=s.name=n.slice(f,g)):(f===0&&a?(s.name=n.slice(1,h),s.base=n.slice(1,g)):(s.name=n.slice(f,h),s.base=n.slice(f,g)),s.ext=n.slice(h,g)),f>0?s.dir=n.slice(0,f-1):a&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return u.posix=u,pi=u,pi}var pi,sa,oa,Kg=ft(()=>{ye(),we(),be(),hh(),pi={},sa=!1,oa=Vg()}),fh={};Kr(fh,{URL:()=>xh,Url:()=>Th,default:()=>$e,fileURLToPath:()=>dh,format:()=>Ih,parse:()=>Rh,pathToFileURL:()=>ph,resolve:()=>kh,resolveObject:()=>Ch});function Tt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function In(e,r,t){if(e&&Rt.isObject(e)&&e instanceof Tt)return e;var o=new Tt;return o.parse(e,r,t),o}function Yg(){if(aa)return gi;aa=!0;var e=Xe;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,s){for(var l="",a=0,c=-1,h=0,f,g=0;g<=n.length;++g){if(g<n.length)f=n.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(c===g-1||h===1))if(c!==g-1&&h===2){if(l.length<2||a!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var y=l.lastIndexOf("/");if(y!==l.length-1){y===-1?(l="",a=0):(l=l.slice(0,y),a=l.length-1-l.lastIndexOf("/")),c=g,h=0;continue}}else if(l.length===2||l.length===1){l="",a=0,c=g,h=0;continue}}s&&(l.length>0?l+="/..":l="..",a=2)}else l.length>0?l+="/"+n.slice(c+1,g):l=n.slice(c+1,g),a=g-c-1;c=g,h=0}else f===46&&h!==-1?++h:h=-1}return l}function o(n,s){var l=s.dir||s.root,a=s.base||(s.name||"")+(s.ext||"");return l?l===s.root?l+a:l+n+a:a}var u={resolve:function(){for(var n="",s=!1,l,a=arguments.length-1;a>=-1&&!s;a--){var c;a>=0?c=arguments[a]:(l===void 0&&(l=e.cwd()),c=l),r(c),c.length!==0&&(n=c+"/"+n,s=c.charCodeAt(0)===47)}return n=t(n,!s),s?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var s=n.charCodeAt(0)===47,l=n.charCodeAt(n.length-1)===47;return n=t(n,!s),n.length===0&&!s&&(n="."),n.length>0&&l&&(n+="/"),s?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,s=0;s<arguments.length;++s){var l=arguments[s];r(l),l.length>0&&(n===void 0?n=l:n+="/"+l)}return n===void 0?".":u.normalize(n)},relative:function(n,s){if(r(n),r(s),n===s||(n=u.resolve(n),s=u.resolve(s),n===s))return"";for(var l=1;l<n.length&&n.charCodeAt(l)===47;++l);for(var a=n.length,c=a-l,h=1;h<s.length&&s.charCodeAt(h)===47;++h);for(var f=s.length,g=f-h,y=c<g?c:g,b=-1,w=0;w<=y;++w){if(w===y){if(g>y){if(s.charCodeAt(h+w)===47)return s.slice(h+w+1);if(w===0)return s.slice(h+w)}else c>y&&(n.charCodeAt(l+w)===47?b=w:w===0&&(b=0));break}var _=n.charCodeAt(l+w),R=s.charCodeAt(h+w);if(_!==R)break;_===47&&(b=w)}var I="";for(w=l+b+1;w<=a;++w)(w===a||n.charCodeAt(w)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+s.slice(h+b):(h+=b,s.charCodeAt(h)===47&&++h,s.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var s=n.charCodeAt(0),l=s===47,a=-1,c=!0,h=n.length-1;h>=1;--h)if(s=n.charCodeAt(h),s===47){if(!c){a=h;break}}else c=!1;return a===-1?l?"/":".":l&&a===1?"//":n.slice(0,a)},basename:function(n,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');r(n);var l=0,a=-1,c=!0,h;if(s!==void 0&&s.length>0&&s.length<=n.length){if(s.length===n.length&&s===n)return"";var f=s.length-1,g=-1;for(h=n.length-1;h>=0;--h){var y=n.charCodeAt(h);if(y===47){if(!c){l=h+1;break}}else g===-1&&(c=!1,g=h+1),f>=0&&(y===s.charCodeAt(f)?--f===-1&&(a=h):(f=-1,a=g))}return l===a?a=g:a===-1&&(a=n.length),n.slice(l,a)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!c){l=h+1;break}}else a===-1&&(c=!1,a=h+1);return a===-1?"":n.slice(l,a)}},extname:function(n){r(n);for(var s=-1,l=0,a=-1,c=!0,h=0,f=n.length-1;f>=0;--f){var g=n.charCodeAt(f);if(g===47){if(!c){l=f+1;break}continue}a===-1&&(c=!1,a=f+1),g===46?s===-1?s=f:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===l+1?"":n.slice(s,a)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return o("/",n)},parse:function(n){r(n);var s={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return s;var l=n.charCodeAt(0),a=l===47,c;a?(s.root="/",c=1):c=0;for(var h=-1,f=0,g=-1,y=!0,b=n.length-1,w=0;b>=c;--b){if(l=n.charCodeAt(b),l===47){if(!y){f=b+1;break}continue}g===-1&&(y=!1,g=b+1),l===46?h===-1?h=b:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||g===-1||w===0||w===1&&h===g-1&&h===f+1?g!==-1&&(f===0&&a?s.base=s.name=n.slice(1,g):s.base=s.name=n.slice(f,g)):(f===0&&a?(s.name=n.slice(1,h),s.base=n.slice(1,g)):(s.name=n.slice(f,h),s.base=n.slice(f,g)),s.ext=n.slice(h,g)),f>0?s.dir=n.slice(0,f-1):a&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return u.posix=u,gi=u,gi}function Gg(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return xi?Qg(e):Jg(e)}function Qg(e){let r=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let u=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&u===102||t[o+1]==="5"&&u===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(wh,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let o=t.codePointAt(1)|32,u=t[2];if(o<yh||o>bh||u!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Jg(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let o=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function Zg(e){let r=la.resolve(e),t=e.charCodeAt(e.length-1);(t===mh||xi&&t===gh)&&r[r.length-1]!==la.sep&&(r+="/");let o=new URL("file://");return r.includes("%")&&(r=r.replace(_h,"%25")),!xi&&r.includes("\\")&&(r=r.replace(vh,"%5C")),r.includes(`
`)&&(r=r.replace(Eh,"%0A")),r.includes("\r")&&(r=r.replace(Sh,"%0D")),r.includes("	")&&(r=r.replace(Ah,"%09")),o.pathname=r,o}function dh(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Oi?Xg(e):em(e)}function Xg(e){let r=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let u=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&u===102||t[o+1]==="5"&&u===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Lh,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let o=t.codePointAt(1)|32,u=t[2];if(o<Bh||o>Nh||u!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function em(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let o=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function ph(e){let r=oa.resolve(e),t=e.charCodeAt(e.length-1);(t===Ph||Oi&&t===Oh)&&r[r.length-1]!==oa.sep&&(r+="/");let o=new URL("file://");return r.includes("%")&&(r=r.replace(Mh,"%25")),!Oi&&r.includes("\\")&&(r=r.replace(Uh,"%5C")),r.includes(`
`)&&(r=r.replace(Dh,"%0A")),r.includes("\r")&&(r=r.replace(jh,"%0D")),r.includes("	")&&(r=r.replace(Fh,"%09")),o.pathname=r,o}var $e,hu,Rt,fu,du,pu,gu,ei,Ts,Is,ks,mu,yu,ti,Rr,ri,gi,aa,la,bu,gh,mh,yh,bh,xi,wh,_h,vh,Eh,Sh,Ah,wu,Th,Ih,kh,Ch,Rh,xh,Oh,Ph,Bh,Nh,Oi,Lh,Mh,Uh,Dh,jh,Fh,tm=ft(()=>{ye(),we(),be(),Fg(),Wg(),Hg(),Kg(),hh(),$e={},hu=br,Rt={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},$e.parse=In,$e.resolve=function(e,r){return In(e,!1,!0).resolve(r)},$e.resolveObject=function(e,r){return e?In(e,!1,!0).resolveObject(r):r},$e.format=function(e){return Rt.isString(e)&&(e=In(e)),e instanceof Tt?e.format():Tt.prototype.format.call(e)},$e.Url=Tt,fu=/^([a-z0-9.+-]+:)/i,du=/:[0-9]*$/,pu=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,gu=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),ei=["'"].concat(gu),Ts=["%","/","?",";","#"].concat(ei),Is=["/","?","#"],ks=/^[+a-z0-9A-Z_-]{0,63}$/,mu=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yu={javascript:!0,"javascript:":!0},ti={javascript:!0,"javascript:":!0},Rr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ri=Ut,Tt.prototype.parse=function(e,r,t){if(!Rt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),u=o!==-1&&o<e.indexOf("#")?"?":"#",n=e.split(u);n[0]=n[0].replace(/\\/g,"/");var s=e=n.join(u);if(s=s.trim(),!t&&e.split("#").length===1){var l=pu.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],this.query=r?ri.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var a=fu.exec(s);if(a){var c=(a=a[0]).toLowerCase();this.protocol=c,s=s.substr(a.length)}if(t||a||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=s.substr(0,2)==="//";!h||a&&ti[a]||(s=s.substr(2),this.slashes=!0)}if(!ti[a]&&(h||a&&!Rr[a])){for(var f,g,y=-1,b=0;b<Is.length;b++)(w=s.indexOf(Is[b]))!==-1&&(y===-1||w<y)&&(y=w);for((g=y===-1?s.lastIndexOf("@"):s.lastIndexOf("@",y))!==-1&&(f=s.slice(0,g),s=s.slice(g+1),this.auth=decodeURIComponent(f)),y=-1,b=0;b<Ts.length;b++){var w;(w=s.indexOf(Ts[b]))!==-1&&(y===-1||w<y)&&(y=w)}y===-1&&(y=s.length),this.host=s.slice(0,y),s=s.slice(y),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var R=this.hostname.split(/\./),I=(b=0,R.length);b<I;b++){var T=R[b];if(T&&!T.match(ks)){for(var k="",P=0,S=T.length;P<S;P++)T.charCodeAt(P)>127?k+="x":k+=T[P];if(!k.match(ks)){var E=R.slice(0,b),O=R.slice(b+1),L=T.match(mu);L&&(E.push(L[1]),O.unshift(L[2])),O.length&&(s="/"+O.join(".")+s),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=hu.toASCII(this.hostname));var Q=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+Q,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!yu[c])for(b=0,I=ei.length;b<I;b++){var v=ei[b];if(s.indexOf(v)!==-1){var W=encodeURIComponent(v);W===v&&(W=escape(v)),s=s.split(v).join(W)}}var $=s.indexOf("#");$!==-1&&(this.hash=s.substr($),s=s.slice(0,$));var q=s.indexOf("?");if(q!==-1?(this.search=s.substr(q),this.query=s.substr(q+1),r&&(this.query=ri.parse(this.query)),s=s.slice(0,q)):r&&(this.search="",this.query={}),s&&(this.pathname=s),Rr[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Q=this.pathname||"";var Z=this.search||"";this.path=Q+Z}return this.href=this.format(),this},Tt.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",o=this.hash||"",u=!1,n="";this.host?u=e+this.host:this.hostname&&(u=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(u+=":"+this.port)),this.query&&Rt.isObject(this.query)&&Object.keys(this.query).length&&(n=ri.stringify(this.query));var s=this.search||n&&"?"+n||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Rr[r])&&u!==!1?(u="//"+(u||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):u||(u=""),o&&o.charAt(0)!=="#"&&(o="#"+o),s&&s.charAt(0)!=="?"&&(s="?"+s),r+u+(t=t.replace(/[?#]/g,function(l){return encodeURIComponent(l)}))+(s=s.replace("#","%23"))+o},Tt.prototype.resolve=function(e){return this.resolveObject(In(e,!1,!0)).format()},Tt.prototype.resolveObject=function(e){if(Rt.isString(e)){var r=new Tt;r.parse(e,!1,!0),e=r}for(var t=new Tt,o=Object.keys(this),u=0;u<o.length;u++){var n=o[u];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var a=s[l];a!=="protocol"&&(t[a]=e[a])}return Rr[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Rr[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var f=c[h];t[f]=e[f]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||ti[e.protocol])t.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var y=t.pathname||"",b=t.search||"";t.path=y+b}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var w=t.pathname&&t.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",R=_||w||t.host&&e.pathname,I=R,T=t.pathname&&t.pathname.split("/")||[],k=(g=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Rr[t.protocol]);if(k&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host=null),R=R&&(g[0]===""||T[0]==="")),_)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,T=g;else if(g.length)T||(T=[]),T.pop(),T=T.concat(g),t.search=e.search,t.query=e.query;else if(!Rt.isNullOrUndefined(e.search))return k&&(t.hostname=t.host=T.shift(),(L=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=L.shift(),t.host=t.hostname=L.shift())),t.search=e.search,t.query=e.query,Rt.isNull(t.pathname)&&Rt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var P=T.slice(-1)[0],S=(t.host||e.host||T.length>1)&&(P==="."||P==="..")||P==="",E=0,O=T.length;O>=0;O--)(P=T[O])==="."?T.splice(O,1):P===".."?(T.splice(O,1),E++):E&&(T.splice(O,1),E--);if(!R&&!I)for(;E--;E)T.unshift("..");!R||T[0]===""||T[0]&&T[0].charAt(0)==="/"||T.unshift(""),S&&T.join("/").substr(-1)!=="/"&&T.push("");var L,Q=T[0]===""||T[0]&&T[0].charAt(0)==="/";return k&&(t.hostname=t.host=Q?"":T.length?T.shift():"",(L=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=L.shift(),t.host=t.hostname=L.shift())),(R=R||t.host&&T.length)&&!Q&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),Rt.isNull(t.pathname)&&Rt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},Tt.prototype.parseHost=function(){var e=this.host,r=du.exec(e);r&&((r=r[0])!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)},$e.Url,$e.format,$e.resolve,$e.resolveObject,gi={},aa=!1,la=Yg(),bu=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,$e.URL=typeof URL<"u"?URL:null,$e.pathToFileURL=Zg,$e.fileURLToPath=Gg,$e.Url,$e.format,$e.resolve,$e.resolveObject,$e.URL,gh=92,mh=47,yh=97,bh=122,xi=bu==="win32",wh=/\//g,_h=/%/g,vh=/\\/g,Eh=/\n/g,Sh=/\r/g,Ah=/\t/g,wu=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,$e.URL=typeof URL<"u"?URL:null,$e.pathToFileURL=ph,$e.fileURLToPath=dh,Th=$e.Url,Ih=$e.format,kh=$e.resolve,Ch=$e.resolveObject,Rh=$e.parse,xh=$e.URL,Oh=92,Ph=47,Bh=97,Nh=122,Oi=wu==="win32",Lh=/\//g,Mh=/%/g,Uh=/\\/g,Dh=/\n/g,jh=/\r/g,Fh=/\t/g}),rm=ve((e,r)=>{ye(),we(),be(),r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),La=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var r=Qr(),t=(pt(),Ve(dt));function o(n,s){let l=new Array(n.length);for(let a=0;a<n.length;a++)typeof n[a].chunk=="string"?l[a]=t.Buffer.from(n[a].chunk,"utf8"):l[a]=n[a].chunk;this._write(t.Buffer.concat(l),"binary",s)}e.writev=o;var u=class extends r.Duplex{constructor(n,s,l){super({objectMode:!0}),this.proxy=s,this.socket=l,this.writeQueue=[],n.objectMode||(this._writev=o.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",a=>{this.destroyed||this.push(a)})}_read(n){this.proxy.read(n)}_write(n,s,l){this.isSocketOpen?this.writeToProxy(n,s,l):this.writeQueue.push({chunk:n,encoding:s,cb:l})}_final(n){this.writeQueue=[],this.proxy.end(n)}_destroy(n,s){this.writeQueue=[],this.proxy.destroy(),s(n)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(n,s,l){this.proxy.write(n,s)===!1?this.proxy.once("drain",l):l()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:n,encoding:s,cb:l}=this.writeQueue.shift();this.writeToProxy(n,s,l)}}};e.BufferedDuplex=u}),ni=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(pt(),Ve(dt)),o=r(rm()),u=r(lr()),n=Qr(),s=r(Wi()),l=La(),a=(0,u.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function h(R,I){let T=`${R.protocol}://${R.hostname}:${R.port}${R.path}`;return typeof R.transformWsUrl=="function"&&(T=R.transformWsUrl(T,R,I)),T}function f(R){let I=R;return R.port||(R.protocol==="wss"?I.port=443:I.port=80),R.path||(I.path="/"),R.wsOptions||(I.wsOptions={}),!s.default&&!R.forceNativeWebSocket&&R.protocol==="wss"&&c.forEach(T=>{Object.prototype.hasOwnProperty.call(R,T)&&!Object.prototype.hasOwnProperty.call(R.wsOptions,T)&&(I.wsOptions[T]=R[T])}),I}function g(R){let I=f(R);if(I.hostname||(I.hostname=I.host),!I.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let T=new URL(document.URL);I.hostname=T.hostname,I.port||(I.port=Number(T.port))}return I.objectMode===void 0&&(I.objectMode=!(I.binary===!0||I.binary===void 0)),I}function y(R,I,T){a("createWebSocket"),a(`protocol: ${T.protocolId} ${T.protocolVersion}`);let k=T.protocolId==="MQIsdp"&&T.protocolVersion===3?"mqttv3.1":"mqtt";a(`creating new Websocket for url: ${I} and protocol: ${k}`);let P;return T.createWebsocket?P=T.createWebsocket(I,[k],T):P=new o.default(I,[k],T.wsOptions),P}function b(R,I){let T=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt",k=h(I,R),P;return I.createWebsocket?P=I.createWebsocket(k,[T],I):P=new WebSocket(k,[T]),P.binaryType="arraybuffer",P}var w=(R,I)=>{a("streamBuilder");let T=f(I);T.hostname=T.hostname||T.host||"localhost";let k=h(T,R),P=y(R,k,T),S=o.default.createWebSocketStream(P,T.wsOptions);return S.url=k,P.on("close",()=>{S.destroy()}),S};e.streamBuilder=w;var _=(R,I)=>{a("browserStreamBuilder");let T,k=g(I).browserBufferSize||1024*512,P=I.browserBufferTimeout||1e3,S=!I.objectMode,E=b(R,I),O=Q(I,q,Z);I.objectMode||(O._writev=l.writev.bind(O)),O.on("close",()=>{E.close()});let L=typeof E.addEventListener<"u";E.readyState===E.OPEN?(T=O,T.socket=E):(T=new l.BufferedDuplex(I,O,E),L?E.addEventListener("open",re):E.onopen=re),L?(E.addEventListener("close",v),E.addEventListener("error",W),E.addEventListener("message",$)):(E.onclose=v,E.onerror=W,E.onmessage=$);function Q(V,F,oe){let se=new n.Transform({objectMode:V.objectMode});return se._write=F,se._flush=oe,se}function re(){a("WebSocket onOpen"),T instanceof l.BufferedDuplex&&T.socketReady()}function v(V){a("WebSocket onClose",V),T.end(),T.destroy()}function W(V){a("WebSocket onError",V);let F=new Error("WebSocket error");F.event=V,T.destroy(F)}async function $(V){let{data:F}=V;F instanceof ArrayBuffer?F=t.Buffer.from(F):F instanceof Blob?F=t.Buffer.from(await new Response(F).arrayBuffer()):F=t.Buffer.from(F,"utf8"),O&&!O.destroyed&&O.push(F)}function q(V,F,oe){if(E.bufferedAmount>k){setTimeout(q,P,V,F,oe);return}S&&typeof V=="string"&&(V=t.Buffer.from(V,"utf8"));try{E.send(V)}catch(se){return oe(se)}oe()}function Z(V){E.close(),V()}return T};e.browserStreamBuilder=_}),Ma={};Kr(Ma,{Server:()=>Je,Socket:()=>Je,Stream:()=>Je,_createServerHandle:()=>Je,_normalizeArgs:()=>Je,_setSimultaneousAccepts:()=>Je,connect:()=>Je,createConnection:()=>Je,createServer:()=>Je,default:()=>qh,isIP:()=>Je,isIPv4:()=>Je,isIPv6:()=>Je});function Je(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var qh,Wh=ft(()=>{ye(),we(),be(),qh={_createServerHandle:Je,_normalizeArgs:Je,_setSimultaneousAccepts:Je,connect:Je,createConnection:Je,createServer:Je,isIP:Je,isIPv4:Je,isIPv6:Je,Server:Je,Socket:Je,Stream:Je}}),_u=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Wh(),Ve(Ma))),o=r(lr()),u=(0,o.default)("mqttjs:tcp"),n=(s,l)=>{l.port=l.port||1883,l.hostname=l.hostname||l.host||"localhost";let{port:a,path:c}=l,h=l.hostname;return u("port %d and host %s",a,h),t.default.createConnection({port:a,host:h,path:c})};e.default=n}),$h={};Kr($h,{default:()=>Hh});var Hh,nm=ft(()=>{ye(),we(),be(),Hh={}}),vu=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((nm(),Ve($h))),o=r((Wh(),Ve(Ma))),u=r(lr()),n=(0,u.default)("mqttjs:tls"),s=(l,a)=>{a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",o.default.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,n("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);let c=t.default.connect(a);c.on("secureConnect",()=>{a.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",h)});function h(f){a.rejectUnauthorized&&l.emit("error",f),c.end()}return c.on("error",h),c};e.default=s}),Eu=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(pt(),Ve(dt)),t=Qr(),o=La(),u,n,s;function l(){let g=new t.Transform;return g._write=(y,b,w)=>{u.send({data:y.buffer,success(){w()},fail(_){w(new Error(_))}})},g._flush=y=>{u.close({success(){y()}})},g}function a(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,y){let b=g.protocol==="wxs"?"wss":"ws",w=`${b}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(w=`${b}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(w=g.transformWsUrl(w,g,y)),w}function h(){u.onOpen(()=>{s.socketReady()}),u.onMessage(g=>{let{data:y}=g;y instanceof ArrayBuffer?y=r.Buffer.from(y):y=r.Buffer.from(y,"utf8"),n.push(y)}),u.onClose(()=>{s.emit("close"),s.end(),s.destroy()}),u.onError(g=>{let y=new Error(g.errMsg);s.destroy(y)})}var f=(g,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let b=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";a(y);let w=c(y,g);u=wx.connectSocket({url:w,protocols:[b]}),n=l(),s=new o.BufferedDuplex(y,n,u),s._destroy=(R,I)=>{u.close({success(){I&&I(R)}})};let _=s.destroy;return s.destroy=(R,I)=>(s.destroy=_,setTimeout(()=>{u.close({fail(){s._destroy(R,I)}})},0),s),h(),s};e.default=f}),Su=ve(e=>{ye(),we(),be(),Object.defineProperty(e,"__esModule",{value:!0});var r=(pt(),Ve(dt)),t=Qr(),o=La(),u,n,s,l=!1;function a(){let y=new t.Transform;return y._write=(b,w,_)=>{u.sendSocketMessage({data:b.buffer,success(){_()},fail(){_(new Error)}})},y._flush=b=>{u.closeSocket({success(){b()}})},y}function c(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function h(y,b){let w=y.protocol==="alis"?"wss":"ws",_=`${w}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(_=`${w}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(_=y.transformWsUrl(_,y,b)),_}function f(){l||(l=!0,u.onSocketOpen(()=>{s.socketReady()}),u.onSocketMessage(y=>{if(typeof y.data=="string"){let b=r.Buffer.from(y.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w instanceof ArrayBuffer?w=r.Buffer.from(w):w=r.Buffer.from(w,"utf8"),n.push(w)}),b.readAsArrayBuffer(y.data)}}),u.onSocketClose(()=>{s.end(),s.destroy()}),u.onSocketError(y=>{s.destroy(y)}))}var g=(y,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";c(b);let _=h(b,y);return u=b.my,u.connectSocket({url:_,protocols:w}),n=a(),s=new o.BufferedDuplex(b,n,u),f(),s};e.default=g}),im=ve(e=>{ye(),we(),be();var r=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=r(lr()),o=r((tm(),Ve(fh))),u=r(ea()),n=r(Wi());typeof(qe==null?void 0:qe.nextTick)!="function"&&(qe.nextTick=setImmediate);var s=(0,t.default)("mqttjs"),l=null;function a(f){let g;f.auth&&(g=f.auth.match(/^(.+):(.+)$/),g?(f.username=g[1],f.password=g[2]):f.username=f.auth)}function c(f,g){var y,b,w,_;if(s("connecting to an MQTT broker..."),typeof f=="object"&&!g&&(g=f,f=""),g=g||{},f&&typeof f=="string"){let T=o.default.parse(f,!0),k={};if(T.port!=null&&(k.port=Number(T.port)),k.host=T.hostname,k.query=T.query,k.auth=T.auth,k.protocol=T.protocol,k.path=T.path,k.protocol=(y=k.protocol)===null||y===void 0?void 0:y.replace(/:$/,""),g=Object.assign(Object.assign({},k),g),!g.protocol)throw new Error("Missing protocol")}if(g.unixSocket=g.unixSocket||((b=g.protocol)===null||b===void 0?void 0:b.includes("+unix")),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!(!((w=g.protocol)===null||w===void 0)&&w.startsWith("ws"))&&!(!((_=g.protocol)===null||_===void 0)&&_.startsWith("wx"))&&delete g.path,a(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(l||(l={},!n.default&&!g.forceNativeWebSocket?(l.ws=ni().streamBuilder,l.wss=ni().streamBuilder,l.mqtt=_u().default,l.tcp=_u().default,l.ssl=vu().default,l.tls=l.ssl,l.mqtts=vu().default):(l.ws=ni().browserStreamBuilder,l.wss=ni().browserStreamBuilder,l.wx=Eu().default,l.wxs=Eu().default,l.ali=Su().default,l.alis=Su().default)),!l[g.protocol]){let T=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((k,P)=>T&&P%2===0?!1:typeof l[k]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function R(T){return g.servers&&((!T._reconnectCount||T._reconnectCount===g.servers.length)&&(T._reconnectCount=0),g.host=g.servers[T._reconnectCount].host,g.port=g.servers[T._reconnectCount].port,g.protocol=g.servers[T._reconnectCount].protocol?g.servers[T._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,T._reconnectCount++),s("calling streambuilder for",g.protocol),l[g.protocol](T,g)}let I=new u.default(R,g);return I.on("error",()=>{}),I}function h(f,g,y=!0){return new Promise((b,w)=>{let _=c(f,g),R={connect:T=>{I(),b(_)},end:()=>{I(),b(_)},error:T=>{I(),_.end(),w(T)}};y===!1&&(R.close=()=>{R.error(new Error("Couldn't connect to server"))});function I(){Object.keys(R).forEach(T=>{_.off(T,R[T])})}Object.keys(R).forEach(T=>{_.on(T,R[T])})})}e.connectAsync=h,e.default=c}),Au=ve(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(y,b,w,_){_===void 0&&(_=w);var R=Object.getOwnPropertyDescriptor(b,w);(!R||("get"in R?!b.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(y,_,R)}:function(y,b,w,_){_===void 0&&(_=w),y[_]=b[w]}),t=e&&e.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),o=e&&e.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var w in y)w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)&&r(b,y,w);return t(b,y),b},u=e&&e.__exportStar||function(y,b){for(var w in y)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&r(b,y,w)},n=e&&e.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var s=n(ea());e.MqttClient=s.default;var l=n($c());e.DefaultMessageIdProvider=l.default;var a=n(jg());e.UniqueMessageIdProvider=a.default;var c=n(Hc());e.Store=c.default;var h=o(im());e.connect=h.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var f=n(oh());e.KeepaliveManager=f.default,e.Client=s.default,u(ea(),e),u(bn(),e);var g=qi();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),sm=ve(e=>{ye(),we(),be();var r=e&&e.__createBinding||(Object.create?function(s,l,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(l,a);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(s,c,h)}:function(s,l,a,c){c===void 0&&(c=a),s[c]=l[a]}),t=e&&e.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),o=e&&e.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var a in s)a!=="default"&&Object.prototype.hasOwnProperty.call(s,a)&&r(l,s,a);return t(l,s),l},u=e&&e.__exportStar||function(s,l){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(l,a)&&r(l,s,a)};Object.defineProperty(e,"__esModule",{value:!0});var n=o(Au());e.default=n,u(Au(),e)}),om=sm();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/const am=5,rn={},Tu=({options:e})=>e.host+e.path,lm=Qu({init:e=>Hu(e,um,am).map(r=>{const t=om.connect(r),o=Tu(t);return t.stream.socket,rn[o]={},t.on("message",(u,n)=>{var s,l;return(l=(s=rn[o])[u])==null?void 0:l.call(s,u,n.toString())}),new Promise(u=>t.on("connect",()=>u(t)))}),subscribe:(e,r,t,o)=>{const u=Tu(e);return rn[u][r]=rn[u][t]=(n,s)=>o(n,s,e.publish.bind(e)),e.subscribe(r),e.subscribe(t),()=>{e.unsubscribe(r),e.unsubscribe(t),delete rn[u][r],delete rn[u][t]}},announce:(e,r)=>e.publish(r,Wt({peerId:jt}))}),um=["mqtt.eclipseprojects.io/mqtt","broker.hivemq.com:8884/mqtt","public.mqtthq.com:8084/mqtt","test.mosquitto.org:8081/mqtt","broker.emqx.io:8084/mqtt"].map(e=>"wss://"+e);var je,Pi,xt,Ot,Pt,Zt,Xt,er,Dn,Oe,mi,yi,bi,wi,mt,_i,vi,zh,Vh,hm,Mr,Ur,Dr,st,jr,Fr;class cm{constructor(r){xe(this,Oe);xe(this,je);xe(this,Pi);xe(this,xt);xe(this,Ot);xe(this,Pt);xe(this,Zt);xe(this,Xt);xe(this,er);xe(this,Dn);xe(this,Mr,()=>{});Ue(this,"onConnect",r=>Ie(this,Mr,r));xe(this,Ur,()=>{});Ue(this,"onDisconnect",r=>Ie(this,Ur,r));xe(this,Dr,()=>{});Ue(this,"onReceive",r=>Ie(this,Dr,r));xe(this,st,()=>{});Ue(this,"onSendProgress",r=>Ie(this,st,r));xe(this,jr,()=>{});Ue(this,"onReceiveProgress",r=>Ie(this,jr,r));xe(this,Fr,()=>{});Ue(this,"onStreaming",r=>Ie(this,Fr,r));Ie(this,je,[]);const t=r.db,o=r.room.roomTORRENT,u=r.room.roomNOSTR,n=r.room.roomMQTT,s=r.MyId;Ie(this,Pi,t),Ie(this,xt,o),Ie(this,Ot,n),Ie(this,Pt,u),Ie(this,Dn,s),o.onPeerJoin(_=>{Ae(this,Oe,mi).call(this,_,"torrent",x(this,Mr))}),u.onPeerJoin(_=>{Ae(this,Oe,mi).call(this,_,"nostr",x(this,Mr))}),n.onPeerJoin(_=>{Ae(this,Oe,mi).call(this,_,"mqtt",x(this,Mr))}),o.onPeerLeave(_=>{Ae(this,Oe,yi).call(this,_,"torrent",x(this,Ur))}),u.onPeerLeave(_=>{Ae(this,Oe,yi).call(this,_,"nostr",x(this,Ur))}),n.onPeerLeave(_=>{Ae(this,Oe,yi).call(this,_,"mqtt",x(this,Ur))}),o.onPeerStream((_,R,I)=>{Ae(this,Oe,bi).call(this,_,R,I,"torrent",x(this,Fr))}),u.onPeerStream((_,R,I)=>{Ae(this,Oe,bi).call(this,_,R,I,"nostr",x(this,Fr))}),n.onPeerStream((_,R,I)=>{Ae(this,Oe,bi).call(this,setream,R,I,"mqtt",x(this,Fr))});const[l,a,c]=o.makeAction("data");Ie(this,Zt,l),a((_,R,I)=>Ae(this,Oe,vi).call(this,_,R,I,"torrent",x(this,Dr))),c((_,R,I)=>{Ae(this,Oe,_i).call(this,_,R,I,"torrent",x(this,jr))});const[h,f,g]=u.makeAction("data");Ie(this,Xt,h),f((_,R,I)=>Ae(this,Oe,vi).call(this,_,R,I,"nostr",x(this,Dr))),g((_,R,I)=>{Ae(this,Oe,_i).call(this,_,R,I,"mqtt",x(this,jr))});const[y,b,w]=n.makeAction("data");Ie(this,er,y),b((_,R,I)=>Ae(this,Oe,vi).call(this,_,R,I,"mqtt",x(this,Dr))),w((_,R,I)=>{Ae(this,Oe,_i).call(this,_,R,I,"nostr",x(this,jr))})}Send(r,t){Ae(this,Oe,wi).call(this,"",r,t.connectId,t.metadata)}openStreaming(r,t){let o=t.connectId,u=t.metadata;if(o==null)x(this,je).forEach((n,s)=>{let l=n.engine;l.includes("torrent")?x(this,xt).addStream(r,n.id,u):l.includes("mqtt")?x(this,Ot).addStream(r,n.id,u):l.includes("nostr")&&x(this,Pt).addStream(r,n.id,u)});else{const n=x(this,je).findIndex(s=>s.id==o);if(n>-1){let s=x(this,je)[n].engine;s.includes("torrent")?x(this,xt).addStream(r,o,u):s.includes("mqtt")?x(this,Ot).addStream(r,o,u):s.includes("nostr")&&x(this,Pt).addStream(r,o,u)}}}closeStreaming(r,t){let o=t.connectId;if(o==null)x(this,je).forEach((u,n)=>{u.engine.forEach((l,a)=>{l=="torrent"&&x(this,xt).removeStream(r,u.id),l=="mqtt"&&x(this,Ot).removeStream(r,u.id),l=="nostr"&&x(this,Pt).removeStream(r,u.id)})});else if(typeof o=="string"){const u=x(this,je).findIndex(n=>n.id==o);if(u>-1){let n=x(this,je)[u].engine;n.includes("torrent")?x(this,xt).addStream(r,o):n.includes("mqtt")?x(this,Ot).addStream(r,o):n.includes("nostr")&&x(this,Pt).addStream(r,o)}}}async Ping(r){let t=r.connectId;if(t==null)return null;if(typeof t=="string"){const o=x(this,je).findIndex(u=>u.id==t);if(o>-1){let u=x(this,je)[o].engine;if(u.includes("torrent"))return await x(this,xt).ping(t);if(u.includes("mqtt"))return await x(this,Ot).ping(t);if(u.includes("nostr"))return await x(this,Pt).ping(t)}}else return[]}Disconnect(){Object.keys(x(this,xt).getPeers()).length!==0&&x(this,xt).leave(),Object.keys(x(this,Ot).getPeers()).length!==0&&x(this,Ot).leave(),Object.keys(x(this,Pt).getPeers()).length!==0&&x(this,Pt).leave()}getConnection(r){let t=[];x(this,je).forEach((u,n)=>{t.push(u.id)}),r({connection:t})}getMyId(r){let t={connectId:x(this,Dn)};r(t)}}je=new WeakMap,Pi=new WeakMap,xt=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,er=new WeakMap,Dn=new WeakMap,Oe=new WeakSet,mi=function(r,t,o){let u={id:r,engine:[t],online:{}};const n=x(this,je).findIndex(s=>s.id==r);n==-1?(x(this,je).push(u),o({connectId:r})):x(this,je)[n].engine.includes(t)||x(this,je)[n].engine.push(t)},yi=function(r,t,o){const u=x(this,je).findIndex(n=>n.id==r);if(u>-1){const s=x(this,je)[u].engine.findIndex(l=>l==t);s>-1&&(x(this,je)[u].engine.splice(s,1),x(this,je)[u].engine.length==0&&(x(this,je).splice(u,1),o({connectId:r})))}},bi=function(r,t,o,u,n){n(r,{connectId:t,metadata:o})},wi=function(r,t,o,u){if(r!==""&&r!=null)r=="torrent"?x(this,Zt).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"torrent",x(this,st))}):r=="mqtt"?x(this,er).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"mqtt",x(this,st))}):r=="nostr"&&x(this,Xt).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"nostr",x(this,st))});else if(o!=null&&Array.isArray(o))for(const n of o){const s=x(this,je).findIndex(l=>l.id==n);if(s>-1){let l=x(this,je)[s].engine;l.includes("torrent")?x(this,Zt).call(this,t,n,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"torrent",x(this,st))}):l.includes("mqtt")?x(this,er).call(this,t,n,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"mqtt",x(this,st))}):l.includes("nostr")&&x(this,Xt).call(this,t,n,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"nostr",x(this,st))})}}else if(o!=null&&typeof o=="string"){const n=x(this,je).findIndex(s=>s.id==o);if(n>-1){let s=x(this,je)[n].engine;s.includes("torrent")?x(this,Zt).call(this,t,o,u,(l,a)=>{Ae(this,Oe,mt).call(this,l,a,u,"torrent",x(this,st))}):s.includes("mqtt")?x(this,er).call(this,t,o,u,(l,a)=>{Ae(this,Oe,mt).call(this,l,a,u,"mqtt",x(this,st))}):s.includes("nostr")&&x(this,Xt).call(this,t,o,u,(l,a)=>{Ae(this,Oe,mt).call(this,l,a,u,"nostr",x(this,st))})}}else t=="webconnectping"?(x(this,Zt).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"torrent",x(this,st))}),x(this,er).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"mqtt",x(this,st))}),x(this,Xt).call(this,t,o,u,(n,s)=>{Ae(this,Oe,mt).call(this,n,s,u,"nostr",x(this,st))})):x(this,je).forEach((n,s)=>{let l=n.engine;l.includes("torrent")?x(this,Zt).call(this,t,n.id,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"torrent",x(this,st))}):l.includes("mqtt")?x(this,er).call(this,t,n.id,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"mqtt",x(this,st))}):l.includes("nostr")&&x(this,Xt).call(this,t,n.id,u,(a,c)=>{Ae(this,Oe,mt).call(this,a,c,u,"nostr",x(this,st))})})},mt=function(r,t,o,u,n){n({percent:r,connectId:t,metadata:o})},_i=function(r,t,o,u,n){n({percent:r,connectId:t,metadata:o})},vi=function(r,t,o,u,n){if(typeof r=="string"&&r=="webconnectping")Ae(this,Oe,Vh).call(this,t,u);else if(typeof r=="string"&&r=="webconnectpong"){const s=x(this,je).findIndex(l=>l.id==t);if(s>-1){let a=new Date().getTime();u=="torrent"?x(this,je)[s].online.torrent=a:u=="mqtt"?x(this,je)[s].online.mqtt=a:u=="nostr"&&(x(this,je)[s].online.nostr=a)}}else n(r,{connectId:t,metadata:o})},zh=function(r,t){Ae(this,Oe,wi).call(this,t,"webconnectping",r)},Vh=function(r,t){Ae(this,Oe,wi).call(this,t,"webconnectpong",r)},hm=function(){setInterval(()=>{Ae(this,Oe,zh).call(this,null);let t=new Date().getTime();x(this,je).forEach((o,u)=>{o.engine.forEach((n,s)=>{t-o.online[n]>3e4&&x(this,je)[u].engine.splice(s,1)})})},1e4)},Mr=new WeakMap,Ur=new WeakMap,Dr=new WeakMap,st=new WeakMap,jr=new WeakMap,Fr=new WeakMap;function fm({appName:e="webConnect",channelName:r="webConnectChannel",connectPassword:t="Browser to browser connection without server",iceConfiguration:o={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]}}){const u={appId:e,password:t,rtcConfig:o},n=Ul(u,r),s=Ul(u,r),l=lm(u,r),h={db:!1,room:{roomTORRENT:n,roomNOSTR:s,roomMQTT:l},MyId:jt||jt||jt};return new cm(h)}//! https://github.com/nuzulul/wifidrop
const dm="stun:stun.l.google.com:19302",pm="stun:global.stun.twilio.com:3478",gm="dHVybjp0dXJuMDEuYnJpZS5maTo1MzQ5",mm="YnJpZQ==",ym="Zmk=",bm="dHVybjpyZWxheTEuZXhwcmVzc3R1cm4uY29tOjM0Nzg=",wm="ZWZJSllZNjdDNElRMzFZQUlP",_m="Vk01SmdhODlkYjJaWU9aSA==";let ze={},wt=new Map,$i=new Map,pn=new Map,Kh="",Iu=[],ua=new Map,bt,Hi,gn,Dt;document.querySelector("#app").innerHTML=`
  <span id="loader" style="display:block;"><div class="loading">Loading&#8230;</div></span>
  <div>
    <a href="/">
      <img src="${Bf}" class="logo vanilla" alt="WIFIDrop logo" /><h1 class="logo-text">WIFIDrop</h1>
    </a>
    
    <div class="frame">
      <button id="drop" type="button">Drop a file or click to select a file</button>
    </div>
	
	<div class="peers">
		<div class="peer me">
			<div class="device"></div>
			<div class="device-name">DEVICE</div>
			<div class="radar">

				<svg id="radar-circle">
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="0.75s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="0.75s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="0" fill-opacity="0" stroke="blue" stroke-width="2px" stroke-opacity="1">
					<animate attributeName="r" from="0" to="75" dur="3s" repeatCount="indefinite" begin="1.5s" />
					<animate attributeName="stroke-opacity" from="1" to="0" dur="3s" repeatCount="indefinite" begin="1.5s"></animate>
				  </circle>
				  
				  <circle cx="50%" cy="50%" r="5" fill="#C1D82F" stroke="#979797"></circle>
				</svg>

			</div>
		</div>	
	</div>
  </div>
`;const vm=e=>{const r=Kh+new Date().getTime().toString()+Math.floor(Math.random()*1e6);$i.set(r,e),setTimeout(()=>{Om(r)},500)};Lf(document.querySelector("#drop"),vm);(async function(){if(bt=await Qi({runtime:"browser",storageName:"wifidropdbMe"}),Hi=await Qi({runtime:"browser",storageName:"wifidropdbBio"}),gn=await Qi({runtime:"browser",storageName:"wifidropdbHistory"}),(await bt.list()).keys.length==0){const{publicKey:y,privateKey:b}=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),w=await window.crypto.subtle.exportKey("jwk",y),_=await window.crypto.subtle.exportKey("jwk",b);ze.jwkpublicKey=w,ze.jwkprivateKey=_;const R=JSON.stringify(w);ze.publicKey=R,await bt.put("publicKey",R),await bt.put("privateKey",JSON.stringify(_));const I=Uf();ze.name=I,await bt.put("name",I);const T=btoa(R);ze.id=T;var t=Math.floor(Math.random()*16777215).toString(16);await bt.put("color",t),ze.color=t,await bt.put("skipconfirmation",!1);const P=un.encode(R);ze.key=P}else{const y=await bt.get("publicKey"),b=JSON.parse(y),w=await bt.get("privateKey"),_=JSON.parse(w);ze.jwkpublicKey=b,ze.jwkprivateKey=_,ze.publicKey=y;const R=await bt.get("name");ze.name=R;const I=btoa(y);ze.id=I;const T=await bt.get("color");ze.color=T;const k=un.encode(y);ze.key=k}Yh(),Em();const o=dm,u=pm,n=atob(bm),s=atob(wm),l=atob(_m),a=atob(gm),c=atob(mm),h=atob(ym);async function f(y,b,w,_,R){return new Promise(I=>{let T=!1,k=!1;const P=setTimeout(()=>{let L=[];L.push(T),L.push(k),I(L)},R);function S(){if(T&&k){let L=[];L.push(T),L.push(k),clearTimeout(P),I(L)}}const E=[{urls:y},{urls:b,username:w,credential:_}],O=new RTCPeerConnection({iceServers:E});O.onicecandidate=L=>{L.candidate&&(L.candidate.type=="srflx"&&(ze.address=L.candidate.address,ze.priority=L.candidate.priority,T={urls:y},S()),L.candidate.type=="relay"&&(k={urls:b,username:w,credential:_},S()))},O.onicecandidateerror=L=>{console.debug(L)},O.createDataChannel("webpeerjs"),O.createOffer().then(L=>O.setLocalDescription(L))})}let g=[];g=await f(o,n,s,l,5e3),!g[0]&&!g[1]?g=await f(u,a,c,h,5e3):g[0]&&!g[1]?g=await f(o,a,c,h,5e3):!g[0]&&g[1]&&(g=await f(u,n,s,l,5e3)),g.forEach(function(y,b){y||this.splice(b,1)},g),Dt=fm({appName:"WIFIDrop",channelName:"WIFIDropRoom",connectPassword:ze.address+ze.priority,iceConfiguration:{config:{iceServers:g}}}),Dt.getMyId(y=>Kh=y.connectId),Dt.onConnect(async y=>{Dt.getConnection(b=>{}),Gh(y.connectId)}),Dt.onDisconnect(y=>{xm(y.connectId)}),Dt.onReceive((y,b)=>{b.metadata==null?Tm(y,b):Dm(y,b)}),Dt.onReceiveProgress(y=>{y.metadata!=null&&Um(y)}),Dt.onSendProgress(y=>{y.metadata!=null&&jm(y)})})();async function Em(){const e=await gn.list();for(const r of e.keys){const t=await gn.get(r),o=await Hi.get(t.author),u=t.fileid,n=t.time,s=t.send,l=t.complete,a={size:t.size,name:t.name};Da(o,a,u,n,s,l)}}function Ua(e,r){return`https://blobcdn.com/blob.svg?seed=${It(e)}&fill=${It(r)}&extraPoints=9`}function Yh(){const e=Ua(ze.id,ze.color);document.querySelector(".peer.me .device-name").innerHTML=""+ze.name,document.querySelector(".peer.me .device").innerHTML=`
		<img class="device-avatar" src="${e}">
	`}function Gh(e){const r={command:"announce",data:{name:ze.name,color:ze.color}};Wn(r,e)}async function Sm(e){return await window.crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-384"},!0,["sign"])}async function Am(e){return await window.crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-384"},!0,["verify"])}async function Wn(e,r){e.data.jwkpublicKey=ze.jwkpublicKey;const t=await Sm(ze.jwkprivateKey);let u=new TextEncoder().encode(JSON.stringify(e.data));const n=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-384"}},t,u),s=Array.from(new Uint8Array(n));e.sign=s,Dt.Send(JSON.stringify(e),{connectId:r})}async function Tm(e,r){const t=JSON.parse(e),o=t.data.jwkpublicKey,u=await Am(o),n=new Uint8Array(t.sign).buffer;let l=new TextEncoder().encode(JSON.stringify(t.data));if(!await window.crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-384"}},u,n,l))return;const c=r.connectId;if(r.metadata,t.command=="announce")wt.has(c)?Cm(c,t.data):Im(c,t.data);else if(t.command=="offer")t.data,Bm(r.connectId,t.data);else if(t.command=="answer")t.data.value?Nm(r.connectId,t.data):Lm(r.connectId,t.data);else if(t.command=="clipboard"){const h=t.data.clip;ua.set(c,h)}}async function Im(e,r){let t=r;const o=JSON.stringify(r.jwkpublicKey),u=btoa(o);t.id=u,t.connectId=e,wt.set(e,t);const n=un.encode(o);await Hi.put(n,t);const s=Ua(t.id,t.color),l=`
		<div class="peer peer-${e}">
			<div class="device"><img class="device-avatar" src="${s}"></div>
			<div class="device-name">${It(t.name)}</div>
		</div>
	`;document.querySelector(".peers .peer.me").insertAdjacentHTML("afterend",l),document.querySelector(".sendto-list")!=null&&Jh(t,window.currentfilesid),document.querySelector(".peers .peer-"+e).addEventListener("click",()=>{km(e)})}function km(e){const r=document.createElement("div");r.innerHTML=`
			<div class="dialog clipboard">
				<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div style="padding:10px 10px;">title</div></div>
					<div class="content" >
						<textarea id="clipboard" name="clipboard" rows="10" cols="50"></textarea>
					</div>
					<div class="footer">
						<button class="save">SAVE</button>
						<button class="copy">COPY</button>
					</div>
				</div>
		</div>`,document.body.appendChild(r),document.querySelector(".clipboard #parax").addEventListener("click",()=>{r.remove()});const t=wt.get(e);document.querySelector(".clipboard .message .title div").innerText=`${t.name}'s clipboard`,document.querySelector(".clipboard .message .content #clipboard").value=ua.has(e)?ua.get(e):"",document.querySelector(".clipboard .message .footer .save").addEventListener("click",()=>{const u={command:"clipboard",data:{clip:document.querySelector(".clipboard .message .content #clipboard").value}};Wn(u,e),r.remove()}),document.querySelector(".clipboard .message .footer .copy").addEventListener("click",()=>{const o=document.querySelector(".clipboard .message .content #clipboard").value;navigator.clipboard.writeText(o).then(()=>{},()=>{})})}async function Cm(e,r){let t=wt.get(e);t.name=r.name,wt.set(e,t);const o=document.querySelectorAll(".peer.peer-"+e+" .device-name");for(const u of o)u.innerText=t.name}function Rm(e){let r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};return e.replace(/[&"'<>]/g,t=>r[t])}function It(e){e=String(e);var r=Rm(e);return r}function xm(e){wt.delete(e),document.querySelector(".peers .peer.peer-"+e)&&document.querySelector(".peers .peer.peer-"+e).remove(),document.querySelector(".sendto-list")!=null&&(document.querySelector(".sendto-list .peer.peer-"+e).remove(),wt.size==0&&Qh())}function Om(e){let r=$i.get(e);const t=r.length;let o=0;for(const n of r)o+=n.size;const u=document.createElement("div");u.innerHTML=`<div class="dialog sendto"><div id="parax"><span style="font-size:30px;color:#fff;">X</span></div><div class="popup"><div class="title"><div style="padding:10px 10px;">Send ${It(t)} file(s) of ${Bi(It(o))} to ...</div></div><div class="scroller sendto-list" ></div></div></div>`,document.body.appendChild(u),document.querySelector(".sendto #parax").addEventListener("click",()=>{u.remove()}),window.currentfilesid=e,wt.size>0?wt.forEach(n=>{Jh(n,e)}):Qh()}function Qh(){document.querySelector(".sendto-list").innerHTML='<div class="infonopeers" style="padding:15px 15px;">Waiting for other devices connected to WIFIDrop on the same network ...</div>'}function Jh(e,r){document.querySelector(".infonopeers")!=null&&document.querySelector(".infonopeers").remove();const t=Ua(e.id,e.color),o=`
		<div class="peer peer-${e.connectId}" data-peer="${e.connectId}">
			<div class="device"><img class="device-avatar" src="${t}"></div>
			<div class="device-name">${It(e.name)}</div>
		</div>
	`;document.querySelector(".sendto-list").innerHTML+=o,document.querySelector(".sendto-list .peer.peer-"+e.connectId).style.display="none",setTimeout(()=>{document.querySelector(".sendto-list .peer.peer-"+e.connectId).addEventListener("click",()=>{Pm(e,r)}),document.querySelector(".sendto-list .peer.peer-"+e.connectId).style.display="block";const u=document.querySelector(".scroller");u.scrollTop=u.scrollHeight},1e3)}function Pm(e,r){let t=$i.get(r);const o=t.length;let u=0;for(const a of t)u+=a.size;document.querySelector(".sendto").remove();const n=document.createElement("div");n.innerHTML=`<div class="dialog offer offer-${r}"><div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div><div class="message"><div class="title"><div style="padding:10px 10px;">Waiting confirmation</div></div><div class="content" >You want to send  ${It(o)} file(s) of ${Bi(It(u))} to ${It(e.name)} ...</div></div></div>`,document.body.appendChild(n),document.querySelector(".offer.offer-"+r+" #parax").addEventListener("click",()=>{n.remove()});let s=[];for(const a of t){const c=a.name,h=a.size,f=a.type,g={name:c,size:h,type:f};s.push(g)}Wn({command:"offer",data:{length:o,size:u,filesid:r,namefiles:s}},e.connectId)}async function Bm(e,r){if(wt.has(e)){const t=wt.get(e);if(await bt.get("skipconfirmation")){ku(r,e);return}let u="<ul>";for(const s of r.namefiles){const l=`<li>${It(s.name)}</li>`;u+=l}u+="</ul>";const n=document.createElement("div");n.innerHTML=`
			<div class="dialog answer answer-${r.filesid}">
				<div id="parax" style="display:none;"><span style="font-size:30px;color:#fff;">X</span></div>
				<div class="message">
					<div class="title"><div style="padding:10px 10px;">${t.name}</div></div>
					<div class="content" >
						<div>is sending you ${It(r.length)} file(s) of ${Bi(It(r.size))}</div>
						<div style="height:100px;overflow:scroll;">${u}</div>
					</div>
					<div class="footer">
						<button class="decline">DECLINE</button>
						<button class="accept">ACCEPT></button>
					</div>
				</div>
		</div>`,document.body.appendChild(n),document.querySelector(".answer.answer-"+r.filesid+" #parax").addEventListener("click",()=>{n.remove()}),document.querySelector(".answer.answer-"+r.filesid+" .decline").addEventListener("click",()=>{n.remove();const l={command:"answer",data:{value:!1,filesid:r.filesid}};Wn(l,e)}),document.querySelector(".answer.answer-"+r.filesid+" .accept").addEventListener("click",()=>{n.remove(),ku(r,e)})}}function ku(e,r){let t=[];for(const n of e.namefiles){const s=new Date().getTime();let l=btoa(n.name+n.size+n.size.toString()+s.toString()+Math.floor(Math.random()*1e6));t.push(l);const a={nonceid:l,connectId:r,...n};pn.set(l,a)}const u={command:"answer",data:{value:!0,filesid:e.filesid,nonce:t}};Wn(u,r)}function Nm(e,r){document.querySelector(".offer.offer-"+r.filesid)&&document.querySelector(".offer.offer-"+r.filesid).remove(),Mm(e,r)}function Lm(e,r){document.querySelector(".offer.offer-"+r.filesid)&&document.querySelector(".offer.offer-"+r.filesid).remove()}async function Mm(e,r){zi();const t=r.filesid,o=r.nonce,u=wt.get(e),n=JSON.stringify(u.jwkpublicKey);un.encode(n);const s=!0,l="start";let a=$i.get(t);for(const c of a){const h=new Date().getTime(),f=c.size.toString()+h.toString()+Math.floor(Math.random()*1e6),g=o.shift();setTimeout(()=>{Da(u,c,f,h,s,l);let y=new FileReader;y.onload=function(){let b=this.result;const w={connectId:e,metadata:{fileid:f,name:c.name,type:c.type,size:c.size,nonceid:g}};Dt.Send(b,w)},y.readAsArrayBuffer(c)},500)}}async function Um(e){const r=e.connectId,t=wt.get(r),o=JSON.stringify(t.jwkpublicKey),u=un.encode(o),n=e.percent,s=e.metadata,l=s.fileid,a=s.name,c=s.size,h=s.type,f=s.nonceid;if(!pn.has(f))return;const g=pn.get(f),y=new Date().getTime(),b=!1,w=Math.floor(n*100),_={name:a,size:c};if(document.querySelector(".file.file-"+l))document.querySelector(".file.file-"+l+" .progress").innerHTML=w+"%";else{if(r!=g.connectId||a!=g.name||c!=g.size||h!=g.type)return;zi(),Da(t,_,l,y,b,w)}if(n==1){const R={author:u,fileid:l,time:y,name:a,size:c,send:b,complete:w};await gn.put(l,R),document.querySelector(".file.file-"+l).style.backgroundColor="#9a9fa6",Zh(f)}}function Dm(e,r){const t=r.connectId,o=r.metadata,u=o.name,n=o.size,s=o.type,l=o.nonceid;if(!pn.has(l))return;const a=pn.get(l);if(t!=a.connectId||u!=a.name||n!=a.size||s!=a.type)return;let c=new Blob([new Uint8Array(e)],{type:r.metadata.type});const h=document.createElement("a");h.setAttribute("download",r.metadata.name);const f=URL.createObjectURL(c);h.setAttribute("href",f),h.setAttribute("target","_blank"),h.click(),URL.revokeObjectURL(f),Zh(l)}function Zh(e){Iu.includes(e)?setTimeout(()=>{pn.delete(e)},100):Iu.push(e)}async function jm(e){const r=e.connectId,t=wt.get(r),o=JSON.stringify(t.jwkpublicKey),u=un.encode(o),n=e.metadata,s=n.fileid,l=n.name,a=n.size,c=new Date().getTime(),h=e.percent,f=Math.floor(h*100),g=!0;if(document.querySelector(".file.file-"+s+" .progress").innerHTML=f+"%",h==1){const y={author:u,fileid:s,time:c,name:l,size:a,send:g,complete:f};await gn.put(s,y),document.querySelector(".file.file-"+s).style.backgroundColor="#9a9fa6"}}const Xh=document.createElement("div");Xh.innerHTML=`
	<div class="dialog explorer">
		<div id="explorerx"><span style="font-size:30px;color:#fff;">X</span></div>
		<div  class="popup">
			<div class="title">
				<div style="padding:10px 10px;">
					Files 
					<span class="options" style="float:right;cursor:pointer;">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
						  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
						</svg>
					</span>
				</div>
			</div>
			<div class="scroller files" ></div>
		</div>
	</div>`;document.body.appendChild(Xh);document.querySelector("#explorerx").addEventListener("click",()=>{document.querySelector(".explorer").style.display="none"});document.querySelector(".peers .peer.me").addEventListener("click",()=>{zi()});window.location.href.indexOf("localhost")==-1&&document.querySelector("body").addEventListener("contextmenu",e=>{e.preventDefault(),zi()});document.querySelector(".explorer .popup .title .options").addEventListener("click",()=>{Fm()});async function Fm(){const e=await bt.get("skipconfirmation");let r="";e&&(r="checked");const t=document.createElement("div");t.innerHTML=`
	<div class="dialog options">
		<div id="parax" style="display:block;"><span style="font-size:30px;color:#fff;">X</span></div>
		<div class="message">
			<div class="title">
				<div style="padding:10px 10px;">Info</div>
			</div>
			<div class="content" >
				<div class="item cache">
					<span>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
					  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
					  <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
					</svg>
					</span>
					<span>Clear cache </span>
				</div>
				<div class="item skipconfirmation">
					<input type="checkbox" id="skipconfirmation" name="skipconfirmation" value="skipconfirmation" ${r}>
					<label for="skipconfirmation"> Skip download confirmation</label>
				</div>
				<div class="item alias">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-laptop" viewBox="0 0 16 16">
					  <path d="M13.5 3a.5.5 0 0 1 .5.5V11H2V3.5a.5.5 0 0 1 .5-.5zm-11-1A1.5 1.5 0 0 0 1 3.5V12h14V3.5A1.5 1.5 0 0 0 13.5 2zM0 12.5h16a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5"/>
					</svg>					
					<label for="alias">Alias:</label>
					<input style="border:none" type="text" id="alias" name="alias" value="${ze.name}">
				</div>
			</div>
		</div>
	</div>`,document.body.appendChild(t),document.querySelector(".options #parax").addEventListener("click",()=>{t.remove()}),document.querySelector(".options .content .cache").addEventListener("click",async()=>{await Hi.clear(),await gn.clear();const u=document.querySelectorAll(".explorer .files .file");for(const s of u)s.remove();document.querySelector(".options .content .cache span").insertAdjacentHTML("afterend",`
			<span class="cachecheck">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
				  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
				</svg>		
			</span>
		`),setTimeout(()=>{document.querySelector(".options .content .cache .cachecheck")&&document.querySelector(".options .content .cache .cachecheck").remove()},3e3)}),document.querySelector(".options .content .skipconfirmation").addEventListener("click",async()=>{const u=document.querySelector(".options .content .skipconfirmation #skipconfirmation");await bt.put("skipconfirmation",u.checked)});var o=document.getElementById("alias");o.addEventListener("keypress",async function(u){if(u.key==="Enter"){u.preventDefault();const n=`
				<span class="check">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
					  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
					</svg>		
				</span>
			`;document.querySelector(".options .content .alias #alias").blur(),document.querySelector(".options .content .alias svg").insertAdjacentHTML("afterend",n),setTimeout(()=>{document.querySelector(".options .content .alias .check")&&document.querySelector(".options .content .alias .check").remove()},3e3);const s=document.querySelector(".options .content .alias #alias").value;ze.name=s,await bt.put("name",s),Yh();for(const l of wt){const a=l[0];Gh(a)}}})}function zi(){setTimeout(()=>{document.querySelector(".explorer").style.display="flex";const e=document.querySelector(".scroller");e.scrollTop=e.scrollHeight},200)}function Da(e,r,t,o,u,n){const s=Bi(r.size),l=u?"You sent to ":"Sent by ";let a="0%";n==="start"||n==="finish"||(a=n+"%");let c="";(n==="finish"||n==100)&&(c="background:#bec4cf;");let h=`
		<div class="file file-${t}" style="${c}">
			<div class="icon"><div style="width:50px;height:50px"><img src="${Nf}"></div></div>
			<div class="loader"><div style="width:50px;height:50px"><div class="progress">${a}</div></div></div>
			<div class="body">
				<div class="name">${r.name}</div>
				<div class="meta"><span class="size">${s}</span> | <span class="note">${l}</span> <span class="to">${e.name}</span></div> 
			</div>
			
		</div>
	`;document.querySelector(".explorer .files").innerHTML+=h;const f=document.querySelector(".scroller");f.scrollTop=f.scrollHeight}window.location.href.indexOf("localhost")==-1&&(window.addEventListener("error",e=>{e.preventDefault()}),window.addEventListener("unhandledrejection",e=>{e.preventDefault()}));document.getElementById("loader").style.display="none";typeof navigator.serviceWorker<"u"&&navigator.serviceWorker.register("sw.js");
